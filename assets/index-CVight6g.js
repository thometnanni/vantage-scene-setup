(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))C(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&C(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function C(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();const ms=!1;var no=Array.isArray,xa=Array.prototype.indexOf,Fo=Array.from,ka=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,Ea=Object.getOwnPropertyDescriptors,Ta=Object.prototype,Pa=Array.prototype,Ds=Object.getPrototypeOf;function Sa(c){return c()}function Ao(c){for(var x=0;x<c.length;x++)c[x]()}const Xe=2,As=4,lr=8,Uo=16,$e=32,hr=64,zo=128,Qi=256,Xr=512,Me=1024,Ai=2048,ur=4096,oi=8192,Tn=16384,Ma=32768,Ho=65536,Ca=1<<17,Oa=1<<19,zs=1<<20,$i=Symbol("$state"),Da=Symbol("legacy props");function Is(c){return c===this.v}function Aa(c,x){return c!=c?x==x:c!==x||c!==null&&typeof c=="object"||typeof c=="function"}function Go(c){return!Aa(c,this.v)}function za(c){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ia(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ba(c){throw new Error("https://svelte.dev/e/effect_orphan")}function Ra(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Na(c){throw new Error("https://svelte.dev/e/props_invalid_value")}function Za(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Fa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ua(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Ha(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Pn=!1,Ga=!1;function Wa(){Pn=!0}const qa=1,Va=2,ja=16,Ya=1,Ka=2,Xa=4,$a=8,Ja=16,Qa=2,Se=Symbol();function Ae(c,x){var a={f:0,v:c,reactions:null,equals:Is,rv:0,wv:0};return a}function Wo(c,x=!1){var C;const a=Ae(c);return x||(a.equals=Go),Pn&&Kt!==null&&Kt.l!==null&&((C=Kt.l).s??(C.s=[])).push(a),a}function xn(c,x=!1){return tl(Wo(c,x))}function tl(c){return jt!==null&&jt.f&Xe&&(si===null?fl([c]):si.push(c)),c}function ie(c,x){return jt!==null&&$o()&&jt.f&(Xe|Uo)&&(si===null||!si.includes(c))&&Ha(),Bs(c,x)}function Bs(c,x){return c.equals(x)||(c.v,c.v=x,c.wv=ra(),Rs(c,Ai),$o()&&Nt!==null&&Nt.f&Me&&!(Nt.f&$e)&&(be!==null&&be.includes(c)?(Je(Nt,Ai),so(Nt)):Di===null?dl([c]):Di.push(c))),x}function Rs(c,x){var a=c.reactions;if(a!==null)for(var C=$o(),n=a.length,r=0;r<n;r++){var s=a[r],h=s.f;h&Ai||!C&&s===Nt||(Je(s,x),h&(Me|Qi)&&(h&Xe?Rs(s,ur):so(s)))}}let el=!1;function bn(c,x=null,a){if(typeof c!="object"||c===null||$i in c)return c;const C=Ds(c);if(C!==Ta&&C!==Pa)return c;var n=new Map,r=no(c),s=Ae(0);r&&n.set("length",Ae(c.length));var h;return new Proxy(c,{defineProperty(f,m,w){(!("value"in w)||w.configurable===!1||w.enumerable===!1||w.writable===!1)&&Za();var g=n.get(m);return g===void 0?(g=Ae(w.value),n.set(m,g)):ie(g,bn(w.value,h)),!0},deleteProperty(f,m){var w=n.get(m);if(w===void 0)m in f&&n.set(m,Ae(Se));else{if(r&&typeof m=="string"){var g=n.get("length"),E=Number(m);Number.isInteger(E)&&E<g.v&&ie(g,E)}ie(w,Se),gs(s)}return!0},get(f,m,w){var P;if(m===$i)return c;var g=n.get(m),E=m in f;if(g===void 0&&(!E||(P=Ln(f,m))!=null&&P.writable)&&(g=Ae(bn(E?f[m]:Se,h)),n.set(m,g)),g!==void 0){var v=Ut(g);return v===Se?void 0:v}return Reflect.get(f,m,w)},getOwnPropertyDescriptor(f,m){var w=Reflect.getOwnPropertyDescriptor(f,m);if(w&&"value"in w){var g=n.get(m);g&&(w.value=Ut(g))}else if(w===void 0){var E=n.get(m),v=E==null?void 0:E.v;if(E!==void 0&&v!==Se)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return w},has(f,m){var v;if(m===$i)return!0;var w=n.get(m),g=w!==void 0&&w.v!==Se||Reflect.has(f,m);if(w!==void 0||Nt!==null&&(!g||(v=Ln(f,m))!=null&&v.writable)){w===void 0&&(w=Ae(g?bn(f[m],h):Se),n.set(m,w));var E=Ut(w);if(E===Se)return!1}return g},set(f,m,w,g){var z;var E=n.get(m),v=m in f;if(r&&m==="length")for(var P=w;P<E.v;P+=1){var p=n.get(P+"");p!==void 0?ie(p,Se):P in f&&(p=Ae(Se),n.set(P+"",p))}E===void 0?(!v||(z=Ln(f,m))!=null&&z.writable)&&(E=Ae(void 0),ie(E,bn(w,h)),n.set(m,E)):(v=E.v!==Se,ie(E,bn(w,h)));var b=Reflect.getOwnPropertyDescriptor(f,m);if(b!=null&&b.set&&b.set.call(g,w),!v){if(r&&typeof m=="string"){var T=n.get("length"),S=Number(m);Number.isInteger(S)&&S>=T.v&&ie(T,S+1)}gs(s)}return!0},ownKeys(f){Ut(s);var m=Reflect.ownKeys(f).filter(E=>{var v=n.get(E);return v===void 0||v.v!==Se});for(var[w,g]of n)g.v!==Se&&!(w in f)&&m.push(w);return m},setPrototypeOf(){Fa()}})}function gs(c,x=1){ie(c,c.v+x)}var vs,Ns,Zs;function il(){if(vs===void 0){vs=window;var c=Element.prototype,x=Node.prototype;Ns=Ln(x,"firstChild").get,Zs=Ln(x,"nextSibling").get,c.__click=void 0,c.__className="",c.__attributes=null,c.__styles=null,c.__e=void 0,Text.prototype.__t=void 0}}function Fs(c=""){return document.createTextNode(c)}function Us(c){return Ns.call(c)}function qo(c){return Zs.call(c)}function or(c,x){return Us(c)}function Ji(c,x=1,a=!1){let C=c;for(;x--;)C=qo(C);return C}function nl(c){c.textContent=""}function $r(c){var x=Xe|Ai;Nt===null?x|=Qi:Nt.f|=zs;var a=jt!==null&&jt.f&Xe?jt:null;const C={children:null,ctx:Kt,deps:null,equals:Is,f:x,fn:c,reactions:null,rv:0,v:null,wv:0,parent:a??Nt};return a!==null&&(a.children??(a.children=[])).push(C),C}function rl(c){const x=$r(c);return x.equals=Go,x}function Hs(c){var x=c.children;if(x!==null){c.children=null;for(var a=0;a<x.length;a+=1){var C=x[a];C.f&Xe?Vo(C):zi(C)}}}function ol(c){for(var x=c.parent;x!==null;){if(!(x.f&Xe))return x;x=x.parent}return null}function Gs(c){var x,a=Nt;ai(ol(c));try{Hs(c),x=oa(c)}finally{ai(a)}return x}function Ws(c){var x=Gs(c),a=(Xi||c.f&Qi)&&c.deps!==null?ur:Me;Je(c,a),c.equals(x)||(c.v=x,c.wv=ra())}function Vo(c){Hs(c),ar(c,0),Je(c,Tn),c.v=c.children=c.deps=c.ctx=c.reactions=null}function qs(c){Nt===null&&jt===null&&Ba(),jt!==null&&jt.f&Qi&&Ia(),Xo&&za()}function sl(c,x){var a=x.last;a===null?x.last=x.first=c:(a.next=c,c.prev=a,x.last=c)}function Sn(c,x,a,C=!0){var n=(c&hr)!==0,r=Nt,s={ctx:Kt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:c|Ai,first:null,fn:x,last:null,next:null,parent:n?null:r,prev:null,teardown:null,transitions:null,wv:0};if(a){var h=kn;try{ys(!0),cr(s),s.f|=Ma}catch(w){throw zi(s),w}finally{ys(h)}}else x!==null&&so(s);var f=a&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&zs)===0;if(!f&&!n&&C&&(r!==null&&sl(s,r),jt!==null&&jt.f&Xe)){var m=jt;(m.children??(m.children=[])).push(s)}return s}function al(c){const x=Sn(lr,null,!1);return Je(x,Me),x.teardown=c,x}function Io(c){qs();var x=Nt!==null&&(Nt.f&$e)!==0&&Kt!==null&&!Kt.m;if(x){var a=Kt;(a.e??(a.e=[])).push({fn:c,effect:Nt,reaction:jt})}else{var C=jo(c);return C}}function ll(c){return qs(),ro(c)}function hl(c){const x=Sn(hr,c,!0);return(a={})=>new Promise(C=>{a.outro?Jr(x,()=>{zi(x),C(void 0)}):(zi(x),C(void 0))})}function jo(c){return Sn(As,c,!1)}function Vs(c,x){var a=Kt,C={effect:null,ran:!1};a.l.r1.push(C),C.effect=ro(()=>{c(),!C.ran&&(C.ran=!0,ie(a.l.r2,!0),En(x))})}function js(){var c=Kt;ro(()=>{if(Ut(c.l.r2)){for(var x of c.l.r1){var a=x.effect;a.f&Me&&Je(a,ur),Mn(a)&&cr(a),x.ran=!1}c.l.r2.v=!1}})}function ro(c){return Sn(lr,c,!0)}function Ys(c){return Yo(c)}function Yo(c,x=0){return Sn(lr|Uo|x,c,!0)}function sr(c,x=!0){return Sn(lr|$e,c,!0,x)}function Ks(c){var x=c.teardown;if(x!==null){const a=Xo,C=jt;ws(!0),Ii(null);try{x.call(null)}finally{ws(a),Ii(C)}}}function Xs(c){var x=c.deriveds;if(x!==null){c.deriveds=null;for(var a=0;a<x.length;a+=1)Vo(x[a])}}function $s(c,x=!1){var a=c.first;for(c.first=c.last=null;a!==null;){var C=a.next;zi(a,x),a=C}}function ul(c){for(var x=c.first;x!==null;){var a=x.next;x.f&$e||zi(x),x=a}}function zi(c,x=!0){var a=!1;if((x||c.f&Oa)&&c.nodes_start!==null){for(var C=c.nodes_start,n=c.nodes_end;C!==null;){var r=C===n?null:qo(C);C.remove(),C=r}a=!0}$s(c,x&&!a),Xs(c),ar(c,0),Je(c,Tn);var s=c.transitions;if(s!==null)for(const f of s)f.stop();Ks(c);var h=c.parent;h!==null&&h.first!==null&&Js(c),c.next=c.prev=c.teardown=c.ctx=c.deps=c.fn=c.nodes_start=c.nodes_end=null}function Js(c){var x=c.parent,a=c.prev,C=c.next;a!==null&&(a.next=C),C!==null&&(C.prev=a),x!==null&&(x.first===c&&(x.first=C),x.last===c&&(x.last=a))}function Jr(c,x){var a=[];Ko(c,a,!0),Qs(a,()=>{zi(c),x&&x()})}function Qs(c,x){var a=c.length;if(a>0){var C=()=>--a||x();for(var n of c)n.out(C)}else x()}function Ko(c,x,a){if(!(c.f&oi)){if(c.f^=oi,c.transitions!==null)for(const s of c.transitions)(s.is_global||a)&&x.push(s);for(var C=c.first;C!==null;){var n=C.next,r=(C.f&Ho)!==0||(C.f&$e)!==0;Ko(C,x,r?a:!1),C=n}}}function Qr(c){ta(c,!0)}function ta(c,x){if(c.f&oi){Mn(c)&&cr(c),c.f^=oi;for(var a=c.first;a!==null;){var C=a.next,n=(a.f&Ho)!==0||(a.f&$e)!==0;ta(a,n?x:!1),a=C}if(c.transitions!==null)for(const r of c.transitions)(r.is_global||x)&&r.in()}}let Bo=!1,Ro=[];function cl(){Bo=!1;const c=Ro.slice();Ro=[],Ao(c)}function ea(c){Bo||(Bo=!0,queueMicrotask(cl)),Ro.push(c)}function ia(c){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Kr=!1,to=!1,eo=null,kn=!1,Xo=!1;function ys(c){kn=c}function ws(c){Xo=c}let No=[],nr=0;let jt=null;function Ii(c){jt=c}let Nt=null;function ai(c){Nt=c}let si=null;function fl(c){si=c}let be=null,De=0,Di=null;function dl(c){Di=c}let na=1,io=0,Xi=!1,Kt=null;function ra(){return++na}function $o(){return!Pn||Kt!==null&&Kt.l===null}function Mn(c){var m;var x=c.f;if(x&Ai)return!0;if(x&ur){var a=c.deps,C=(x&Qi)!==0;if(a!==null){var n,r,s=(x&Xr)!==0,h=C&&Nt!==null&&!Xi,f=a.length;if(s||h){for(n=0;n<f;n++)r=a[n],(s||!((m=r==null?void 0:r.reactions)!=null&&m.includes(c)))&&(r.reactions??(r.reactions=[])).push(c);s&&(c.f^=Xr)}for(n=0;n<f;n++)if(r=a[n],Mn(r)&&Ws(r),r.wv>c.wv)return!0}(!C||Nt!==null&&!Xi)&&Je(c,Me)}return!1}function _l(c,x){for(var a=x;a!==null;){if(a.f&zo)try{a.fn(c);return}catch{a.f^=zo}a=a.parent}throw Kr=!1,c}function pl(c){return(c.f&Tn)===0&&(c.parent===null||(c.parent.f&zo)===0)}function oo(c,x,a,C){if(Kr){if(a===null&&(Kr=!1),pl(x))throw c;return}a!==null&&(Kr=!0);{_l(c,x);return}}function oa(c){var E;var x=be,a=De,C=Di,n=jt,r=Xi,s=si,h=Kt,f=c.f;be=null,De=0,Di=null,jt=f&($e|hr)?null:c,Xi=!kn&&(f&Qi)!==0,si=null,Kt=c.ctx,io++;try{var m=(0,c.fn)(),w=c.deps;if(be!==null){var g;if(ar(c,De),w!==null&&De>0)for(w.length=De+be.length,g=0;g<be.length;g++)w[De+g]=be[g];else c.deps=w=be;if(!Xi)for(g=De;g<w.length;g++)((E=w[g]).reactions??(E.reactions=[])).push(c)}else w!==null&&De<w.length&&(ar(c,De),w.length=De);return n!==null&&io++,m}finally{be=x,De=a,Di=C,jt=n,Xi=r,si=s,Kt=h}}function ml(c,x){let a=x.reactions;if(a!==null){var C=xa.call(a,c);if(C!==-1){var n=a.length-1;n===0?a=x.reactions=null:(a[C]=a[n],a.pop())}}a===null&&x.f&Xe&&(be===null||!be.includes(x))&&(Je(x,ur),x.f&(Qi|Xr)||(x.f^=Xr),ar(x,0))}function ar(c,x){var a=c.deps;if(a!==null)for(var C=x;C<a.length;C++)ml(c,a[C])}function cr(c){var x=c.f;if(!(x&Tn)){Je(c,Me);var a=Nt,C=Kt;Nt=c;try{x&Uo?ul(c):$s(c),Xs(c),Ks(c);var n=oa(c);c.teardown=typeof n=="function"?n:null,c.wv=na;var r=c.deps,s;ms&&Ga&&c.f&Ai}catch(h){oo(h,c,a,C||c.ctx)}finally{Nt=a}}}function gl(){if(nr>1e3){nr=0;try{Ra()}catch(c){if(eo!==null)oo(c,eo,null);else throw c}}nr++}function vl(c){var x=c.length;if(x!==0){gl();var a=kn;kn=!0;try{for(var C=0;C<x;C++){var n=c[C];n.f&Me||(n.f^=Me);var r=[];sa(n,r),yl(r)}}finally{kn=a}}}function yl(c){var x=c.length;if(x!==0)for(var a=0;a<x;a++){var C=c[a];if(!(C.f&(Tn|oi)))try{Mn(C)&&(cr(C),C.deps===null&&C.first===null&&C.nodes_start===null&&(C.teardown===null?Js(C):C.fn=null))}catch(n){oo(n,C,null,C.ctx)}}}function wl(){if(to=!1,nr>1001)return;const c=No;No=[],vl(c),to||(nr=0,eo=null)}function so(c){to||(to=!0,queueMicrotask(wl)),eo=c;for(var x=c;x.parent!==null;){x=x.parent;var a=x.f;if(a&(hr|$e)){if(!(a&Me))return;x.f^=Me}}No.push(x)}function sa(c,x){var a=c.first,C=[];t:for(;a!==null;){var n=a.f,r=(n&$e)!==0,s=r&&(n&Me)!==0,h=a.next;if(!s&&!(n&oi))if(n&lr){if(r)a.f^=Me;else try{Mn(a)&&cr(a)}catch(g){oo(g,a,null,a.ctx)}var f=a.first;if(f!==null){a=f;continue}}else n&As&&C.push(a);if(h===null){let g=a.parent;for(;g!==null;){if(c===g)break t;var m=g.next;if(m!==null){a=m;continue t}g=g.parent}}a=h}for(var w=0;w<C.length;w++)f=C[w],x.push(f),sa(f,x)}function Ut(c){var w;var x=c.f,a=(x&Xe)!==0;if(a&&x&Tn){var C=Gs(c);return Vo(c),C}if(jt!==null){si!==null&&si.includes(c)&&Ua();var n=jt.deps;c.rv<io&&(c.rv=io,be===null&&n!==null&&n[De]===c?De++:be===null?be=[c]:be.push(c),Di!==null&&Nt!==null&&Nt.f&Me&&!(Nt.f&$e)&&Di.includes(c)&&(Je(Nt,Ai),so(Nt)))}else if(a&&c.deps===null)for(var r=c,s=r.parent,h=r;s!==null;)if(s.f&Xe){var f=s;h=f,s=f.parent}else{var m=s;(w=m.deriveds)!=null&&w.includes(h)||(m.deriveds??(m.deriveds=[])).push(h);break}return a&&(r=c,Mn(r)&&Ws(r)),c.v}function En(c){const x=jt;try{return jt=null,c()}finally{jt=x}}const bl=-7169;function Je(c,x){c.f=c.f&bl|x}function ao(c,x=!1,a){Kt={p:Kt,c:null,e:null,m:!1,s:c,x:null,l:null},Pn&&!x&&(Kt.l={s:null,u:null,r1:[],r2:Ae(!1)})}function lo(c){const x=Kt;if(x!==null){const s=x.e;if(s!==null){var a=Nt,C=jt;x.e=null;try{for(var n=0;n<s.length;n++){var r=s[n];ai(r.effect),Ii(r.reaction),jo(r.fn)}}finally{ai(a),Ii(C)}}Kt=x.p,x.m=!0}return{}}function Jo(c){if(!(typeof c!="object"||!c||c instanceof EventTarget)){if($i in c)Zo(c);else if(!Array.isArray(c))for(let x in c){const a=c[x];typeof a=="object"&&a&&$i in a&&Zo(a)}}}function Zo(c,x=new Set){if(typeof c=="object"&&c!==null&&!(c instanceof EventTarget)&&!x.has(c)){x.add(c),c instanceof Date&&c.getTime();for(let C in c)try{Zo(c[C],x)}catch{}const a=Ds(c);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const C=Ea(a);for(let n in C){const r=C[n].get;if(r)try{r.call(c)}catch{}}}}}const Ll=["touchstart","touchmove"];function xl(c){return Ll.includes(c)}function kl(c){var x=jt,a=Nt;Ii(null),ai(null);try{return c()}finally{Ii(x),ai(a)}}const El=new Set,bs=new Set;function Tl(c,x,a,C){function n(r){if(C.capture||tr.call(x,r),!r.cancelBubble)return kl(()=>a.call(this,r))}return c.startsWith("pointer")||c.startsWith("touch")||c==="wheel"?ea(()=>{x.addEventListener(c,n,C)}):x.addEventListener(c,n,C),n}function aa(c,x,a,C,n){var r={capture:C,passive:n},s=Tl(c,x,a,r);(x===document.body||x===window||x===document)&&al(()=>{x.removeEventListener(c,s,r)})}function tr(c){var S;var x=this,a=x.ownerDocument,C=c.type,n=((S=c.composedPath)==null?void 0:S.call(c))||[],r=n[0]||c.target,s=0,h=c.__root;if(h){var f=n.indexOf(h);if(f!==-1&&(x===document||x===window)){c.__root=x;return}var m=n.indexOf(x);if(m===-1)return;f<=m&&(s=f)}if(r=n[s]||c.target,r!==x){ka(c,"currentTarget",{configurable:!0,get(){return r||a}});var w=jt,g=Nt;Ii(null),ai(null);try{for(var E,v=[];r!==null;){var P=r.assignedSlot||r.parentNode||r.host||null;try{var p=r["__"+C];if(p!==void 0&&!r.disabled)if(no(p)){var[b,...T]=p;b.apply(r,[c,...T])}else p.call(r,c)}catch(z){E?v.push(z):E=z}if(c.cancelBubble||P===x||P===null)break;r=P}if(E){for(let z of v)queueMicrotask(()=>{throw z});throw E}}finally{c.__root=x,delete c.currentTarget,Ii(w),ai(g)}}}function Pl(c){var x=document.createElement("template");return x.innerHTML=c,x.content}function Sl(c,x){var a=Nt;a.nodes_start===null&&(a.nodes_start=c,a.nodes_end=x)}function Bi(c,x){var a=(x&Qa)!==0,C,n=!c.startsWith("<!>");return()=>{C===void 0&&(C=Pl(n?c:"<!>"+c),C=Us(C));var r=a?document.importNode(C,!0):C.cloneNode(!0);return Sl(r,r),r}}function Ci(c,x){c!==null&&c.before(x)}function la(c,x){var a=x==null?"":typeof x=="object"?x+"":x;a!==(c.__t??(c.__t=c.nodeValue))&&(c.__t=a,c.nodeValue=a==null?"":a+"")}function Ml(c,x){return Cl(c,x)}const wn=new Map;function Cl(c,{target:x,anchor:a,props:C={},events:n,context:r,intro:s=!0}){il();var h=new Set,f=g=>{for(var E=0;E<g.length;E++){var v=g[E];if(!h.has(v)){h.add(v);var P=xl(v);x.addEventListener(v,tr,{passive:P});var p=wn.get(v);p===void 0?(document.addEventListener(v,tr,{passive:P}),wn.set(v,1)):wn.set(v,p+1)}}};f(Fo(El)),bs.add(f);var m=void 0,w=hl(()=>{var g=a??x.appendChild(Fs());return sr(()=>{if(r){ao({});var E=Kt;E.c=r}n&&(C.$$events=n),m=c(g,C)||{},r&&lo()}),()=>{var P;for(var E of h){x.removeEventListener(E,tr);var v=wn.get(E);--v===0?(document.removeEventListener(E,tr),wn.delete(E)):wn.set(E,v)}bs.delete(f),g!==a&&((P=g.parentNode)==null||P.removeChild(g))}});return Ol.set(m,w),m}let Ol=new WeakMap;function So(c,x,a=!1){var C=c,n=null,r=null,s=Se,h=a?Ho:0,f=!1;const m=(g,E=!0)=>{f=!0,w(E,g)},w=(g,E)=>{s!==(s=g)&&(s?(n?Qr(n):E&&(n=sr(()=>E(C))),r&&Jr(r,()=>{r=null})):(r?Qr(r):E&&(r=sr(()=>E(C))),n&&Jr(n,()=>{n=null})))};Yo(()=>{f=!1,x(m),f||w(null,null)},h)}function Dl(c,x){return x}function Al(c,x,a,C){for(var n=[],r=x.length,s=0;s<r;s++)Ko(x[s].e,n,!0);var h=r>0&&n.length===0&&a!==null;if(h){var f=a.parentNode;nl(f),f.append(a),C.clear(),Mi(c,x[0].prev,x[r-1].next)}Qs(n,()=>{for(var m=0;m<r;m++){var w=x[m];h||(C.delete(w.k),Mi(c,w.prev,w.next)),zi(w.e,!h)}})}function zl(c,x,a,C,n,r=null){var s=c,h={flags:x,items:new Map,first:null};{var f=c;s=f.appendChild(Fs())}var m=null,w=!1;Yo(()=>{var g=a(),E=no(g)?g:g==null?[]:Fo(g),v=E.length;if(!(w&&v===0)){w=v===0;{var P=jt;Il(E,h,s,n,x,(P.f&oi)!==0,C)}r!==null&&(v===0?m?Qr(m):m=sr(()=>r(s)):m!==null&&Jr(m,()=>{m=null}))}})}function Il(c,x,a,C,n,r,s,h){var f=c.length,m=x.items,w=x.first,g=w,E,v=null,P=[],p=[],b,T,S,z;for(z=0;z<f;z+=1){if(b=c[z],T=s(b,z),S=m.get(T),S===void 0){var G=g?g.e.nodes_start:a;v=Rl(G,x,v,v===null?x.first:v.next,b,T,z,C,n),m.set(T,v),P=[],p=[],g=v.next;continue}if(Bl(S,b,z),S.e.f&oi&&Qr(S.e),S!==g){if(E!==void 0&&E.has(S)){if(P.length<p.length){var M=p[0],U;v=M.prev;var Z=P[0],q=P[P.length-1];for(U=0;U<P.length;U+=1)Ls(P[U],M,a);for(U=0;U<p.length;U+=1)E.delete(p[U]);Mi(x,Z.prev,q.next),Mi(x,v,Z),Mi(x,q,M),g=M,v=q,z-=1,P=[],p=[]}else E.delete(S),Ls(S,g,a),Mi(x,S.prev,S.next),Mi(x,S,v===null?x.first:v.next),Mi(x,v,S),v=S;continue}for(P=[],p=[];g!==null&&g.k!==T;)(r||!(g.e.f&oi))&&(E??(E=new Set)).add(g),p.push(g),g=g.next;if(g===null)continue;S=g}P.push(S),v=S,g=S.next}if(g!==null||E!==void 0){for(var R=E===void 0?[]:Fo(E);g!==null;)(r||!(g.e.f&oi))&&R.push(g),g=g.next;var $=R.length;if($>0){var K=f===0?a:null;Al(x,R,K,m)}}Nt.first=x.first&&x.first.e,Nt.last=v&&v.e}function Bl(c,x,a,C){Bs(c.v,x),c.i=a}function Rl(c,x,a,C,n,r,s,h,f,m){var w=(f&qa)!==0,g=(f&ja)===0,E=w?g?Wo(n):Ae(n):n,v=f&Va?Ae(s):s,P={i:v,v:E,k:r,a:null,e:null,prev:a,next:C};try{return P.e=sr(()=>h(c,E,v),el),P.e.prev=a&&a.e,P.e.next=C&&C.e,a===null?x.first=P:(a.next=P,a.e.next=P.e),C!==null&&(C.prev=P,C.e.prev=P.e),P}finally{}}function Ls(c,x,a){for(var C=c.next?c.next.e.nodes_start:a,n=x?x.e.nodes_start:a,r=c.e.nodes_start;r!==C;){var s=qo(r);n.before(r),r=s}}function Mi(c,x,a){x===null?c.first=a:(x.next=a,x.e.next=a&&a.e),a!==null&&(a.prev=x,a.e.prev=x&&x.e)}function Nl(c,x){x?c.hasAttribute("selected")||c.setAttribute("selected",""):c.removeAttribute("selected")}function xs(c,x){return c===x||(c==null?void 0:c[$i])===x}function Zl(c={},x,a,C){return jo(()=>{var n,r;return ro(()=>{n=r,r=[],En(()=>{c!==a(...r)&&(x(c,...r),n&&xs(a(...n),c)&&x(null,...n))})}),()=>{ea(()=>{r&&xs(a(...r),c)&&x(null,...r)})}}),c}function Qo(c=!1){const x=Kt,a=x.l.u;if(!a)return;let C=()=>Jo(x.s);if(c){let n=0,r={};const s=$r(()=>{let h=!1;const f=x.s;for(const m in f)f[m]!==r[m]&&(r[m]=f[m],h=!0);return h&&n++,n});C=()=>Ut(s)}a.b.length&&ll(()=>{ks(x,C),Ao(a.b)}),Io(()=>{const n=En(()=>a.m.map(Sa));return()=>{for(const r of n)typeof r=="function"&&r()}}),a.a.length&&Io(()=>{ks(x,C),Ao(a.a)})}function ks(c,x){if(c.l.s)for(const a of c.l.s)Ut(a);x()}function Fl(c){var x=Ae(0);return function(){return arguments.length===1?(ie(x,Ut(x)+1),arguments[0]):(Ut(x),c())}}let jr=!1;function Ul(c){var x=jr;try{return jr=!1,[c(),jr]}finally{jr=x}}function Es(c){for(var x=Nt,a=Nt;x!==null&&!(x.f&($e|hr));)x=x.parent;try{return ai(x),c()}finally{ai(a)}}function rr(c,x,a,C){var Z;var n=(a&Ya)!==0,r=!Pn||(a&Ka)!==0,s=(a&$a)!==0,h=(a&Ja)!==0,f=!1,m;s?[m,f]=Ul(()=>c[x]):m=c[x];var w=$i in c||Da in c,g=s&&(((Z=Ln(c,x))==null?void 0:Z.set)??(w&&x in c&&(q=>c[x]=q)))||void 0,E=C,v=!0,P=!1,p=()=>(P=!0,v&&(v=!1,h?E=En(C):E=C),E);m===void 0&&C!==void 0&&(g&&r&&Na(),m=p(),g&&g(m));var b;if(r)b=()=>{var q=c[x];return q===void 0?p():(v=!0,P=!1,q)};else{var T=Es(()=>(n?$r:rl)(()=>c[x]));T.f|=Ca,b=()=>{var q=Ut(T);return q!==void 0&&(E=void 0),q===void 0?E:q}}if(!(a&Xa))return b;if(g){var S=c.$$legacy;return function(q,R){return arguments.length>0?((!r||!R||S||f)&&g(R?b():q),q):b()}}var z=!1,G=!1,M=Wo(m),U=Es(()=>$r(()=>{var q=b(),R=Ut(M);return z?(z=!1,G=!0,R):(G=!1,M.v=q)}));return n||(U.equals=Go),function(q,R){if(arguments.length>0){const $=R?Ut(U):r&&s?bn(q):q;return U.equals($)||(z=!0,ie(M,$),P&&E!==void 0&&(E=$),En(()=>Ut(U))),q}return Ut(U)}}function Hl(c){Kt===null&&ia(),Pn&&Kt.l!==null?Wl(Kt).m.push(c):Io(()=>{const x=En(c);if(typeof x=="function")return x})}function Gl(c,x,{bubbles:a=!1,cancelable:C=!1}={}){return new CustomEvent(c,{detail:x,bubbles:a,cancelable:C})}function ha(){const c=Kt;return c===null&&ia(),(x,a,C)=>{var r;const n=(r=c.s.$$events)==null?void 0:r[x];if(n){const s=no(n)?n.slice():[n],h=Gl(x,a,C);for(const f of s)f.call(c.x,h);return!h.defaultPrevented}return!0}}function Wl(c){var x=c.l;return x.u??(x.u={a:[],b:[],m:[]})}const ql="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ql);Wa();var Vl=Bi("<option> </option>"),jl=Bi('<div class="svelte-1lvjhsb"><label for="layer-selector">Select Map Layer:</label> <select id="layer-selector"></select></div>');function Yl(c,x){ao(x,!1);const a=[{label:"OpenStreetMap Default",value:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors"},{label:"CartoDB Positron",value:"https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CartoDB"},{label:"CartoDB Dark Matter",value:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CartoDB"},{label:"OpenTopoMap",value:"https://tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors &copy; OpenTopoMap"},{label:"ESRI Satellite",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{label:"ESRI World Imagery",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{label:"ESRI World Street Map",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ"},{label:"ESRI World Topo Map",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ"}];let C=rr(x,"selectedLayer",28,()=>a[0]);const n=ha(),r=f=>{C(f),n("change",{layer:f})};Qo();var s=jl(),h=Ji(or(s),2);zl(h,5,()=>a,Dl,(f,m)=>{var w=Vl(),g={},E=or(w);Ys(()=>{g!==(g=Ut(m).value)&&(w.value=(w.__value=Ut(m).value)==null?"":Ut(m).value),Nl(w,Ut(m)===C()),la(E,Ut(m).label)}),Ci(f,w)}),aa("change",h,f=>r(a[f.target.selectedIndex])),Ci(c,s),lo()}var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ts(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var er={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Kl=er.exports,Ts;function Xl(){return Ts||(Ts=1,function(c,x){(function(a,C){C(x)})(Kl,function(a){var C="1.9.4";function n(t){var e,i,o,u;for(i=1,o=arguments.length;i<o;i++){u=arguments[i];for(e in u)t[e]=u[e]}return t}var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function s(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var o=i.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(i.call(arguments)):arguments)}}var h=0;function f(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function m(t,e,i){var o,u,y,B;return B=function(){o=!1,u&&(y.apply(i,u),u=!1)},y=function(){o?u=arguments:(t.apply(i,arguments),setTimeout(B,e),o=!0)},y}function w(t,e,i){var o=e[1],u=e[0],y=o-u;return t===o&&i?t:((t-u)%y+y)%y+u}function g(){return!1}function E(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function v(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return v(t).split(/\s+/)}function p(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function b(t,e,i){var o=[];for(var u in t)o.push(encodeURIComponent(i?u.toUpperCase():u)+"="+encodeURIComponent(t[u]));return(!e||e.indexOf("?")===-1?"?":"&")+o.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function S(t,e){return t.replace(T,function(i,o){var u=e[o];if(u===void 0)throw new Error("No value provided for variable "+i);return typeof u=="function"&&(u=u(e)),u})}var z=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function G(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Z=0;function q(t){var e=+new Date,i=Math.max(0,16-(e-Z));return Z=e+i,window.setTimeout(t,i)}var R=window.requestAnimationFrame||U("RequestAnimationFrame")||q,$=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function K(t,e,i){if(i&&R===q)t.call(e);else return R.call(window,s(t,e))}function O(t){t&&$.call(window,t)}var F={__proto__:null,extend:n,create:r,bind:s,get lastId(){return h},stamp:f,throttle:m,wrapNum:w,falseFn:g,formatNum:E,trim:v,splitWords:P,setOptions:p,getParamString:b,template:S,isArray:z,indexOf:G,emptyImageUrl:M,requestFn:R,cancelFn:$,requestAnimFrame:K,cancelAnimFrame:O};function d(){}d.extend=function(t){var e=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);o.constructor=e,e.prototype=o;for(var u in this)Object.prototype.hasOwnProperty.call(this,u)&&u!=="prototype"&&u!=="__super__"&&(e[u]=this[u]);return t.statics&&n(e,t.statics),t.includes&&(j(t.includes),n.apply(null,[o].concat(t.includes))),n(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,B=o._initHooks.length;y<B;y++)o._initHooks[y].call(this)}},e},d.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},d.mergeOptions=function(t){return n(this.prototype.options,t),this},d.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function j(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=z(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e);else{t=P(t);for(var u=0,y=t.length;u<y;u++)this._on(t[u],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var o in t)this._off(o,t[o],e);else{t=P(t);for(var u=arguments.length===1,y=0,B=t.length;y<B;y++)u?this._off(t[y]):this._off(t[y],e,i)}return this},_on:function(t,e,i,o){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var u={fn:e,ctx:i};o&&(u.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(u)}},_off:function(t,e,i){var o,u,y;if(this._events&&(o=this._events[t],!!o)){if(arguments.length===1){if(this._firingCount)for(u=0,y=o.length;u<y;u++)o[u].fn=g;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var B=this._listens(t,e,i);if(B!==!1){var V=o[B];this._firingCount&&(V.fn=g,this._events[t]=o=o.slice()),o.splice(B,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var u=this._events[t];if(u){this._firingCount=this._firingCount+1||1;for(var y=0,B=u.length;y<B;y++){var V=u[y],J=V.fn;V.once&&this.off(t,J,V.ctx),J.call(V.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e,i,o){typeof t!="string"&&console.warn('"string" type argument expected');var u=e;typeof e!="function"&&(o=!!e,u=void 0,i=void 0);var y=this._events&&this._events[t];if(y&&y.length&&this._listens(t,u,i)!==!1)return!0;if(o){for(var B in this._eventParents)if(this._eventParents[B].listens(t,e,i,o))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var o=this._events[t]||[];if(!e)return!!o.length;i===this&&(i=void 0);for(var u=0,y=o.length;u<y;u++)if(o[u].fn===e&&o[u].ctx===i)return u;return!1},once:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e,!0);else{t=P(t);for(var u=0,y=t.length;u<y;u++)this._on(t[u],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[f(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[f(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var tt=d.extend(ct);function ot(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var at=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};ot.prototype={clone:function(){return new ot(this.x,this.y)},add:function(t){return this.clone()._add(nt(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(nt(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new ot(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new ot(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=at(this.x),this.y=at(this.y),this},distanceTo:function(t){t=nt(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=nt(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=nt(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function nt(t,e,i){return t instanceof ot?t:z(t)?new ot(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new ot(t.x,t.y):new ot(t,e,i)}function W(t,e){if(t)for(var i=e?[t,e]:t,o=0,u=i.length;o<u;o++)this.extend(i[o])}W.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof ot||typeof t[0]=="number"||"x"in t)e=i=nt(t);else if(t=H(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return nt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return nt(this.min.x,this.max.y)},getTopRight:function(){return nt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof ot?t=nt(t):t=H(t),t instanceof W?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=H(t);var e=this.min,i=this.max,o=t.min,u=t.max,y=u.x>=e.x&&o.x<=i.x,B=u.y>=e.y&&o.y<=i.y;return y&&B},overlaps:function(t){t=H(t);var e=this.min,i=this.max,o=t.min,u=t.max,y=u.x>e.x&&o.x<i.x,B=u.y>e.y&&o.y<i.y;return y&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,o=Math.abs(e.x-i.x)*t,u=Math.abs(e.y-i.y)*t;return H(nt(e.x-o,e.y-u),nt(i.x+o,i.y+u))},equals:function(t){return t?(t=H(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function H(t,e){return!t||t instanceof W?t:new W(t,e)}function pt(t,e){if(t)for(var i=e?[t,e]:t,o=0,u=i.length;o<u;o++)this.extend(i[o])}pt.prototype={extend:function(t){var e=this._southWest,i=this._northEast,o,u;if(t instanceof it)o=t,u=t;else if(t instanceof pt){if(o=t._southWest,u=t._northEast,!o||!u)return this}else return t?this.extend(yt(t)||ht(t)):this;return!e&&!i?(this._southWest=new it(o.lat,o.lng),this._northEast=new it(u.lat,u.lng)):(e.lat=Math.min(o.lat,e.lat),e.lng=Math.min(o.lng,e.lng),i.lat=Math.max(u.lat,i.lat),i.lng=Math.max(u.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,u=Math.abs(e.lng-i.lng)*t;return new pt(new it(e.lat-o,e.lng-u),new it(i.lat+o,i.lng+u))},getCenter:function(){return new it((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new it(this.getNorth(),this.getWest())},getSouthEast:function(){return new it(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof it||"lat"in t?t=yt(t):t=ht(t);var e=this._southWest,i=this._northEast,o,u;return t instanceof pt?(o=t.getSouthWest(),u=t.getNorthEast()):o=u=t,o.lat>=e.lat&&u.lat<=i.lat&&o.lng>=e.lng&&u.lng<=i.lng},intersects:function(t){t=ht(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),u=t.getNorthEast(),y=u.lat>=e.lat&&o.lat<=i.lat,B=u.lng>=e.lng&&o.lng<=i.lng;return y&&B},overlaps:function(t){t=ht(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),u=t.getNorthEast(),y=u.lat>e.lat&&o.lat<i.lat,B=u.lng>e.lng&&o.lng<i.lng;return y&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ht(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ht(t,e){return t instanceof pt?t:new pt(t,e)}function it(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}it.prototype={equals:function(t,e){if(!t)return!1;t=yt(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+E(this.lat,t)+", "+E(this.lng,t)+")"},distanceTo:function(t){return St.distance(this,yt(t))},wrap:function(){return St.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return ht([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new it(this.lat,this.lng,this.alt)}};function yt(t,e,i){return t instanceof it?t:z(t)&&typeof t[0]!="object"?t.length===3?new it(t[0],t[1],t[2]):t.length===2?new it(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new it(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new it(t,e,i)}var Ht={latLngToPoint:function(t,e){var i=this.projection.project(t),o=this.scale(e);return this.transformation._transform(i,o)},pointToLatLng:function(t,e){var i=this.scale(e),o=this.transformation.untransform(t,i);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),o=this.transformation.transform(e.min,i),u=this.transformation.transform(e.max,i);return new W(o,u)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?w(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?w(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return new it(i,e,o)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),o=e.lat-i.lat,u=e.lng-i.lng;if(o===0&&u===0)return t;var y=t.getSouthWest(),B=t.getNorthEast(),V=new it(y.lat-o,y.lng-u),J=new it(B.lat-o,B.lng-u);return new pt(V,J)}},St=n({},Ht,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,o=t.lat*i,u=e.lat*i,y=Math.sin((e.lat-t.lat)*i/2),B=Math.sin((e.lng-t.lng)*i/2),V=y*y+Math.cos(o)*Math.cos(u)*B*B,J=2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V));return this.R*J}}),Rt=6378137,bt={R:Rt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),u=Math.sin(o*e);return new ot(this.R*t.lng*e,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(t){var e=180/Math.PI;return new it((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Rt*Math.PI;return new W([-t,-t],[t,t])}()};function wt(t,e,i,o){if(z(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=o}wt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new ot((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Tt(t,e,i,o){return new wt(t,e,i,o)}var Dt=n({},St,{code:"EPSG:3857",projection:bt,transformation:function(){var t=.5/(Math.PI*bt.R);return Tt(t,.5,-t,.5)}()}),_=n({},Dt,{code:"EPSG:900913"});function et(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var i="",o,u,y,B,V,J;for(o=0,y=t.length;o<y;o++){for(V=t[o],u=0,B=V.length;u<B;u++)J=V[u],i+=(u?"L":"M")+J.x+" "+J.y;i+=e?kt.svg?"z":"x":""}return i||"M0 0"}var A=document.documentElement.style,D="ActiveXObject"in window,N=D&&!document.addEventListener,rt="msLaunchUri"in navigator&&!("documentMode"in document),st=Re("webkit"),Y=Re("android"),ut=Re("android 2")||Re("android 3"),mt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ft=Y&&Re("Google")&&mt<537&&!("AudioNode"in window),Lt=!!window.opera,Zt=!rt&&Re("chrome"),xt=Re("gecko")&&!st&&!Lt&&!D,Xt=!Zt&&Re("safari"),de=Re("phantom"),ne="OTransition"in A,ae=navigator.platform.indexOf("Win")===0,Gt=D&&"transition"in A,le="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ut,Jt="MozPerspective"in A,he=!window.L_DISABLE_3D&&(Gt||le||Jt)&&!ne&&!de,ke=typeof orientation<"u"||Re("mobile"),ze=ke&&st,Ie=ke&&le,qe=!window.PointerEvent&&window.MSPointerEvent,Ce=!!(window.PointerEvent||qe),Yt="ontouchstart"in window||!!window.TouchEvent,Qe=!window.L_NO_TOUCH&&(Yt||Ce),Be=ke&&Lt,Cn=ke&&xt,fr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,dr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,e),window.removeEventListener("testPassiveEventSupport",g,e)}catch{}return t}(),tn=function(){return!!document.createElement("canvas").getContext}(),en=!!(document.createElementNS&&et("svg").createSVGRect),ho=!!en&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_r=!en&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),uo=navigator.platform.indexOf("Mac")===0,pr=navigator.platform.indexOf("Linux")===0;function Re(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var kt={ie:D,ielt9:N,edge:rt,webkit:st,android:Y,android23:ut,androidStock:ft,opera:Lt,chrome:Zt,gecko:xt,safari:Xt,phantom:de,opera12:ne,win:ae,ie3d:Gt,webkit3d:le,gecko3d:Jt,any3d:he,mobile:ke,mobileWebkit:ze,mobileWebkit3d:Ie,msPointer:qe,pointer:Ce,touch:Qe,touchNative:Yt,mobileOpera:Be,mobileGecko:Cn,retina:fr,passiveEvents:dr,canvas:tn,svg:en,vml:_r,inlineSvg:ho,mac:uo,linux:pr},On=kt.msPointer?"MSPointerDown":"pointerdown",nn=kt.msPointer?"MSPointerMove":"pointermove",wi=kt.msPointer?"MSPointerUp":"pointerup",rn=kt.msPointer?"MSPointerCancel":"pointercancel",Ri={touchstart:On,touchmove:nn,touchend:wi,touchcancel:rn},on={touchstart:vr,touchmove:ti,touchend:ti,touchcancel:ti},Ne={},mr=!1;function co(t,e,i){return e==="touchstart"&&sn(),on[e]?(i=on[e].bind(this,i),t.addEventListener(Ri[e],i,!1),i):(console.warn("wrong event specified:",e),g)}function fo(t,e,i){if(!Ri[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Ri[e],i,!1)}function _o(t){Ne[t.pointerId]=t}function po(t){Ne[t.pointerId]&&(Ne[t.pointerId]=t)}function gr(t){delete Ne[t.pointerId]}function sn(){mr||(document.addEventListener(On,_o,!0),document.addEventListener(nn,po,!0),document.addEventListener(wi,gr,!0),document.addEventListener(rn,gr,!0),mr=!0)}function ti(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in Ne)e.touches.push(Ne[i]);e.changedTouches=[e],t(e)}}function vr(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ce(e),ti(t,e)}function zt(t){var e={},i,o;for(o in t)i=t[o],e[o]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var li=200;function mo(t,e){t.addEventListener("dblclick",e);var i=0,o;function u(y){if(y.detail!==1){o=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var B=Lr(y);if(!(B.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!B.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var V=Date.now();V-i<=li?(o++,o===2&&e(zt(y))):o=1,i=V}}}return t.addEventListener("click",u),{dblclick:e,simDblclick:u}}function go(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Dn=hn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=hn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yr=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function Ze(t){return typeof t=="string"?document.getElementById(t):t}function Zi(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return i==="auto"?null:i}function Ft(t,e,i){var o=document.createElement(t);return o.className=e||"",i&&i.appendChild(o),o}function $t(t){var e=t.parentNode;e&&e.removeChild(t)}function an(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function bi(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ve(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function An(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=ln(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function Ot(t,e){if(t.classList!==void 0)for(var i=P(e),o=0,u=i.length;o<u;o++)t.classList.add(i[o]);else if(!An(t,e)){var y=ln(t);zn(t,(y?y+" ":"")+e)}}function Qt(t,e){t.classList!==void 0?t.classList.remove(e):zn(t,v((" "+ln(t)+" ").replace(" "+e+" "," ")))}function zn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function ln(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&vo(t,e)}function vo(t,e){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(o)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function hn(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function ue(t,e,i){var o=e||new ot(0,0);t.style[Dn]=(kt.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}function te(t,e){t._leaflet_pos=e,kt.any3d?ue(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function hi(t){return t._leaflet_pos||new ot(0,0)}var Fi,Ui,In;if("onselectstart"in document)Fi=function(){Mt(window,"selectstart",ce)},Ui=function(){Wt(window,"selectstart",ce)};else{var Li=hn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Fi=function(){if(Li){var t=document.documentElement.style;In=t[Li],t[Li]="none"}},Ui=function(){Li&&(document.documentElement.style[Li]=In,In=void 0)}}function Hi(){Mt(window,"dragstart",ce)}function un(){Wt(window,"dragstart",ce)}var ui,Bn;function ei(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(cn(),ui=t,Bn=t.style.outlineStyle,t.style.outlineStyle="none",Mt(window,"keydown",cn))}function cn(){ui&&(ui.style.outlineStyle=Bn,ui=void 0,Bn=void 0,Wt(window,"keydown",cn))}function wr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Rn(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var yo={__proto__:null,TRANSFORM:Dn,TRANSITION:Ni,TRANSITION_END:yr,get:Ze,getStyle:Zi,create:Ft,remove:$t,empty:an,toFront:bi,toBack:ve,hasClass:An,addClass:Ot,removeClass:Qt,setClass:zn,getClass:ln,setOpacity:me,testProp:hn,setTransform:ue,setPosition:te,getPosition:hi,get disableTextSelection(){return Fi},get enableTextSelection(){return Ui},disableImageDrag:Hi,enableImageDrag:un,preventOutline:ei,restoreOutline:cn,getSizedParentNode:wr,getScale:Rn};function Mt(t,e,i,o){if(e&&typeof e=="object")for(var u in e)Nn(t,u,e[u],i);else{e=P(e);for(var y=0,B=e.length;y<B;y++)Nn(t,e[y],i,o)}return this}var Fe="_leaflet_events";function Wt(t,e,i,o){if(arguments.length===1)br(t),delete t[Fe];else if(e&&typeof e=="object")for(var u in e)Zn(t,u,e[u],i);else if(e=P(e),arguments.length===2)br(t,function(V){return G(e,V)!==-1});else for(var y=0,B=e.length;y<B;y++)Zn(t,e[y],i,o);return this}function br(t,e){for(var i in t[Fe]){var o=i.split(/\d/)[0];(!e||e(o))&&Zn(t,o,null,null,i)}}var Gi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Nn(t,e,i,o){var u=e+f(i)+(o?"_"+f(o):"");if(t[Fe]&&t[Fe][u])return this;var y=function(V){return i.call(o||t,V||window.event)},B=y;!kt.touchNative&&kt.pointer&&e.indexOf("touch")===0?y=co(t,e,y):kt.touch&&e==="dblclick"?y=mo(t,y):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Gi[e]||e,y,kt.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(y=function(V){V=V||window.event,Un(t,V)&&B(V)},t.addEventListener(Gi[e],y,!1)):t.addEventListener(e,B,!1):t.attachEvent("on"+e,y),t[Fe]=t[Fe]||{},t[Fe][u]=y}function Zn(t,e,i,o,u){u=u||e+f(i)+(o?"_"+f(o):"");var y=t[Fe]&&t[Fe][u];if(!y)return this;!kt.touchNative&&kt.pointer&&e.indexOf("touch")===0?fo(t,e,y):kt.touch&&e==="dblclick"?go(t,y):"removeEventListener"in t?t.removeEventListener(Gi[e]||e,y,!1):t.detachEvent("on"+e,y),t[Fe][u]=null}function ci(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Fn(t){return Nn(t,"wheel",ci),this}function xi(t){return Mt(t,"mousedown touchstart dblclick contextmenu",ci),t._leaflet_disable_click=!0,this}function ce(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ii(t){return ce(t),ci(t),this}function Lr(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function xr(t,e){if(!e)return new ot(t.clientX,t.clientY);var i=Rn(e),o=i.boundingClientRect;return new ot((t.clientX-o.left)/i.x-e.clientLeft,(t.clientY-o.top)/i.y-e.clientTop)}var kr=kt.linux&&kt.chrome?window.devicePixelRatio:kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Er(t){return kt.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/kr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Un(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var wo={__proto__:null,on:Mt,off:Wt,stopPropagation:ci,disableScrollPropagation:Fn,disableClickPropagation:xi,preventDefault:ce,stop:ii,getPropagationPath:Lr,getMousePosition:xr,getWheelDelta:Er,isExternalTarget:Un,addListener:Mt,removeListener:Wt},Tr=tt.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=hi(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),te(this._el,i),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Bt=tt.extend({options:{crs:Dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(yt(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&kt.any3d&&!kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,yr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(yt(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var o=this.getZoomScale(e),u=this.getSize().divideBy(2),y=t instanceof ot?t:this.latLngToContainerPoint(t),B=y.subtract(u).multiplyBy(1-1/o),V=this.containerPointToLatLng(u.add(B));return this.setView(V,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ht(t);var i=nt(e.paddingTopLeft||e.padding||[0,0]),o=nt(e.paddingBottomRight||e.padding||[0,0]),u=this.getBoundsZoom(t,!1,i.add(o));if(u=typeof e.maxZoom=="number"?Math.min(e.maxZoom,u):u,u===1/0)return{center:t.getCenter(),zoom:u};var y=o.subtract(i).divideBy(2),B=this.project(t.getSouthWest(),u),V=this.project(t.getNorthEast(),u),J=this.unproject(B.add(V).divideBy(2).add(y),u);return{center:J,zoom:u}},fitBounds:function(t,e){if(t=ht(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=nt(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Ot(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!kt.any3d)return this.setView(t,e,i);this._stop();var o=this.project(this.getCenter()),u=this.project(t),y=this.getSize(),B=this._zoom;t=yt(t),e=e===void 0?B:e;var V=Math.max(y.x,y.y),J=V*this.getZoomScale(B,e),lt=u.distanceTo(o)||1,vt=1.42,Pt=vt*vt;function It(se){var Vr=se?-1:1,ya=se?J:V,wa=J*J-V*V+Vr*Pt*Pt*lt*lt,ba=2*ya*Pt*lt,Po=wa/ba,ps=Math.sqrt(Po*Po+1)-Po,La=ps<1e-9?-18:Math.log(ps);return La}function xe(se){return(Math.exp(se)-Math.exp(-se))/2}function pe(se){return(Math.exp(se)+Math.exp(-se))/2}function We(se){return xe(se)/pe(se)}var Pe=It(0);function yn(se){return V*(pe(Pe)/pe(Pe+vt*se))}function pa(se){return V*(pe(Pe)*We(Pe+vt*se)-xe(Pe))/Pt}function ma(se){return 1-Math.pow(1-se,1.5)}var ga=Date.now(),ds=(It(1)-Pe)/vt,va=i.duration?1e3*i.duration:1e3*ds*.8;function _s(){var se=(Date.now()-ga)/va,Vr=ma(se)*ds;se<=1?(this._flyToFrame=K(_s,this),this._move(this.unproject(o.add(u.subtract(o).multiplyBy(pa(Vr)/lt)),B),this.getScaleZoom(V/yn(Vr),B),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),_s.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=ht(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,ht(t));return i.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=nt(e.paddingTopLeft||e.padding||[0,0]),o=nt(e.paddingBottomRight||e.padding||[0,0]),u=this.project(this.getCenter()),y=this.project(t),B=this.getPixelBounds(),V=H([B.min.add(i),B.max.subtract(o)]),J=V.getSize();if(!V.contains(y)){this._enforcingBounds=!0;var lt=y.subtract(V.getCenter()),vt=V.extend(y).getSize().subtract(J);u.x+=lt.x<0?-vt.x:vt.x,u.y+=lt.y<0?-vt.y:vt.y,this.panTo(this.unproject(u),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),u=i.divideBy(2).round(),y=o.subtract(u);return!y.x&&!y.y?this:(t.animate&&t.pan?this.panBy(y):(t.pan&&this._rawPanBy(y),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,o=new it(e,i),u=o.toBounds(t.coords.accuracy*2),y=this._locateOptions;if(y.setView){var B=this.getBoundsZoom(u);this.setView(o,y.maxZoom?Math.min(B,y.maxZoom):B)}var V={latlng:o,bounds:u,timestamp:t.timestamp};for(var J in t.coords)typeof t.coords[J]=="number"&&(V[J]=t.coords[J]);this.fire("locationfound",V)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)$t(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=Ft("div",i,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new pt(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=ht(t),i=nt(i||[0,0]);var o=this.getZoom()||0,u=this.getMinZoom(),y=this.getMaxZoom(),B=t.getNorthWest(),V=t.getSouthEast(),J=this.getSize().subtract(i),lt=H(this.project(V,o),this.project(B,o)).getSize(),vt=kt.any3d?this.options.zoomSnap:1,Pt=J.x/lt.x,It=J.y/lt.y,xe=e?Math.max(Pt,It):Math.min(Pt,It);return o=this.getScaleZoom(xe,o),vt&&(o=Math.round(o/(vt/100))*(vt/100),o=e?Math.ceil(o/vt)*vt:Math.floor(o/vt)*vt),Math.max(u,Math.min(y,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ot(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new W(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var o=i.zoom(t*i.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(yt(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(nt(t),e)},layerPointToLatLng:function(t){var e=nt(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(yt(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(yt(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ht(t))},distance:function(t,e){return this.options.crs.distance(yt(t),yt(e))},containerPointToLayerPoint:function(t){return nt(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return nt(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(nt(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(yt(t)))},mouseEventToContainerPoint:function(t){return xr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Ze(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(e,"scroll",this._onScroll,this),this._containerId=f(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&kt.any3d,Ot(t,"leaflet-container"+(kt.touch?" leaflet-touch":"")+(kt.retina?" leaflet-retina":"")+(kt.ielt9?" leaflet-oldie":"")+(kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Zi(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),te(this._mapPane,new ot(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ot(t.markerPane,"leaflet-zoom-hide"),Ot(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){te(this._mapPane,new ot(0,0));var o=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var u=this._zoom!==e;this._moveStart(u,i)._move(t,e)._moveEnd(u),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,o){e===void 0&&(e=this._zoom);var u=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),o?i&&i.pinch&&this.fire("zoom",i):((u||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){te(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[f(this._container)]=this;var e=t?Wt:Mt;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),kt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],o,u=e==="mouseout"||e==="mouseover",y=t.target||t.srcElement,B=!1;y;){if(o=this._targets[f(y)],o&&(e==="click"||e==="preclick")&&this._draggableMoved(o)){B=!0;break}if(o&&o.listens(e,!0)&&(u&&!Un(y,t)||(i.push(o),u))||y===this._container)break;y=y.parentNode}return!i.length&&!B&&!u&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&ei(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}var u=this._findEventTargets(t,e);if(i){for(var y=[],B=0;B<i.length;B++)i[B].listens(e,!0)&&y.push(i[B]);u=y.concat(u)}if(u.length){e==="contextmenu"&&ce(t);var V=u[0],J={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var lt=V.getLatLng&&(!V._radius||V._radius<=10);J.containerPoint=lt?this.latLngToContainerPoint(V.getLatLng()):this.mouseEventToContainerPoint(t),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=lt?V.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(B=0;B<u.length;B++)if(u[B].fire(e,J,!0),J.originalEvent._stopped||u[B].options.bubblingMouseEvents===!1&&G(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return hi(this._mapPane)||new ot(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return H([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var o=this.project(t,e),u=this.getSize().divideBy(2),y=new W(o.subtract(u),o.add(u)),B=this._getBoundsOffset(y,i,e);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?t:this.unproject(o.add(B),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),o=new W(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,i){var o=H(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),u=o.min.subtract(t.min),y=o.max.subtract(t.max),B=this._rebound(u.x,-y.x),V=this._rebound(u.y,-y.y);return new ot(B,V)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),o=kt.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=Ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=Dn,o=this._proxy.style[i];ue(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ue(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),u=this._getCenterOffset(t)._divideBy(1-1/o);return i.animate!==!0&&!this.getSize().contains(u)?!1:(K(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bo(t,e){return new Bt(t,e)}var Le=d.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return Ot(e,"leaflet-control"),i.indexOf("bottom")!==-1?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Wi=function(t){return new Le(t)};Bt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=Ft("div",e+"control-container",this._container);function o(u,y){var B=e+u+" "+e+y;t[u+y]=Ft("div",B,i)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)$t(this._controlCorners[t]);$t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Pr=Le.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,o){return i<o?-1:o<i?1:0}},initialize:function(t,e,i){p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Le.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(f(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Ft("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),xi(e),Fn(e);var o=this._section=Ft("section",t+"-list");i&&(this._map.on("click",this.collapse,this),Mt(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var u=this._layersLink=Ft("a",t+"-toggle",e);u.href="#",u.title="Layers",u.setAttribute("role","button"),Mt(u,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){ce(y),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=Ft("div",t+"-base",o),this._separator=Ft("div",t+"-separator",o),this._overlaysList=Ft("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&f(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(s(function(o,u){return this.options.sortFunction(o.layer,u.layer,o.name,u.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;an(this._baseLayersList),an(this._overlaysList),this._layerControlInputs=[];var t,e,i,o,u=0;for(i=0;i<this._layers.length;i++)o=this._layers[i],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,u+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&u>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(f(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),o;t.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=i):o=this._createRadioElement("leaflet-base-layers_"+f(this),i),this._layerControlInputs.push(o),o.layerId=f(t.layer),Mt(o,"click",this._onInputClick,this);var u=document.createElement("span");u.innerHTML=" "+t.name;var y=document.createElement("span");e.appendChild(y),y.appendChild(o),y.appendChild(u);var B=t.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,o=[],u=[];this._handlingClick=!0;for(var y=t.length-1;y>=0;y--)e=t[y],i=this._getLayer(e.layerId).layer,e.checked?o.push(i):e.checked||u.push(i);for(y=0;y<u.length;y++)this._map.hasLayer(u[y])&&this._map.removeLayer(u[y]);for(y=0;y<o.length;y++)this._map.hasLayer(o[y])||this._map.addLayer(o[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,o=this._map.getZoom(),u=t.length-1;u>=0;u--)e=t[u],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&o<i.options.minZoom||i.options.maxZoom!==void 0&&o>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Mt(t,"click",ce),this.expand();var e=this;setTimeout(function(){Wt(t,"click",ce),e._preventClick=!1})}}),Lo=function(t,e,i){return new Pr(t,e,i)},Hn=Le.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=Ft("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,o,u){var y=Ft("a",i,o);return y.innerHTML=t,y.href="#",y.title=e,y.setAttribute("role","button"),y.setAttribute("aria-label",e),xi(y),Mt(y,"click",ii),Mt(y,"click",u,this),Mt(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Qt(this._zoomInButton,e),Qt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ot(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ot(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bt.mergeOptions({zoomControl:!0}),Bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hn,this.addControl(this.zoomControl))});var xo=function(t){return new Hn(t)},Sr=Le.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=Ft("div",e),o=this.options;return this._addScales(o,e+"-line",i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=Ft("div",e,i)),t.imperial&&(this._iScale=Ft("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,o,u;e>5280?(i=e/5280,o=this._getRoundNum(i),this._updateScale(this._iScale,o+" mi",o/i)):(u=this._getRoundNum(e),this._updateScale(this._iScale,u+" ft",u/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Mr=function(t){return new Sr(t)},Gn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wn=Le.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(kt.inlineSvg?Gn+" ":"")+"Leaflet</a>"},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ft("div","leaflet-control-attribution"),xi(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});Bt.mergeOptions({attributionControl:!0}),Bt.addInitHook(function(){this.options.attributionControl&&new Wn().addTo(this)});var ko=function(t){return new Wn(t)};Le.Layers=Pr,Le.Zoom=Hn,Le.Scale=Sr,Le.Attribution=Wn,Wi.layers=Lo,Wi.zoom=xo,Wi.scale=Mr,Wi.attribution=ko;var Ue=d.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ue.addTo=function(t,e){return t.addHandler(e,this),this};var Eo={Events:ct},qn=kt.touch?"touchstart mousedown":"mousedown",ni=tt.extend({options:{clickTolerance:3},initialize:function(t,e,i,o){p(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Mt(this._dragStartTarget,qn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ni._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,qn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!An(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ni._dragging===this&&this.finishDrag();return}if(!(ni._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ni._dragging=this,this._preventOutline&&ei(this._element),Hi(),Fi(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=wr(this._element);this._startPoint=new ot(e.clientX,e.clientY),this._startPos=hi(this._element),this._parentScale=Rn(i);var o=t.type==="mousedown";Mt(document,o?"mousemove":"touchmove",this._onMove,this),Mt(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new ot(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,ce(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ot(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),te(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Qt(document.body,"leaflet-dragging"),this._lastTarget&&(Qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),un(),Ui();var e=this._moved&&this._moving;this._moving=!1,ni._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Cr(t,e,i){var o,u=[1,4,2,8],y,B,V,J,lt,vt,Pt,It;for(y=0,vt=t.length;y<vt;y++)t[y]._code=di(t[y],e);for(V=0;V<4;V++){for(Pt=u[V],o=[],y=0,vt=t.length,B=vt-1;y<vt;B=y++)J=t[y],lt=t[B],J._code&Pt?lt._code&Pt||(It=ki(lt,J,Pt,e,i),It._code=di(It,e),o.push(It)):(lt._code&Pt&&(It=ki(lt,J,Pt,e,i),It._code=di(It,e),o.push(It)),o.push(J));t=o}return t}function Or(t,e){var i,o,u,y,B,V,J,lt,vt;if(!t||t.length===0)throw new Error("latlngs not passed");Ee(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Pt=yt([0,0]),It=ht(t),xe=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());xe<1700&&(Pt=Vn(t));var pe=t.length,We=[];for(i=0;i<pe;i++){var Pe=yt(t[i]);We.push(e.project(yt([Pe.lat-Pt.lat,Pe.lng-Pt.lng])))}for(V=J=lt=0,i=0,o=pe-1;i<pe;o=i++)u=We[i],y=We[o],B=u.y*y.x-y.y*u.x,J+=(u.x+y.x)*B,lt+=(u.y+y.y)*B,V+=B*3;V===0?vt=We[0]:vt=[J/V,lt/V];var yn=e.unproject(nt(vt));return yt([yn.lat+Pt.lat,yn.lng+Pt.lng])}function Vn(t){for(var e=0,i=0,o=0,u=0;u<t.length;u++){var y=yt(t[u]);e+=y.lat,i+=y.lng,o++}return yt([e/o,i/o])}var fn={__proto__:null,clipPolygon:Cr,polygonCenter:Or,centroid:Vn};function Dr(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=To(t,i),t=He(t,i),t}function fi(t,e,i){return Math.sqrt(qi(t,e,i,!0))}function Ar(t,e,i){return qi(t,e,i)}function He(t,e){var i=t.length,o=typeof Uint8Array<"u"?Uint8Array:Array,u=new o(i);u[0]=u[i-1]=1,jn(t,u,e,0,i-1);var y,B=[];for(y=0;y<i;y++)u[y]&&B.push(t[y]);return B}function jn(t,e,i,o,u){var y=0,B,V,J;for(V=o+1;V<=u-1;V++)J=qi(t[V],t[o],t[u],!0),J>y&&(B=V,y=J);y>i&&(e[B]=1,jn(t,e,i,o,B),jn(t,e,i,B,u))}function To(t,e){for(var i=[t[0]],o=1,u=0,y=t.length;o<y;o++)dn(t[o],t[u])>e&&(i.push(t[o]),u=o);return u<y-1&&i.push(t[y-1]),i}var zr;function Ir(t,e,i,o,u){var y=o?zr:di(t,i),B=di(e,i),V,J,lt;for(zr=B;;){if(!(y|B))return[t,e];if(y&B)return!1;V=y||B,J=ki(t,e,V,i,u),lt=di(J,i),V===y?(t=J,y=lt):(e=J,B=lt)}}function ki(t,e,i,o,u){var y=e.x-t.x,B=e.y-t.y,V=o.min,J=o.max,lt,vt;return i&8?(lt=t.x+y*(J.y-t.y)/B,vt=J.y):i&4?(lt=t.x+y*(V.y-t.y)/B,vt=V.y):i&2?(lt=J.x,vt=t.y+B*(J.x-t.x)/y):i&1&&(lt=V.x,vt=t.y+B*(V.x-t.x)/y),new ot(lt,vt,u)}function di(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function dn(t,e){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o}function qi(t,e,i,o){var u=e.x,y=e.y,B=i.x-u,V=i.y-y,J=B*B+V*V,lt;return J>0&&(lt=((t.x-u)*B+(t.y-y)*V)/J,lt>1?(u=i.x,y=i.y):lt>0&&(u+=B*lt,y+=V*lt)),B=t.x-u,V=t.y-y,o?B*B+V*V:new ot(u,y)}function Ee(t){return!z(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Vi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ee(t)}function Yn(t,e){var i,o,u,y,B,V,J,lt;if(!t||t.length===0)throw new Error("latlngs not passed");Ee(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var vt=yt([0,0]),Pt=ht(t),It=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());It<1700&&(vt=Vn(t));var xe=t.length,pe=[];for(i=0;i<xe;i++){var We=yt(t[i]);pe.push(e.project(yt([We.lat-vt.lat,We.lng-vt.lng])))}for(i=0,o=0;i<xe-1;i++)o+=pe[i].distanceTo(pe[i+1])/2;if(o===0)lt=pe[0];else for(i=0,y=0;i<xe-1;i++)if(B=pe[i],V=pe[i+1],u=B.distanceTo(V),y+=u,y>o){J=(y-o)/u,lt=[V.x-J*(V.x-B.x),V.y-J*(V.y-B.y)];break}var Pe=e.unproject(nt(lt));return yt([Pe.lat+vt.lat,Pe.lng+vt.lng])}var Br={__proto__:null,simplify:Dr,pointToSegmentDistance:fi,closestPointOnSegment:Ar,clipSegment:Ir,_getEdgeIntersection:ki,_getBitCode:di,_sqClosestPointOnSegment:qi,isFlat:Ee,_flat:Vi,polylineCenter:Yn},Kn={project:function(t){return new ot(t.lng,t.lat)},unproject:function(t){return new it(t.y,t.x)},bounds:new W([-180,-90],[180,90])},Xn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,o=t.lat*e,u=this.R_MINOR/i,y=Math.sqrt(1-u*u),B=y*Math.sin(o),V=Math.tan(Math.PI/4-o/2)/Math.pow((1-B)/(1+B),y/2);return o=-i*Math.log(Math.max(V,1e-10)),new ot(t.lng*e*i,o)},unproject:function(t){for(var e=180/Math.PI,i=this.R,o=this.R_MINOR/i,u=Math.sqrt(1-o*o),y=Math.exp(-t.y/i),B=Math.PI/2-2*Math.atan(y),V=0,J=.1,lt;V<15&&Math.abs(J)>1e-7;V++)lt=u*Math.sin(B),lt=Math.pow((1-lt)/(1+lt),u/2),J=Math.PI/2-2*Math.atan(y*lt)-B,B+=J;return new it(B*e,t.x*e/i)}},_n={__proto__:null,LonLat:Kn,Mercator:Xn,SphericalMercator:bt},_i=n({},St,{code:"EPSG:3395",projection:Xn,transformation:function(){var t=.5/(Math.PI*Xn.R);return Tt(t,.5,-t,.5)}()}),Rr=n({},St,{code:"EPSG:4326",projection:Kn,transformation:Tt(1/180,1,-1/180,.5)}),Nr=n({},Ht,{projection:Kn,transformation:Tt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(i*i+o*o)},infinite:!0});Ht.Earth=St,Ht.EPSG3395=_i,Ht.EPSG3857=Dt,Ht.EPSG900913=_,Ht.EPSG4326=Rr,Ht.Simple=Nr;var ye=tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[f(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[f(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Bt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=f(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=f(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return f(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?z(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[f(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=f(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var o in this._zoomBoundLayers){var u=this._zoomBoundLayers[o].options;t=u.minZoom===void 0?t:Math.min(t,u.minZoom),e=u.maxZoom===void 0?e:Math.max(e,u.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ei=ye.extend({initialize:function(t,e){p(this,e),this._layers={};var i,o;if(t)for(i=0,o=t.length;i<o;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,o;for(i in this._layers)o=this._layers[i],o[t]&&o[t].apply(o,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f(t)}}),Ti=function(t,e){return new Ei(t,e)},we=Ei.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ei.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ei.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new pt;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),ge=function(t,e){return new we(t,e)},Te=d.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(o,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(t,e){var i=this.options,o=i[e+"Size"];typeof o=="number"&&(o=[o,o]);var u=nt(o),y=nt(e==="shadow"&&i.shadowAnchor||i.iconAnchor||u&&u.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),y&&(t.style.marginLeft=-y.x+"px",t.style.marginTop=-y.y+"px"),u&&(t.style.width=u.x+"px",t.style.height=u.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return kt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function $n(t){return new Te(t)}var pi=Te.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof pi.imagePath!="string"&&(pi.imagePath=this._detectIconPath()),(this.options.imagePath||pi.imagePath)+Te.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,o,u){var y=o.exec(i);return y&&y[u]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ft("div","leaflet-default-icon-path",document.body),e=Zi(t,"background-image")||Zi(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Zr=Ue.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ni(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ot(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,o=this._marker.options.autoPanSpeed,u=this._marker.options.autoPanPadding,y=hi(e._icon),B=i.getPixelBounds(),V=i.getPixelOrigin(),J=H(B.min._subtract(V).add(u),B.max._subtract(V).subtract(u));if(!J.contains(y)){var lt=nt((Math.max(J.max.x,y.x)-J.max.x)/(B.max.x-J.max.x)-(Math.min(J.min.x,y.x)-J.min.x)/(B.min.x-J.min.x),(Math.max(J.max.y,y.y)-J.max.y)/(B.max.y-J.max.y)-(Math.min(J.min.y,y.y)-J.min.y)/(B.min.y-J.min.y)).multiplyBy(o);i.panBy(lt,{animate:!1}),this._draggable._newPos._add(lt),this._draggable._startPos._add(lt),te(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=K(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,o=hi(e._icon),u=e._map.layerPointToLatLng(o);i&&te(i,o),e._latlng=u,t.latlng=u,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),mi=ye.extend({options:{icon:new pi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=yt(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=yt(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),Ot(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(i,"focus",this._panOnFocus,this);var u=t.icon.createShadow(this._shadow),y=!1;u!==this._shadow&&(this._removeShadow(),y=!0),u&&(Ot(u,e),u.alt=""),this._shadow=u,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),u&&y&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),$t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$t(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&te(this._icon,t),this._shadow&&te(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Zr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Zr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?nt(e.iconSize):nt(0,0),o=e.iconAnchor?nt(e.iconAnchor):nt(0,0);t.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:i.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pn(t,e){return new mi(t,e)}var re=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ve=re.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=yt(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=yt(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return re.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),o=[t+i,e+i];this._pxBounds=new W(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fr(t,e){return new Ve(t,e)}var Pi=Ve.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=n({},i,{radius:e})),p(this,e),this._latlng=yt(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new pt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:re.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,o=i.options.crs;if(o.distance===St.distance){var u=Math.PI/180,y=this._mRadius/St.R/u,B=i.project([e+y,t]),V=i.project([e-y,t]),J=B.add(V).divideBy(2),lt=i.unproject(J).lat,vt=Math.acos((Math.cos(y*u)-Math.sin(e*u)*Math.sin(lt*u))/(Math.cos(e*u)*Math.cos(lt*u)))/u;(isNaN(vt)||vt===0)&&(vt=y/Math.cos(Math.PI/180*e)),this._point=J.subtract(i.getPixelOrigin()),this._radius=isNaN(vt)?0:J.x-i.project([lt,t-vt]).x,this._radiusY=J.y-B.y}else{var Pt=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(Pt).x}this._updateBounds()}});function mn(t,e,i){return new Pi(t,e,i)}var Ge=re.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,o=qi,u,y,B=0,V=this._parts.length;B<V;B++)for(var J=this._parts[B],lt=1,vt=J.length;lt<vt;lt++){u=J[lt-1],y=J[lt];var Pt=o(t,u,y,!0);Pt<e&&(e=Pt,i=o(t,u,y))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=yt(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new pt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ee(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Ee(t),o=0,u=t.length;o<u;o++)i?(e[o]=yt(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new ot(t,t);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var o=t[0]instanceof it,u=t.length,y,B;if(o){for(B=[],y=0;y<u;y++)B[y]=this._map.latLngToLayerPoint(t[y]),i.extend(B[y]);e.push(B)}else for(y=0;y<u;y++)this._projectLatlngs(t[y],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,o,u,y,B,V,J;for(i=0,u=0,y=this._rings.length;i<y;i++)for(J=this._rings[i],o=0,B=J.length;o<B-1;o++)V=Ir(J[o],J[o+1],t,o,!0),V&&(e[u]=e[u]||[],e[u].push(V[0]),(V[1]!==J[o+1]||o===B-2)&&(e[u].push(V[1]),u++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,o=t.length;i<o;i++)t[i]=Dr(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,o,u,y,B,V,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,y=this._parts.length;i<y;i++)for(V=this._parts[i],o=0,B=V.length,u=B-1;o<B;u=o++)if(!(!e&&o===0)&&fi(t,V[u],V[o])<=J)return!0;return!1}});function Ur(t,e){return new Ge(t,e)}Ge._flat=Vi;var gi=Ge.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Or(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ge.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof it&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Ge.prototype._setLatLngs.call(this,t),Ee(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ee(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new ot(e,e);if(t=new W(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,u=this._rings.length,y;o<u;o++)y=Cr(this._rings[o],t,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,o,u,y,B,V,J,lt;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(y=0,J=this._parts.length;y<J;y++)for(i=this._parts[y],B=0,lt=i.length,V=lt-1;B<lt;V=B++)o=i[B],u=i[V],o.y>t.y!=u.y>t.y&&t.x<(u.x-o.x)*(t.y-o.y)/(u.y-o.y)+o.x&&(e=!e);return e||Ge.prototype._containsPoint.call(this,t,!0)}});function Hr(t,e){return new gi(t,e)}var _e=we.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=z(t)?t:t.features,i,o,u;if(e){for(i=0,o=e.length;i<o;i++)u=e[i],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(u);return this}var y=this.options;if(y.filter&&!y.filter(t))return this;var B=ji(t,y);return B?(B.feature=l(t),B.defaultOptions=B.options,this.resetStyle(B),y.onEachFeature&&y.onEachFeature(t,B),this.addLayer(B)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ji(t,e){var i=t.type==="Feature"?t.geometry:t,o=i?i.coordinates:null,u=[],y=e&&e.pointToLayer,B=e&&e.coordsToLatLng||gn,V,J,lt,vt;if(!o&&!i)return null;switch(i.type){case"Point":return V=B(o),Gr(y,t,V,e);case"MultiPoint":for(lt=0,vt=o.length;lt<vt;lt++)V=B(o[lt]),u.push(Gr(y,t,V,e));return new we(u);case"LineString":case"MultiLineString":return J=Si(o,i.type==="LineString"?0:1,B),new Ge(J,e);case"Polygon":case"MultiPolygon":return J=Si(o,i.type==="Polygon"?1:2,B),new gi(J,e);case"GeometryCollection":for(lt=0,vt=i.geometries.length;lt<vt;lt++){var Pt=ji({geometry:i.geometries[lt],type:"Feature",properties:t.properties},e);Pt&&u.push(Pt)}return new we(u);case"FeatureCollection":for(lt=0,vt=i.features.length;lt<vt;lt++){var It=ji(i.features[lt],e);It&&u.push(It)}return new we(u);default:throw new Error("Invalid GeoJSON object.")}}function Gr(t,e,i,o){return t?t(e,i):new mi(i,o&&o.markersInheritOptions&&o)}function gn(t){return new it(t[1],t[0],t[2])}function Si(t,e,i){for(var o=[],u=0,y=t.length,B;u<y;u++)B=e?Si(t[u],e-1,i):(i||gn)(t[u]),o.push(B);return o}function vn(t,e){return t=yt(t),t.alt!==void 0?[E(t.lng,e),E(t.lat,e),E(t.alt,e)]:[E(t.lng,e),E(t.lat,e)]}function Yi(t,e,i,o){for(var u=[],y=0,B=t.length;y<B;y++)u.push(e?Yi(t[y],Ee(t[y])?0:e-1,i,o):vn(t[y],o));return!e&&i&&u.length>0&&u.push(u[0].slice()),u}function vi(t,e){return t.feature?n({},t.feature,{geometry:e}):l(e)}function l(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var k={toGeoJSON:function(t){return vi(this,{type:"Point",coordinates:vn(this.getLatLng(),t)})}};mi.include(k),Pi.include(k),Ve.include(k),Ge.include({toGeoJSON:function(t){var e=!Ee(this._latlngs),i=Yi(this._latlngs,e?1:0,!1,t);return vi(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),gi.include({toGeoJSON:function(t){var e=!Ee(this._latlngs),i=e&&!Ee(this._latlngs[0]),o=Yi(this._latlngs,i?2:e?1:0,!0,t);return e||(o=[o]),vi(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})}}),Ei.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),vi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",o=[];return this.eachLayer(function(u){if(u.toGeoJSON){var y=u.toGeoJSON(t);if(i)o.push(y.geometry);else{var B=l(y);B.type==="FeatureCollection"?o.push.apply(o,B.features):o.push(B)}}}),i?vi(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function I(t,e){return new _e(t,e)}var Q=I,_t=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=ht(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&bi(this._image),this},bringToBack:function(){return this._map&&ve(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ht(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:Ft("img");if(Ot(e,"leaflet-image-layer"),this._zoomAnimated&&Ot(e,"leaflet-zoom-animated"),this.options.className&&Ot(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onload=s(this.fire,this,"load"),e.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ue(this._image,i,e)},_reset:function(){var t=this._image,e=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();te(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),dt=function(t,e,i){return new _t(t,e,i)},gt=_t.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:Ft("video");if(Ot(e,"leaflet-image-layer"),this._zoomAnimated&&Ot(e,"leaflet-zoom-animated"),this.options.className&&Ot(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onloadeddata=s(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),o=[],u=0;u<i.length;u++)o.push(i[u].src);this._url=i.length>0?o:[e.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var B=Ft("source");B.src=this._url[y],e.appendChild(B)}}});function Et(t,e,i){return new gt(t,e,i)}var Ct=_t.extend({_initImage:function(){var t=this._image=this._url;Ot(t,"leaflet-image-layer"),this._zoomAnimated&&Ot(t,"leaflet-zoom-animated"),this.options.className&&Ot(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function qt(t,e,i){return new Ct(t,e,i)}var At=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof it||z(t))?(this._latlng=yt(t),p(this,e)):(p(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront(),this.options.interactive&&(Ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(s($t,void 0,this._container),200)):$t(this._container),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=yt(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bi(this._container),this},bringToBack:function(){return this._map&&ve(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof we){e=null;var i=this._source._layers;for(var o in i)if(i[o]._map){e=i[o];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=nt(this.options.offset),i=this._getAnchor();this._zoomAnimated?te(this._container,t.add(i)):e=e.add(t).add(i);var o=this._containerBottom=-e.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=u+"px"}},_getAnchor:function(){return[0,0]}});Bt.include({_initOverlay:function(t,e,i,o){var u=e;return u instanceof t||(u=new t(o).setContent(e)),i&&u.setLatLng(i),u}}),ye.include({_initOverlay:function(t,e,i,o){var u=i;return u instanceof t?(p(u,o),u._source=this):(u=e&&!o?e:new t(o,this),u.setContent(i)),u}});var Vt=At.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,At.prototype.openOn.call(this,t)},onAdd:function(t){At.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof re||this._source.on("preclick",ci))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof re||this._source.off("preclick",ci))},getEvents:function(){var t=At.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=Ft("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=Ft("div",t+"-content-wrapper",e);if(this._contentNode=Ft("div",t+"-content",i),xi(e),Fn(this._contentNode),Mt(e,"contextmenu",ci),this._tipContainer=Ft("div",t+"-tip-container",e),this._tip=Ft("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=Ft("a",t+"-close-button",e);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(o,"click",function(u){ce(u),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,u=this.options.maxHeight,y="leaflet-popup-scrolled";u&&o>u?(e.height=u+"px",Ot(t,y)):Qt(t,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();te(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Zi(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,o=this._containerWidth,u=new ot(this._containerLeft,-i-this._containerBottom);u._add(hi(this._container));var y=t.layerPointToContainerPoint(u),B=nt(this.options.autoPanPadding),V=nt(this.options.autoPanPaddingTopLeft||B),J=nt(this.options.autoPanPaddingBottomRight||B),lt=t.getSize(),vt=0,Pt=0;y.x+o+J.x>lt.x&&(vt=y.x+o-lt.x+J.x),y.x-vt-V.x<0&&(vt=y.x-V.x),y.y+i+J.y>lt.y&&(Pt=y.y+i-lt.y+J.y),y.y-Pt-V.y<0&&(Pt=y.y-V.y),(vt||Pt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([vt,Pt]))}},_getAnchor:function(){return nt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oe=function(t,e){return new Vt(t,e)};Bt.mergeOptions({closePopupOnClick:!0}),Bt.include({openPopup:function(t,e,i){return this._initOverlay(Vt,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),ye.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Vt,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof we||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ii(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof re)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ee=At.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){At.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=At.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,o=this._map,u=this._container,y=o.latLngToContainerPoint(o.getCenter()),B=o.layerPointToContainerPoint(t),V=this.options.direction,J=u.offsetWidth,lt=u.offsetHeight,vt=nt(this.options.offset),Pt=this._getAnchor();V==="top"?(e=J/2,i=lt):V==="bottom"?(e=J/2,i=0):V==="center"?(e=J/2,i=lt/2):V==="right"?(e=0,i=lt/2):V==="left"?(e=J,i=lt/2):B.x<y.x?(V="right",e=0,i=lt/2):(V="left",e=J+(vt.x+Pt.x)*2,i=lt/2),t=t.subtract(nt(e,i,!0)).add(vt).add(Pt),Qt(u,"leaflet-tooltip-right"),Qt(u,"leaflet-tooltip-left"),Qt(u,"leaflet-tooltip-top"),Qt(u,"leaflet-tooltip-bottom"),Ot(u,"leaflet-tooltip-"+V),te(u,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return nt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fe=function(t,e){return new ee(t,e)};Bt.include({openTooltip:function(t,e,i){return this._initOverlay(ee,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),ye.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ee,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof we||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(Mt(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Mt(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,o;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(e)}});var je=Te.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(an(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var o=nt(i.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ye(t){return new je(t)}Te.Default=pi;var Oe=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),$t(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ve(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof ot?t:new ot(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),o=0,u=e.length,y;o<u;o++)y=e[o].style.zIndex,e[o]!==this._container&&y&&(i=t(i,+y));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!kt.ielt9){me(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var o in this._tiles){var u=this._tiles[o];if(!(!u.current||!u.loaded)){var y=Math.min(1,(t-u.loaded)/200);me(u.el,y),y<1?e=!0:(u.active?i=!0:this._onOpaqueTile(u),u.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(O(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):($t(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var o=this._levels[t],u=this._map;return o||(o=this._levels[t]={},o.el=Ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=u.project(u.unproject(u.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,u.getCenter(),u.getZoom()),g(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)$t(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,o){var u=Math.floor(t/2),y=Math.floor(e/2),B=i-1,V=new ot(+u,+y);V.z=+B;var J=this._tileCoordsToKey(V),lt=this._tiles[J];return lt&&lt.active?(lt.retain=!0,!0):(lt&&lt.loaded&&(lt.retain=!0),B>o?this._retainParent(u,y,B,o):!1)},_retainChildren:function(t,e,i,o){for(var u=2*t;u<2*t+2;u++)for(var y=2*e;y<2*e+2;y++){var B=new ot(u,y);B.z=i+1;var V=this._tileCoordsToKey(B),J=this._tiles[V];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);i+1<o&&this._retainChildren(u,y,i+1,o)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,o){var u=Math.round(e);this.options.maxZoom!==void 0&&u>this.options.maxZoom||this.options.minZoom!==void 0&&u<this.options.minZoom?u=void 0:u=this._clampZoom(u);var y=this.options.updateWhenZooming&&u!==this._tileZoom;(!o||y)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var o=this._map.getZoomScale(i,t.zoom),u=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,i)).round();kt.any3d?ue(t.el,u,o):te(t.el,u)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),o=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(i,this._tileZoom),u=e.project(t,this._tileZoom).floor(),y=e.getSize().divideBy(o*2);return new W(u.subtract(y),u.add(y))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(t),u=this._pxBoundsToTileRange(o),y=u.getCenter(),B=[],V=this.options.keepBuffer,J=new W(u.getBottomLeft().subtract([V,-V]),u.getTopRight().add([V,-V]));if(!(isFinite(u.min.x)&&isFinite(u.min.y)&&isFinite(u.max.x)&&isFinite(u.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var lt in this._tiles){var vt=this._tiles[lt].coords;(vt.z!==this._tileZoom||!J.contains(new ot(vt.x,vt.y)))&&(this._tiles[lt].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var Pt=u.min.y;Pt<=u.max.y;Pt++)for(var It=u.min.x;It<=u.max.x;It++){var xe=new ot(It,Pt);if(xe.z=this._tileZoom,!!this._isValidTile(xe)){var pe=this._tiles[this._tileCoordsToKey(xe)];pe?pe.current=!0:B.push(xe)}}if(B.sort(function(Pe,yn){return Pe.distanceTo(y)-yn.distanceTo(y)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var We=document.createDocumentFragment();for(It=0;It<B.length;It++)this._addTile(B[It],We);this._level.el.appendChild(We)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return ht(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),o=t.scaleBy(i),u=o.add(i),y=e.unproject(o,t.z),B=e.unproject(u,t.z);return[y,B]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new pt(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new ot(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&($t(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ot(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=g,t.onmousemove=g,kt.ielt9&&this.options.opacity<1&&me(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),u=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(u),this.createTile.length<2&&K(s(this._tileReady,this,t,null,u)),te(u,i),this._tiles[o]={el:u,coords:t,current:!0},e.appendChild(u),this.fire("tileloadstart",{tile:u,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);i=this._tiles[o],i&&(i.loaded=+new Date,this._map._fadeAnimated?(me(i.el,0),O(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(Ot(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),kt.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new ot(this._wrapX?w(t.x,this._wrapX):t.x,this._wrapY?w(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new W(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Wr(t){return new Oe(t)}var Ke=Oe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=p(this,e),e.detectRetina&&kt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Mt(i,"load",s(this._tileOnLoad,this,e,i)),Mt(i,"error",s(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:kt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return S(this._url,n(e,this.options))},_tileOnLoad:function(t,e){kt.ielt9?setTimeout(s(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,o=this.options.zoomOffset;return i&&(t=e-t),t+o},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=g,e.onerror=g,!e.complete)){e.src=M;var i=this._tiles[t].coords;$t(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",M),Oe.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===M))return Oe.prototype._tileReady.call(this,t,e,i)}});function Ki(t,e){return new Ke(t,e)}var es=Ke.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);e=p(this,e);var u=e.detectRetina&&kt.retina?2:1,y=this.getTileSize();i.width=y.x*u,i.height=y.y*u,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ke.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,o=H(i.project(e[0]),i.project(e[1])),u=o.min,y=o.max,B=(this._wmsVersion>=1.3&&this._crs===Rr?[u.y,u.x,y.y,y.x]:[u.x,u.y,y.x,y.y]).join(","),V=Ke.prototype.getTileUrl.call(this,t);return V+b(this.wmsParams,V,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function ua(t,e){return new es(t,e)}Ke.WMS=es,Ki.wms=ua;var yi=ye.extend({options:{padding:.1},initialize:function(t){p(this,t),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),u=this._map.project(this._center,e),y=o.multiplyBy(-i).add(u).subtract(this._map._getNewPixelOrigin(t,e));kt.any3d?ue(this._container,y,i):te(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new W(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),is=yi.extend({options:{tolerance:0},getEvents:function(){var t=yi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Mt(t,"mousemove",this._onMouseMove,this),Mt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,$t(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),o=kt.retina?2:1;te(e,t.min),e.width=o*i.x,e.height=o*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[f(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,o=e.prev;i?i.prev=o:this._drawLast=o,o?o.next=i:this._drawFirst=i,delete t._order,delete this._layers[f(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],o,u;for(u=0;u<e.length;u++){if(o=Number(e[u]),isNaN(o))return;i.push(o)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,o,u,y,B=t._parts,V=B.length,J=this._ctx;if(V){for(J.beginPath(),i=0;i<V;i++){for(o=0,u=B[i].length;o<u;o++)y=B[i][o],J[o?"lineTo":"moveTo"](y.x,y.y);e&&J.closePath()}this._fillStroke(J,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,o=Math.max(Math.round(t._radius),1),u=(Math.max(Math.round(t._radiusY),1)||o)/o;u!==1&&(i.save(),i.scale(1,u)),i.beginPath(),i.arc(e.x,e.y/u,o,0,Math.PI*2,!1),u!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,o,u=this._drawFirst;u;u=u.next)i=u.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(o=i);this._fireEvent(o?[o]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,o,u=this._drawFirst;u;u=u.next)i=u.layer,i.options.interactive&&i._containsPoint(e)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(Ot(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(i)i.prev=o;else return;o?o.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(o)o.next=i;else return;i?i.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function ns(t){return kt.canvas?new is(t):null}var Jn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ca={_initContainer:function(){this._container=Ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Jn("shape");Ot(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Jn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;$t(e),t.removeInteractiveTarget(e),delete this._layers[f(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,o=t.options,u=t._container;u.stroked=!!o.stroke,u.filled=!!o.fill,o.stroke?(e||(e=t._stroke=Jn("stroke")),u.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=z(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(u.removeChild(e),t._stroke=null),o.fill?(i||(i=t._fill=Jn("fill")),u.appendChild(i),i.color=o.fillColor||o.color,i.opacity=o.fillOpacity):i&&(u.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),o=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+o+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){bi(t._container)},_bringToBack:function(t){ve(t._container)}},qr=kt.vml?Jn:et,Qn=yi.extend({_initContainer:function(){this._container=qr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$t(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),te(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=qr("path");t.options.className&&Ot(e,t.options.className),t.options.interactive&&Ot(e,"leaflet-interactive"),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){$t(t._path),t.removeInteractiveTarget(t._path),delete this._layers[f(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),o=Math.max(Math.round(t._radiusY),1)||i,u="a"+i+","+o+" 0 1,0 ",y=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+u+i*2+",0 "+u+-i*2+",0 ";this._setPath(t,y)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){bi(t._path)},_bringToBack:function(t){ve(t._path)}});kt.vml&&Qn.include(ca);function rs(t){return kt.svg||kt.vml?new Qn(t):null}Bt.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ns(t)||rs(t)}});var os=gi.extend({initialize:function(t,e){gi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ht(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function fa(t,e){return new os(t,e)}Qn.create=qr,Qn.pointsToPath=X,_e.geometryToLayer=ji,_e.coordsToLatLng=gn,_e.coordsToLatLngs=Si,_e.latLngToCoords=vn,_e.latLngsToCoords=Yi,_e.getFeature=vi,_e.asFeature=l,Bt.mergeOptions({boxZoom:!0});var ss=Ue.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Fi(),Hi(),this._startPoint=this._map.mouseEventToContainerPoint(t),Mt(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ft("div","leaflet-zoom-box",this._container),Ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new W(this._point,this._startPoint),i=e.getSize();te(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&($t(this._box),Qt(this._container,"leaflet-crosshair")),Ui(),un(),Wt(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new pt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bt.addInitHook("addHandler","boxZoom",ss),Bt.mergeOptions({doubleClickZoom:!0});var as=Ue.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),o=e.options.zoomDelta,u=t.originalEvent.shiftKey?i-o:i+o;e.options.doubleClickZoom==="center"?e.setZoom(u):e.setZoomAround(t.containerPoint,u)}});Bt.addInitHook("addHandler","doubleClickZoom",as),Bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ls=Ue.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ni(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qt(this._map._container,"leaflet-grab"),Qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ht(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,u=(o-e+i)%t+e-i,y=(o+e+i)%t-e-i,B=Math.abs(u+i)<Math.abs(y+i)?u:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(t){var e=this._map,i=e.options,o=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{this._prunePositions(+new Date);var u=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,B=i.easeLinearity,V=u.multiplyBy(B/y),J=V.distanceTo([0,0]),lt=Math.min(i.inertiaMaxSpeed,J),vt=V.multiplyBy(lt/J),Pt=lt/(i.inertiaDeceleration*B),It=vt.multiplyBy(-Pt/2).round();!It.x&&!It.y?e.fire("moveend"):(It=e._limitOffset(It,e.options.maxBounds),K(function(){e.panBy(It,{duration:Pt,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});Bt.addInitHook("addHandler","dragging",ls),Bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hs=Ue.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Mt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,o,u;for(o=0,u=i.left.length;o<u;o++)e[i.left[o]]=[-1*t,0];for(o=0,u=i.right.length;o<u;o++)e[i.right[o]]=[t,0];for(o=0,u=i.down.length;o<u;o++)e[i.down[o]]=[0,t];for(o=0,u=i.up.length;o<u;o++)e[i.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,o,u;for(o=0,u=i.zoomIn.length;o<u;o++)e[i.zoomIn[o]]=t;for(o=0,u=i.zoomOut.length;o<u;o++)e[i.zoomOut[o]]=-t},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,o;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(o=this._panKeys[e],t.shiftKey&&(o=nt(o).multiplyBy(3)),i.options.maxBounds&&(o=i._limitOffset(nt(o),i.options.maxBounds)),i.options.worldCopyJump){var u=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(o)));i.panTo(u)}else i.panBy(o)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;ii(t)}}});Bt.addInitHook("addHandler","keyboard",hs),Bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var us=Ue.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Er(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),o),ii(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,y=i?Math.ceil(u/i)*i:u,B=t._limitZoom(e+(this._delta>0?y:-y))-e;this._delta=0,this._startTime=null,B&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+B):t.setZoomAround(this._lastMousePos,e+B))}});Bt.addInitHook("addHandler","scrollWheelZoom",us);var da=600;Bt.mergeOptions({tapHold:kt.touchNative&&kt.safari&&kt.mobile,tapTolerance:15});var cs=Ue.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new ot(e.clientX,e.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",ce),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),da),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Wt(document,"touchend",ce),Wt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new ot(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});Bt.addInitHook("addHandler","tapHold",cs),Bt.mergeOptions({touchZoom:kt.touch,bounceAtZoomLimits:!0});var fs=Ue.extend({addHooks:function(){Ot(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(o)._divideBy(2))),this._startDist=i.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),ce(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),u=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(u,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&u<1||this._zoom>e.getMaxZoom()&&u>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,u===1)return}else{var y=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(u===1&&y.x===0&&y.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var B=s(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(B,this,!0),ce(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bt.addInitHook("addHandler","touchZoom",fs),Bt.BoxZoom=ss,Bt.DoubleClickZoom=as,Bt.Drag=ls,Bt.Keyboard=hs,Bt.ScrollWheelZoom=us,Bt.TapHold=cs,Bt.TouchZoom=fs,a.Bounds=W,a.Browser=kt,a.CRS=Ht,a.Canvas=is,a.Circle=Pi,a.CircleMarker=Ve,a.Class=d,a.Control=Le,a.DivIcon=je,a.DivOverlay=At,a.DomEvent=wo,a.DomUtil=yo,a.Draggable=ni,a.Evented=tt,a.FeatureGroup=we,a.GeoJSON=_e,a.GridLayer=Oe,a.Handler=Ue,a.Icon=Te,a.ImageOverlay=_t,a.LatLng=it,a.LatLngBounds=pt,a.Layer=ye,a.LayerGroup=Ei,a.LineUtil=Br,a.Map=Bt,a.Marker=mi,a.Mixin=Eo,a.Path=re,a.Point=ot,a.PolyUtil=fn,a.Polygon=gi,a.Polyline=Ge,a.Popup=Vt,a.PosAnimation=Tr,a.Projection=_n,a.Rectangle=os,a.Renderer=yi,a.SVG=Qn,a.SVGOverlay=Ct,a.TileLayer=Ke,a.Tooltip=ee,a.Transformation=wt,a.Util=F,a.VideoOverlay=gt,a.bind=s,a.bounds=H,a.canvas=ns,a.circle=mn,a.circleMarker=Fr,a.control=Wi,a.divIcon=Ye,a.extend=n,a.featureGroup=ge,a.geoJSON=I,a.geoJson=Q,a.gridLayer=Wr,a.icon=$n,a.imageOverlay=dt,a.latLng=yt,a.latLngBounds=ht,a.layerGroup=Ti,a.map=bo,a.marker=pn,a.point=nt,a.polygon=Hr,a.polyline=Ur,a.popup=oe,a.rectangle=fa,a.setOptions=p,a.stamp=f,a.svg=rs,a.svgOverlay=qt,a.tileLayer=Ki,a.tooltip=fe,a.transformation=Tt,a.version=C,a.videoOverlay=Et;var _a=window.L;a.noConflict=function(){return window.L=_a,this},window.L=a})}(er,er.exports)),er.exports}var $l=Xl();const Jl=ts($l);(function(c,x,a){function C(n,r){for(;(n=n.parentElement)&&!n.classList.contains(r););return n}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(n,r){this._map=n,this._container=n._container,this._overlayPane=n._panes.overlayPane,this._popupPane=n._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(L.DomUtil.disableTextSelection(),n.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var n=this._markers.pop(),r=this._poly,s=r.getLatLngs(),h=s.splice(-1,1)[0];this._poly.setLatLngs(s),this._markerGroup.removeLayer(n),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(h,!1)}},addVertex:function(n){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(n)),this._poly.addLatLng(n),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent),s=this._map.layerPointToLatLng(r);this._currentLatLng=s,this._updateTooltip(s),this._updateGuide(r),this._mouseMarker.setLatLng(s),L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(n,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n),this._clickHandled=!0,this._disableNewMarkers();var r=n.originalEvent,s=r.clientX,h=r.clientY;this._startPoint.call(this,s,h)}},_startPoint:function(n,r){this._mouseDownOrigin=L.point(n,r)},_onMouseUp:function(n){var r=n.originalEvent,s=r.clientX,h=r.clientY;this._endPoint.call(this,s,h,n),this._clickHandled=null},_endPoint:function(n,r,s){if(this._mouseDownOrigin){var h=L.point(n,r).distanceTo(this._mouseDownOrigin),f=this._calculateFinishDistance(s.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(s.latlng),this._finishShape()):f<10&&L.Browser.touch?this._finishShape():Math.abs(h)<9*(c.devicePixelRatio||1)&&this.addVertex(s.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var r,s,h=n.originalEvent;!h.touches||!h.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=h.touches[0].clientX,s=h.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,s),this._endPoint.call(this,r,s,n),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var r;if(this._markers.length>0){var s;if(this.type===L.Draw.Polyline.TYPE)s=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;s=this._markers[0]}var h=this._map.latLngToContainerPoint(s.getLatLng()),f=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(f.getLatLng());r=h.distanceTo(m)}else r=1/0;return r},_updateFinishHandler:function(){var n=this._markers.length;n>1&&this._markers[n-1].on("click",this._finishShape,this),n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var r=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(n){var r=this._markers?this._markers.length:0;r>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),n))},_updateTooltip:function(n){var r=this._getTooltipText();n&&this._tooltip.updatePosition(n),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(n,r){var s,h,f,m=Math.floor(Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))),w=this.options.guidelineDistance,g=this.options.maxGuideLineLength,E=m>g?m-g:w;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));E<m;E+=this.options.guidelineDistance)s=E/m,h={x:Math.floor(n.x*(1-s)+s*r.x),y:Math.floor(n.y*(1-s)+s*r.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,h)},_updateGuideColor:function(n){if(this._guidesContainer)for(var r=0,s=this._guidesContainer.childNodes.length;r<s;r++)this._guidesContainer.childNodes[r].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var n,r,s=this.options.showLength;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=s?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),n},_updateRunningMeasure:function(n,r){var s,h,f=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(s=f-(r?2:1),h=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[s].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[s].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=h*(r?1:-1))},_getMeasurementString:function(){var n,r=this._currentLatLng,s=this._markers[this._markers.length-1].getLatLng();return n=L.GeometryUtil.isVersion07x()?s&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(s)*(this.options.factor||1):this._measurementRunningTotal||0:s&&r?this._measurementRunningTotal+this._map.distance(r,s)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(n,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,r){L.Draw.Polyline.prototype.initialize.call(this,n,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;n===1&&this._markers[0].on("click",this._finishShape,this),n>2&&(this._markers[n-1].on("dblclick",this._finishShape,this),n>3&&this._markers[n-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var n,r;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:n,subtext:r}},_getMeasurementString:function(){var n=this._area,r="";return n||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(r+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,r){var s;!this.options.allowIntersection&&this.options.showArea&&(s=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(s)),L.Draw.Polyline.prototype._vertexChanged.call(this,n,r)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),x.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(x,"mouseup",this._onMouseUp,this),L.DomEvent.off(x,"touchend",this._onMouseUp,this),x.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0,this._startLatLng=n.latlng,L.DomEvent.on(x,"mouseup",this._onMouseUp,this).on(x,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(n,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!C(n.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var n,r,s,h=L.Draw.SimpleShape.prototype._getTooltipText.call(this),f=this._shape,m=this.options.showArea;return f&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(n),s=m?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:h.text,subtext:s}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n),this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},_drawShape:function(n){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(n);else var r=this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var r,s=n.latlng,h=this.options.showRadius,f=this.options.metric;if(this._tooltip.updatePosition(s),this._isDrawing){this._drawShape(s),r=this._shape.getRadius().toFixed(1);var m="";h&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,f,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(n,r){this._marker=n,L.setOptions(this,r)},addHooks:function(){var n=this._marker;n.dragging.enable(),n.on("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging.disable(),n.off("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},_onDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,r){var s=parseInt(n.style.marginTop,10)-r,h=parseInt(n.style.marginLeft,10)-r;n.style.marginTop=s+"px",n.style.marginLeft=h+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs],n._holes&&(this.latlngs=this.latlngs.concat(n._holes)),this._poly=n,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var r=0;r<this._verticesHandlers.length;r++)n(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs],n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,r,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=n,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this._latlngs=r,L.setOptions(this,s)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,r=n._path;n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1)),r&&n.options.editing&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(s){L.DomUtil.removeClass(r,s)}),n.options.editing.className.split(" ").forEach(function(s){L.DomUtil.addClass(r,s)})),n.setStyle(n.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,r=n._path;r&&n.options.editing&&n.options.editing.className&&(n.options.editing.className.split(" ").forEach(function(s){L.DomUtil.removeClass(r,s)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(s){L.DomUtil.addClass(r,s)})),n.setStyle(n.options.original),n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var n,r,s,h,f=this._defaultShape();for(n=0,s=f.length;n<s;n++)h=this._createMarker(f[n],n),h.on("click",this._onMarkerClick,this),h.on("contextmenu",this._onContextMenu,this),this._markers.push(h);var m,w;for(n=0,r=s-1;n<s;r=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[r],w=this._markers[n],this._createMiddleMarker(m,w),this._updatePrevNext(m,w))},_createMarker:function(n,r){var s=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});return s._origLatLng=n,s._index=r,s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(s),s},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),r=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),r},_removeMarker:function(n){var r=n._index;this._markerGroup.removeLayer(n),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var r=n.target,s=this._poly,h=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),s.options.poly){var f=s._map._editTooltip;if(!s.options.poly.allowIntersection&&s.intersects()){L.extend(r._origLatLng,h),r.setLatLng(h);var m=s.options.color;s.setStyle({color:this.options.drawError.color}),f&&f.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){s.setStyle({color:m}),f&&f.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var w=this._poly.getLatLngs();this._poly._convertLatLngs(w,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(n){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,s=n.target;this._defaultShape().length<r||(this._removeMarker(s),this._updatePrevNext(s._prev,s._next),s._middleLeft&&this._markerGroup.removeLayer(s._middleLeft),s._middleRight&&this._markerGroup.removeLayer(s._middleRight),s._prev&&s._next?this._createMiddleMarker(s._prev,s._next):s._prev?s._next||(s._prev._middleRight=null):s._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var r=n.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),s=this._map.layerPointToLatLng(r),h=n.target;L.extend(h._origLatLng,s),h._middleLeft&&h._middleLeft.setLatLng(this._getMiddleLatLng(h._prev,h)),h._middleRight&&h._middleRight.setLatLng(this._getMiddleLatLng(h,h._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(n,r){this._markerGroup.eachLayer(function(s){s._index>n&&(s._index+=r)})},_createMiddleMarker:function(n,r){var s,h,f,m=this._getMiddleLatLng(n,r),w=this._createMarker(m);w.setOpacity(.6),n._middleRight=r._middleLeft=w,h=function(){w.off("touchmove",h,this);var g=r._index;w._index=g,w.off("click",s,this).on("click",this._onMarkerClick,this),m.lat=w.getLatLng().lat,m.lng=w.getLatLng().lng,this._spliceLatLngs(g,0,m),this._markers.splice(g,0,w),w.setOpacity(1),this._updateIndexes(g,1),r._index++,this._updatePrevNext(n,w),this._updatePrevNext(w,r),this._poly.fire("editstart")},f=function(){w.off("dragstart",h,this),w.off("dragend",f,this),w.off("touchmove",h,this),this._createMiddleMarker(n,w),this._createMiddleMarker(w,r)},s=function(){h.call(this),f.call(this),this._fireEdit()},w.on("click",s,this).on("dragstart",h,this).on("dragend",f,this).on("touchmove",h,this),this._markerGroup.addLayer(w)},_updatePrevNext:function(n,r){n&&(n._next=r),r&&(r._prev=n)},_getMiddleLatLng:function(n,r){var s=this._poly._map,h=s.project(n.getLatLng()),f=s.project(r.getLatLng());return s.unproject(h._add(f)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=n,L.Util.setOptions(this,r)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var n=this._shape;if(n.setStyle(n.options.original),n._map){this._unbindMarker(this._moveMarker);for(var r=0,s=this._resizeMarkers.length;r<s;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,r){var s=new L.Marker.Touch(n,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(s),this._markerGroup.addLayer(s),s},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){n.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(n){var r=n.target,s=r.getLatLng();r===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){n.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var r=this._getCorners(),s=n.target,h=s._cornerIndex;s.setOpacity(0),this._oppositeCorner=r[(h+2)%4],this._toggleCornerMarkers(0,h)}this._shape.fire("editstart")},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),s=this._map.layerPointToLatLng(r);return n.target===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),!1},_onTouchEnd:function(n){n.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),r=n.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var n=this._getCorners();this._resizeMarkers=[];for(var r=0,s=n.length;r<s;r++)this._resizeMarkers.push(this._createMarker(n[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var r=this._getCorners(),s=n.target,h=s._cornerIndex;this._oppositeCorner=r[(h+2)%4],this._toggleCornerMarkers(0,h)},_onMarkerDragEnd:function(n){var r,s,h=n.target;h===this._moveMarker&&(r=this._shape.getBounds(),s=r.getCenter(),h.setLatLng(s)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var r,s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),h=this._shape.getBounds(),f=h.getCenter(),m=[],w=0,g=s.length;w<g;w++)r=[s[w].lat-f.lat,s[w].lng-f.lng],m.push([n.lat+r[0],n.lng+r[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var r;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds();return[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest()]},_toggleCornerMarkers:function(n){for(var r=0,s=this._resizeMarkers.length;r<s;r++)this._resizeMarkers[r].setOpacity(n)},_repositionCornerMarkers:function(){for(var n=this._getCorners(),r=0,s=this._resizeMarkers.length;r<s;r++)this._resizeMarkers[r].setLatLng(n[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(n),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),r=this._getResizeMarkerPoint(n);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var r=this._shape._radius*Math.cos(Math.PI/4),s=this._map.project(n);return this._map.unproject([s.x+r,s.y-r])},_resize:function(n){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(n):radius=this._map.distance(r,n),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(n,r){var s={};if(n.touches!==void 0){if(!n.touches.length)return;s=n.touches[0]}else if(n.pointerType!=="touch"||(s=n,!this._filterClick(n)))return;var h=this._map.mouseEventToContainerPoint(s),f=this._map.mouseEventToLayerPoint(s),m=this._map.layerPointToLatLng(f);this._map.fire(r,{latlng:m,layerPoint:f,containerPoint:h,pageX:s.pageX,pageY:s.pageY,originalEvent:n})},_filterClick:function(n){var r=n.timeStamp||n.originalEvent.timeStamp,s=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return s&&s>100&&s<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(n){this._map._loaded&&this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){this._map._loaded&&this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(n,r)}},_onTouchLeave:function(n){this._map._loaded&&this._touchEvent(n,"touchleave")},_onTouchMove:function(n){this._map._loaded&&this._touchEvent(n,"touchmove")},_detectIE:function(){var n=c.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var h=n.indexOf("Edge/");return h>0&&parseInt(n.substring(h+5,n.indexOf(".",h)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var n=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(n,"leaflet-clickable"),L.DomEvent.on(n,"click",this._onMouseClick,this),L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(var s=0;s<r.length;s++)L.DomEvent.on(n,r[s],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var n=c.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var h=n.indexOf("Edge/");return h>0&&parseInt(n.substring(h+5,n.indexOf(".",h)),10)}}),L.LatLngUtil={cloneLatLngs:function(n){for(var r=[],s=0,h=n.length;s<h;s++)Array.isArray(n[s])?r.push(L.LatLngUtil.cloneLatLngs(n[s])):r.push(this.cloneLatLng(n[s]));return r},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var s,h,f=r.length,m=0,w=Math.PI/180;if(f>2){for(var g=0;g<f;g++)s=r[g],h=r[(g+1)%f],m+=(h.lng-s.lng)*w*(2+Math.sin(s.lat*w)+Math.sin(h.lat*w));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(r,s){var h=parseFloat(r).toFixed(s),f=L.drawLocal.format&&L.drawLocal.format.numeric,m=f&&f.delimiters,w=m&&m.thousands,g=m&&m.decimal;if(w||g){var E=h.split(".");h=w?E[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+w):E[0],g=g||".",E.length>1&&(h=h+g+E[1])}return h},readableArea:function(r,s,w){var f,m,w=L.Util.extend({},n,w);return s?(m=["ha","m"],type=typeof s,type==="string"?m=[s]:type!=="boolean"&&(m=s),f=r>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,w.km)+" km":r>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,w.ha)+" ha":L.GeometryUtil.formattedNumber(r,w.m)+" m"):(r/=.836127,f=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,w.mi)+" mi":r>=4840?L.GeometryUtil.formattedNumber(r/4840,w.ac)+" acres":L.GeometryUtil.formattedNumber(r,w.yd)+" yd"),f},readableDistance:function(r,s,h,f,g){var w,g=L.Util.extend({},n,g);switch(s?typeof s=="string"?s:"metric":h?"feet":f?"nauticalMile":"yards"){case"metric":w=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,g.km)+" km":L.GeometryUtil.formattedNumber(r,g.m)+" m";break;case"feet":r*=3.28083,w=L.GeometryUtil.formattedNumber(r,g.ft)+" ft";break;case"nauticalMile":r*=.53996,w=L.GeometryUtil.formattedNumber(r/1e3,g.nm)+" nm";break;case"yards":default:r*=1.09361,w=r>1760?L.GeometryUtil.formattedNumber(r/1760,g.mi)+" miles":L.GeometryUtil.formattedNumber(r,g.yd)+" yd"}return w},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,r,s,h){return this._checkCounterclockwise(n,s,h)!==this._checkCounterclockwise(r,s,h)&&this._checkCounterclockwise(n,r,s)!==this._checkCounterclockwise(n,r,h)},_checkCounterclockwise:function(n,r,s){return(s.y-n.y)*(r.x-n.x)>(r.y-n.y)*(s.x-n.x)}}),L.Polyline.include({intersects:function(){var n,r,s,h=this._getProjectedPoints(),f=h?h.length:0;if(this._tooFewPointsForIntersection())return!1;for(n=f-1;n>=3;n--)if(r=h[n-1],s=h[n],this._lineSegmentsIntersectsRange(r,s,n-2))return!0;return!1},newLatLngIntersects:function(n,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(n),r)},newPointIntersects:function(n,r){var s=this._getProjectedPoints(),h=s?s.length:0,f=s?s[h-1]:null,m=h-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(f,n,m,r?1:0)},_tooFewPointsForIntersection:function(n){var r=this._getProjectedPoints(),s=r?r.length:0;return s+=n||0,!r||s<=3},_lineSegmentsIntersectsRange:function(n,r,s,h){var f,m,w=this._getProjectedPoints();h=h||0;for(var g=s;g>h;g--)if(f=w[g-1],m=w[g],L.LineUtil.segmentsIntersect(n,r,f,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var n=[],r=this._defaultShape(),s=0;s<r.length;s++)n.push(this._map.latLngToLayerPoint(r[s]));return n}}),L.Polygon.include({intersects:function(){var n,r,s,h,f=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(n=f.length,r=f[0],s=f[n-1],h=n-2,this._lineSegmentsIntersectsRange(s,r,h,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(n){var r,s=L.DomUtil.create("div","leaflet-draw"),h=!1;for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(r=this._toolbars[f].addToolbar(n))&&(h||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),h=!0),s.appendChild(r));return s},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(n)},_toolbarEnabled:function(n){var r=n.target;for(var s in this._toolbars)this._toolbars[s]!==r&&this._toolbars[s].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var r,s=L.DomUtil.create("div","leaflet-draw-section"),h=0,f=this._toolbarClass||"",m=this.getModeHandlers(n);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,r=0;r<m.length;r++)m[r].enabled&&this._initModeHandler(m[r].handler,this._toolbarContainer,h++,f,m[r].title);if(h)return this._lastButtonIndex=--h,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),s.appendChild(this._toolbarContainer),s.appendChild(this._actionsContainer),s},removeToolbar:function(){for(var n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,s=this._actionButtons.length;r<s;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(n,r,s,h,f){var m=n.type;this._modes[m]={},this._modes[m].handler=n,this._modes[m].button=this._createButton({type:m,title:f,className:h+"-"+m,container:r,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=s,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!c.MSStream},_createButton:function(n){var r=L.DomUtil.create("a",n.className||"",n.container),s=L.DomUtil.create("span","sr-only",n.container);r.href="#",r.appendChild(s),n.title&&(r.title=n.title,s.innerHTML=n.title),n.text&&(r.innerHTML=n.text,s.innerHTML=n.text);var h=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,h,n.callback,n.context),r},_disposeButton:function(n,r){var s=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,s,r)},_handlerActivated:function(n){this.disable(),this._activeMode=this._modes[n.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(n){var r,s,h,f,m=this._actionsContainer,w=this.getActions(n),g=w.length;for(s=0,h=this._actionButtons.length;s<h;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var E=0;E<g;E++)"enabled"in w[E]&&!w[E].enabled||(r=L.DomUtil.create("li","",m),f=this._createButton({title:w[E].title,text:w[E].text,container:r,callback:w[E].callback,context:w[E].context}),this._actionButtons.push({button:f,callback:w[E].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,r=this._lastButtonIndex,s=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=s+"px",n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),n===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n,this._popupPane=n._panes.popupPane,this._visible=!1,this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"</span><br />":"")+"<span>"+n.text+"</span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var r=this._map.latLngToLayerPoint(n),s=this._container;return this._container&&(this._visible&&(s.style.visibility="inherit"),L.DomUtil.setPosition(s,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var r in this.options)this.options.hasOwnProperty(r)&&n[r]&&(n[r]=L.extend({},this.options[r],n[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var r in this._modes)this._modes.hasOwnProperty(r)&&n.hasOwnProperty(r)&&this._modes[r].handler.setOptions(n[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(n.edit.selectedPathOptions===void 0&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions)),n.remove&&(n.remove=L.extend({},this.options.remove,n.remove)),n.poly&&(n.poly=L.extend({},this.options.poly,n.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,n),this._selectedFeatureCount=0},getModeHandlers:function(n){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(n){var r=L.Toolbar.prototype.addToolbar.call(this,n);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var n,r=this.options.featureGroup,s=r.getLayers().length!==0;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,s?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,s?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),n._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(n.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var r=L.Util.stamp(n);this._uneditedLayerProps[r]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var r=L.Util.stamp(n);n.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[r].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[r].latlng),n.setRadius(this._uneditedLayerProps[r].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[r].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var r,s,h=n.layer||n.target||n;this._backupLayer(h),this.options.poly&&(s=L.Util.extend({},this.options.poly),h.options.poly=s),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=h.options.color,r.fillColor=h.options.fillColor),h.options.original=L.extend({},h.options),h.options.editing=r),h instanceof L.Marker?(h.editing&&h.editing.enable(),h.dragging.enable(),h.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):h.editing.enable()},_disableLayerEdit:function(n){var r=n.layer||n.target||n;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(n){var r=n.originalEvent.changedTouches[0],s=this._map.mouseEventToLayerPoint(r),h=this._map.layerPointToLatLng(s);n.target.setLatLng(h)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n),n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this),this.save()},_enableLayerDelete:function(n){(n.layer||n.target||n).on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var r=n.layer||n.target||n;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(n){var r=n.layer||n.target||n;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var ri=Fl(()=>Jl),Ql=Bi('<div style="height: 600px; width: 100%;" class="svelte-1ymq5l"></div>');function th(c,x){ao(x,!1);let a=rr(x,"selectedLayer",8),C=xn(),n=null,r=null;const s=ha(),h=m=>{n&&(r&&n.removeLayer(r),m?(r=ri().tileLayer(m.value,{attribution:m.attribution}),r.addTo(n)):(r=ri().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}),r.addTo(n)))};Hl(()=>{ri().GeometryUtil&&ri(ri().GeometryUtil.readableArea=function(g,E){const v=E?["m","ha","km"]:["ft","ac","mi"],P=E?[1e4,1e6]:[43560,27878400];let p=0;for(;g>P[p]&&p<P.length-1;)g/=P[p],p++;return`${g.toFixed(2)} ${v[p]}`}),n=ri().map(Ut(C)).setView([52.474,13.43],13),h(a());const m=new(ri()).FeatureGroup;n.addLayer(m);const w=new(ri()).Control.Draw({draw:{polyline:!1,polygon:!0,rectangle:!0,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:m}});n.addControl(w),n.on(ri().Draw.Event.CREATED,g=>{const{layer:E}=g;m.clearLayers(),m.addLayer(E),s("shapeDrawn",{layer:E})}),n.on("draw:edited",g=>{g.layers.eachLayer(v=>{const P=ri().GeometryUtil.geodesicArea(v.getLatLngs()[0]),p=v.getLatLngs()[0];s("shapeEdited",{layer:v,area:P,latlngs:p})})}),n.on("zoomend",()=>{s("mapZoomed",{zoom:n.getZoom()})})}),Vs(()=>Jo(a()),()=>{a()&&h(a())}),js(),Qo();var f=Ql();Zl(f,m=>ie(C,m),()=>Ut(C)),Ci(c,f),lo()}function Yr(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mo={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ps;function eh(){return Ps||(Ps=1,function(c,x){(function(a){c.exports=a()})(function(){return function a(C,n,r){function s(m,w){if(!n[m]){if(!C[m]){var g=typeof Yr=="function"&&Yr;if(!w&&g)return g(m,!0);if(h)return h(m,!0);var E=new Error("Cannot find module '"+m+"'");throw E.code="MODULE_NOT_FOUND",E}var v=n[m]={exports:{}};C[m][0].call(v.exports,function(P){var p=C[m][1][P];return s(p||P)},v,v.exports,a,C,n,r)}return n[m].exports}for(var h=typeof Yr=="function"&&Yr,f=0;f<r.length;f++)s(r[f]);return s}({1:[function(a,C,n){var r=a("./utils"),s=a("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var m,w,g,E,v,P,p,b=[],T=0,S=f.length,z=S,G=r.getTypeOf(f)!=="string";T<f.length;)z=S-T,g=G?(m=f[T++],w=T<S?f[T++]:0,T<S?f[T++]:0):(m=f.charCodeAt(T++),w=T<S?f.charCodeAt(T++):0,T<S?f.charCodeAt(T++):0),E=m>>2,v=(3&m)<<4|w>>4,P=1<z?(15&w)<<2|g>>6:64,p=2<z?63&g:64,b.push(h.charAt(E)+h.charAt(v)+h.charAt(P)+h.charAt(p));return b.join("")},n.decode=function(f){var m,w,g,E,v,P,p=0,b=0,T="data:";if(f.substr(0,T.length)===T)throw new Error("Invalid base64 input, it looks like a data url.");var S,z=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===h.charAt(64)&&z--,f.charAt(f.length-2)===h.charAt(64)&&z--,z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|z):new Array(0|z);p<f.length;)m=h.indexOf(f.charAt(p++))<<2|(E=h.indexOf(f.charAt(p++)))>>4,w=(15&E)<<4|(v=h.indexOf(f.charAt(p++)))>>2,g=(3&v)<<6|(P=h.indexOf(f.charAt(p++))),S[b++]=m,v!==64&&(S[b++]=w),P!==64&&(S[b++]=g);return S}},{"./support":30,"./utils":32}],2:[function(a,C,n){var r=a("./external"),s=a("./stream/DataWorker"),h=a("./stream/Crc32Probe"),f=a("./stream/DataLengthProbe");function m(w,g,E,v,P){this.compressedSize=w,this.uncompressedSize=g,this.crc32=E,this.compression=v,this.compressedContent=P}m.prototype={getContentWorker:function(){var w=new s(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),g=this;return w.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new s(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(w,g,E){return w.pipe(new h).pipe(new f("uncompressedSize")).pipe(g.compressWorker(E)).pipe(new f("compressedSize")).withStreamInfo("compression",g)},C.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,C,n){var r=a("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,C,n){var r=a("./utils"),s=function(){for(var h,f=[],m=0;m<256;m++){h=m;for(var w=0;w<8;w++)h=1&h?3988292384^h>>>1:h>>>1;f[m]=h}return f}();C.exports=function(h,f){return h!==void 0&&h.length?r.getTypeOf(h)!=="string"?function(m,w,g,E){var v=s,P=E+g;m^=-1;for(var p=E;p<P;p++)m=m>>>8^v[255&(m^w[p])];return-1^m}(0|f,h,h.length,0):function(m,w,g,E){var v=s,P=E+g;m^=-1;for(var p=E;p<P;p++)m=m>>>8^v[255&(m^w.charCodeAt(p))];return-1^m}(0|f,h,h.length,0):0}},{"./utils":32}],5:[function(a,C,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(a,C,n){var r=null;r=typeof Promise<"u"?Promise:a("lie"),C.exports={Promise:r}},{lie:37}],7:[function(a,C,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=a("pako"),h=a("./utils"),f=a("./stream/GenericWorker"),m=r?"uint8array":"array";function w(g,E){f.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=E,this.meta={}}n.magic="\b\0",h.inherits(w,f),w.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(m,g.data),!1)},w.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(E){g.push({data:E,meta:g.meta})}},n.compressWorker=function(g){return new w("Deflate",g)},n.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,C,n){function r(v,P){var p,b="";for(p=0;p<P;p++)b+=String.fromCharCode(255&v),v>>>=8;return b}function s(v,P,p,b,T,S){var z,G,M=v.file,U=v.compression,Z=S!==m.utf8encode,q=h.transformTo("string",S(M.name)),R=h.transformTo("string",m.utf8encode(M.name)),$=M.comment,K=h.transformTo("string",S($)),O=h.transformTo("string",m.utf8encode($)),F=R.length!==M.name.length,d=O.length!==$.length,j="",ct="",tt="",ot=M.dir,at=M.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};P&&!p||(nt.crc32=v.crc32,nt.compressedSize=v.compressedSize,nt.uncompressedSize=v.uncompressedSize);var W=0;P&&(W|=8),Z||!F&&!d||(W|=2048);var H=0,pt=0;ot&&(H|=16),T==="UNIX"?(pt=798,H|=function(it,yt){var Ht=it;return it||(Ht=yt?16893:33204),(65535&Ht)<<16}(M.unixPermissions,ot)):(pt=20,H|=function(it){return 63&(it||0)}(M.dosPermissions)),z=at.getUTCHours(),z<<=6,z|=at.getUTCMinutes(),z<<=5,z|=at.getUTCSeconds()/2,G=at.getUTCFullYear()-1980,G<<=4,G|=at.getUTCMonth()+1,G<<=5,G|=at.getUTCDate(),F&&(ct=r(1,1)+r(w(q),4)+R,j+="up"+r(ct.length,2)+ct),d&&(tt=r(1,1)+r(w(K),4)+O,j+="uc"+r(tt.length,2)+tt);var ht="";return ht+=`
\0`,ht+=r(W,2),ht+=U.magic,ht+=r(z,2),ht+=r(G,2),ht+=r(nt.crc32,4),ht+=r(nt.compressedSize,4),ht+=r(nt.uncompressedSize,4),ht+=r(q.length,2),ht+=r(j.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ht+q+j,dirRecord:g.CENTRAL_FILE_HEADER+r(pt,2)+ht+r(K.length,2)+"\0\0\0\0"+r(H,4)+r(b,4)+q+j+K}}var h=a("../utils"),f=a("../stream/GenericWorker"),m=a("../utf8"),w=a("../crc32"),g=a("../signature");function E(v,P,p,b){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=P,this.zipPlatform=p,this.encodeFileName=b,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(E,f),E.prototype.push=function(v){var P=v.meta.percent||0,p=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,f.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:p?(P+100*(p-b-1))/p:100}}))},E.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var P=this.streamFiles&&!v.file.dir;if(P){var p=s(v,P,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(v){this.accumulate=!1;var P=this.streamFiles&&!v.file.dir,p=s(v,P,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),P)this.push({data:function(b){return g.DATA_DESCRIPTOR+r(b.crc32,4)+r(b.compressedSize,4)+r(b.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var v=this.bytesWritten,P=0;P<this.dirRecords.length;P++)this.push({data:this.dirRecords[P],meta:{percent:100}});var p=this.bytesWritten-v,b=function(T,S,z,G,M){var U=h.transformTo("string",M(G));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(T,2)+r(T,2)+r(S,4)+r(z,4)+r(U.length,2)+U}(this.dirRecords.length,p,v,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(v){this._sources.push(v);var P=this;return v.on("data",function(p){P.processChunk(p)}),v.on("end",function(){P.closedSource(P.previous.streamInfo),P._sources.length?P.prepareNextSource():P.end()}),v.on("error",function(p){P.error(p)}),this},E.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(v){var P=this._sources;if(!f.prototype.error.call(this,v))return!1;for(var p=0;p<P.length;p++)try{P[p].error(v)}catch{}return!0},E.prototype.lock=function(){f.prototype.lock.call(this);for(var v=this._sources,P=0;P<v.length;P++)v[P].lock()},C.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,C,n){var r=a("../compressions"),s=a("./ZipFileWorker");n.generateWorker=function(h,f,m){var w=new s(f.streamFiles,m,f.platform,f.encodeFileName),g=0;try{h.forEach(function(E,v){g++;var P=function(S,z){var G=S||z,M=r[G];if(!M)throw new Error(G+" is not a valid compression method !");return M}(v.options.compression,f.compression),p=v.options.compressionOptions||f.compressionOptions||{},b=v.dir,T=v.date;v._compressWorker(P,p).withStreamInfo("file",{name:E,dir:b,date:T,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(w)}),w.entriesCount=g}catch(E){w.error(E)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,C,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new r;for(var h in this)typeof this[h]!="function"&&(s[h]=this[h]);return s}}(r.prototype=a("./object")).loadAsync=a("./load"),r.support=a("./support"),r.defaults=a("./defaults"),r.version="3.10.1",r.loadAsync=function(s,h){return new r().loadAsync(s,h)},r.external=a("./external"),C.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,C,n){var r=a("./utils"),s=a("./external"),h=a("./utf8"),f=a("./zipEntries"),m=a("./stream/Crc32Probe"),w=a("./nodejsUtils");function g(E){return new s.Promise(function(v,P){var p=E.decompressed.getContentWorker().pipe(new m);p.on("error",function(b){P(b)}).on("end",function(){p.streamInfo.crc32!==E.decompressed.crc32?P(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}C.exports=function(E,v){var P=this;return v=r.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),w.isNode&&w.isStream(E)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",E,!0,v.optimizedBinaryString,v.base64).then(function(p){var b=new f(v);return b.load(p),b}).then(function(p){var b=[s.Promise.resolve(p)],T=p.files;if(v.checkCRC32)for(var S=0;S<T.length;S++)b.push(g(T[S]));return s.Promise.all(b)}).then(function(p){for(var b=p.shift(),T=b.files,S=0;S<T.length;S++){var z=T[S],G=z.fileNameStr,M=r.resolve(z.fileNameStr);P.file(M,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:v.createFolders}),z.dir||(P.file(M).unsafeOriginalName=G)}return b.zipComment.length&&(P.comment=b.zipComment),P})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,C,n){var r=a("../utils"),s=a("../stream/GenericWorker");function h(f,m){s.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(m)}r.inherits(h,s),h.prototype._bindStream=function(f){var m=this;(this._stream=f).pause(),f.on("data",function(w){m.push({data:w,meta:{percent:0}})}).on("error",function(w){m.isPaused?this.generatedError=w:m.error(w)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},h.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},C.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,C,n){var r=a("readable-stream").Readable;function s(h,f,m){r.call(this,f),this._helper=h;var w=this;h.on("data",function(g,E){w.push(g)||w._helper.pause(),m&&m(E)}).on("error",function(g){w.emit("error",g)}).on("end",function(){w.push(null)})}a("../utils").inherits(s,r),s.prototype._read=function(){this._helper.resume()},C.exports=s},{"../utils":32,"readable-stream":16}],14:[function(a,C,n){C.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,s);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,s)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var s=new Buffer(r);return s.fill(0),s},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(a,C,n){function r(M,U,Z){var q,R=h.getTypeOf(U),$=h.extend(Z||{},w);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(M=T(M)),$.createFolders&&(q=b(M))&&S.call(this,q,!0);var K=R==="string"&&$.binary===!1&&$.base64===!1;Z&&Z.binary!==void 0||($.binary=!K),(U instanceof g&&U.uncompressedSize===0||$.dir||!U||U.length===0)&&($.base64=!1,$.binary=!0,U="",$.compression="STORE",R="string");var O=null;O=U instanceof g||U instanceof f?U:P.isNode&&P.isStream(U)?new p(M,U):h.prepareContent(M,U,$.binary,$.optimizedBinaryString,$.base64);var F=new E(M,O,$);this.files[M]=F}var s=a("./utf8"),h=a("./utils"),f=a("./stream/GenericWorker"),m=a("./stream/StreamHelper"),w=a("./defaults"),g=a("./compressedObject"),E=a("./zipObject"),v=a("./generate"),P=a("./nodejsUtils"),p=a("./nodejs/NodejsStreamInputAdapter"),b=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var U=M.lastIndexOf("/");return 0<U?M.substring(0,U):""},T=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},S=function(M,U){return U=U!==void 0?U:w.createFolders,M=T(M),this.files[M]||r.call(this,M,null,{dir:!0,createFolders:U}),this.files[M]};function z(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var G={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var U,Z,q;for(U in this.files)q=this.files[U],(Z=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&M(Z,q)},filter:function(M){var U=[];return this.forEach(function(Z,q){M(Z,q)&&U.push(q)}),U},file:function(M,U,Z){if(arguments.length!==1)return M=this.root+M,r.call(this,M,U,Z),this;if(z(M)){var q=M;return this.filter(function($,K){return!K.dir&&q.test($)})}var R=this.files[this.root+M];return R&&!R.dir?R:null},folder:function(M){if(!M)return this;if(z(M))return this.filter(function(R,$){return $.dir&&M.test(R)});var U=this.root+M,Z=S.call(this,U),q=this.clone();return q.root=Z.name,q},remove:function(M){M=this.root+M;var U=this.files[M];if(U||(M.slice(-1)!=="/"&&(M+="/"),U=this.files[M]),U&&!U.dir)delete this.files[M];else for(var Z=this.filter(function(R,$){return $.name.slice(0,M.length)===M}),q=0;q<Z.length;q++)delete this.files[Z[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var U,Z={};try{if((Z=h.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=Z.type.toLowerCase(),Z.compression=Z.compression.toUpperCase(),Z.type==="binarystring"&&(Z.type="string"),!Z.type)throw new Error("No output type specified.");h.checkSupport(Z.type),Z.platform!=="darwin"&&Z.platform!=="freebsd"&&Z.platform!=="linux"&&Z.platform!=="sunos"||(Z.platform="UNIX"),Z.platform==="win32"&&(Z.platform="DOS");var q=Z.comment||this.comment||"";U=v.generateWorker(this,Z,q)}catch(R){(U=new f("error")).error(R)}return new m(U,Z.type||"string",Z.mimeType)},generateAsync:function(M,U){return this.generateInternalStream(M).accumulate(U)},generateNodeStream:function(M,U){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(U)}};C.exports=G},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,C,n){C.exports=a("stream")},{stream:void 0}],17:[function(a,C,n){var r=a("./DataReader");function s(h){r.call(this,h);for(var f=0;f<this.data.length;f++)h[f]=255&h[f]}a("../utils").inherits(s,r),s.prototype.byteAt=function(h){return this.data[this.zero+h]},s.prototype.lastIndexOfSignature=function(h){for(var f=h.charCodeAt(0),m=h.charCodeAt(1),w=h.charCodeAt(2),g=h.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===f&&this.data[E+1]===m&&this.data[E+2]===w&&this.data[E+3]===g)return E-this.zero;return-1},s.prototype.readAndCheckSignature=function(h){var f=h.charCodeAt(0),m=h.charCodeAt(1),w=h.charCodeAt(2),g=h.charCodeAt(3),E=this.readData(4);return f===E[0]&&m===E[1]&&w===E[2]&&g===E[3]},s.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./DataReader":18}],18:[function(a,C,n){var r=a("../utils");function s(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var f,m=0;for(this.checkOffset(h),f=this.index+h-1;f>=this.index;f--)m=(m<<8)+this.byteAt(f);return this.index+=h,m},readString:function(h){return r.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},C.exports=s},{"../utils":32}],19:[function(a,C,n){var r=a("./Uint8ArrayReader");function s(h){r.call(this,h)}a("../utils").inherits(s,r),s.prototype.readData=function(h){this.checkOffset(h);var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,C,n){var r=a("./DataReader");function s(h){r.call(this,h)}a("../utils").inherits(s,r),s.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},s.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},s.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},s.prototype.readData=function(h){this.checkOffset(h);var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./DataReader":18}],21:[function(a,C,n){var r=a("./ArrayReader");function s(h){r.call(this,h)}a("../utils").inherits(s,r),s.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(a,C,n){var r=a("../utils"),s=a("../support"),h=a("./ArrayReader"),f=a("./StringReader"),m=a("./NodeBufferReader"),w=a("./Uint8ArrayReader");C.exports=function(g){var E=r.getTypeOf(g);return r.checkSupport(E),E!=="string"||s.uint8array?E==="nodebuffer"?new m(g):s.uint8array?new w(r.transformTo("uint8array",g)):new h(r.transformTo("array",g)):new f(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,C,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,C,n){var r=a("./GenericWorker"),s=a("../utils");function h(f){r.call(this,"ConvertWorker to "+f),this.destType=f}s.inherits(h,r),h.prototype.processChunk=function(f){this.push({data:s.transformTo(this.destType,f.data),meta:f.meta})},C.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(a,C,n){var r=a("./GenericWorker"),s=a("../crc32");function h(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(h,r),h.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},C.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,C,n){var r=a("../utils"),s=a("./GenericWorker");function h(f){s.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}r.inherits(h,s),h.prototype.processChunk=function(f){if(f){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+f.data.length}s.prototype.processChunk.call(this,f)},C.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(a,C,n){var r=a("../utils"),s=a("./GenericWorker");function h(f){s.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(w){m.dataIsReady=!0,m.data=w,m.max=w&&w.length||0,m.type=r.getTypeOf(w),m.isPaused||m._tickAndRepeat()},function(w){m.error(w)})}r.inherits(h,s),h.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,m);break;case"uint8array":f=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":f=this.data.slice(this.index,m)}return this.index=m,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},C.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(a,C,n){function r(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,h){return this._listeners[s].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,h){if(this._listeners[s])for(var f=0;f<this._listeners[s].length;f++)this._listeners[s][f].call(this,h)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var h=this;return s.on("data",function(f){h.processChunk(f)}),s.on("end",function(){h.end()}),s.on("error",function(f){h.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,h){return this.extraStreamInfo[s]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},C.exports=r},{}],29:[function(a,C,n){var r=a("../utils"),s=a("./ConvertWorker"),h=a("./GenericWorker"),f=a("../base64"),m=a("../support"),w=a("../external"),g=null;if(m.nodestream)try{g=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(P,p){return new w.Promise(function(b,T){var S=[],z=P._internalType,G=P._outputType,M=P._mimeType;P.on("data",function(U,Z){S.push(U),p&&p(Z)}).on("error",function(U){S=[],T(U)}).on("end",function(){try{var U=function(Z,q,R){switch(Z){case"blob":return r.newBlob(r.transformTo("arraybuffer",q),R);case"base64":return f.encode(q);default:return r.transformTo(Z,q)}}(G,function(Z,q){var R,$=0,K=null,O=0;for(R=0;R<q.length;R++)O+=q[R].length;switch(Z){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(K=new Uint8Array(O),R=0;R<q.length;R++)K.set(q[R],$),$+=q[R].length;return K;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+Z+"'")}}(z,S),M);b(U)}catch(Z){T(Z)}S=[]}).resume()})}function v(P,p,b){var T=p;switch(p){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string"}try{this._internalType=T,this._outputType=p,this._mimeType=b,r.checkSupport(T),this._worker=P.pipe(new s(T)),P.lock()}catch(S){this._worker=new h("error"),this._worker.error(S)}}v.prototype={accumulate:function(P){return E(this,P)},on:function(P,p){var b=this;return P==="data"?this._worker.on(P,function(T){p.call(b,T.data,T.meta)}):this._worker.on(P,function(){r.delay(p,arguments,b)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(P){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},P)}},C.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,C,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(r),n.blob=s.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!a("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(a,C,n){for(var r=a("./utils"),s=a("./support"),h=a("./nodejsUtils"),f=a("./stream/GenericWorker"),m=new Array(256),w=0;w<256;w++)m[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;m[254]=m[254]=1;function g(){f.call(this,"utf-8 decode"),this.leftOver=null}function E(){f.call(this,"utf-8 encode")}n.utf8encode=function(v){return s.nodebuffer?h.newBufferFrom(v,"utf-8"):function(P){var p,b,T,S,z,G=P.length,M=0;for(S=0;S<G;S++)(64512&(b=P.charCodeAt(S)))==55296&&S+1<G&&(64512&(T=P.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(T-56320),S++),M+=b<128?1:b<2048?2:b<65536?3:4;for(p=s.uint8array?new Uint8Array(M):new Array(M),S=z=0;z<M;S++)(64512&(b=P.charCodeAt(S)))==55296&&S+1<G&&(64512&(T=P.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(T-56320),S++),b<128?p[z++]=b:(b<2048?p[z++]=192|b>>>6:(b<65536?p[z++]=224|b>>>12:(p[z++]=240|b>>>18,p[z++]=128|b>>>12&63),p[z++]=128|b>>>6&63),p[z++]=128|63&b);return p}(v)},n.utf8decode=function(v){return s.nodebuffer?r.transformTo("nodebuffer",v).toString("utf-8"):function(P){var p,b,T,S,z=P.length,G=new Array(2*z);for(p=b=0;p<z;)if((T=P[p++])<128)G[b++]=T;else if(4<(S=m[T]))G[b++]=65533,p+=S-1;else{for(T&=S===2?31:S===3?15:7;1<S&&p<z;)T=T<<6|63&P[p++],S--;1<S?G[b++]=65533:T<65536?G[b++]=T:(T-=65536,G[b++]=55296|T>>10&1023,G[b++]=56320|1023&T)}return G.length!==b&&(G.subarray?G=G.subarray(0,b):G.length=b),r.applyFromCharCode(G)}(v=r.transformTo(s.uint8array?"uint8array":"array",v))},r.inherits(g,f),g.prototype.processChunk=function(v){var P=r.transformTo(s.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var p=P;(P=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),P.set(p,this.leftOver.length)}else P=this.leftOver.concat(P);this.leftOver=null}var b=function(S,z){var G;for((z=z||S.length)>S.length&&(z=S.length),G=z-1;0<=G&&(192&S[G])==128;)G--;return G<0||G===0?z:G+m[S[G]]>z?G:z}(P),T=P;b!==P.length&&(s.uint8array?(T=P.subarray(0,b),this.leftOver=P.subarray(b,P.length)):(T=P.slice(0,b),this.leftOver=P.slice(b,P.length))),this.push({data:n.utf8decode(T),meta:v.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=g,r.inherits(E,f),E.prototype.processChunk=function(v){this.push({data:n.utf8encode(v.data),meta:v.meta})},n.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,C,n){var r=a("./support"),s=a("./base64"),h=a("./nodejsUtils"),f=a("./external");function m(p){return p}function w(p,b){for(var T=0;T<p.length;++T)b[T]=255&p.charCodeAt(T);return b}a("setimmediate"),n.newBlob=function(p,b){n.checkSupport("blob");try{return new Blob([p],{type:b})}catch{try{var T=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return T.append(p),T.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(p,b,T){var S=[],z=0,G=p.length;if(G<=T)return String.fromCharCode.apply(null,p);for(;z<G;)b==="array"||b==="nodebuffer"?S.push(String.fromCharCode.apply(null,p.slice(z,Math.min(z+T,G)))):S.push(String.fromCharCode.apply(null,p.subarray(z,Math.min(z+T,G)))),z+=T;return S.join("")},stringifyByChar:function(p){for(var b="",T=0;T<p.length;T++)b+=String.fromCharCode(p[T]);return b},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function E(p){var b=65536,T=n.getTypeOf(p),S=!0;if(T==="uint8array"?S=g.applyCanBeUsed.uint8array:T==="nodebuffer"&&(S=g.applyCanBeUsed.nodebuffer),S)for(;1<b;)try{return g.stringifyByChunk(p,T,b)}catch{b=Math.floor(b/2)}return g.stringifyByChar(p)}function v(p,b){for(var T=0;T<p.length;T++)b[T]=p[T];return b}n.applyFromCharCode=E;var P={};P.string={string:m,array:function(p){return w(p,new Array(p.length))},arraybuffer:function(p){return P.string.uint8array(p).buffer},uint8array:function(p){return w(p,new Uint8Array(p.length))},nodebuffer:function(p){return w(p,h.allocBuffer(p.length))}},P.array={string:E,array:m,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return h.newBufferFrom(p)}},P.arraybuffer={string:function(p){return E(new Uint8Array(p))},array:function(p){return v(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:m,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return h.newBufferFrom(new Uint8Array(p))}},P.uint8array={string:E,array:function(p){return v(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:m,nodebuffer:function(p){return h.newBufferFrom(p)}},P.nodebuffer={string:E,array:function(p){return v(p,new Array(p.length))},arraybuffer:function(p){return P.nodebuffer.uint8array(p).buffer},uint8array:function(p){return v(p,new Uint8Array(p.length))},nodebuffer:m},n.transformTo=function(p,b){if(b=b||"",!p)return b;n.checkSupport(p);var T=n.getTypeOf(b);return P[T][p](b)},n.resolve=function(p){for(var b=p.split("/"),T=[],S=0;S<b.length;S++){var z=b[S];z==="."||z===""&&S!==0&&S!==b.length-1||(z===".."?T.pop():T.push(z))}return T.join("/")},n.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&h.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(p){var b,T,S="";for(T=0;T<(p||"").length;T++)S+="\\x"+((b=p.charCodeAt(T))<16?"0":"")+b.toString(16).toUpperCase();return S},n.delay=function(p,b,T){setImmediate(function(){p.apply(T||null,b||[])})},n.inherits=function(p,b){function T(){}T.prototype=b.prototype,p.prototype=new T},n.extend=function(){var p,b,T={};for(p=0;p<arguments.length;p++)for(b in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],b)&&T[b]===void 0&&(T[b]=arguments[p][b]);return T},n.prepareContent=function(p,b,T,S,z){return f.Promise.resolve(b).then(function(G){return r.blob&&(G instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(G))!==-1)&&typeof FileReader<"u"?new f.Promise(function(M,U){var Z=new FileReader;Z.onload=function(q){M(q.target.result)},Z.onerror=function(q){U(q.target.error)},Z.readAsArrayBuffer(G)}):G}).then(function(G){var M=n.getTypeOf(G);return M?(M==="arraybuffer"?G=n.transformTo("uint8array",G):M==="string"&&(z?G=s.decode(G):T&&S!==!0&&(G=function(U){return w(U,r.uint8array?new Uint8Array(U.length):new Array(U.length))}(G))),G):f.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,C,n){var r=a("./reader/readerFor"),s=a("./utils"),h=a("./signature"),f=a("./zipEntry"),m=a("./support");function w(g){this.files=[],this.loadOptions=g}w.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(E)+", expected "+s.pretty(g)+")")}},isSignature:function(g,E){var v=this.reader.index;this.reader.setIndex(g);var P=this.reader.readString(4)===E;return this.reader.setIndex(v),P},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),E=m.uint8array?"uint8array":"array",v=s.transformTo(E,g);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,E,v,P=this.zip64EndOfCentralSize-44;0<P;)g=this.reader.readInt(2),E=this.reader.readInt(4),v=this.reader.readData(E),this.zip64ExtensibleData[g]={id:g,length:E,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,E;for(g=0;g<this.files.length;g++)E=this.files[g],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(g=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var E=g;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var P=E-v;if(0<P)this.isSignature(E,h.CENTRAL_FILE_HEADER)||(this.reader.zero=P);else if(P<0)throw new Error("Corrupted zip: missing "+Math.abs(P)+" bytes.")},prepareReader:function(g){this.reader=r(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},C.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,C,n){var r=a("./reader/readerFor"),s=a("./utils"),h=a("./compressedObject"),f=a("./crc32"),m=a("./utf8"),w=a("./compressions"),g=a("./support");function E(v,P){this.options=v,this.loadOptions=P}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var P,p;if(v.skip(22),this.fileNameLength=v.readInt(2),p=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((P=function(b){for(var T in w)if(Object.prototype.hasOwnProperty.call(w,T)&&w[T].magic===b)return w[T];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,P,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var P=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(P),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=r(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var P,p,b,T=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<T;)P=v.readInt(2),p=v.readInt(2),b=v.readData(p),this.extraFields[P]={id:P,length:p,value:b};v.setIndex(T)},handleUTF8:function(){var v=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var P=this.findExtraFieldUnicodePath();if(P!==null)this.fileNameStr=P;else{var p=s.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var T=s.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(T)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var P=r(v.value);return P.readInt(1)!==1||f(this.fileName)!==P.readInt(4)?null:m.utf8decode(P.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var P=r(v.value);return P.readInt(1)!==1||f(this.fileComment)!==P.readInt(4)?null:m.utf8decode(P.readData(v.length-5))}return null}},C.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,C,n){function r(P,p,b){this.name=P,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=p,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var s=a("./stream/StreamHelper"),h=a("./stream/DataWorker"),f=a("./utf8"),m=a("./compressedObject"),w=a("./stream/GenericWorker");r.prototype={internalStream:function(P){var p=null,b="string";try{if(!P)throw new Error("No output type specified.");var T=(b=P.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),p=this._decompressWorker();var S=!this._dataBinary;S&&!T&&(p=p.pipe(new f.Utf8EncodeWorker)),!S&&T&&(p=p.pipe(new f.Utf8DecodeWorker))}catch(z){(p=new w("error")).error(z)}return new s(p,b,"")},async:function(P,p){return this.internalStream(P).accumulate(p)},nodeStream:function(P,p){return this.internalStream(P||"nodebuffer").toNodejsStream(p)},_compressWorker:function(P,p){if(this._data instanceof m&&this._data.compression.magic===P.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new f.Utf8EncodeWorker)),m.createWorkerFrom(b,P,p)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof w?this._data:new h(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<g.length;v++)r.prototype[g[v]]=E;C.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,C,n){(function(r){var s,h,f=r.MutationObserver||r.WebKitMutationObserver;if(f){var m=0,w=new f(P),g=r.document.createTextNode("");w.observe(g,{characterData:!0}),s=function(){g.data=m=++m%2}}else if(r.setImmediate||r.MessageChannel===void 0)s="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){P(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(P,0)};else{var E=new r.MessageChannel;E.port1.onmessage=P,s=function(){E.port2.postMessage(0)}}var v=[];function P(){var p,b;h=!0;for(var T=v.length;T;){for(b=v,v=[],p=-1;++p<T;)b[p]();T=v.length}h=!1}C.exports=function(p){v.push(p)!==1||h||s()}}).call(this,typeof Oi<"u"?Oi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,C,n){var r=a("immediate");function s(){}var h={},f=["REJECTED"],m=["FULFILLED"],w=["PENDING"];function g(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,T!==s&&p(this,T)}function E(T,S,z){this.promise=T,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function v(T,S,z){r(function(){var G;try{G=S(z)}catch(M){return h.reject(T,M)}G===T?h.reject(T,new TypeError("Cannot resolve promise with itself")):h.resolve(T,G)})}function P(T){var S=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof S=="function")return function(){S.apply(T,arguments)}}function p(T,S){var z=!1;function G(Z){z||(z=!0,h.reject(T,Z))}function M(Z){z||(z=!0,h.resolve(T,Z))}var U=b(function(){S(M,G)});U.status==="error"&&G(U.value)}function b(T,S){var z={};try{z.value=T(S),z.status="success"}catch(G){z.status="error",z.value=G}return z}(C.exports=g).prototype.finally=function(T){if(typeof T!="function")return this;var S=this.constructor;return this.then(function(z){return S.resolve(T()).then(function(){return z})},function(z){return S.resolve(T()).then(function(){throw z})})},g.prototype.catch=function(T){return this.then(null,T)},g.prototype.then=function(T,S){if(typeof T!="function"&&this.state===m||typeof S!="function"&&this.state===f)return this;var z=new this.constructor(s);return this.state!==w?v(z,this.state===m?T:S,this.outcome):this.queue.push(new E(z,T,S)),z},E.prototype.callFulfilled=function(T){h.resolve(this.promise,T)},E.prototype.otherCallFulfilled=function(T){v(this.promise,this.onFulfilled,T)},E.prototype.callRejected=function(T){h.reject(this.promise,T)},E.prototype.otherCallRejected=function(T){v(this.promise,this.onRejected,T)},h.resolve=function(T,S){var z=b(P,S);if(z.status==="error")return h.reject(T,z.value);var G=z.value;if(G)p(T,G);else{T.state=m,T.outcome=S;for(var M=-1,U=T.queue.length;++M<U;)T.queue[M].callFulfilled(S)}return T},h.reject=function(T,S){T.state=f,T.outcome=S;for(var z=-1,G=T.queue.length;++z<G;)T.queue[z].callRejected(S);return T},g.resolve=function(T){return T instanceof this?T:h.resolve(new this(s),T)},g.reject=function(T){var S=new this(s);return h.reject(S,T)},g.all=function(T){var S=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=T.length,G=!1;if(!z)return this.resolve([]);for(var M=new Array(z),U=0,Z=-1,q=new this(s);++Z<z;)R(T[Z],Z);return q;function R($,K){S.resolve($).then(function(O){M[K]=O,++U!==z||G||(G=!0,h.resolve(q,M))},function(O){G||(G=!0,h.reject(q,O))})}},g.race=function(T){var S=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=T.length,G=!1;if(!z)return this.resolve([]);for(var M=-1,U=new this(s);++M<z;)Z=T[M],S.resolve(Z).then(function(q){G||(G=!0,h.resolve(U,q))},function(q){G||(G=!0,h.reject(U,q))});var Z;return U}},{immediate:36}],38:[function(a,C,n){var r={};(0,a("./lib/utils/common").assign)(r,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),C.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,C,n){var r=a("./zlib/deflate"),s=a("./utils/common"),h=a("./utils/strings"),f=a("./zlib/messages"),m=a("./zlib/zstream"),w=Object.prototype.toString,g=0,E=-1,v=0,P=8;function p(T){if(!(this instanceof p))return new p(T);this.options=s.assign({level:E,method:P,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},T||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var z=r.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(z!==g)throw new Error(f[z]);if(S.header&&r.deflateSetHeader(this.strm,S.header),S.dictionary){var G;if(G=typeof S.dictionary=="string"?h.string2buf(S.dictionary):w.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(z=r.deflateSetDictionary(this.strm,G))!==g)throw new Error(f[z]);this._dict_set=!0}}function b(T,S){var z=new p(S);if(z.push(T,!0),z.err)throw z.msg||f[z.err];return z.result}p.prototype.push=function(T,S){var z,G,M=this.strm,U=this.options.chunkSize;if(this.ended)return!1;G=S===~~S?S:S===!0?4:0,typeof T=="string"?M.input=h.string2buf(T):w.call(T)==="[object ArrayBuffer]"?M.input=new Uint8Array(T):M.input=T,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new s.Buf8(U),M.next_out=0,M.avail_out=U),(z=r.deflate(M,G))!==1&&z!==g)return this.onEnd(z),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||G!==4&&G!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(s.shrinkBuf(M.output,M.next_out))):this.onData(s.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&z!==1);return G===4?(z=r.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===g):G!==2||(this.onEnd(g),!(M.avail_out=0))},p.prototype.onData=function(T){this.chunks.push(T)},p.prototype.onEnd=function(T){T===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg},n.Deflate=p,n.deflate=b,n.deflateRaw=function(T,S){return(S=S||{}).raw=!0,b(T,S)},n.gzip=function(T,S){return(S=S||{}).gzip=!0,b(T,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,C,n){var r=a("./zlib/inflate"),s=a("./utils/common"),h=a("./utils/strings"),f=a("./zlib/constants"),m=a("./zlib/messages"),w=a("./zlib/zstream"),g=a("./zlib/gzheader"),E=Object.prototype.toString;function v(p){if(!(this instanceof v))return new v(p);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},p||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||p&&p.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var T=r.inflateInit2(this.strm,b.windowBits);if(T!==f.Z_OK)throw new Error(m[T]);this.header=new g,r.inflateGetHeader(this.strm,this.header)}function P(p,b){var T=new v(b);if(T.push(p,!0),T.err)throw T.msg||m[T.err];return T.result}v.prototype.push=function(p,b){var T,S,z,G,M,U,Z=this.strm,q=this.options.chunkSize,R=this.options.dictionary,$=!1;if(this.ended)return!1;S=b===~~b?b:b===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof p=="string"?Z.input=h.binstring2buf(p):E.call(p)==="[object ArrayBuffer]"?Z.input=new Uint8Array(p):Z.input=p,Z.next_in=0,Z.avail_in=Z.input.length;do{if(Z.avail_out===0&&(Z.output=new s.Buf8(q),Z.next_out=0,Z.avail_out=q),(T=r.inflate(Z,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&R&&(U=typeof R=="string"?h.string2buf(R):E.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,T=r.inflateSetDictionary(this.strm,U)),T===f.Z_BUF_ERROR&&$===!0&&(T=f.Z_OK,$=!1),T!==f.Z_STREAM_END&&T!==f.Z_OK)return this.onEnd(T),!(this.ended=!0);Z.next_out&&(Z.avail_out!==0&&T!==f.Z_STREAM_END&&(Z.avail_in!==0||S!==f.Z_FINISH&&S!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(z=h.utf8border(Z.output,Z.next_out),G=Z.next_out-z,M=h.buf2string(Z.output,z),Z.next_out=G,Z.avail_out=q-G,G&&s.arraySet(Z.output,Z.output,z,G,0),this.onData(M)):this.onData(s.shrinkBuf(Z.output,Z.next_out)))),Z.avail_in===0&&Z.avail_out===0&&($=!0)}while((0<Z.avail_in||Z.avail_out===0)&&T!==f.Z_STREAM_END);return T===f.Z_STREAM_END&&(S=f.Z_FINISH),S===f.Z_FINISH?(T=r.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===f.Z_OK):S!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(Z.avail_out=0))},v.prototype.onData=function(p){this.chunks.push(p)},v.prototype.onEnd=function(p){p===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},n.Inflate=v,n.inflate=P,n.inflateRaw=function(p,b){return(b=b||{}).raw=!0,P(p,b)},n.ungzip=P},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,C,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var w=m.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var g in w)w.hasOwnProperty(g)&&(f[g]=w[g])}}return f},n.shrinkBuf=function(f,m){return f.length===m?f:f.subarray?f.subarray(0,m):(f.length=m,f)};var s={arraySet:function(f,m,w,g,E){if(m.subarray&&f.subarray)f.set(m.subarray(w,w+g),E);else for(var v=0;v<g;v++)f[E+v]=m[w+v]},flattenChunks:function(f){var m,w,g,E,v,P;for(m=g=0,w=f.length;m<w;m++)g+=f[m].length;for(P=new Uint8Array(g),m=E=0,w=f.length;m<w;m++)v=f[m],P.set(v,E),E+=v.length;return P}},h={arraySet:function(f,m,w,g,E){for(var v=0;v<g;v++)f[E+v]=m[w+v]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,h))},n.setTyped(r)},{}],42:[function(a,C,n){var r=a("./common"),s=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var f=new r.Buf8(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function w(g,E){if(E<65537&&(g.subarray&&h||!g.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(g,E));for(var v="",P=0;P<E;P++)v+=String.fromCharCode(g[P]);return v}f[254]=f[254]=1,n.string2buf=function(g){var E,v,P,p,b,T=g.length,S=0;for(p=0;p<T;p++)(64512&(v=g.charCodeAt(p)))==55296&&p+1<T&&(64512&(P=g.charCodeAt(p+1)))==56320&&(v=65536+(v-55296<<10)+(P-56320),p++),S+=v<128?1:v<2048?2:v<65536?3:4;for(E=new r.Buf8(S),p=b=0;b<S;p++)(64512&(v=g.charCodeAt(p)))==55296&&p+1<T&&(64512&(P=g.charCodeAt(p+1)))==56320&&(v=65536+(v-55296<<10)+(P-56320),p++),v<128?E[b++]=v:(v<2048?E[b++]=192|v>>>6:(v<65536?E[b++]=224|v>>>12:(E[b++]=240|v>>>18,E[b++]=128|v>>>12&63),E[b++]=128|v>>>6&63),E[b++]=128|63&v);return E},n.buf2binstring=function(g){return w(g,g.length)},n.binstring2buf=function(g){for(var E=new r.Buf8(g.length),v=0,P=E.length;v<P;v++)E[v]=g.charCodeAt(v);return E},n.buf2string=function(g,E){var v,P,p,b,T=E||g.length,S=new Array(2*T);for(v=P=0;v<T;)if((p=g[v++])<128)S[P++]=p;else if(4<(b=f[p]))S[P++]=65533,v+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&v<T;)p=p<<6|63&g[v++],b--;1<b?S[P++]=65533:p<65536?S[P++]=p:(p-=65536,S[P++]=55296|p>>10&1023,S[P++]=56320|1023&p)}return w(S,P)},n.utf8border=function(g,E){var v;for((E=E||g.length)>g.length&&(E=g.length),v=E-1;0<=v&&(192&g[v])==128;)v--;return v<0||v===0?E:v+f[g[v]]>E?v:E}},{"./common":41}],43:[function(a,C,n){C.exports=function(r,s,h,f){for(var m=65535&r|0,w=r>>>16&65535|0,g=0;h!==0;){for(h-=g=2e3<h?2e3:h;w=w+(m=m+s[f++]|0)|0,--g;);m%=65521,w%=65521}return m|w<<16|0}},{}],44:[function(a,C,n){C.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,C,n){var r=function(){for(var s,h=[],f=0;f<256;f++){s=f;for(var m=0;m<8;m++)s=1&s?3988292384^s>>>1:s>>>1;h[f]=s}return h}();C.exports=function(s,h,f,m){var w=r,g=m+f;s^=-1;for(var E=m;E<g;E++)s=s>>>8^w[255&(s^h[E])];return-1^s}},{}],46:[function(a,C,n){var r,s=a("../utils/common"),h=a("./trees"),f=a("./adler32"),m=a("./crc32"),w=a("./messages"),g=0,E=4,v=0,P=-2,p=-1,b=4,T=2,S=8,z=9,G=286,M=30,U=19,Z=2*G+1,q=15,R=3,$=258,K=$+R+1,O=42,F=113,d=1,j=2,ct=3,tt=4;function ot(_,et){return _.msg=w[et],et}function at(_){return(_<<1)-(4<_?9:0)}function nt(_){for(var et=_.length;0<=--et;)_[et]=0}function W(_){var et=_.state,X=et.pending;X>_.avail_out&&(X=_.avail_out),X!==0&&(s.arraySet(_.output,et.pending_buf,et.pending_out,X,_.next_out),_.next_out+=X,et.pending_out+=X,_.total_out+=X,_.avail_out-=X,et.pending-=X,et.pending===0&&(et.pending_out=0))}function H(_,et){h._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,et),_.block_start=_.strstart,W(_.strm)}function pt(_,et){_.pending_buf[_.pending++]=et}function ht(_,et){_.pending_buf[_.pending++]=et>>>8&255,_.pending_buf[_.pending++]=255&et}function it(_,et){var X,A,D=_.max_chain_length,N=_.strstart,rt=_.prev_length,st=_.nice_match,Y=_.strstart>_.w_size-K?_.strstart-(_.w_size-K):0,ut=_.window,mt=_.w_mask,ft=_.prev,Lt=_.strstart+$,Zt=ut[N+rt-1],xt=ut[N+rt];_.prev_length>=_.good_match&&(D>>=2),st>_.lookahead&&(st=_.lookahead);do if(ut[(X=et)+rt]===xt&&ut[X+rt-1]===Zt&&ut[X]===ut[N]&&ut[++X]===ut[N+1]){N+=2,X++;do;while(ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&ut[++N]===ut[++X]&&N<Lt);if(A=$-(Lt-N),N=Lt-$,rt<A){if(_.match_start=et,st<=(rt=A))break;Zt=ut[N+rt-1],xt=ut[N+rt]}}while((et=ft[et&mt])>Y&&--D!=0);return rt<=_.lookahead?rt:_.lookahead}function yt(_){var et,X,A,D,N,rt,st,Y,ut,mt,ft=_.w_size;do{if(D=_.window_size-_.lookahead-_.strstart,_.strstart>=ft+(ft-K)){for(s.arraySet(_.window,_.window,ft,ft,0),_.match_start-=ft,_.strstart-=ft,_.block_start-=ft,et=X=_.hash_size;A=_.head[--et],_.head[et]=ft<=A?A-ft:0,--X;);for(et=X=ft;A=_.prev[--et],_.prev[et]=ft<=A?A-ft:0,--X;);D+=ft}if(_.strm.avail_in===0)break;if(rt=_.strm,st=_.window,Y=_.strstart+_.lookahead,ut=D,mt=void 0,mt=rt.avail_in,ut<mt&&(mt=ut),X=mt===0?0:(rt.avail_in-=mt,s.arraySet(st,rt.input,rt.next_in,mt,Y),rt.state.wrap===1?rt.adler=f(rt.adler,st,mt,Y):rt.state.wrap===2&&(rt.adler=m(rt.adler,st,mt,Y)),rt.next_in+=mt,rt.total_in+=mt,mt),_.lookahead+=X,_.lookahead+_.insert>=R)for(N=_.strstart-_.insert,_.ins_h=_.window[N],_.ins_h=(_.ins_h<<_.hash_shift^_.window[N+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[N+R-1])&_.hash_mask,_.prev[N&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=N,N++,_.insert--,!(_.lookahead+_.insert<R)););}while(_.lookahead<K&&_.strm.avail_in!==0)}function Ht(_,et){for(var X,A;;){if(_.lookahead<K){if(yt(_),_.lookahead<K&&et===g)return d;if(_.lookahead===0)break}if(X=0,_.lookahead>=R&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,X=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),X!==0&&_.strstart-X<=_.w_size-K&&(_.match_length=it(_,X)),_.match_length>=R)if(A=h._tr_tally(_,_.strstart-_.match_start,_.match_length-R),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=R){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,X=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else A=h._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(A&&(H(_,!1),_.strm.avail_out===0))return d}return _.insert=_.strstart<R-1?_.strstart:R-1,et===E?(H(_,!0),_.strm.avail_out===0?ct:tt):_.last_lit&&(H(_,!1),_.strm.avail_out===0)?d:j}function St(_,et){for(var X,A,D;;){if(_.lookahead<K){if(yt(_),_.lookahead<K&&et===g)return d;if(_.lookahead===0)break}if(X=0,_.lookahead>=R&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,X=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=R-1,X!==0&&_.prev_length<_.max_lazy_match&&_.strstart-X<=_.w_size-K&&(_.match_length=it(_,X),_.match_length<=5&&(_.strategy===1||_.match_length===R&&4096<_.strstart-_.match_start)&&(_.match_length=R-1)),_.prev_length>=R&&_.match_length<=_.prev_length){for(D=_.strstart+_.lookahead-R,A=h._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-R),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=D&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,X=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=R-1,_.strstart++,A&&(H(_,!1),_.strm.avail_out===0))return d}else if(_.match_available){if((A=h._tr_tally(_,0,_.window[_.strstart-1]))&&H(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return d}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(A=h._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<R-1?_.strstart:R-1,et===E?(H(_,!0),_.strm.avail_out===0?ct:tt):_.last_lit&&(H(_,!1),_.strm.avail_out===0)?d:j}function Rt(_,et,X,A,D){this.good_length=_,this.max_lazy=et,this.nice_length=X,this.max_chain=A,this.func=D}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*Z),this.dyn_dtree=new s.Buf16(2*(2*M+1)),this.bl_tree=new s.Buf16(2*(2*U+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(q+1),this.heap=new s.Buf16(2*G+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*G+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function wt(_){var et;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=T,(et=_.state).pending=0,et.pending_out=0,et.wrap<0&&(et.wrap=-et.wrap),et.status=et.wrap?O:F,_.adler=et.wrap===2?0:1,et.last_flush=g,h._tr_init(et),v):ot(_,P)}function Tt(_){var et=wt(_);return et===v&&function(X){X.window_size=2*X.w_size,nt(X.head),X.max_lazy_match=r[X.level].max_lazy,X.good_match=r[X.level].good_length,X.nice_match=r[X.level].nice_length,X.max_chain_length=r[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=R-1,X.match_available=0,X.ins_h=0}(_.state),et}function Dt(_,et,X,A,D,N){if(!_)return P;var rt=1;if(et===p&&(et=6),A<0?(rt=0,A=-A):15<A&&(rt=2,A-=16),D<1||z<D||X!==S||A<8||15<A||et<0||9<et||N<0||b<N)return ot(_,P);A===8&&(A=9);var st=new bt;return(_.state=st).strm=_,st.wrap=rt,st.gzhead=null,st.w_bits=A,st.w_size=1<<st.w_bits,st.w_mask=st.w_size-1,st.hash_bits=D+7,st.hash_size=1<<st.hash_bits,st.hash_mask=st.hash_size-1,st.hash_shift=~~((st.hash_bits+R-1)/R),st.window=new s.Buf8(2*st.w_size),st.head=new s.Buf16(st.hash_size),st.prev=new s.Buf16(st.w_size),st.lit_bufsize=1<<D+6,st.pending_buf_size=4*st.lit_bufsize,st.pending_buf=new s.Buf8(st.pending_buf_size),st.d_buf=1*st.lit_bufsize,st.l_buf=3*st.lit_bufsize,st.level=et,st.strategy=N,st.method=X,Tt(_)}r=[new Rt(0,0,0,0,function(_,et){var X=65535;for(X>_.pending_buf_size-5&&(X=_.pending_buf_size-5);;){if(_.lookahead<=1){if(yt(_),_.lookahead===0&&et===g)return d;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var A=_.block_start+X;if((_.strstart===0||_.strstart>=A)&&(_.lookahead=_.strstart-A,_.strstart=A,H(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-K&&(H(_,!1),_.strm.avail_out===0))return d}return _.insert=0,et===E?(H(_,!0),_.strm.avail_out===0?ct:tt):(_.strstart>_.block_start&&(H(_,!1),_.strm.avail_out),d)}),new Rt(4,4,8,4,Ht),new Rt(4,5,16,8,Ht),new Rt(4,6,32,32,Ht),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)],n.deflateInit=function(_,et){return Dt(_,et,S,15,8,0)},n.deflateInit2=Dt,n.deflateReset=Tt,n.deflateResetKeep=wt,n.deflateSetHeader=function(_,et){return _&&_.state?_.state.wrap!==2?P:(_.state.gzhead=et,v):P},n.deflate=function(_,et){var X,A,D,N;if(!_||!_.state||5<et||et<0)return _?ot(_,P):P;if(A=_.state,!_.output||!_.input&&_.avail_in!==0||A.status===666&&et!==E)return ot(_,_.avail_out===0?-5:P);if(A.strm=_,X=A.last_flush,A.last_flush=et,A.status===O)if(A.wrap===2)_.adler=0,pt(A,31),pt(A,139),pt(A,8),A.gzhead?(pt(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),pt(A,255&A.gzhead.time),pt(A,A.gzhead.time>>8&255),pt(A,A.gzhead.time>>16&255),pt(A,A.gzhead.time>>24&255),pt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),pt(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(pt(A,255&A.gzhead.extra.length),pt(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(_.adler=m(_.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(pt(A,0),pt(A,0),pt(A,0),pt(A,0),pt(A,0),pt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),pt(A,3),A.status=F);else{var rt=S+(A.w_bits-8<<4)<<8;rt|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(rt|=32),rt+=31-rt%31,A.status=F,ht(A,rt),A.strstart!==0&&(ht(A,_.adler>>>16),ht(A,65535&_.adler)),_.adler=1}if(A.status===69)if(A.gzhead.extra){for(D=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),W(_),D=A.pending,A.pending!==A.pending_buf_size));)pt(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){D=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),W(_),D=A.pending,A.pending===A.pending_buf_size)){N=1;break}N=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,pt(A,N)}while(N!==0);A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),N===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){D=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),W(_),D=A.pending,A.pending===A.pending_buf_size)){N=1;break}N=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,pt(A,N)}while(N!==0);A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),N===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&W(_),A.pending+2<=A.pending_buf_size&&(pt(A,255&_.adler),pt(A,_.adler>>8&255),_.adler=0,A.status=F)):A.status=F),A.pending!==0){if(W(_),_.avail_out===0)return A.last_flush=-1,v}else if(_.avail_in===0&&at(et)<=at(X)&&et!==E)return ot(_,-5);if(A.status===666&&_.avail_in!==0)return ot(_,-5);if(_.avail_in!==0||A.lookahead!==0||et!==g&&A.status!==666){var st=A.strategy===2?function(Y,ut){for(var mt;;){if(Y.lookahead===0&&(yt(Y),Y.lookahead===0)){if(ut===g)return d;break}if(Y.match_length=0,mt=h._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,mt&&(H(Y,!1),Y.strm.avail_out===0))return d}return Y.insert=0,ut===E?(H(Y,!0),Y.strm.avail_out===0?ct:tt):Y.last_lit&&(H(Y,!1),Y.strm.avail_out===0)?d:j}(A,et):A.strategy===3?function(Y,ut){for(var mt,ft,Lt,Zt,xt=Y.window;;){if(Y.lookahead<=$){if(yt(Y),Y.lookahead<=$&&ut===g)return d;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=R&&0<Y.strstart&&(ft=xt[Lt=Y.strstart-1])===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]){Zt=Y.strstart+$;do;while(ft===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]&&ft===xt[++Lt]&&Lt<Zt);Y.match_length=$-(Zt-Lt),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=R?(mt=h._tr_tally(Y,1,Y.match_length-R),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(mt=h._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),mt&&(H(Y,!1),Y.strm.avail_out===0))return d}return Y.insert=0,ut===E?(H(Y,!0),Y.strm.avail_out===0?ct:tt):Y.last_lit&&(H(Y,!1),Y.strm.avail_out===0)?d:j}(A,et):r[A.level].func(A,et);if(st!==ct&&st!==tt||(A.status=666),st===d||st===ct)return _.avail_out===0&&(A.last_flush=-1),v;if(st===j&&(et===1?h._tr_align(A):et!==5&&(h._tr_stored_block(A,0,0,!1),et===3&&(nt(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),W(_),_.avail_out===0))return A.last_flush=-1,v}return et!==E?v:A.wrap<=0?1:(A.wrap===2?(pt(A,255&_.adler),pt(A,_.adler>>8&255),pt(A,_.adler>>16&255),pt(A,_.adler>>24&255),pt(A,255&_.total_in),pt(A,_.total_in>>8&255),pt(A,_.total_in>>16&255),pt(A,_.total_in>>24&255)):(ht(A,_.adler>>>16),ht(A,65535&_.adler)),W(_),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?v:1)},n.deflateEnd=function(_){var et;return _&&_.state?(et=_.state.status)!==O&&et!==69&&et!==73&&et!==91&&et!==103&&et!==F&&et!==666?ot(_,P):(_.state=null,et===F?ot(_,-3):v):P},n.deflateSetDictionary=function(_,et){var X,A,D,N,rt,st,Y,ut,mt=et.length;if(!_||!_.state||(N=(X=_.state).wrap)===2||N===1&&X.status!==O||X.lookahead)return P;for(N===1&&(_.adler=f(_.adler,et,mt,0)),X.wrap=0,mt>=X.w_size&&(N===0&&(nt(X.head),X.strstart=0,X.block_start=0,X.insert=0),ut=new s.Buf8(X.w_size),s.arraySet(ut,et,mt-X.w_size,X.w_size,0),et=ut,mt=X.w_size),rt=_.avail_in,st=_.next_in,Y=_.input,_.avail_in=mt,_.next_in=0,_.input=et,yt(X);X.lookahead>=R;){for(A=X.strstart,D=X.lookahead-(R-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[A+R-1])&X.hash_mask,X.prev[A&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=A,A++,--D;);X.strstart=A,X.lookahead=R-1,yt(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=R-1,X.match_available=0,_.next_in=st,_.input=Y,_.avail_in=rt,X.wrap=N,v},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,C,n){C.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,C,n){C.exports=function(r,s){var h,f,m,w,g,E,v,P,p,b,T,S,z,G,M,U,Z,q,R,$,K,O,F,d,j;h=r.state,f=r.next_in,d=r.input,m=f+(r.avail_in-5),w=r.next_out,j=r.output,g=w-(s-r.avail_out),E=w+(r.avail_out-257),v=h.dmax,P=h.wsize,p=h.whave,b=h.wnext,T=h.window,S=h.hold,z=h.bits,G=h.lencode,M=h.distcode,U=(1<<h.lenbits)-1,Z=(1<<h.distbits)-1;t:do{z<15&&(S+=d[f++]<<z,z+=8,S+=d[f++]<<z,z+=8),q=G[S&U];e:for(;;){if(S>>>=R=q>>>24,z-=R,(R=q>>>16&255)===0)j[w++]=65535&q;else{if(!(16&R)){if(!(64&R)){q=G[(65535&q)+(S&(1<<R)-1)];continue e}if(32&R){h.mode=12;break t}r.msg="invalid literal/length code",h.mode=30;break t}$=65535&q,(R&=15)&&(z<R&&(S+=d[f++]<<z,z+=8),$+=S&(1<<R)-1,S>>>=R,z-=R),z<15&&(S+=d[f++]<<z,z+=8,S+=d[f++]<<z,z+=8),q=M[S&Z];i:for(;;){if(S>>>=R=q>>>24,z-=R,!(16&(R=q>>>16&255))){if(!(64&R)){q=M[(65535&q)+(S&(1<<R)-1)];continue i}r.msg="invalid distance code",h.mode=30;break t}if(K=65535&q,z<(R&=15)&&(S+=d[f++]<<z,(z+=8)<R&&(S+=d[f++]<<z,z+=8)),v<(K+=S&(1<<R)-1)){r.msg="invalid distance too far back",h.mode=30;break t}if(S>>>=R,z-=R,(R=w-g)<K){if(p<(R=K-R)&&h.sane){r.msg="invalid distance too far back",h.mode=30;break t}if(F=T,(O=0)===b){if(O+=P-R,R<$){for($-=R;j[w++]=T[O++],--R;);O=w-K,F=j}}else if(b<R){if(O+=P+b-R,(R-=b)<$){for($-=R;j[w++]=T[O++],--R;);if(O=0,b<$){for($-=R=b;j[w++]=T[O++],--R;);O=w-K,F=j}}}else if(O+=b-R,R<$){for($-=R;j[w++]=T[O++],--R;);O=w-K,F=j}for(;2<$;)j[w++]=F[O++],j[w++]=F[O++],j[w++]=F[O++],$-=3;$&&(j[w++]=F[O++],1<$&&(j[w++]=F[O++]))}else{for(O=w-K;j[w++]=j[O++],j[w++]=j[O++],j[w++]=j[O++],2<($-=3););$&&(j[w++]=j[O++],1<$&&(j[w++]=j[O++]))}break}}break}}while(f<m&&w<E);f-=$=z>>3,S&=(1<<(z-=$<<3))-1,r.next_in=f,r.next_out=w,r.avail_in=f<m?m-f+5:5-(f-m),r.avail_out=w<E?E-w+257:257-(w-E),h.hold=S,h.bits=z}},{}],49:[function(a,C,n){var r=a("../utils/common"),s=a("./adler32"),h=a("./crc32"),f=a("./inffast"),m=a("./inftrees"),w=1,g=2,E=0,v=-2,P=1,p=852,b=592;function T(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(O){var F;return O&&O.state?(F=O.state,O.total_in=O.total_out=F.total=0,O.msg="",F.wrap&&(O.adler=1&F.wrap),F.mode=P,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new r.Buf32(p),F.distcode=F.distdyn=new r.Buf32(b),F.sane=1,F.back=-1,E):v}function G(O){var F;return O&&O.state?((F=O.state).wsize=0,F.whave=0,F.wnext=0,z(O)):v}function M(O,F){var d,j;return O&&O.state?(j=O.state,F<0?(d=0,F=-F):(d=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?v:(j.window!==null&&j.wbits!==F&&(j.window=null),j.wrap=d,j.wbits=F,G(O))):v}function U(O,F){var d,j;return O?(j=new S,(O.state=j).window=null,(d=M(O,F))!==E&&(O.state=null),d):v}var Z,q,R=!0;function $(O){if(R){var F;for(Z=new r.Buf32(512),q=new r.Buf32(32),F=0;F<144;)O.lens[F++]=8;for(;F<256;)O.lens[F++]=9;for(;F<280;)O.lens[F++]=7;for(;F<288;)O.lens[F++]=8;for(m(w,O.lens,0,288,Z,0,O.work,{bits:9}),F=0;F<32;)O.lens[F++]=5;m(g,O.lens,0,32,q,0,O.work,{bits:5}),R=!1}O.lencode=Z,O.lenbits=9,O.distcode=q,O.distbits=5}function K(O,F,d,j){var ct,tt=O.state;return tt.window===null&&(tt.wsize=1<<tt.wbits,tt.wnext=0,tt.whave=0,tt.window=new r.Buf8(tt.wsize)),j>=tt.wsize?(r.arraySet(tt.window,F,d-tt.wsize,tt.wsize,0),tt.wnext=0,tt.whave=tt.wsize):(j<(ct=tt.wsize-tt.wnext)&&(ct=j),r.arraySet(tt.window,F,d-j,ct,tt.wnext),(j-=ct)?(r.arraySet(tt.window,F,d-j,j,0),tt.wnext=j,tt.whave=tt.wsize):(tt.wnext+=ct,tt.wnext===tt.wsize&&(tt.wnext=0),tt.whave<tt.wsize&&(tt.whave+=ct))),0}n.inflateReset=G,n.inflateReset2=M,n.inflateResetKeep=z,n.inflateInit=function(O){return U(O,15)},n.inflateInit2=U,n.inflate=function(O,F){var d,j,ct,tt,ot,at,nt,W,H,pt,ht,it,yt,Ht,St,Rt,bt,wt,Tt,Dt,_,et,X,A,D=0,N=new r.Buf8(4),rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return v;(d=O.state).mode===12&&(d.mode=13),ot=O.next_out,ct=O.output,nt=O.avail_out,tt=O.next_in,j=O.input,at=O.avail_in,W=d.hold,H=d.bits,pt=at,ht=nt,et=E;t:for(;;)switch(d.mode){case P:if(d.wrap===0){d.mode=13;break}for(;H<16;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(2&d.wrap&&W===35615){N[d.check=0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0),H=W=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&W)<<8)+(W>>8))%31){O.msg="incorrect header check",d.mode=30;break}if((15&W)!=8){O.msg="unknown compression method",d.mode=30;break}if(H-=4,_=8+(15&(W>>>=4)),d.wbits===0)d.wbits=_;else if(_>d.wbits){O.msg="invalid window size",d.mode=30;break}d.dmax=1<<_,O.adler=d.check=1,d.mode=512&W?10:12,H=W=0;break;case 2:for(;H<16;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(d.flags=W,(255&d.flags)!=8){O.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){O.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=W>>8&1),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0)),H=W=0,d.mode=3;case 3:for(;H<32;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}d.head&&(d.head.time=W),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,N[2]=W>>>16&255,N[3]=W>>>24&255,d.check=h(d.check,N,4,0)),H=W=0,d.mode=4;case 4:for(;H<16;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}d.head&&(d.head.xflags=255&W,d.head.os=W>>8),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0)),H=W=0,d.mode=5;case 5:if(1024&d.flags){for(;H<16;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}d.length=W,d.head&&(d.head.extra_len=W),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0)),H=W=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(at<(it=d.length)&&(it=at),it&&(d.head&&(_=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),r.arraySet(d.head.extra,j,tt,it,_)),512&d.flags&&(d.check=h(d.check,j,it,tt)),at-=it,tt+=it,d.length-=it),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(at===0)break t;for(it=0;_=j[tt+it++],d.head&&_&&d.length<65536&&(d.head.name+=String.fromCharCode(_)),_&&it<at;);if(512&d.flags&&(d.check=h(d.check,j,it,tt)),at-=it,tt+=it,_)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(at===0)break t;for(it=0;_=j[tt+it++],d.head&&_&&d.length<65536&&(d.head.comment+=String.fromCharCode(_)),_&&it<at;);if(512&d.flags&&(d.check=h(d.check,j,it,tt)),at-=it,tt+=it,_)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;H<16;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(W!==(65535&d.check)){O.msg="header crc mismatch",d.mode=30;break}H=W=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),O.adler=d.check=0,d.mode=12;break;case 10:for(;H<32;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}O.adler=d.check=T(W),H=W=0,d.mode=11;case 11:if(d.havedict===0)return O.next_out=ot,O.avail_out=nt,O.next_in=tt,O.avail_in=at,d.hold=W,d.bits=H,2;O.adler=d.check=1,d.mode=12;case 12:if(F===5||F===6)break t;case 13:if(d.last){W>>>=7&H,H-=7&H,d.mode=27;break}for(;H<3;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}switch(d.last=1&W,H-=1,3&(W>>>=1)){case 0:d.mode=14;break;case 1:if($(d),d.mode=20,F!==6)break;W>>>=2,H-=2;break t;case 2:d.mode=17;break;case 3:O.msg="invalid block type",d.mode=30}W>>>=2,H-=2;break;case 14:for(W>>>=7&H,H-=7&H;H<32;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if((65535&W)!=(W>>>16^65535)){O.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&W,H=W=0,d.mode=15,F===6)break t;case 15:d.mode=16;case 16:if(it=d.length){if(at<it&&(it=at),nt<it&&(it=nt),it===0)break t;r.arraySet(ct,j,tt,it,ot),at-=it,tt+=it,nt-=it,ot+=it,d.length-=it;break}d.mode=12;break;case 17:for(;H<14;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(d.nlen=257+(31&W),W>>>=5,H-=5,d.ndist=1+(31&W),W>>>=5,H-=5,d.ncode=4+(15&W),W>>>=4,H-=4,286<d.nlen||30<d.ndist){O.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;H<3;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}d.lens[rt[d.have++]]=7&W,W>>>=3,H-=3}for(;d.have<19;)d.lens[rt[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,X={bits:d.lenbits},et=m(0,d.lens,0,19,d.lencode,0,d.work,X),d.lenbits=X.bits,et){O.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;Rt=(D=d.lencode[W&(1<<d.lenbits)-1])>>>16&255,bt=65535&D,!((St=D>>>24)<=H);){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(bt<16)W>>>=St,H-=St,d.lens[d.have++]=bt;else{if(bt===16){for(A=St+2;H<A;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(W>>>=St,H-=St,d.have===0){O.msg="invalid bit length repeat",d.mode=30;break}_=d.lens[d.have-1],it=3+(3&W),W>>>=2,H-=2}else if(bt===17){for(A=St+3;H<A;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}H-=St,_=0,it=3+(7&(W>>>=St)),W>>>=3,H-=3}else{for(A=St+7;H<A;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}H-=St,_=0,it=11+(127&(W>>>=St)),W>>>=7,H-=7}if(d.have+it>d.nlen+d.ndist){O.msg="invalid bit length repeat",d.mode=30;break}for(;it--;)d.lens[d.have++]=_}}if(d.mode===30)break;if(d.lens[256]===0){O.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,X={bits:d.lenbits},et=m(w,d.lens,0,d.nlen,d.lencode,0,d.work,X),d.lenbits=X.bits,et){O.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,X={bits:d.distbits},et=m(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,X),d.distbits=X.bits,et){O.msg="invalid distances set",d.mode=30;break}if(d.mode=20,F===6)break t;case 20:d.mode=21;case 21:if(6<=at&&258<=nt){O.next_out=ot,O.avail_out=nt,O.next_in=tt,O.avail_in=at,d.hold=W,d.bits=H,f(O,ht),ot=O.next_out,ct=O.output,nt=O.avail_out,tt=O.next_in,j=O.input,at=O.avail_in,W=d.hold,H=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;Rt=(D=d.lencode[W&(1<<d.lenbits)-1])>>>16&255,bt=65535&D,!((St=D>>>24)<=H);){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(Rt&&!(240&Rt)){for(wt=St,Tt=Rt,Dt=bt;Rt=(D=d.lencode[Dt+((W&(1<<wt+Tt)-1)>>wt)])>>>16&255,bt=65535&D,!(wt+(St=D>>>24)<=H);){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}W>>>=wt,H-=wt,d.back+=wt}if(W>>>=St,H-=St,d.back+=St,d.length=bt,Rt===0){d.mode=26;break}if(32&Rt){d.back=-1,d.mode=12;break}if(64&Rt){O.msg="invalid literal/length code",d.mode=30;break}d.extra=15&Rt,d.mode=22;case 22:if(d.extra){for(A=d.extra;H<A;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}d.length+=W&(1<<d.extra)-1,W>>>=d.extra,H-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;Rt=(D=d.distcode[W&(1<<d.distbits)-1])>>>16&255,bt=65535&D,!((St=D>>>24)<=H);){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(!(240&Rt)){for(wt=St,Tt=Rt,Dt=bt;Rt=(D=d.distcode[Dt+((W&(1<<wt+Tt)-1)>>wt)])>>>16&255,bt=65535&D,!(wt+(St=D>>>24)<=H);){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}W>>>=wt,H-=wt,d.back+=wt}if(W>>>=St,H-=St,d.back+=St,64&Rt){O.msg="invalid distance code",d.mode=30;break}d.offset=bt,d.extra=15&Rt,d.mode=24;case 24:if(d.extra){for(A=d.extra;H<A;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}d.offset+=W&(1<<d.extra)-1,W>>>=d.extra,H-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){O.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(nt===0)break t;if(it=ht-nt,d.offset>it){if((it=d.offset-it)>d.whave&&d.sane){O.msg="invalid distance too far back",d.mode=30;break}yt=it>d.wnext?(it-=d.wnext,d.wsize-it):d.wnext-it,it>d.length&&(it=d.length),Ht=d.window}else Ht=ct,yt=ot-d.offset,it=d.length;for(nt<it&&(it=nt),nt-=it,d.length-=it;ct[ot++]=Ht[yt++],--it;);d.length===0&&(d.mode=21);break;case 26:if(nt===0)break t;ct[ot++]=d.length,nt--,d.mode=21;break;case 27:if(d.wrap){for(;H<32;){if(at===0)break t;at--,W|=j[tt++]<<H,H+=8}if(ht-=nt,O.total_out+=ht,d.total+=ht,ht&&(O.adler=d.check=d.flags?h(d.check,ct,ht,ot-ht):s(d.check,ct,ht,ot-ht)),ht=nt,(d.flags?W:T(W))!==d.check){O.msg="incorrect data check",d.mode=30;break}H=W=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;H<32;){if(at===0)break t;at--,W+=j[tt++]<<H,H+=8}if(W!==(4294967295&d.total)){O.msg="incorrect length check",d.mode=30;break}H=W=0}d.mode=29;case 29:et=1;break t;case 30:et=-3;break t;case 31:return-4;case 32:default:return v}return O.next_out=ot,O.avail_out=nt,O.next_in=tt,O.avail_in=at,d.hold=W,d.bits=H,(d.wsize||ht!==O.avail_out&&d.mode<30&&(d.mode<27||F!==4))&&K(O,O.output,O.next_out,ht-O.avail_out)?(d.mode=31,-4):(pt-=O.avail_in,ht-=O.avail_out,O.total_in+=pt,O.total_out+=ht,d.total+=ht,d.wrap&&ht&&(O.adler=d.check=d.flags?h(d.check,ct,ht,O.next_out-ht):s(d.check,ct,ht,O.next_out-ht)),O.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(pt==0&&ht===0||F===4)&&et===E&&(et=-5),et)},n.inflateEnd=function(O){if(!O||!O.state)return v;var F=O.state;return F.window&&(F.window=null),O.state=null,E},n.inflateGetHeader=function(O,F){var d;return O&&O.state&&2&(d=O.state).wrap?((d.head=F).done=!1,E):v},n.inflateSetDictionary=function(O,F){var d,j=F.length;return O&&O.state?(d=O.state).wrap!==0&&d.mode!==11?v:d.mode===11&&s(1,F,j,0)!==d.check?-3:K(O,F,j,j)?(d.mode=31,-4):(d.havedict=1,E):v},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,C,n){var r=a("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];C.exports=function(w,g,E,v,P,p,b,T){var S,z,G,M,U,Z,q,R,$,K=T.bits,O=0,F=0,d=0,j=0,ct=0,tt=0,ot=0,at=0,nt=0,W=0,H=null,pt=0,ht=new r.Buf16(16),it=new r.Buf16(16),yt=null,Ht=0;for(O=0;O<=15;O++)ht[O]=0;for(F=0;F<v;F++)ht[g[E+F]]++;for(ct=K,j=15;1<=j&&ht[j]===0;j--);if(j<ct&&(ct=j),j===0)return P[p++]=20971520,P[p++]=20971520,T.bits=1,0;for(d=1;d<j&&ht[d]===0;d++);for(ct<d&&(ct=d),O=at=1;O<=15;O++)if(at<<=1,(at-=ht[O])<0)return-1;if(0<at&&(w===0||j!==1))return-1;for(it[1]=0,O=1;O<15;O++)it[O+1]=it[O]+ht[O];for(F=0;F<v;F++)g[E+F]!==0&&(b[it[g[E+F]]++]=F);if(Z=w===0?(H=yt=b,19):w===1?(H=s,pt-=257,yt=h,Ht-=257,256):(H=f,yt=m,-1),O=d,U=p,ot=F=W=0,G=-1,M=(nt=1<<(tt=ct))-1,w===1&&852<nt||w===2&&592<nt)return 1;for(;;){for(q=O-ot,$=b[F]<Z?(R=0,b[F]):b[F]>Z?(R=yt[Ht+b[F]],H[pt+b[F]]):(R=96,0),S=1<<O-ot,d=z=1<<tt;P[U+(W>>ot)+(z-=S)]=q<<24|R<<16|$|0,z!==0;);for(S=1<<O-1;W&S;)S>>=1;if(S!==0?(W&=S-1,W+=S):W=0,F++,--ht[O]==0){if(O===j)break;O=g[E+b[F]]}if(ct<O&&(W&M)!==G){for(ot===0&&(ot=ct),U+=d,at=1<<(tt=O-ot);tt+ot<j&&!((at-=ht[tt+ot])<=0);)tt++,at<<=1;if(nt+=1<<tt,w===1&&852<nt||w===2&&592<nt)return 1;P[G=W&M]=ct<<24|tt<<16|U-p|0}}return W!==0&&(P[U+W]=O-ot<<24|64<<16|0),T.bits=ct,0}},{"../utils/common":41}],51:[function(a,C,n){C.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,C,n){var r=a("../utils/common"),s=0,h=1;function f(D){for(var N=D.length;0<=--N;)D[N]=0}var m=0,w=29,g=256,E=g+1+w,v=30,P=19,p=2*E+1,b=15,T=16,S=7,z=256,G=16,M=17,U=18,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(E+2));f(K);var O=new Array(2*v);f(O);var F=new Array(512);f(F);var d=new Array(256);f(d);var j=new Array(w);f(j);var ct,tt,ot,at=new Array(v);function nt(D,N,rt,st,Y){this.static_tree=D,this.extra_bits=N,this.extra_base=rt,this.elems=st,this.max_length=Y,this.has_stree=D&&D.length}function W(D,N){this.dyn_tree=D,this.max_code=0,this.stat_desc=N}function H(D){return D<256?F[D]:F[256+(D>>>7)]}function pt(D,N){D.pending_buf[D.pending++]=255&N,D.pending_buf[D.pending++]=N>>>8&255}function ht(D,N,rt){D.bi_valid>T-rt?(D.bi_buf|=N<<D.bi_valid&65535,pt(D,D.bi_buf),D.bi_buf=N>>T-D.bi_valid,D.bi_valid+=rt-T):(D.bi_buf|=N<<D.bi_valid&65535,D.bi_valid+=rt)}function it(D,N,rt){ht(D,rt[2*N],rt[2*N+1])}function yt(D,N){for(var rt=0;rt|=1&D,D>>>=1,rt<<=1,0<--N;);return rt>>>1}function Ht(D,N,rt){var st,Y,ut=new Array(b+1),mt=0;for(st=1;st<=b;st++)ut[st]=mt=mt+rt[st-1]<<1;for(Y=0;Y<=N;Y++){var ft=D[2*Y+1];ft!==0&&(D[2*Y]=yt(ut[ft]++,ft))}}function St(D){var N;for(N=0;N<E;N++)D.dyn_ltree[2*N]=0;for(N=0;N<v;N++)D.dyn_dtree[2*N]=0;for(N=0;N<P;N++)D.bl_tree[2*N]=0;D.dyn_ltree[2*z]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function Rt(D){8<D.bi_valid?pt(D,D.bi_buf):0<D.bi_valid&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function bt(D,N,rt,st){var Y=2*N,ut=2*rt;return D[Y]<D[ut]||D[Y]===D[ut]&&st[N]<=st[rt]}function wt(D,N,rt){for(var st=D.heap[rt],Y=rt<<1;Y<=D.heap_len&&(Y<D.heap_len&&bt(N,D.heap[Y+1],D.heap[Y],D.depth)&&Y++,!bt(N,st,D.heap[Y],D.depth));)D.heap[rt]=D.heap[Y],rt=Y,Y<<=1;D.heap[rt]=st}function Tt(D,N,rt){var st,Y,ut,mt,ft=0;if(D.last_lit!==0)for(;st=D.pending_buf[D.d_buf+2*ft]<<8|D.pending_buf[D.d_buf+2*ft+1],Y=D.pending_buf[D.l_buf+ft],ft++,st===0?it(D,Y,N):(it(D,(ut=d[Y])+g+1,N),(mt=Z[ut])!==0&&ht(D,Y-=j[ut],mt),it(D,ut=H(--st),rt),(mt=q[ut])!==0&&ht(D,st-=at[ut],mt)),ft<D.last_lit;);it(D,z,N)}function Dt(D,N){var rt,st,Y,ut=N.dyn_tree,mt=N.stat_desc.static_tree,ft=N.stat_desc.has_stree,Lt=N.stat_desc.elems,Zt=-1;for(D.heap_len=0,D.heap_max=p,rt=0;rt<Lt;rt++)ut[2*rt]!==0?(D.heap[++D.heap_len]=Zt=rt,D.depth[rt]=0):ut[2*rt+1]=0;for(;D.heap_len<2;)ut[2*(Y=D.heap[++D.heap_len]=Zt<2?++Zt:0)]=1,D.depth[Y]=0,D.opt_len--,ft&&(D.static_len-=mt[2*Y+1]);for(N.max_code=Zt,rt=D.heap_len>>1;1<=rt;rt--)wt(D,ut,rt);for(Y=Lt;rt=D.heap[1],D.heap[1]=D.heap[D.heap_len--],wt(D,ut,1),st=D.heap[1],D.heap[--D.heap_max]=rt,D.heap[--D.heap_max]=st,ut[2*Y]=ut[2*rt]+ut[2*st],D.depth[Y]=(D.depth[rt]>=D.depth[st]?D.depth[rt]:D.depth[st])+1,ut[2*rt+1]=ut[2*st+1]=Y,D.heap[1]=Y++,wt(D,ut,1),2<=D.heap_len;);D.heap[--D.heap_max]=D.heap[1],function(xt,Xt){var de,ne,ae,Gt,le,Jt,he=Xt.dyn_tree,ke=Xt.max_code,ze=Xt.stat_desc.static_tree,Ie=Xt.stat_desc.has_stree,qe=Xt.stat_desc.extra_bits,Ce=Xt.stat_desc.extra_base,Yt=Xt.stat_desc.max_length,Qe=0;for(Gt=0;Gt<=b;Gt++)xt.bl_count[Gt]=0;for(he[2*xt.heap[xt.heap_max]+1]=0,de=xt.heap_max+1;de<p;de++)Yt<(Gt=he[2*he[2*(ne=xt.heap[de])+1]+1]+1)&&(Gt=Yt,Qe++),he[2*ne+1]=Gt,ke<ne||(xt.bl_count[Gt]++,le=0,Ce<=ne&&(le=qe[ne-Ce]),Jt=he[2*ne],xt.opt_len+=Jt*(Gt+le),Ie&&(xt.static_len+=Jt*(ze[2*ne+1]+le)));if(Qe!==0){do{for(Gt=Yt-1;xt.bl_count[Gt]===0;)Gt--;xt.bl_count[Gt]--,xt.bl_count[Gt+1]+=2,xt.bl_count[Yt]--,Qe-=2}while(0<Qe);for(Gt=Yt;Gt!==0;Gt--)for(ne=xt.bl_count[Gt];ne!==0;)ke<(ae=xt.heap[--de])||(he[2*ae+1]!==Gt&&(xt.opt_len+=(Gt-he[2*ae+1])*he[2*ae],he[2*ae+1]=Gt),ne--)}}(D,N),Ht(ut,Zt,D.bl_count)}function _(D,N,rt){var st,Y,ut=-1,mt=N[1],ft=0,Lt=7,Zt=4;for(mt===0&&(Lt=138,Zt=3),N[2*(rt+1)+1]=65535,st=0;st<=rt;st++)Y=mt,mt=N[2*(st+1)+1],++ft<Lt&&Y===mt||(ft<Zt?D.bl_tree[2*Y]+=ft:Y!==0?(Y!==ut&&D.bl_tree[2*Y]++,D.bl_tree[2*G]++):ft<=10?D.bl_tree[2*M]++:D.bl_tree[2*U]++,ut=Y,Zt=(ft=0)===mt?(Lt=138,3):Y===mt?(Lt=6,3):(Lt=7,4))}function et(D,N,rt){var st,Y,ut=-1,mt=N[1],ft=0,Lt=7,Zt=4;for(mt===0&&(Lt=138,Zt=3),st=0;st<=rt;st++)if(Y=mt,mt=N[2*(st+1)+1],!(++ft<Lt&&Y===mt)){if(ft<Zt)for(;it(D,Y,D.bl_tree),--ft!=0;);else Y!==0?(Y!==ut&&(it(D,Y,D.bl_tree),ft--),it(D,G,D.bl_tree),ht(D,ft-3,2)):ft<=10?(it(D,M,D.bl_tree),ht(D,ft-3,3)):(it(D,U,D.bl_tree),ht(D,ft-11,7));ut=Y,Zt=(ft=0)===mt?(Lt=138,3):Y===mt?(Lt=6,3):(Lt=7,4)}}f(at);var X=!1;function A(D,N,rt,st){ht(D,(m<<1)+(st?1:0),3),function(Y,ut,mt,ft){Rt(Y),pt(Y,mt),pt(Y,~mt),r.arraySet(Y.pending_buf,Y.window,ut,mt,Y.pending),Y.pending+=mt}(D,N,rt)}n._tr_init=function(D){X||(function(){var N,rt,st,Y,ut,mt=new Array(b+1);for(Y=st=0;Y<w-1;Y++)for(j[Y]=st,N=0;N<1<<Z[Y];N++)d[st++]=Y;for(d[st-1]=Y,Y=ut=0;Y<16;Y++)for(at[Y]=ut,N=0;N<1<<q[Y];N++)F[ut++]=Y;for(ut>>=7;Y<v;Y++)for(at[Y]=ut<<7,N=0;N<1<<q[Y]-7;N++)F[256+ut++]=Y;for(rt=0;rt<=b;rt++)mt[rt]=0;for(N=0;N<=143;)K[2*N+1]=8,N++,mt[8]++;for(;N<=255;)K[2*N+1]=9,N++,mt[9]++;for(;N<=279;)K[2*N+1]=7,N++,mt[7]++;for(;N<=287;)K[2*N+1]=8,N++,mt[8]++;for(Ht(K,E+1,mt),N=0;N<v;N++)O[2*N+1]=5,O[2*N]=yt(N,5);ct=new nt(K,Z,g+1,E,b),tt=new nt(O,q,0,v,b),ot=new nt(new Array(0),R,0,P,S)}(),X=!0),D.l_desc=new W(D.dyn_ltree,ct),D.d_desc=new W(D.dyn_dtree,tt),D.bl_desc=new W(D.bl_tree,ot),D.bi_buf=0,D.bi_valid=0,St(D)},n._tr_stored_block=A,n._tr_flush_block=function(D,N,rt,st){var Y,ut,mt=0;0<D.level?(D.strm.data_type===2&&(D.strm.data_type=function(ft){var Lt,Zt=4093624447;for(Lt=0;Lt<=31;Lt++,Zt>>>=1)if(1&Zt&&ft.dyn_ltree[2*Lt]!==0)return s;if(ft.dyn_ltree[18]!==0||ft.dyn_ltree[20]!==0||ft.dyn_ltree[26]!==0)return h;for(Lt=32;Lt<g;Lt++)if(ft.dyn_ltree[2*Lt]!==0)return h;return s}(D)),Dt(D,D.l_desc),Dt(D,D.d_desc),mt=function(ft){var Lt;for(_(ft,ft.dyn_ltree,ft.l_desc.max_code),_(ft,ft.dyn_dtree,ft.d_desc.max_code),Dt(ft,ft.bl_desc),Lt=P-1;3<=Lt&&ft.bl_tree[2*$[Lt]+1]===0;Lt--);return ft.opt_len+=3*(Lt+1)+5+5+4,Lt}(D),Y=D.opt_len+3+7>>>3,(ut=D.static_len+3+7>>>3)<=Y&&(Y=ut)):Y=ut=rt+5,rt+4<=Y&&N!==-1?A(D,N,rt,st):D.strategy===4||ut===Y?(ht(D,2+(st?1:0),3),Tt(D,K,O)):(ht(D,4+(st?1:0),3),function(ft,Lt,Zt,xt){var Xt;for(ht(ft,Lt-257,5),ht(ft,Zt-1,5),ht(ft,xt-4,4),Xt=0;Xt<xt;Xt++)ht(ft,ft.bl_tree[2*$[Xt]+1],3);et(ft,ft.dyn_ltree,Lt-1),et(ft,ft.dyn_dtree,Zt-1)}(D,D.l_desc.max_code+1,D.d_desc.max_code+1,mt+1),Tt(D,D.dyn_ltree,D.dyn_dtree)),St(D),st&&Rt(D)},n._tr_tally=function(D,N,rt){return D.pending_buf[D.d_buf+2*D.last_lit]=N>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&N,D.pending_buf[D.l_buf+D.last_lit]=255&rt,D.last_lit++,N===0?D.dyn_ltree[2*rt]++:(D.matches++,N--,D.dyn_ltree[2*(d[rt]+g+1)]++,D.dyn_dtree[2*H(N)]++),D.last_lit===D.lit_bufsize-1},n._tr_align=function(D){ht(D,2,3),it(D,z,K),function(N){N.bi_valid===16?(pt(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)}(D)}},{"../utils/common":41}],53:[function(a,C,n){C.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,C,n){(function(r){(function(s,h){if(!s.setImmediate){var f,m,w,g,E=1,v={},P=!1,p=s.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(s);b=b&&b.setTimeout?b:s,f={}.toString.call(s.process)==="[object process]"?function(G){process.nextTick(function(){S(G)})}:function(){if(s.postMessage&&!s.importScripts){var G=!0,M=s.onmessage;return s.onmessage=function(){G=!1},s.postMessage("","*"),s.onmessage=M,G}}()?(g="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",z,!1):s.attachEvent("onmessage",z),function(G){s.postMessage(g+G,"*")}):s.MessageChannel?((w=new MessageChannel).port1.onmessage=function(G){S(G.data)},function(G){w.port2.postMessage(G)}):p&&"onreadystatechange"in p.createElement("script")?(m=p.documentElement,function(G){var M=p.createElement("script");M.onreadystatechange=function(){S(G),M.onreadystatechange=null,m.removeChild(M),M=null},m.appendChild(M)}):function(G){setTimeout(S,0,G)},b.setImmediate=function(G){typeof G!="function"&&(G=new Function(""+G));for(var M=new Array(arguments.length-1),U=0;U<M.length;U++)M[U]=arguments[U+1];var Z={callback:G,args:M};return v[E]=Z,f(E),E++},b.clearImmediate=T}function T(G){delete v[G]}function S(G){if(P)setTimeout(S,0,G);else{var M=v[G];if(M){P=!0;try{(function(U){var Z=U.callback,q=U.args;switch(q.length){case 0:Z();break;case 1:Z(q[0]);break;case 2:Z(q[0],q[1]);break;case 3:Z(q[0],q[1],q[2]);break;default:Z.apply(h,q)}})(M)}finally{T(G),P=!1}}}}function z(G){G.source===s&&typeof G.data=="string"&&G.data.indexOf(g)===0&&S(+G.data.slice(g.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Oi<"u"?Oi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Mo)),Mo.exports}var ih=eh();const nh=ts(ih);var ir={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var rh=ir.exports,Ss;function oh(){return Ss||(Ss=1,function(c,x){(function(){var a,C="4.15.0",n=200,r="Expected a function",s="__lodash_hash_undefined__",h=1,f=2,m=9007199254740991,w="[object Arguments]",g="[object Array]",E="[object Boolean]",v="[object Date]",P="[object Error]",p="[object Function]",b="[object GeneratorFunction]",T="[object Map]",S="[object Number]",z="[object Object]",G="[object Promise]",M="[object RegExp]",U="[object Set]",Z="[object String]",q="[object Symbol]",R="[object WeakMap]",$="[object ArrayBuffer]",K="[object DataView]",O="[object Float32Array]",F="[object Float64Array]",d="[object Int8Array]",j="[object Int16Array]",ct="[object Int32Array]",tt="[object Uint8Array]",ot="[object Uint8ClampedArray]",at="[object Uint16Array]",nt="[object Uint32Array]",W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,pt=/^\./,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,yt=/\\(\\)?/g,Ht=/\w*$/,St=/^\[object .+?Constructor\]$/,Rt=/^(?:0|[1-9]\d*)$/,bt={};bt[O]=bt[F]=bt[d]=bt[j]=bt[ct]=bt[tt]=bt[ot]=bt[at]=bt[nt]=!0,bt[w]=bt[g]=bt[$]=bt[E]=bt[K]=bt[v]=bt[P]=bt[p]=bt[T]=bt[S]=bt[z]=bt[M]=bt[U]=bt[Z]=bt[R]=!1;var wt={};wt[w]=wt[g]=wt[$]=wt[K]=wt[E]=wt[v]=wt[O]=wt[F]=wt[d]=wt[j]=wt[ct]=wt[T]=wt[S]=wt[z]=wt[M]=wt[U]=wt[Z]=wt[q]=wt[tt]=wt[ot]=wt[at]=wt[nt]=!0,wt[P]=wt[p]=wt[R]=!1;var Tt=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,Dt=typeof self=="object"&&self&&self.Object===Object&&self,_=Tt||Dt||Function("return this")(),et=x&&!x.nodeType&&x,X=et&&!0&&c&&!c.nodeType&&c,A=X&&X.exports===et,D=A&&Tt.process,N=function(){try{return D&&D.binding("util")}catch{}}(),rt=N&&N.isTypedArray;function st(l,k){return l.set(k[0],k[1]),l}function Y(l,k){return l.add(k),l}function ut(l,k,I){switch(I.length){case 0:return l.call(k);case 1:return l.call(k,I[0]);case 2:return l.call(k,I[0],I[1]);case 3:return l.call(k,I[0],I[1],I[2])}return l.apply(k,I)}function mt(l,k){for(var I=-1,Q=l?l.length:0;++I<Q&&k(l[I],I,l)!==!1;);return l}function ft(l,k){for(var I=-1,Q=k.length,_t=l.length;++I<Q;)l[_t+I]=k[I];return l}function Lt(l,k,I,Q){for(var _t=-1,dt=l?l.length:0;++_t<dt;)I=k(I,l[_t],_t,l);return I}function Zt(l,k){for(var I=-1,Q=l?l.length:0;++I<Q;)if(k(l[I],I,l))return!0;return!1}function xt(l){return function(k){return k==null?a:k[l]}}function Xt(l,k){for(var I=-1,Q=Array(l);++I<l;)Q[I]=k(I);return Q}function de(l){return function(k){return l(k)}}function ne(l,k){return l==null?a:l[k]}function ae(l){var k=!1;if(l!=null&&typeof l.toString!="function")try{k=!!(l+"")}catch{}return k}function Gt(l){var k=-1,I=Array(l.size);return l.forEach(function(Q,_t){I[++k]=[_t,Q]}),I}function le(l,k){return function(I){return l(k(I))}}function Jt(l){var k=-1,I=Array(l.size);return l.forEach(function(Q){I[++k]=Q}),I}var he=Array.prototype,ke=Function.prototype,ze=Object.prototype,Ie=_["__core-js_shared__"],qe=function(){var l=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Ce=ke.toString,Yt=ze.hasOwnProperty,Qe=Ce.call(Object),Be=ze.toString,Cn=RegExp("^"+Ce.call(Yt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fr=A?_.Buffer:a,dr=_.Symbol,tn=_.Uint8Array,en=le(Object.getPrototypeOf,Object),ho=Object.create,_r=ze.propertyIsEnumerable,uo=he.splice,pr=Object.getOwnPropertySymbols,Re=fr?fr.isBuffer:a,kt=le(Object.keys,Object),On=Math.max,nn=fi(_,"DataView"),wi=fi(_,"Map"),rn=fi(_,"Promise"),Ri=fi(_,"Set"),on=fi(_,"WeakMap"),Ne=fi(Object,"create"),mr=!_r.call({valueOf:1},"valueOf"),co=_i(nn),fo=_i(wi),_o=_i(rn),po=_i(Ri),gr=_i(on),sn=dr?dr.prototype:a,ti=sn?sn.valueOf:a,vr=sn?sn.toString:a;function zt(){}function li(l){var k=-1,I=l?l.length:0;for(this.clear();++k<I;){var Q=l[k];this.set(Q[0],Q[1])}}function mo(){this.__data__=Ne?Ne(null):{}}function go(l){return this.has(l)&&delete this.__data__[l]}function Dn(l){var k=this.__data__;if(Ne){var I=k[l];return I===s?a:I}return Yt.call(k,l)?k[l]:a}function Ni(l){var k=this.__data__;return Ne?k[l]!==a:Yt.call(k,l)}function yr(l,k){var I=this.__data__;return I[l]=Ne&&k===a?s:k,this}li.prototype.clear=mo,li.prototype.delete=go,li.prototype.get=Dn,li.prototype.has=Ni,li.prototype.set=yr;function Ze(l){var k=-1,I=l?l.length:0;for(this.clear();++k<I;){var Q=l[k];this.set(Q[0],Q[1])}}function Zi(){this.__data__=[]}function Ft(l){var k=this.__data__,I=ui(k,l);if(I<0)return!1;var Q=k.length-1;return I==Q?k.pop():uo.call(k,I,1),!0}function $t(l){var k=this.__data__,I=ui(k,l);return I<0?a:k[I][1]}function an(l){return ui(this.__data__,l)>-1}function bi(l,k){var I=this.__data__,Q=ui(I,l);return Q<0?I.push([l,k]):I[Q][1]=k,this}Ze.prototype.clear=Zi,Ze.prototype.delete=Ft,Ze.prototype.get=$t,Ze.prototype.has=an,Ze.prototype.set=bi;function ve(l){var k=-1,I=l?l.length:0;for(this.clear();++k<I;){var Q=l[k];this.set(Q[0],Q[1])}}function An(){this.__data__={hash:new li,map:new(wi||Ze),string:new li}}function Ot(l){return fn(this,l).delete(l)}function Qt(l){return fn(this,l).get(l)}function zn(l){return fn(this,l).has(l)}function ln(l,k){return fn(this,l).set(l,k),this}ve.prototype.clear=An,ve.prototype.delete=Ot,ve.prototype.get=Qt,ve.prototype.has=zn,ve.prototype.set=ln;function me(l){var k=-1,I=l?l.length:0;for(this.__data__=new ve;++k<I;)this.add(l[k])}function vo(l){return this.__data__.set(l,s),this}function hn(l){return this.__data__.has(l)}me.prototype.add=me.prototype.push=vo,me.prototype.has=hn;function ue(l){this.__data__=new Ze(l)}function te(){this.__data__=new Ze}function hi(l){return this.__data__.delete(l)}function Fi(l){return this.__data__.get(l)}function Ui(l){return this.__data__.has(l)}function In(l,k){var I=this.__data__;if(I instanceof Ze){var Q=I.__data__;if(!wi||Q.length<n-1)return Q.push([l,k]),this;I=this.__data__=new ve(Q)}return I.set(l,k),this}ue.prototype.clear=te,ue.prototype.delete=hi,ue.prototype.get=Fi,ue.prototype.has=Ui,ue.prototype.set=In;function Li(l,k){var I=ge(l)||we(l)?Xt(l.length,String):[],Q=I.length,_t=!!Q;for(var dt in l)(k||Yt.call(l,dt))&&!(_t&&(dt=="length"||ki(dt,Q)))&&I.push(dt);return I}function Hi(l,k,I){(I!==a&&!Ti(l[k],I)||typeof k=="number"&&I===a&&!(k in l))&&(l[k]=I)}function un(l,k,I){var Q=l[k];(!(Yt.call(l,k)&&Ti(Q,I))||I===a&&!(k in l))&&(l[k]=I)}function ui(l,k){for(var I=l.length;I--;)if(Ti(l[I][0],k))return I;return-1}function Bn(l,k){return l&&Gn(k,_e(k),l)}function ei(l,k,I,Q,_t,dt,gt){var Et;if(Q&&(Et=dt?Q(l,_t,dt,gt):Q(l)),Et!==a)return Et;if(!re(l))return l;var Ct=ge(l);if(Ct){if(Et=To(l),!k)return Mr(l,Et)}else{var qt=He(l),At=qt==p||qt==b;if(pi(l))return bo(l,k);if(qt==z||qt==w||At&&!dt){if(ae(l))return dt?l:{};if(Et=zr(At?{}:l),!k)return Wn(l,Bn(Et,l))}else{if(!wt[qt])return dt?l:{};Et=Ir(l,qt,ei,k)}}gt||(gt=new ue);var Vt=gt.get(l);if(Vt)return Vt;if(gt.set(l,Et),!Ct)var oe=I?Or(l):_e(l);return mt(oe||l,function(ee,fe){oe&&(fe=ee,ee=l[fe]),un(Et,fe,ei(ee,k,I,Q,fe,l,gt))}),Et}function cn(l){return re(l)?ho(l):{}}var wr=Ue(yo),Rn=Eo();function yo(l,k){return l&&Rn(l,k,_e)}function Mt(l,k){k=dn(k,l)?[k]:Bt(k);for(var I=0,Q=k.length;l!=null&&I<Q;)l=l[_n(k[I++])];return I&&I==Q?l:a}function Fe(l,k,I){var Q=k(l);return ge(l)?Q:ft(Q,I(l))}function Wt(l){return Be.call(l)}function br(l,k){return l!=null&&k in Object(l)}function Gi(l,k,I,Q,_t){return l===k?!0:l==null||k==null||!re(l)&&!Ve(k)?l!==l&&k!==k:Nn(l,k,Gi,I,Q,_t)}function Nn(l,k,I,Q,_t,dt){var gt=ge(l),Et=ge(k),Ct=g,qt=g;gt||(Ct=He(l),Ct=Ct==w?z:Ct),Et||(qt=He(k),qt=qt==w?z:qt);var At=Ct==z&&!ae(l),Vt=qt==z&&!ae(k),oe=Ct==qt;if(oe&&!At)return dt||(dt=new ue),gt||mn(l)?qn(l,k,I,Q,_t,dt):ni(l,k,Ct,I,Q,_t,dt);if(!(_t&f)){var ee=At&&Yt.call(l,"__wrapped__"),fe=Vt&&Yt.call(k,"__wrapped__");if(ee||fe){var je=ee?l.value():l,Ye=fe?k.value():k;return dt||(dt=new ue),I(je,Ye,Q,_t,dt)}}return oe?(dt||(dt=new ue),Cr(l,k,I,Q,_t,dt)):!1}function Zn(l,k,I,Q){var _t=I.length,dt=_t;if(l==null)return!dt;for(l=Object(l);_t--;){var gt=I[_t];if(gt[2]?gt[1]!==l[gt[0]]:!(gt[0]in l))return!1}for(;++_t<dt;){gt=I[_t];var Et=gt[0],Ct=l[Et],qt=gt[1];if(gt[2]){if(Ct===a&&!(Et in l))return!1}else{var At=new ue,Vt;if(!(Vt===a?Gi(qt,Ct,Q,h|f,At):Vt))return!1}}return!0}function ci(l){if(!re(l)||Ee(l))return!1;var k=mi(l)||ae(l)?Cn:St;return k.test(_i(l))}function Fn(l){return Ve(l)&&pn(l.length)&&!!bt[Be.call(l)]}function xi(l){return typeof l=="function"?l:l==null?gn:typeof l=="object"?ge(l)?xr(l[0],l[1]):Lr(l):vn(l)}function ce(l){if(!Vi(l))return kt(l);var k=[];for(var I in Object(l))Yt.call(l,I)&&I!="constructor"&&k.push(I);return k}function ii(l){if(!re(l))return Kn(l);var k=Vi(l),I=[];for(var Q in l)Q=="constructor"&&(k||!Yt.call(l,Q))||I.push(Q);return I}function Lr(l){var k=Dr(l);return k.length==1&&k[0][2]?Br(k[0][0],k[0][1]):function(I){return I===l||Zn(I,l,k)}}function xr(l,k){return dn(l)&&Yn(k)?Br(_n(l),k):function(I){var Q=gi(I,l);return Q===a&&Q===k?Hr(I,l):Gi(k,Q,a,h|f)}}function kr(l,k,I,Q,_t){if(l!==k){if(!(ge(k)||mn(k)))var dt=ii(k);mt(dt||k,function(gt,Et){if(dt&&(Et=gt,gt=k[Et]),re(gt))_t||(_t=new ue),Er(l,k,Et,I,kr,Q,_t);else{var Ct=Q?Q(l[Et],gt,Et+"",l,k,_t):a;Ct===a&&(Ct=gt),Hi(l,Et,Ct)}})}}function Er(l,k,I,Q,_t,dt,gt){var Et=l[I],Ct=k[I],qt=gt.get(Ct);if(qt){Hi(l,I,qt);return}var At=dt?dt(Et,Ct,I+"",l,k,gt):a,Vt=At===a;Vt&&(At=Ct,ge(Ct)||mn(Ct)?ge(Et)?At=Et:$n(Et)?At=Mr(Et):(Vt=!1,At=ei(Ct,!0)):Fr(Ct)||we(Ct)?we(Et)?At=Ge(Et):!re(Et)||Q&&mi(Et)?(Vt=!1,At=ei(Ct,!0)):At=Et:Vt=!1),Vt&&(gt.set(Ct,At),_t(At,Ct,Q,dt,gt),gt.delete(Ct)),Hi(l,I,At)}function Un(l){return function(k){return Mt(k,l)}}function wo(l,k){return k=On(k===a?l.length-1:k,0),function(){for(var I=arguments,Q=-1,_t=On(I.length-k,0),dt=Array(_t);++Q<_t;)dt[Q]=I[k+Q];Q=-1;for(var gt=Array(k+1);++Q<k;)gt[Q]=I[Q];return gt[k]=dt,ut(l,this,gt)}}function Tr(l){if(typeof l=="string")return l;if(Pi(l))return vr?vr.call(l):"";var k=l+"";return k=="0"&&1/l==-1/0?"-0":k}function Bt(l){return ge(l)?l:Xn(l)}function bo(l,k){if(k)return l.slice();var I=new l.constructor(l.length);return l.copy(I),I}function Le(l){var k=new l.constructor(l.byteLength);return new tn(k).set(new tn(l)),k}function Wi(l,k){var I=k?Le(l.buffer):l.buffer;return new l.constructor(I,l.byteOffset,l.byteLength)}function Pr(l,k,I){var Q=k?I(Gt(l),!0):Gt(l);return Lt(Q,st,new l.constructor)}function Lo(l){var k=new l.constructor(l.source,Ht.exec(l));return k.lastIndex=l.lastIndex,k}function Hn(l,k,I){var Q=k?I(Jt(l),!0):Jt(l);return Lt(Q,Y,new l.constructor)}function xo(l){return ti?Object(ti.call(l)):{}}function Sr(l,k){var I=k?Le(l.buffer):l.buffer;return new l.constructor(I,l.byteOffset,l.length)}function Mr(l,k){var I=-1,Q=l.length;for(k||(k=Array(Q));++I<Q;)k[I]=l[I];return k}function Gn(l,k,I,Q){I||(I={});for(var _t=-1,dt=k.length;++_t<dt;){var gt=k[_t],Et=a;un(I,gt,Et===a?l[gt]:Et)}return I}function Wn(l,k){return Gn(l,Ar(l),k)}function ko(l){return wo(function(k,I){var Q=-1,_t=I.length,dt=_t>1?I[_t-1]:a,gt=_t>2?I[2]:a;for(dt=l.length>3&&typeof dt=="function"?(_t--,dt):a,gt&&di(I[0],I[1],gt)&&(dt=_t<3?a:dt,_t=1),k=Object(k);++Q<_t;){var Et=I[Q];Et&&l(k,Et,Q,dt)}return k})}function Ue(l,k){return function(I,Q){if(I==null)return I;if(!Te(I))return l(I,Q);for(var _t=I.length,dt=-1,gt=Object(I);++dt<_t&&Q(gt[dt],dt,gt)!==!1;);return I}}function Eo(l){return function(k,I,Q){for(var _t=-1,dt=Object(k),gt=Q(k),Et=gt.length;Et--;){var Ct=gt[++_t];if(I(dt[Ct],Ct,dt)===!1)break}return k}}function qn(l,k,I,Q,_t,dt){var gt=_t&f,Et=l.length,Ct=k.length;if(Et!=Ct&&!(gt&&Ct>Et))return!1;var qt=dt.get(l);if(qt&&dt.get(k))return qt==k;var At=-1,Vt=!0,oe=_t&h?new me:a;for(dt.set(l,k),dt.set(k,l);++At<Et;){var ee=l[At],fe=k[At];if(Q)var je=gt?Q(fe,ee,At,k,l,dt):Q(ee,fe,At,l,k,dt);if(je!==a){if(je)continue;Vt=!1;break}if(oe){if(!Zt(k,function(Ye,Oe){if(!oe.has(Oe)&&(ee===Ye||I(ee,Ye,Q,_t,dt)))return oe.add(Oe)})){Vt=!1;break}}else if(!(ee===fe||I(ee,fe,Q,_t,dt))){Vt=!1;break}}return dt.delete(l),dt.delete(k),Vt}function ni(l,k,I,Q,_t,dt,gt){switch(I){case K:if(l.byteLength!=k.byteLength||l.byteOffset!=k.byteOffset)return!1;l=l.buffer,k=k.buffer;case $:return!(l.byteLength!=k.byteLength||!Q(new tn(l),new tn(k)));case E:case v:case S:return Ti(+l,+k);case P:return l.name==k.name&&l.message==k.message;case M:case Z:return l==k+"";case T:var Et=Gt;case U:var Ct=dt&f;if(Et||(Et=Jt),l.size!=k.size&&!Ct)return!1;var qt=gt.get(l);if(qt)return qt==k;dt|=h,gt.set(l,k);var At=qn(Et(l),Et(k),Q,_t,dt,gt);return gt.delete(l),At;case q:if(ti)return ti.call(l)==ti.call(k)}return!1}function Cr(l,k,I,Q,_t,dt){var gt=_t&f,Et=_e(l),Ct=Et.length,qt=_e(k),At=qt.length;if(Ct!=At&&!gt)return!1;for(var Vt=Ct;Vt--;){var oe=Et[Vt];if(!(gt?oe in k:Yt.call(k,oe)))return!1}var ee=dt.get(l);if(ee&&dt.get(k))return ee==k;var fe=!0;dt.set(l,k),dt.set(k,l);for(var je=gt;++Vt<Ct;){oe=Et[Vt];var Ye=l[oe],Oe=k[oe];if(Q)var Wr=gt?Q(Oe,Ye,oe,k,l,dt):Q(Ye,Oe,oe,l,k,dt);if(!(Wr===a?Ye===Oe||I(Ye,Oe,Q,_t,dt):Wr)){fe=!1;break}je||(je=oe=="constructor")}if(fe&&!je){var Ke=l.constructor,Ki=k.constructor;Ke!=Ki&&"constructor"in l&&"constructor"in k&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof Ki=="function"&&Ki instanceof Ki)&&(fe=!1)}return dt.delete(l),dt.delete(k),fe}function Or(l){return Fe(l,_e,Ar)}function Vn(){var l=zt.iteratee||Si;return l=l===Si?xi:l,arguments.length?l(arguments[0],arguments[1]):l}function fn(l,k){var I=l.__data__;return qi(k)?I[typeof k=="string"?"string":"hash"]:I.map}function Dr(l){for(var k=_e(l),I=k.length;I--;){var Q=k[I],_t=l[Q];k[I]=[Q,_t,Yn(_t)]}return k}function fi(l,k){var I=ne(l,k);return ci(I)?I:a}var Ar=pr?le(pr,Object):Yi,He=Wt;(nn&&He(new nn(new ArrayBuffer(1)))!=K||wi&&He(new wi)!=T||rn&&He(rn.resolve())!=G||Ri&&He(new Ri)!=U||on&&He(new on)!=R)&&(He=function(l){var k=Be.call(l),I=k==z?l.constructor:a,Q=I?_i(I):a;if(Q)switch(Q){case co:return K;case fo:return T;case _o:return G;case po:return U;case gr:return R}return k});function jn(l,k,I){k=dn(k,l)?[k]:Bt(k);for(var Q,_t=-1,gt=k.length;++_t<gt;){var dt=_n(k[_t]);if(!(Q=l!=null&&I(l,dt)))break;l=l[dt]}if(Q)return Q;var gt=l?l.length:0;return!!gt&&pn(gt)&&ki(dt,gt)&&(ge(l)||we(l))}function To(l){var k=l.length,I=l.constructor(k);return k&&typeof l[0]=="string"&&Yt.call(l,"index")&&(I.index=l.index,I.input=l.input),I}function zr(l){return typeof l.constructor=="function"&&!Vi(l)?cn(en(l)):{}}function Ir(l,k,I,Q){var _t=l.constructor;switch(k){case $:return Le(l);case E:case v:return new _t(+l);case K:return Wi(l,Q);case O:case F:case d:case j:case ct:case tt:case ot:case at:case nt:return Sr(l,Q);case T:return Pr(l,Q,I);case S:case Z:return new _t(l);case M:return Lo(l);case U:return Hn(l,Q,I);case q:return xo(l)}}function ki(l,k){return k=k??m,!!k&&(typeof l=="number"||Rt.test(l))&&l>-1&&l%1==0&&l<k}function di(l,k,I){if(!re(I))return!1;var Q=typeof k;return(Q=="number"?Te(I)&&ki(k,I.length):Q=="string"&&k in I)?Ti(I[k],l):!1}function dn(l,k){if(ge(l))return!1;var I=typeof l;return I=="number"||I=="symbol"||I=="boolean"||l==null||Pi(l)?!0:H.test(l)||!W.test(l)||k!=null&&l in Object(k)}function qi(l){var k=typeof l;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?l!=="__proto__":l===null}function Ee(l){return!!qe&&qe in l}function Vi(l){var k=l&&l.constructor,I=typeof k=="function"&&k.prototype||ze;return l===I}function Yn(l){return l===l&&!re(l)}function Br(l,k){return function(I){return I==null?!1:I[l]===k&&(k!==a||l in Object(I))}}function Kn(l){var k=[];if(l!=null)for(var I in Object(l))k.push(I);return k}var Xn=ye(function(l){l=Ur(l);var k=[];return pt.test(l)&&k.push(""),l.replace(ht,function(I,Q,_t,dt){k.push(_t?dt.replace(yt,"$1"):Q||I)}),k});function _n(l){if(typeof l=="string"||Pi(l))return l;var k=l+"";return k=="0"&&1/l==-1/0?"-0":k}function _i(l){if(l!=null){try{return Ce.call(l)}catch{}try{return l+""}catch{}}return""}function Rr(l){for(var k=-1,I=l?l.length:0,Q=0,_t=[];++k<I;){var dt=l[k];dt&&(_t[Q++]=dt)}return _t}function Nr(l,k){var I=ge(l)?mt:wr;return I(l,Vn(k,3))}function ye(l,k){if(typeof l!="function"||k&&typeof k!="function")throw new TypeError(r);var I=function(){var Q=arguments,_t=k?k.apply(this,Q):Q[0],dt=I.cache;if(dt.has(_t))return dt.get(_t);var gt=l.apply(this,Q);return I.cache=dt.set(_t,gt),gt};return I.cache=new(ye.Cache||ve),I}ye.Cache=ve;function Ei(l){return ei(l,!1,!0)}function Ti(l,k){return l===k||l!==l&&k!==k}function we(l){return $n(l)&&Yt.call(l,"callee")&&(!_r.call(l,"callee")||Be.call(l)==w)}var ge=Array.isArray;function Te(l){return l!=null&&pn(l.length)&&!mi(l)}function $n(l){return Ve(l)&&Te(l)}var pi=Re||vi;function Zr(l){if(Te(l)&&(ge(l)||typeof l=="string"||typeof l.splice=="function"||pi(l)||we(l)))return!l.length;var k=He(l);if(k==T||k==U)return!l.size;if(mr||Vi(l))return!kt(l).length;for(var I in l)if(Yt.call(l,I))return!1;return!0}function mi(l){var k=re(l)?Be.call(l):"";return k==p||k==b}function pn(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=m}function re(l){var k=typeof l;return!!l&&(k=="object"||k=="function")}function Ve(l){return!!l&&typeof l=="object"}function Fr(l){if(!Ve(l)||Be.call(l)!=z||ae(l))return!1;var k=en(l);if(k===null)return!0;var I=Yt.call(k,"constructor")&&k.constructor;return typeof I=="function"&&I instanceof I&&Ce.call(I)==Qe}function Pi(l){return typeof l=="symbol"||Ve(l)&&Be.call(l)==q}var mn=rt?de(rt):Fn;function Ge(l){return Gn(l,ji(l))}function Ur(l){return l==null?"":Tr(l)}function gi(l,k,I){var Q=l==null?a:Mt(l,k);return Q===a?I:Q}function Hr(l,k){return l!=null&&jn(l,k,br)}function _e(l){return Te(l)?Li(l):ce(l)}function ji(l){return Te(l)?Li(l,!0):ii(l)}var Gr=ko(function(l,k,I){kr(l,k,I)});function gn(l){return l}function Si(l){return xi(typeof l=="function"?l:ei(l,!0))}function vn(l){return dn(l)?xt(_n(l)):Un(l)}function Yi(){return[]}function vi(){return!1}zt.compact=Rr,zt.iteratee=Si,zt.keys=_e,zt.keysIn=ji,zt.memoize=ye,zt.merge=Gr,zt.property=vn,zt.toPlainObject=Ge,zt.clone=Ei,zt.eq=Ti,zt.forEach=Nr,zt.get=gi,zt.hasIn=Hr,zt.identity=gn,zt.isArguments=we,zt.isArray=ge,zt.isArrayLike=Te,zt.isArrayLikeObject=$n,zt.isBuffer=pi,zt.isEmpty=Zr,zt.isFunction=mi,zt.isLength=pn,zt.isObject=re,zt.isObjectLike=Ve,zt.isPlainObject=Fr,zt.isSymbol=Pi,zt.isTypedArray=mn,zt.stubArray=Yi,zt.stubFalse=vi,zt.toString=Ur,zt.each=Nr,zt.VERSION=C,X&&((X.exports=zt)._=zt,et._=zt)}).call(rh)}(ir,ir.exports)),ir.exports}var Co,Ms;function sh(){if(Ms)return Co;Ms=1,Co=c;function c(C,n){var r=C&&C.type,s;if(r==="FeatureCollection")for(s=0;s<C.features.length;s++)c(C.features[s],n);else if(r==="GeometryCollection")for(s=0;s<C.geometries.length;s++)c(C.geometries[s],n);else if(r==="Feature")c(C.geometry,n);else if(r==="Polygon")x(C.coordinates,n);else if(r==="MultiPolygon")for(s=0;s<C.coordinates.length;s++)x(C.coordinates[s],n);return C}function x(C,n){if(C.length!==0){a(C[0],n);for(var r=1;r<C.length;r++)a(C[r],!n)}}function a(C,n){for(var r=0,s=0,h=0,f=C.length,m=f-1;h<f;m=h++){var w=(C[h][0]-C[m][0])*(C[m][1]+C[h][1]),g=r+w;s+=Math.abs(r)>=Math.abs(w)?r-g+w:w-g+r,r=g}r+s>=0!=!!n&&C.reverse()}return Co}const ah=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var Oo,Cs;function lh(){return Cs||(Cs=1,Oo=ah),Oo}var Do,Os;function hh(){if(Os)return Do;Os=1;var c=oh(),x=sh(),a={};lh().forEach(function(s){if(s.polygon==="all")a[s.key]=!0;else{var h=s.polygon==="whitelist"?"included_values":"excluded_values",f={};s.values.forEach(function(m){f[m]=!0}),a[s.key]={},a[s.key][h]=f}});function C(s,h){return(s.version||h.version)&&s.version!==h.version?(+s.version||0)>(+h.version||0)?s:h:c.merge(s,h)}var n={};n=function(s,h,f){h=c.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:a,deduplicator:C},h);var m;return typeof XMLDocument<"u"&&s instanceof XMLDocument||typeof XMLDocument>"u"&&s.childNodes?m=g(s):m=w(s),m;function w(P){var p=new Array,b=new Array,T=new Array;function S(K){var O=c.clone(K);O.lat=K.center.lat,O.lon=K.center.lon,O.__is_center_placeholder=!0,p.push(O)}function z(K){var O=c.clone(K);O.nodes=[];function F(d,j,ct){var tt={type:"node",id:"_"+O.type+"/"+O.id+"bounds"+ct,lat:d,lon:j};O.nodes.push(tt.id),p.push(tt)}F(O.bounds.minlat,O.bounds.minlon,1),F(O.bounds.maxlat,O.bounds.minlon,2),F(O.bounds.maxlat,O.bounds.maxlon,3),F(O.bounds.minlat,O.bounds.maxlon,4),O.nodes.push(O.nodes[0]),O.__is_bounds_placeholder=!0,b.push(O)}function G(K){function O(F,d,j){var ct={type:"node",id:j,lat:F,lon:d};p.push(ct)}c.isArray(K.nodes)||(K.nodes=K.geometry.map(function(F){return F!==null?"_anonymous@"+F.lat+"/"+F.lon:"_anonymous@unknown_location"})),K.geometry.forEach(function(F,d){F&&O(F.lat,F.lon,K.nodes[d])})}function M(K){function O(d,j,ct){var tt={type:"node",id:ct,lat:d,lon:j};p.push(tt)}function F(d,j){if(b.some(function(ot){return ot.type=="way"&&ot.id==j}))return;var ct={type:"way",id:j,nodes:[]};function tt(ot,at){var nt={type:"node",id:"_anonymous@"+ot+"/"+at,lat:ot,lon:at};ct.nodes.push(nt.id),p.push(nt)}d.forEach(function(ot){ot?tt(ot.lat,ot.lon):ct.nodes.push(void 0)}),b.push(ct)}K.members.forEach(function(d,j){d.type=="node"?d.lat&&O(d.lat,d.lon,d.ref):d.type=="way"&&d.geometry&&(d.ref="_fullGeom"+d.ref,F(d.geometry,d.ref))})}for(var U=0;U<P.elements.length;U++)switch(P.elements[U].type){case"node":var Z=P.elements[U];p.push(Z);break;case"way":var q=c.clone(P.elements[U]);q.nodes=c.clone(q.nodes),b.push(q),q.center&&S(q),q.geometry?G(q):q.bounds&&z(q);break;case"relation":var R=c.clone(P.elements[U]);R.members=c.clone(R.members),T.push(R);var $=R.members&&R.members.some(function(K){return K.type=="node"&&K.lat||K.type=="way"&&K.geometry&&K.geometry.length>0});R.center&&S(R),$?M(R):R.bounds&&z(R);break}return E(p,b,T)}function g(P){var p=new Array,b=new Array,T=new Array;function S(R,$,K){R.hasAttribute(K)&&($[K]=R.getAttribute(K))}function z(R,$){var K=c.clone(R);S($,K,"lat"),S($,K,"lon"),K.__is_center_placeholder=!0,p.push(K)}function G(R,$){var K=c.clone(R);K.nodes=[];function O(F,d,j){var ct={type:"node",id:"_"+K.type+"/"+K.id+"bounds"+j,lat:F,lon:d};K.nodes.push(ct.id),p.push(ct)}O($.getAttribute("minlat"),$.getAttribute("minlon"),1),O($.getAttribute("maxlat"),$.getAttribute("minlon"),2),O($.getAttribute("maxlat"),$.getAttribute("maxlon"),3),O($.getAttribute("minlat"),$.getAttribute("maxlon"),4),K.nodes.push(K.nodes[0]),K.__is_bounds_placeholder=!0,b.push(K)}function M(R,$){function K(O,F,d){var j={type:"node",id:d,lat:O,lon:F};return p.push(j),j.id}c.isArray(R.nodes)||(R.nodes=[],c.each($,function(O,F){R.nodes.push("_anonymous@"+O.getAttribute("lat")+"/"+O.getAttribute("lon"))})),c.each($,function(O,F){O.getAttribute("lat")&&K(O.getAttribute("lat"),O.getAttribute("lon"),R.nodes[F])})}function U(R,$){function K(F,d,j){var ct={type:"node",id:j,lat:F,lon:d};p.push(ct)}function O(F,d){if(b.some(function(tt){return tt.type=="way"&&tt.id==d}))return;var j={type:"way",id:d,nodes:[]};function ct(tt,ot){var at={type:"node",id:"_anonymous@"+tt+"/"+ot,lat:tt,lon:ot};j.nodes.push(at.id),p.push(at)}c.each(F,function(tt){tt.getAttribute("lat")?ct(tt.getAttribute("lat"),tt.getAttribute("lon")):j.nodes.push(void 0)}),b.push(j)}c.each($,function(F,d){R.members[d].type=="node"?F.getAttribute("lat")&&K(F.getAttribute("lat"),F.getAttribute("lon"),R.members[d].ref):R.members[d].type=="way"&&F.getElementsByTagName("nd").length>0&&(R.members[d].ref="_fullGeom"+R.members[d].ref,O(F.getElementsByTagName("nd"),R.members[d].ref))})}c.each(P.getElementsByTagName("node"),function(R,$){var K={};c.each(R.getElementsByTagName("tag"),function(F){K[F.getAttribute("k")]=F.getAttribute("v")});var O={type:"node"};S(R,O,"id"),S(R,O,"lat"),S(R,O,"lon"),S(R,O,"version"),S(R,O,"timestamp"),S(R,O,"changeset"),S(R,O,"uid"),S(R,O,"user"),c.isEmpty(K)||(O.tags=K),p.push(O)});var Z,q;return c.each(P.getElementsByTagName("way"),function(R,$){var K={},O=[];c.each(R.getElementsByTagName("tag"),function(j){K[j.getAttribute("k")]=j.getAttribute("v")});var F=!1;c.each(R.getElementsByTagName("nd"),function(j,ct){var tt;(tt=j.getAttribute("ref"))&&(O[ct]=tt),!F&&j.getAttribute("lat")&&(F=!0)});var d={type:"way"};S(R,d,"id"),S(R,d,"version"),S(R,d,"timestamp"),S(R,d,"changeset"),S(R,d,"uid"),S(R,d,"user"),O.length>0&&(d.nodes=O),c.isEmpty(K)||(d.tags=K),(Z=R.getElementsByTagName("center")[0])&&z(d,Z),F?M(d,R.getElementsByTagName("nd")):(q=R.getElementsByTagName("bounds")[0])&&G(d,q),b.push(d)}),c.each(P.getElementsByTagName("relation"),function(R,$){var K={},O=[];c.each(R.getElementsByTagName("tag"),function(j){K[j.getAttribute("k")]=j.getAttribute("v")});var F=!1;c.each(R.getElementsByTagName("member"),function(j,ct){O[ct]={},S(j,O[ct],"ref"),S(j,O[ct],"role"),S(j,O[ct],"type"),(!F&&O[ct].type=="node"&&j.getAttribute("lat")||O[ct].type=="way"&&j.getElementsByTagName("nd").length>0)&&(F=!0)});var d={type:"relation"};S(R,d,"id"),S(R,d,"version"),S(R,d,"timestamp"),S(R,d,"changeset"),S(R,d,"uid"),S(R,d,"user"),O.length>0&&(d.members=O),c.isEmpty(K)||(d.tags=K),(Z=R.getElementsByTagName("center")[0])&&z(d,Z),F?U(d,R.getElementsByTagName("member")):(q=R.getElementsByTagName("bounds")[0])&&G(d,q),T.push(d)}),E(p,b,T)}function E(P,p,b){function T(bt,wt){if(typeof wt!="object"&&(wt={}),typeof h.uninterestingTags=="function")return!h.uninterestingTags(bt,wt);for(var Tt in bt)if(h.uninterestingTags[Tt]!==!0&&!(wt[Tt]===!0||wt[Tt]===bt[Tt]))return!0;return!1}function S(bt){var wt={timestamp:bt.timestamp,version:bt.version,changeset:bt.changeset,user:bt.user,uid:bt.uid};for(var Tt in wt)wt[Tt]===void 0&&delete wt[Tt];return wt}for(var z=new Object,G=new Object,M=0;M<P.length;M++){var U=P[M];z[U.id]!==void 0&&(U=h.deduplicator(U,z[U.id])),z[U.id]=U,typeof U.tags<"u"&&T(U.tags)&&(G[U.id]=!0)}for(var M=0;M<b.length;M++)if(c.isArray(b[M].members))for(var Z=0;Z<b[M].members.length;Z++)b[M].members[Z].type=="node"&&(G[b[M].members[Z].ref]=!0);for(var q=new Object,R=new Object,M=0;M<p.length;M++){var $=p[M];if(q[$.id]&&($=h.deduplicator($,q[$.id])),q[$.id]=$,c.isArray($.nodes))for(var Z=0;Z<$.nodes.length;Z++)typeof $.nodes[Z]!="object"&&(R[$.nodes[Z]]=!0,$.nodes[Z]=z[$.nodes[Z]])}var K=new Array;for(var O in z){var U=z[O];(!R[O]||G[O])&&K.push(U)}for(var F=new Array,M=0;M<b.length;M++){var d=b[M];F[d.id]&&(d=h.deduplicator(d,F[d.id])),F[d.id]=d}var j={node:{},way:{},relation:{}};for(var O in F){var d=F[O];if(!c.isArray(d.members)){h.verbose&&console.warn("Relation",d.type+"/"+d.id,"ignored because it has no members");continue}for(var Z=0;Z<d.members.length;Z++){var ct=d.members[Z].type,tt=d.members[Z].ref;if(typeof tt!="number"&&(tt=tt.replace("_fullGeom","")),!j[ct]){h.verbose&&console.warn("Relation",d.type+"/"+d.id,"member",ct+"/"+tt,"ignored because it has an invalid type");continue}typeof j[ct][tt]>"u"&&(j[ct][tt]=[]),j[ct][tt].push({role:d.members[Z].role,rel:d.id,reltags:d.tags})}}var ot,at=[];for(M=0;M<K.length;M++){if(typeof K[M].lon>"u"||typeof K[M].lat>"u"){h.verbose&&console.warn("POI",K[M].type+"/"+K[M].id,"ignored because it lacks coordinates");continue}var nt={type:"Feature",id:K[M].type+"/"+K[M].id,properties:{type:K[M].type,id:K[M].id,tags:K[M].tags||{},relations:j.node[K[M].id]||[],meta:S(K[M])},geometry:{type:"Point",coordinates:[+K[M].lon,+K[M].lat]}};K[M].__is_center_placeholder&&(nt.properties.geometry="center"),f?f(nt):at.push(nt)}for(var W=[],H=[],M=0;M<b.length;M++)if(F[b[M].id]===b[M]){if(typeof b[M].tags<"u"&&(b[M].tags.type=="route"||b[M].tags.type=="waterway")){let wt=function(Tt){var Dt=!1,_;_=Tt.members.filter(function(D){return D.type==="way"}),_=_.map(function(D){var N=q[D.ref];if(N===void 0||N.nodes===void 0){h.verbose&&console.warn("Route "+Tt.type+"/"+Tt.id,"tainted by a missing or incomplete  way",D.type+"/"+D.ref),Dt=!0;return}return{id:D.ref,role:D.role,way:N,nodes:N.nodes.filter(function(rt){return rt!==void 0?!0:(Dt=!0,h.verbose&&console.warn("Route",Tt.type+"/"+Tt.id,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),_=c.compact(_);var et;et=r(_);var X=[];if(X=c.compact(et.map(function(D){return c.compact(D.map(function(N){return[+N.lon,+N.lat]}))})),X.length==0)return h.verbose&&console.warn("Route",Tt.type+"/"+Tt.id,"contains no coordinates"),!1;var A={type:"Feature",id:Tt.type+"/"+Tt.id,properties:{type:Tt.type,id:Tt.id,tags:Tt.tags||{},relations:j[Tt.type][Tt.id]||[],meta:S(Tt)},geometry:{type:X.length===1?"LineString":"MultiLineString",coordinates:X.length===1?X[0]:X}};return Dt&&(h.verbose&&console.warn("Route",Tt.type+"/"+Tt.id,"is tainted"),A.properties.tainted=!0),A};var St=wt;if(!c.isArray(b[M].members)){h.verbose&&console.warn("Route",b[M].type+"/"+b[M].id,"ignored because it has no members");continue}if(b[M].members.forEach(function(Tt){q[Tt.ref]&&!T(q[Tt.ref].tags)&&(q[Tt.ref].is_skippablerelationmember=!0)}),nt=wt(b[M]),nt===!1){h.verbose&&console.warn("Route relation",b[M].type+"/"+b[M].id,"ignored because it has invalid geometry");continue}f?f(x(nt)):H.push(nt)}if(typeof b[M].tags<"u"&&(b[M].tags.type=="multipolygon"||b[M].tags.type=="boundary")){let Tt=function(Dt,_){var et=!1,X=ht?"way":"relation",A=typeof Dt.id=="number"?Dt.id:+Dt.id.replace("_fullGeom",""),D;D=_.members.filter(function(xt){return xt.type==="way"}),D=D.map(function(xt){var Xt=q[xt.ref];if(Xt===void 0||Xt.nodes===void 0){h.verbose&&console.warn("Multipolygon",X+"/"+A,"tainted by a missing or incomplete way",xt.type+"/"+xt.ref),et=!0;return}return{id:xt.ref,role:xt.role||"outer",way:Xt,nodes:Xt.nodes.filter(function(de){return de!==void 0?!0:(et=!0,h.verbose&&console.warn("Multipolygon",X+"/"+A,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),D=c.compact(D);var N,rt;N=r(D.filter(function(xt){return xt.role==="outer"})),rt=r(D.filter(function(xt){return xt.role==="inner"}));var st;function Y(xt){var Xt=function(le,Jt){for(var he=0;he<Jt.length;he++)if(ne(Jt[he],le))return!0;return!1},de=function(le){return le.map(function(Jt){return[+Jt.lat,+Jt.lon]})},ne=function(le,Jt){for(var he=le[0],ke=le[1],ze=!1,Ie=0,qe=Jt.length-1;Ie<Jt.length;qe=Ie++){var Ce=Jt[Ie][0],Yt=Jt[Ie][1],Qe=Jt[qe][0],Be=Jt[qe][1],Cn=Yt>ke!=Be>ke&&he<(Qe-Ce)*(ke-Yt)/(Be-Yt)+Ce;Cn&&(ze=!ze)}return ze},ae,Gt;for(xt=de(xt),ae=0;ae<N.length;ae++)if(Gt=de(N[ae]),Xt(Gt,xt))return ae}st=N.map(function(xt){return[xt]});for(var ut=0;ut<rt.length;ut++){var mt=Y(rt[ut]);mt!==void 0?st[mt].push(rt[ut]):h.verbose&&console.warn("Multipolygon",X+"/"+A,"contains an inner ring with no containing outer")}var ft=[];if(ft=c.compact(st.map(function(xt){var Xt=c.compact(xt.map(function(de){if(de.length<4){h.verbose&&console.warn("Multipolygon",X+"/"+A,"contains a ring with less than four nodes");return}return c.compact(de.map(function(ne){return[+ne.lon,+ne.lat]}))}));if(Xt.length==0){h.verbose&&console.warn("Multipolygon",X+"/"+A,"contains an empty ring cluster");return}return Xt})),ft.length==0)return h.verbose&&console.warn("Multipolygon",X+"/"+A,"contains no coordinates"),!1;var Lt="MultiPolygon";ft.length===1&&(Lt="Polygon",ft=ft[0]);var Zt={type:"Feature",id:Dt.type+"/"+A,properties:{type:Dt.type,id:A,tags:Dt.tags||{},relations:j[Dt.type][Dt.id]||[],meta:S(Dt)},geometry:{type:Lt,coordinates:ft}};return et&&(h.verbose&&console.warn("Multipolygon",X+"/"+A,"is tainted"),Zt.properties.tainted=!0),Zt};var Rt=Tt;if(!c.isArray(b[M].members)){h.verbose&&console.warn("Multipolygon",b[M].type+"/"+b[M].id,"ignored because it has no members");continue}for(var pt=0,Z=0;Z<b[M].members.length;Z++)b[M].members[Z].role=="outer"?pt++:h.verbose&&b[M].members[Z].role!="inner"&&console.warn("Multipolygon",b[M].type+"/"+b[M].id,"member",b[M].members[Z].type+"/"+b[M].members[Z].ref,'ignored because it has an invalid role: "'+b[M].members[Z].role+'"');if(b[M].members.forEach(function(Dt){q[Dt.ref]&&(Dt.role==="outer"&&!T(q[Dt.ref].tags,b[M].tags)&&(q[Dt.ref].is_skippablerelationmember=!0),Dt.role==="inner"&&!T(q[Dt.ref].tags)&&(q[Dt.ref].is_skippablerelationmember=!0))}),pt==0){h.verbose&&console.warn("Multipolygon relation",b[M].type+"/"+b[M].id,"ignored because it has no outer ways");continue}var ht=!1;pt==1&&!T(b[M].tags,{type:!0})&&(ht=!0);var nt=null;if(!ht)nt=Tt(b[M],b[M]);else{var it=b[M].members.filter(function(Dt){return Dt.role==="outer"})[0];if(it=q[it.ref],it===void 0){h.verbose&&console.warn("Multipolygon relation",b[M].type+"/"+b[M].id,"ignored because outer way",it.type+"/"+it.ref,"is missing");continue}it.is_skippablerelationmember=!0,nt=Tt(it,b[M])}if(nt===!1){h.verbose&&console.warn("Multipolygon relation",b[M].type+"/"+b[M].id,"ignored because it has invalid geometry");continue}f?f(x(nt)):H.push(nt)}}for(var M=0;M<p.length;M++)if(q[p[M].id]===p[M]){if(!c.isArray(p[M].nodes)){h.verbose&&console.warn("Way",p[M].type+"/"+p[M].id,"ignored because it has no nodes");continue}if(!p[M].is_skippablerelationmember){typeof p[M].id!="number"&&(p[M].id=+p[M].id.replace("_fullGeom","")),p[M].tainted=!1,p[M].hidden=!1;var yt=new Array;for(Z=0;Z<p[M].nodes.length;Z++)typeof p[M].nodes[Z]=="object"?yt.push([+p[M].nodes[Z].lon,+p[M].nodes[Z].lat]):(h.verbose&&console.warn("Way",p[M].type+"/"+p[M].id,"is tainted by an invalid node"),p[M].tainted=!0);if(yt.length<=1){h.verbose&&console.warn("Way",p[M].type+"/"+p[M].id,"ignored because it contains too few nodes");continue}var Ht="LineString";typeof p[M].nodes[0]<"u"&&typeof p[M].nodes[p[M].nodes.length-1]<"u"&&p[M].nodes[0].id===p[M].nodes[p[M].nodes.length-1].id&&(typeof p[M].tags<"u"&&v(p[M].tags)||p[M].__is_bounds_placeholder)&&(Ht="Polygon",yt=[yt]);var nt={type:"Feature",id:p[M].type+"/"+p[M].id,properties:{type:p[M].type,id:p[M].id,tags:p[M].tags||{},relations:j.way[p[M].id]||[],meta:S(p[M])},geometry:{type:Ht,coordinates:yt}};p[M].tainted&&(h.verbose&&console.warn("Way",p[M].type+"/"+p[M].id,"is tainted"),nt.properties.tainted=!0),p[M].__is_bounds_placeholder&&(nt.properties.geometry="bounds"),f?f(x(nt)):Ht=="LineString"?W.push(nt):H.push(nt)}}return f?!0:(ot={type:"FeatureCollection",features:[]},ot.features=ot.features.concat(H),ot.features=ot.features.concat(W),ot.features=ot.features.concat(at),h.flatProperties&&ot.features.forEach(function(bt){bt.properties=c.merge(bt.properties.meta,bt.properties.tags,{id:bt.properties.type+"/"+bt.properties.id})}),ot=x(ot),ot)}function v(P){var p=h.polygonFeatures;if(typeof p=="function")return p(P);if(P.area==="no")return!1;for(var b in P){var T=P[b],S=p[b];if(!(typeof S>"u")&&T!=="no"&&(S===!0||S.included_values&&S.included_values[T]===!0||S.excluded_values&&S.excluded_values[T]!==!0))return!0}return!1}};function r(s){for(var h=function(T){return T[0]},f=function(T){return T[T.length-1]},m=function(T,S){return T!==void 0&&S!==void 0&&T.id===S.id},w=[],g,E,v,P,p,b;s.length;)for(g=s.pop().nodes.slice(),w.push(g);s.length&&!m(h(g),f(g));){for(E=h(g),v=f(g),P=0;P<s.length;P++)if(b=s[P].nodes,m(v,h(b))){p=g.push,b=b.slice(1);break}else if(m(v,f(b))){p=g.push,b=b.slice(0,-1).reverse();break}else if(m(E,f(b))){p=g.unshift,b=b.slice(0,-1);break}else if(m(E,h(b))){p=g.unshift,b=b.slice(1).reverse();break}else b=p=null;if(!b)break;s.splice(P,1),p.apply(g,b)}return w}return n.toGeojson=n,Do=n,Do}var uh=hh();const ch=ts(uh);var fh=Bi('<p class="svelte-1tmczmq">Draw a shape on the map.</p>'),dh=Bi('<p class="svelte-1tmczmq">Processing... Please wait.</p>'),_h=Bi('<p class="svelte-1tmczmq">The selected area is too large. Please reduce the area.</p>'),ph=Bi('<div class="svelte-1tmczmq"><!> <!> <!> <button class="svelte-1tmczmq"> </button></div>');function mh(c,x){ao(x,!1);let a=rr(x,"area",8),C=rr(x,"latlngs",8),n=rr(x,"selectedLayer",8);const r=8e6;let s=xn(!1),h=xn(!1);console.log(a());const f=()=>{ie(s,a()<=r)},m=U=>{const Z=L.latLngBounds(U);return[Z.getSouthWest(),Z.getNorthEast()]},w=async()=>{if(!C())return null;const[U,Z]=m(C()),q="https://overpass-api.de/api/interpreter",R=`
            [out:json];
            (
                way["building"](${U.lat},${U.lng},${Z.lat},${Z.lng});
                relation["building"](${U.lat},${U.lng},${Z.lat},${Z.lng});
            );
            out body;
            >;
            out skel qt;
        `,$=await fetch(q,{method:"POST",body:R,headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!$.ok)return alert("Failed to fetch GeoJSON data."),null;const K=await $.json();return ch(K)},g=async()=>{if(!C()||!n())return null;const[U,Z]=m(C()),q=256,R=17,$=(W,H,pt)=>{const ht=Math.pow(2,pt),it=Math.floor((H+180)/360*ht),yt=Math.floor((1-Math.log(Math.tan(W*Math.PI/180)+1/Math.cos(W*Math.PI/180))/Math.PI)/2*ht);return{x:it,y:yt}},K=$(U.lat,U.lng,R),O=$(Z.lat,Z.lng,R),F={x:Math.min(K.x,O.x),y:Math.min(K.y,O.y)},d={x:Math.max(K.x,O.x),y:Math.max(K.y,O.y)},j=d.x-F.x+1,ct=d.y-F.y+1,tt=document.createElement("canvas"),ot=tt.getContext("2d");tt.width=j*q,tt.height=ct*q;const at=[];for(let W=F.x;W<=d.x;W++)for(let H=F.y;H<=d.y;H++){const pt=n().value.replace("{z}",R).replace("{x}",W).replace("{y}",H);at.push({url:pt,x:W-F.x,y:H-F.y})}return(await Promise.all(at.map(W=>fetch(W.url).then(H=>{if(!H.ok)throw new Error(`Failed to fetch tile: ${W.url}`);return H.blob()}).then(H=>createImageBitmap(H)).then(H=>({img:H,x:W.x,y:W.y}))))).forEach(({img:W,x:H,y:pt})=>{const ht=H*q,it=pt*q;ot.drawImage(W,ht,it,q,q)}),tt},E=async()=>{if(!Ut(s)){alert("The area is too large or the zoom level is too low.");return}ie(h,!0);try{const U=new nh,Z=await w();Z&&U.file("buildings.geojson",JSON.stringify(Z,null,2));const q=await g();if(q){const O=await new Promise(F=>q.toBlob(F,"image/png"));U.file("map-tiles.png",O)}const R=await U.generateAsync({type:"blob"}),$=URL.createObjectURL(R),K=document.createElement("a");K.href=$,K.download="vantage-scene-setup.zip",K.click(),URL.revokeObjectURL($)}catch(U){console.error("Error during download:",U),alert("An error occurred during download.")}finally{ie(h,!1)}};Vs(()=>Jo(a()),()=>{a()&&f()}),js(),Qo();var v=ph(),P=or(v);{var p=U=>{var Z=fh();Ci(U,Z)};So(P,U=>{a()||U(p)})}var b=Ji(P,2);{var T=U=>{var Z=dh();Ci(U,Z)};So(b,U=>{Ut(h)&&U(T)})}var S=Ji(b,2);{var z=U=>{var Z=_h();Ci(U,Z)};So(S,U=>{a()&&!Ut(s)&&!Ut(h)&&U(z)})}var G=Ji(S,2),M=or(G);Ys(()=>{G.disabled=!Ut(s)||Ut(h),la(M,Ut(h)?"Processing...":"Download Data")}),aa("click",G,E),Ci(c,v),lo()}var gh=Bi(`<div><h1>Vantage Scene Setup</h1> <p>Export the relevant data to setup Vantage. Start by drawing a shape on the
    map.</p> <!> <!> <!></div>`);function vh(c){let x=xn(null),a=xn(),C=xn([]);const n=g=>{ie(a,g.detail.layer)},r=g=>{const E=g.detail.layer;ie(x,L.GeometryUtil.geodesicArea(E._latlngs[0])),ie(C,E._latlngs[0])},s=g=>{ie(x,g.detail.area),ie(C,g.detail.latlngs)};var h=gh(),f=Ji(or(h),4);Yl(f,{get selectedLayer(){return Ut(a)},set selectedLayer(g){ie(a,g)},$$events:{change:n},$$legacy:!0});var m=Ji(f,2);th(m,{get selectedLayer(){return Ut(a)},$$events:{shapeDrawn:r,shapeEdited:s}});var w=Ji(m,2);mh(w,{get area(){return Ut(x)},get latlngs(){return Ut(C)},get selectedLayer(){return Ut(a)}}),Ci(c,h)}Ml(vh,{target:document.getElementById("app")});
