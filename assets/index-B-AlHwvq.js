(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))C(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&C(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function C(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();const ps=!1;var no=Array.isArray,ba=Array.prototype.indexOf,Zo=Array.from,La=Object.defineProperty,yn=Object.getOwnPropertyDescriptor,xa=Object.getOwnPropertyDescriptors,ka=Object.prototype,Ea=Array.prototype,Os=Object.getPrototypeOf;function Ta(c){return c()}function Do(c){for(var x=0;x<c.length;x++)c[x]()}const Xe=2,Ds=4,sr=8,Fo=16,$e=32,ar=64,Ao=128,Xi=256,Yr=512,Se=1024,Di=2048,lr=4096,ri=8192,xn=16384,Pa=32768,Uo=65536,Ma=1<<17,Sa=1<<19,As=1<<20,Ki=Symbol("$state"),Ca=Symbol("legacy props");function Is(c){return c===this.v}function Oa(c,x){return c!=c?x==x:c!==x||c!==null&&typeof c=="object"||typeof c=="function"}function Ho(c){return!Oa(c,this.v)}function Da(c){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Aa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ia(c){throw new Error("https://svelte.dev/e/effect_orphan")}function za(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ba(c){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ra(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Na(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Fa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let kn=!1,Ua=!1;function Ha(){kn=!0}const Ga=1,Wa=2,qa=16,Va=1,ja=2,Ya=4,Ka=8,Xa=16,$a=2,Me=Symbol();function Ae(c,x){var a={f:0,v:c,reactions:null,equals:Is,rv:0,wv:0};return a}function Go(c,x=!1){var C;const a=Ae(c);return x||(a.equals=Ho),kn&&Kt!==null&&Kt.l!==null&&((C=Kt.l).s??(C.s=[])).push(a),a}function er(c,x=!1){return Ja(Go(c,x))}function Ja(c){return jt!==null&&jt.f&Xe&&(oi===null?ul([c]):oi.push(c)),c}function ge(c,x){return jt!==null&&Xo()&&jt.f&(Xe|Fo)&&(oi===null||!oi.includes(c))&&Fa(),zs(c,x)}function zs(c,x){return c.equals(x)||(c.v,c.v=x,c.wv=na(),Bs(c,Di),Xo()&&Nt!==null&&Nt.f&Se&&!(Nt.f&$e)&&(be!==null&&be.includes(c)?(Je(Nt,Di),so(Nt)):Oi===null?cl([c]):Oi.push(c))),x}function Bs(c,x){var a=c.reactions;if(a!==null)for(var C=Xo(),n=a.length,r=0;r<n;r++){var s=a[r],h=s.f;h&Di||!C&&s===Nt||(Je(s,x),h&(Se|Xi)&&(h&Xe?Bs(s,lr):so(s)))}}let Qa=!1;function vn(c,x=null,a){if(typeof c!="object"||c===null||Ki in c)return c;const C=Os(c);if(C!==ka&&C!==Ea)return c;var n=new Map,r=no(c),s=Ae(0);r&&n.set("length",Ae(c.length));var h;return new Proxy(c,{defineProperty(f,m,b){(!("value"in b)||b.configurable===!1||b.enumerable===!1||b.writable===!1)&&Ra();var g=n.get(m);return g===void 0?(g=Ae(b.value),n.set(m,g)):ge(g,vn(b.value,h)),!0},deleteProperty(f,m){var b=n.get(m);if(b===void 0)m in f&&n.set(m,Ae(Me));else{if(r&&typeof m=="string"){var g=n.get("length"),T=Number(m);Number.isInteger(T)&&T<g.v&&ge(g,T)}ge(b,Me),ms(s)}return!0},get(f,m,b){var M;if(m===Ki)return c;var g=n.get(m),T=m in f;if(g===void 0&&(!T||(M=yn(f,m))!=null&&M.writable)&&(g=Ae(vn(T?f[m]:Me,h)),n.set(m,g)),g!==void 0){var y=Gt(g);return y===Me?void 0:y}return Reflect.get(f,m,b)},getOwnPropertyDescriptor(f,m){var b=Reflect.getOwnPropertyDescriptor(f,m);if(b&&"value"in b){var g=n.get(m);g&&(b.value=Gt(g))}else if(b===void 0){var T=n.get(m),y=T==null?void 0:T.v;if(T!==void 0&&y!==Me)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return b},has(f,m){var y;if(m===Ki)return!0;var b=n.get(m),g=b!==void 0&&b.v!==Me||Reflect.has(f,m);if(b!==void 0||Nt!==null&&(!g||(y=yn(f,m))!=null&&y.writable)){b===void 0&&(b=Ae(g?vn(f[m],h):Me),n.set(m,b));var T=Gt(b);if(T===Me)return!1}return g},set(f,m,b,g){var I;var T=n.get(m),y=m in f;if(r&&m==="length")for(var M=b;M<T.v;M+=1){var p=n.get(M+"");p!==void 0?ge(p,Me):M in f&&(p=Ae(Me),n.set(M+"",p))}T===void 0?(!y||(I=yn(f,m))!=null&&I.writable)&&(T=Ae(void 0),ge(T,vn(b,h)),n.set(m,T)):(y=T.v!==Me,ge(T,vn(b,h)));var v=Reflect.getOwnPropertyDescriptor(f,m);if(v!=null&&v.set&&v.set.call(g,b),!y){if(r&&typeof m=="string"){var E=n.get("length"),P=Number(m);Number.isInteger(P)&&P>=E.v&&ge(E,P+1)}ms(s)}return!0},ownKeys(f){Gt(s);var m=Reflect.ownKeys(f).filter(T=>{var y=n.get(T);return y===void 0||y.v!==Me});for(var[b,g]of n)g.v!==Me&&!(b in f)&&m.push(b);return m},setPrototypeOf(){Na()}})}function ms(c,x=1){ge(c,c.v+x)}var gs,Rs,Ns;function tl(){if(gs===void 0){gs=window;var c=Element.prototype,x=Node.prototype;Rs=yn(x,"firstChild").get,Ns=yn(x,"nextSibling").get,c.__click=void 0,c.__className="",c.__attributes=null,c.__styles=null,c.__e=void 0,Text.prototype.__t=void 0}}function Zs(c=""){return document.createTextNode(c)}function Fs(c){return Rs.call(c)}function Wo(c){return Ns.call(c)}function Kr(c,x){return Fs(c)}function Xr(c,x=1,a=!1){let C=c;for(;x--;)C=Wo(C);return C}function el(c){c.textContent=""}function $r(c){var x=Xe|Di;Nt===null?x|=Xi:Nt.f|=As;var a=jt!==null&&jt.f&Xe?jt:null;const C={children:null,ctx:Kt,deps:null,equals:Is,f:x,fn:c,reactions:null,rv:0,v:null,wv:0,parent:a??Nt};return a!==null&&(a.children??(a.children=[])).push(C),C}function il(c){const x=$r(c);return x.equals=Ho,x}function Us(c){var x=c.children;if(x!==null){c.children=null;for(var a=0;a<x.length;a+=1){var C=x[a];C.f&Xe?qo(C):Ai(C)}}}function nl(c){for(var x=c.parent;x!==null;){if(!(x.f&Xe))return x;x=x.parent}return null}function Hs(c){var x,a=Nt;si(nl(c));try{Us(c),x=ra(c)}finally{si(a)}return x}function Gs(c){var x=Hs(c),a=(Yi||c.f&Xi)&&c.deps!==null?lr:Se;Je(c,a),c.equals(x)||(c.v=x,c.wv=na())}function qo(c){Us(c),or(c,0),Je(c,xn),c.v=c.children=c.deps=c.ctx=c.reactions=null}function Ws(c){Nt===null&&jt===null&&Ia(),jt!==null&&jt.f&Xi&&Aa(),Ko&&Da()}function rl(c,x){var a=x.last;a===null?x.last=x.first=c:(a.next=c,c.prev=a,x.last=c)}function En(c,x,a,C=!0){var n=(c&ar)!==0,r=Nt,s={ctx:Kt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:c|Di,first:null,fn:x,last:null,next:null,parent:n?null:r,prev:null,teardown:null,transitions:null,wv:0};if(a){var h=wn;try{vs(!0),hr(s),s.f|=Pa}catch(b){throw Ai(s),b}finally{vs(h)}}else x!==null&&so(s);var f=a&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&As)===0;if(!f&&!n&&C&&(r!==null&&rl(s,r),jt!==null&&jt.f&Xe)){var m=jt;(m.children??(m.children=[])).push(s)}return s}function ol(c){const x=En(sr,null,!1);return Je(x,Se),x.teardown=c,x}function Io(c){Ws();var x=Nt!==null&&(Nt.f&$e)!==0&&Kt!==null&&!Kt.m;if(x){var a=Kt;(a.e??(a.e=[])).push({fn:c,effect:Nt,reaction:jt})}else{var C=Vo(c);return C}}function sl(c){return Ws(),ro(c)}function al(c){const x=En(ar,c,!0);return(a={})=>new Promise(C=>{a.outro?Jr(x,()=>{Ai(x),C(void 0)}):(Ai(x),C(void 0))})}function Vo(c){return En(Ds,c,!1)}function qs(c,x){var a=Kt,C={effect:null,ran:!1};a.l.r1.push(C),C.effect=ro(()=>{c(),!C.ran&&(C.ran=!0,ge(a.l.r2,!0),bn(x))})}function Vs(){var c=Kt;ro(()=>{if(Gt(c.l.r2)){for(var x of c.l.r1){var a=x.effect;a.f&Se&&Je(a,lr),Tn(a)&&hr(a),x.ran=!1}c.l.r2.v=!1}})}function ro(c){return En(sr,c,!0)}function js(c){return jo(c)}function jo(c,x=0){return En(sr|Fo|x,c,!0)}function rr(c,x=!0){return En(sr|$e,c,!0,x)}function Ys(c){var x=c.teardown;if(x!==null){const a=Ko,C=jt;ys(!0),Ii(null);try{x.call(null)}finally{ys(a),Ii(C)}}}function Ks(c){var x=c.deriveds;if(x!==null){c.deriveds=null;for(var a=0;a<x.length;a+=1)qo(x[a])}}function Xs(c,x=!1){var a=c.first;for(c.first=c.last=null;a!==null;){var C=a.next;Ai(a,x),a=C}}function ll(c){for(var x=c.first;x!==null;){var a=x.next;x.f&$e||Ai(x),x=a}}function Ai(c,x=!0){var a=!1;if((x||c.f&Sa)&&c.nodes_start!==null){for(var C=c.nodes_start,n=c.nodes_end;C!==null;){var r=C===n?null:Wo(C);C.remove(),C=r}a=!0}Xs(c,x&&!a),Ks(c),or(c,0),Je(c,xn);var s=c.transitions;if(s!==null)for(const f of s)f.stop();Ys(c);var h=c.parent;h!==null&&h.first!==null&&$s(c),c.next=c.prev=c.teardown=c.ctx=c.deps=c.fn=c.nodes_start=c.nodes_end=null}function $s(c){var x=c.parent,a=c.prev,C=c.next;a!==null&&(a.next=C),C!==null&&(C.prev=a),x!==null&&(x.first===c&&(x.first=C),x.last===c&&(x.last=a))}function Jr(c,x){var a=[];Yo(c,a,!0),Js(a,()=>{Ai(c),x&&x()})}function Js(c,x){var a=c.length;if(a>0){var C=()=>--a||x();for(var n of c)n.out(C)}else x()}function Yo(c,x,a){if(!(c.f&ri)){if(c.f^=ri,c.transitions!==null)for(const s of c.transitions)(s.is_global||a)&&x.push(s);for(var C=c.first;C!==null;){var n=C.next,r=(C.f&Uo)!==0||(C.f&$e)!==0;Yo(C,x,r?a:!1),C=n}}}function Qr(c){Qs(c,!0)}function Qs(c,x){if(c.f&ri){Tn(c)&&hr(c),c.f^=ri;for(var a=c.first;a!==null;){var C=a.next,n=(a.f&Uo)!==0||(a.f&$e)!==0;Qs(a,n?x:!1),a=C}if(c.transitions!==null)for(const r of c.transitions)(r.is_global||x)&&r.in()}}let zo=!1,Bo=[];function hl(){zo=!1;const c=Bo.slice();Bo=[],Do(c)}function ta(c){zo||(zo=!0,queueMicrotask(hl)),Bo.push(c)}function ea(c){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let jr=!1,to=!1,eo=null,wn=!1,Ko=!1;function vs(c){wn=c}function ys(c){Ko=c}let Ro=[],ir=0;let jt=null;function Ii(c){jt=c}let Nt=null;function si(c){Nt=c}let oi=null;function ul(c){oi=c}let be=null,De=0,Oi=null;function cl(c){Oi=c}let ia=1,io=0,Yi=!1,Kt=null;function na(){return++ia}function Xo(){return!kn||Kt!==null&&Kt.l===null}function Tn(c){var m;var x=c.f;if(x&Di)return!0;if(x&lr){var a=c.deps,C=(x&Xi)!==0;if(a!==null){var n,r,s=(x&Yr)!==0,h=C&&Nt!==null&&!Yi,f=a.length;if(s||h){for(n=0;n<f;n++)r=a[n],(s||!((m=r==null?void 0:r.reactions)!=null&&m.includes(c)))&&(r.reactions??(r.reactions=[])).push(c);s&&(c.f^=Yr)}for(n=0;n<f;n++)if(r=a[n],Tn(r)&&Gs(r),r.wv>c.wv)return!0}(!C||Nt!==null&&!Yi)&&Je(c,Se)}return!1}function fl(c,x){for(var a=x;a!==null;){if(a.f&Ao)try{a.fn(c);return}catch{a.f^=Ao}a=a.parent}throw jr=!1,c}function dl(c){return(c.f&xn)===0&&(c.parent===null||(c.parent.f&Ao)===0)}function oo(c,x,a,C){if(jr){if(a===null&&(jr=!1),dl(x))throw c;return}a!==null&&(jr=!0);{fl(c,x);return}}function ra(c){var T;var x=be,a=De,C=Oi,n=jt,r=Yi,s=oi,h=Kt,f=c.f;be=null,De=0,Oi=null,jt=f&($e|ar)?null:c,Yi=!wn&&(f&Xi)!==0,oi=null,Kt=c.ctx,io++;try{var m=(0,c.fn)(),b=c.deps;if(be!==null){var g;if(or(c,De),b!==null&&De>0)for(b.length=De+be.length,g=0;g<be.length;g++)b[De+g]=be[g];else c.deps=b=be;if(!Yi)for(g=De;g<b.length;g++)((T=b[g]).reactions??(T.reactions=[])).push(c)}else b!==null&&De<b.length&&(or(c,De),b.length=De);return n!==null&&io++,m}finally{be=x,De=a,Oi=C,jt=n,Yi=r,oi=s,Kt=h}}function _l(c,x){let a=x.reactions;if(a!==null){var C=ba.call(a,c);if(C!==-1){var n=a.length-1;n===0?a=x.reactions=null:(a[C]=a[n],a.pop())}}a===null&&x.f&Xe&&(be===null||!be.includes(x))&&(Je(x,lr),x.f&(Xi|Yr)||(x.f^=Yr),or(x,0))}function or(c,x){var a=c.deps;if(a!==null)for(var C=x;C<a.length;C++)_l(c,a[C])}function hr(c){var x=c.f;if(!(x&xn)){Je(c,Se);var a=Nt,C=Kt;Nt=c;try{x&Fo?ll(c):Xs(c),Ks(c),Ys(c);var n=ra(c);c.teardown=typeof n=="function"?n:null,c.wv=ia;var r=c.deps,s;ps&&Ua&&c.f&Di}catch(h){oo(h,c,a,C||c.ctx)}finally{Nt=a}}}function pl(){if(ir>1e3){ir=0;try{za()}catch(c){if(eo!==null)oo(c,eo,null);else throw c}}ir++}function ml(c){var x=c.length;if(x!==0){pl();var a=wn;wn=!0;try{for(var C=0;C<x;C++){var n=c[C];n.f&Se||(n.f^=Se);var r=[];oa(n,r),gl(r)}}finally{wn=a}}}function gl(c){var x=c.length;if(x!==0)for(var a=0;a<x;a++){var C=c[a];if(!(C.f&(xn|ri)))try{Tn(C)&&(hr(C),C.deps===null&&C.first===null&&C.nodes_start===null&&(C.teardown===null?$s(C):C.fn=null))}catch(n){oo(n,C,null,C.ctx)}}}function vl(){if(to=!1,ir>1001)return;const c=Ro;Ro=[],ml(c),to||(ir=0,eo=null)}function so(c){to||(to=!0,queueMicrotask(vl)),eo=c;for(var x=c;x.parent!==null;){x=x.parent;var a=x.f;if(a&(ar|$e)){if(!(a&Se))return;x.f^=Se}}Ro.push(x)}function oa(c,x){var a=c.first,C=[];t:for(;a!==null;){var n=a.f,r=(n&$e)!==0,s=r&&(n&Se)!==0,h=a.next;if(!s&&!(n&ri))if(n&sr){if(r)a.f^=Se;else try{Tn(a)&&hr(a)}catch(g){oo(g,a,null,a.ctx)}var f=a.first;if(f!==null){a=f;continue}}else n&Ds&&C.push(a);if(h===null){let g=a.parent;for(;g!==null;){if(c===g)break t;var m=g.next;if(m!==null){a=m;continue t}g=g.parent}}a=h}for(var b=0;b<C.length;b++)f=C[b],x.push(f),oa(f,x)}function Gt(c){var b;var x=c.f,a=(x&Xe)!==0;if(a&&x&xn){var C=Hs(c);return qo(c),C}if(jt!==null){oi!==null&&oi.includes(c)&&Za();var n=jt.deps;c.rv<io&&(c.rv=io,be===null&&n!==null&&n[De]===c?De++:be===null?be=[c]:be.push(c),Oi!==null&&Nt!==null&&Nt.f&Se&&!(Nt.f&$e)&&Oi.includes(c)&&(Je(Nt,Di),so(Nt)))}else if(a&&c.deps===null)for(var r=c,s=r.parent,h=r;s!==null;)if(s.f&Xe){var f=s;h=f,s=f.parent}else{var m=s;(b=m.deriveds)!=null&&b.includes(h)||(m.deriveds??(m.deriveds=[])).push(h);break}return a&&(r=c,Tn(r)&&Gs(r)),c.v}function bn(c){const x=jt;try{return jt=null,c()}finally{jt=x}}const yl=-7169;function Je(c,x){c.f=c.f&yl|x}function ao(c,x=!1,a){Kt={p:Kt,c:null,e:null,m:!1,s:c,x:null,l:null},kn&&!x&&(Kt.l={s:null,u:null,r1:[],r2:Ae(!1)})}function lo(c){const x=Kt;if(x!==null){const s=x.e;if(s!==null){var a=Nt,C=jt;x.e=null;try{for(var n=0;n<s.length;n++){var r=s[n];si(r.effect),Ii(r.reaction),Vo(r.fn)}}finally{si(a),Ii(C)}}Kt=x.p,x.m=!0}return{}}function $o(c){if(!(typeof c!="object"||!c||c instanceof EventTarget)){if(Ki in c)No(c);else if(!Array.isArray(c))for(let x in c){const a=c[x];typeof a=="object"&&a&&Ki in a&&No(a)}}}function No(c,x=new Set){if(typeof c=="object"&&c!==null&&!(c instanceof EventTarget)&&!x.has(c)){x.add(c),c instanceof Date&&c.getTime();for(let C in c)try{No(c[C],x)}catch{}const a=Os(c);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const C=xa(a);for(let n in C){const r=C[n].get;if(r)try{r.call(c)}catch{}}}}}const wl=["touchstart","touchmove"];function bl(c){return wl.includes(c)}function Ll(c){var x=jt,a=Nt;Ii(null),si(null);try{return c()}finally{Ii(x),si(a)}}const xl=new Set,ws=new Set;function kl(c,x,a,C){function n(r){if(C.capture||Jn.call(x,r),!r.cancelBubble)return Ll(()=>a.call(this,r))}return c.startsWith("pointer")||c.startsWith("touch")||c==="wheel"?ta(()=>{x.addEventListener(c,n,C)}):x.addEventListener(c,n,C),n}function sa(c,x,a,C,n){var r={capture:C,passive:n},s=kl(c,x,a,r);(x===document.body||x===window||x===document)&&ol(()=>{x.removeEventListener(c,s,r)})}function Jn(c){var P;var x=this,a=x.ownerDocument,C=c.type,n=((P=c.composedPath)==null?void 0:P.call(c))||[],r=n[0]||c.target,s=0,h=c.__root;if(h){var f=n.indexOf(h);if(f!==-1&&(x===document||x===window)){c.__root=x;return}var m=n.indexOf(x);if(m===-1)return;f<=m&&(s=f)}if(r=n[s]||c.target,r!==x){La(c,"currentTarget",{configurable:!0,get(){return r||a}});var b=jt,g=Nt;Ii(null),si(null);try{for(var T,y=[];r!==null;){var M=r.assignedSlot||r.parentNode||r.host||null;try{var p=r["__"+C];if(p!==void 0&&!r.disabled)if(no(p)){var[v,...E]=p;v.apply(r,[c,...E])}else p.call(r,c)}catch(I){T?y.push(I):T=I}if(c.cancelBubble||M===x||M===null)break;r=M}if(T){for(let I of y)queueMicrotask(()=>{throw I});throw T}}finally{c.__root=x,delete c.currentTarget,Ii(b),si(g)}}}function El(c){var x=document.createElement("template");return x.innerHTML=c,x.content}function Tl(c,x){var a=Nt;a.nodes_start===null&&(a.nodes_start=c,a.nodes_end=x)}function Pn(c,x){var a=(x&$a)!==0,C,n=!c.startsWith("<!>");return()=>{C===void 0&&(C=El(n?c:"<!>"+c),C=Fs(C));var r=a?document.importNode(C,!0):C.cloneNode(!0);return Tl(r,r),r}}function Ln(c,x){c!==null&&c.before(x)}function Pl(c,x){var a=x==null?"":typeof x=="object"?x+"":x;a!==(c.__t??(c.__t=c.nodeValue))&&(c.__t=a,c.nodeValue=a==null?"":a+"")}function Ml(c,x){return Sl(c,x)}const gn=new Map;function Sl(c,{target:x,anchor:a,props:C={},events:n,context:r,intro:s=!0}){tl();var h=new Set,f=g=>{for(var T=0;T<g.length;T++){var y=g[T];if(!h.has(y)){h.add(y);var M=bl(y);x.addEventListener(y,Jn,{passive:M});var p=gn.get(y);p===void 0?(document.addEventListener(y,Jn,{passive:M}),gn.set(y,1)):gn.set(y,p+1)}}};f(Zo(xl)),ws.add(f);var m=void 0,b=al(()=>{var g=a??x.appendChild(Zs());return rr(()=>{if(r){ao({});var T=Kt;T.c=r}n&&(C.$$events=n),m=c(g,C)||{},r&&lo()}),()=>{var M;for(var T of h){x.removeEventListener(T,Jn);var y=gn.get(T);--y===0?(document.removeEventListener(T,Jn),gn.delete(T)):gn.set(T,y)}ws.delete(f),g!==a&&((M=g.parentNode)==null||M.removeChild(g))}});return Cl.set(m,b),m}let Cl=new WeakMap;function Ol(c,x,a=!1){var C=c,n=null,r=null,s=Me,h=a?Uo:0,f=!1;const m=(g,T=!0)=>{f=!0,b(T,g)},b=(g,T)=>{s!==(s=g)&&(s?(n?Qr(n):T&&(n=rr(()=>T(C))),r&&Jr(r,()=>{r=null})):(r?Qr(r):T&&(r=rr(()=>T(C))),n&&Jr(n,()=>{n=null})))};jo(()=>{f=!1,x(m),f||b(null,null)},h)}function Dl(c,x){return x}function Al(c,x,a,C){for(var n=[],r=x.length,s=0;s<r;s++)Yo(x[s].e,n,!0);var h=r>0&&n.length===0&&a!==null;if(h){var f=a.parentNode;el(f),f.append(a),C.clear(),Si(c,x[0].prev,x[r-1].next)}Js(n,()=>{for(var m=0;m<r;m++){var b=x[m];h||(C.delete(b.k),Si(c,b.prev,b.next)),Ai(b.e,!h)}})}function Il(c,x,a,C,n,r=null){var s=c,h={flags:x,items:new Map,first:null};{var f=c;s=f.appendChild(Zs())}var m=null,b=!1;jo(()=>{var g=a(),T=no(g)?g:g==null?[]:Zo(g),y=T.length;if(!(b&&y===0)){b=y===0;{var M=jt;zl(T,h,s,n,x,(M.f&ri)!==0,C)}r!==null&&(y===0?m?Qr(m):m=rr(()=>r(s)):m!==null&&Jr(m,()=>{m=null}))}})}function zl(c,x,a,C,n,r,s,h){var f=c.length,m=x.items,b=x.first,g=b,T,y=null,M=[],p=[],v,E,P,I;for(I=0;I<f;I+=1){if(v=c[I],E=s(v,I),P=m.get(E),P===void 0){var Z=g?g.e.nodes_start:a;y=Rl(Z,x,y,y===null?x.first:y.next,v,E,I,C,n),m.set(E,y),M=[],p=[],g=y.next;continue}if(Bl(P,v,I),P.e.f&ri&&Qr(P.e),P!==g){if(T!==void 0&&T.has(P)){if(M.length<p.length){var S=p[0],V;y=S.prev;var F=M[0],Y=M[M.length-1];for(V=0;V<M.length;V+=1)bs(M[V],S,a);for(V=0;V<p.length;V+=1)T.delete(p[V]);Si(x,F.prev,Y.next),Si(x,y,F),Si(x,Y,S),g=S,y=Y,I-=1,M=[],p=[]}else T.delete(P),bs(P,g,a),Si(x,P.prev,P.next),Si(x,P,y===null?x.first:y.next),Si(x,y,P),y=P;continue}for(M=[],p=[];g!==null&&g.k!==E;)(r||!(g.e.f&ri))&&(T??(T=new Set)).add(g),p.push(g),g=g.next;if(g===null)continue;P=g}M.push(P),y=P,g=P.next}if(g!==null||T!==void 0){for(var R=T===void 0?[]:Zo(T);g!==null;)(r||!(g.e.f&ri))&&R.push(g),g=g.next;var Q=R.length;if(Q>0){var X=f===0?a:null;Al(x,R,X,m)}}Nt.first=x.first&&x.first.e,Nt.last=y&&y.e}function Bl(c,x,a,C){zs(c.v,x),c.i=a}function Rl(c,x,a,C,n,r,s,h,f,m){var b=(f&Ga)!==0,g=(f&qa)===0,T=b?g?Go(n):Ae(n):n,y=f&Wa?Ae(s):s,M={i:y,v:T,k:r,a:null,e:null,prev:a,next:C};try{return M.e=rr(()=>h(c,T,y),Qa),M.e.prev=a&&a.e,M.e.next=C&&C.e,a===null?x.first=M:(a.next=M,a.e.next=M.e),C!==null&&(C.prev=M,C.e.prev=M.e),M}finally{}}function bs(c,x,a){for(var C=c.next?c.next.e.nodes_start:a,n=x?x.e.nodes_start:a,r=c.e.nodes_start;r!==C;){var s=Wo(r);n.before(r),r=s}}function Si(c,x,a){x===null?c.first=a:(x.next=a,x.e.next=a&&a.e),a!==null&&(a.prev=x,a.e.prev=x&&x.e)}function Nl(c,x){x?c.hasAttribute("selected")||c.setAttribute("selected",""):c.removeAttribute("selected")}function Ls(c,x){return c===x||(c==null?void 0:c[Ki])===x}function Zl(c={},x,a,C){return Vo(()=>{var n,r;return ro(()=>{n=r,r=[],bn(()=>{c!==a(...r)&&(x(c,...r),n&&Ls(a(...n),c)&&x(null,...n))})}),()=>{ta(()=>{r&&Ls(a(...r),c)&&x(null,...r)})}}),c}function Jo(c=!1){const x=Kt,a=x.l.u;if(!a)return;let C=()=>$o(x.s);if(c){let n=0,r={};const s=$r(()=>{let h=!1;const f=x.s;for(const m in f)f[m]!==r[m]&&(r[m]=f[m],h=!0);return h&&n++,n});C=()=>Gt(s)}a.b.length&&sl(()=>{xs(x,C),Do(a.b)}),Io(()=>{const n=bn(()=>a.m.map(Ta));return()=>{for(const r of n)typeof r=="function"&&r()}}),a.a.length&&Io(()=>{xs(x,C),Do(a.a)})}function xs(c,x){if(c.l.s)for(const a of c.l.s)Gt(a);x()}function Fl(c){var x=Ae(0);return function(){return arguments.length===1?(ge(x,Gt(x)+1),arguments[0]):(Gt(x),c())}}let qr=!1;function Ul(c){var x=qr;try{return qr=!1,[c(),qr]}finally{qr=x}}function ks(c){for(var x=Nt,a=Nt;x!==null&&!(x.f&($e|ar));)x=x.parent;try{return si(x),c()}finally{si(a)}}function nr(c,x,a,C){var F;var n=(a&Va)!==0,r=!kn||(a&ja)!==0,s=(a&Ka)!==0,h=(a&Xa)!==0,f=!1,m;s?[m,f]=Ul(()=>c[x]):m=c[x];var b=Ki in c||Ca in c,g=s&&(((F=yn(c,x))==null?void 0:F.set)??(b&&x in c&&(Y=>c[x]=Y)))||void 0,T=C,y=!0,M=!1,p=()=>(M=!0,y&&(y=!1,h?T=bn(C):T=C),T);m===void 0&&C!==void 0&&(g&&r&&Ba(),m=p(),g&&g(m));var v;if(r)v=()=>{var Y=c[x];return Y===void 0?p():(y=!0,M=!1,Y)};else{var E=ks(()=>(n?$r:il)(()=>c[x]));E.f|=Ma,v=()=>{var Y=Gt(E);return Y!==void 0&&(T=void 0),Y===void 0?T:Y}}if(!(a&Ya))return v;if(g){var P=c.$$legacy;return function(Y,R){return arguments.length>0?((!r||!R||P||f)&&g(R?v():Y),Y):v()}}var I=!1,Z=!1,S=Go(m),V=ks(()=>$r(()=>{var Y=v(),R=Gt(S);return I?(I=!1,Z=!0,R):(Z=!1,S.v=Y)}));return n||(V.equals=Ho),function(Y,R){if(arguments.length>0){const Q=R?Gt(V):r&&s?vn(Y):Y;return V.equals(Q)||(I=!0,ge(S,Q),M&&T!==void 0&&(T=Q),bn(()=>Gt(V))),Y}return Gt(V)}}function Hl(c){Kt===null&&ea(),kn&&Kt.l!==null?Wl(Kt).m.push(c):Io(()=>{const x=bn(c);if(typeof x=="function")return x})}function Gl(c,x,{bubbles:a=!1,cancelable:C=!1}={}){return new CustomEvent(c,{detail:x,bubbles:a,cancelable:C})}function aa(){const c=Kt;return c===null&&ea(),(x,a,C)=>{var r;const n=(r=c.s.$$events)==null?void 0:r[x];if(n){const s=no(n)?n.slice():[n],h=Gl(x,a,C);for(const f of s)f.call(c.x,h);return!h.defaultPrevented}return!0}}function Wl(c){var x=c.l;return x.u??(x.u={a:[],b:[],m:[]})}const ql="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ql);Ha();var Vl=Pn("<option> </option>"),jl=Pn('<div class="svelte-1lvjhsb"><label for="layer-selector">Select Map Layer:</label> <select id="layer-selector"></select></div>');function Yl(c,x){ao(x,!1);const a=[{label:"OpenStreetMap Default",value:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors"},{label:"CartoDB Positron",value:"https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CartoDB"},{label:"CartoDB Dark Matter",value:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CartoDB"},{label:"OpenTopoMap",value:"https://tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors &copy; OpenTopoMap"},{label:"ESRI Satellite",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{label:"ESRI World Imagery",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{label:"ESRI World Street Map",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ"},{label:"ESRI World Topo Map",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ"}];let C=nr(x,"selectedLayer",28,()=>a[0]);const n=aa(),r=f=>{C(f),n("change",{layer:f})};Jo();var s=jl(),h=Xr(Kr(s),2);Il(h,5,()=>a,Dl,(f,m)=>{var b=Vl(),g={},T=Kr(b);js(()=>{g!==(g=Gt(m).value)&&(b.value=(b.__value=Gt(m).value)==null?"":Gt(m).value),Nl(b,Gt(m)===C()),Pl(T,Gt(m).label)}),Ln(f,b)}),sa("change",h,f=>r(a[f.target.selectedIndex])),Ln(c,s),lo()}var Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qo(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Qn={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Kl=Qn.exports,Es;function Xl(){return Es||(Es=1,function(c,x){(function(a,C){C(x)})(Kl,function(a){var C="1.9.4";function n(t){var e,i,o,u;for(i=1,o=arguments.length;i<o;i++){u=arguments[i];for(e in u)t[e]=u[e]}return t}var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function s(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var o=i.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(i.call(arguments)):arguments)}}var h=0;function f(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function m(t,e,i){var o,u,w,B;return B=function(){o=!1,u&&(w.apply(i,u),u=!1)},w=function(){o?u=arguments:(t.apply(i,arguments),setTimeout(B,e),o=!0)},w}function b(t,e,i){var o=e[1],u=e[0],w=o-u;return t===o&&i?t:((t-u)%w+w)%w+u}function g(){return!1}function T(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return y(t).split(/\s+/)}function p(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function v(t,e,i){var o=[];for(var u in t)o.push(encodeURIComponent(i?u.toUpperCase():u)+"="+encodeURIComponent(t[u]));return(!e||e.indexOf("?")===-1?"?":"&")+o.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function P(t,e){return t.replace(E,function(i,o){var u=e[o];if(u===void 0)throw new Error("No value provided for variable "+i);return typeof u=="function"&&(u=u(e)),u})}var I=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Z(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var F=0;function Y(t){var e=+new Date,i=Math.max(0,16-(e-F));return F=e+i,window.setTimeout(t,i)}var R=window.requestAnimationFrame||V("RequestAnimationFrame")||Y,Q=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function X(t,e,i){if(i&&R===Y)t.call(e);else return R.call(window,s(t,e))}function O(t){t&&Q.call(window,t)}var U={__proto__:null,extend:n,create:r,bind:s,get lastId(){return h},stamp:f,throttle:m,wrapNum:b,falseFn:g,formatNum:T,trim:y,splitWords:M,setOptions:p,getParamString:v,template:P,isArray:I,indexOf:Z,emptyImageUrl:S,requestFn:R,cancelFn:Q,requestAnimFrame:X,cancelAnimFrame:O};function d(){}d.extend=function(t){var e=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);o.constructor=e,e.prototype=o;for(var u in this)Object.prototype.hasOwnProperty.call(this,u)&&u!=="prototype"&&u!=="__super__"&&(e[u]=this[u]);return t.statics&&n(e,t.statics),t.includes&&(H(t.includes),n.apply(null,[o].concat(t.includes))),n(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,B=o._initHooks.length;w<B;w++)o._initHooks[w].call(this)}},e},d.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},d.mergeOptions=function(t){return n(this.prototype.options,t),this},d.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function H(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=I(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var st={on:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e);else{t=M(t);for(var u=0,w=t.length;u<w;u++)this._on(t[u],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var o in t)this._off(o,t[o],e);else{t=M(t);for(var u=arguments.length===1,w=0,B=t.length;w<B;w++)u?this._off(t[w]):this._off(t[w],e,i)}return this},_on:function(t,e,i,o){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var u={fn:e,ctx:i};o&&(u.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(u)}},_off:function(t,e,i){var o,u,w;if(this._events&&(o=this._events[t],!!o)){if(arguments.length===1){if(this._firingCount)for(u=0,w=o.length;u<w;u++)o[u].fn=g;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var B=this._listens(t,e,i);if(B!==!1){var q=o[B];this._firingCount&&(q.fn=g,this._events[t]=o=o.slice()),o.splice(B,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var u=this._events[t];if(u){this._firingCount=this._firingCount+1||1;for(var w=0,B=u.length;w<B;w++){var q=u[w],$=q.fn;q.once&&this.off(t,$,q.ctx),$.call(q.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e,i,o){typeof t!="string"&&console.warn('"string" type argument expected');var u=e;typeof e!="function"&&(o=!!e,u=void 0,i=void 0);var w=this._events&&this._events[t];if(w&&w.length&&this._listens(t,u,i)!==!1)return!0;if(o){for(var B in this._eventParents)if(this._eventParents[B].listens(t,e,i,o))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var o=this._events[t]||[];if(!e)return!!o.length;i===this&&(i=void 0);for(var u=0,w=o.length;u<w;u++)if(o[u].fn===e&&o[u].ctx===i)return u;return!1},once:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e,!0);else{t=M(t);for(var u=0,w=t.length;u<w;u++)this._on(t[u],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[f(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[f(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};st.addEventListener=st.on,st.removeEventListener=st.clearAllEventListeners=st.off,st.addOneTimeEventListener=st.once,st.fireEvent=st.fire,st.hasEventListeners=st.listens;var tt=d.extend(st);function ot(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var lt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};ot.prototype={clone:function(){return new ot(this.x,this.y)},add:function(t){return this.clone()._add(it(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(it(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new ot(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new ot(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=lt(this.x),this.y=lt(this.y),this},distanceTo:function(t){t=it(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=it(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=it(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function it(t,e,i){return t instanceof ot?t:I(t)?new ot(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new ot(t.x,t.y):new ot(t,e,i)}function W(t,e){if(t)for(var i=e?[t,e]:t,o=0,u=i.length;o<u;o++)this.extend(i[o])}W.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof ot||typeof t[0]=="number"||"x"in t)e=i=it(t);else if(t=G(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return it((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return it(this.min.x,this.max.y)},getTopRight:function(){return it(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof ot?t=it(t):t=G(t),t instanceof W?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=G(t);var e=this.min,i=this.max,o=t.min,u=t.max,w=u.x>=e.x&&o.x<=i.x,B=u.y>=e.y&&o.y<=i.y;return w&&B},overlaps:function(t){t=G(t);var e=this.min,i=this.max,o=t.min,u=t.max,w=u.x>e.x&&o.x<i.x,B=u.y>e.y&&o.y<i.y;return w&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,o=Math.abs(e.x-i.x)*t,u=Math.abs(e.y-i.y)*t;return G(it(e.x-o,e.y-u),it(i.x+o,i.y+u))},equals:function(t){return t?(t=G(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function G(t,e){return!t||t instanceof W?t:new W(t,e)}function mt(t,e){if(t)for(var i=e?[t,e]:t,o=0,u=i.length;o<u;o++)this.extend(i[o])}mt.prototype={extend:function(t){var e=this._southWest,i=this._northEast,o,u;if(t instanceof rt)o=t,u=t;else if(t instanceof mt){if(o=t._southWest,u=t._northEast,!o||!u)return this}else return t?this.extend(wt(t)||ft(t)):this;return!e&&!i?(this._southWest=new rt(o.lat,o.lng),this._northEast=new rt(u.lat,u.lng)):(e.lat=Math.min(o.lat,e.lat),e.lng=Math.min(o.lng,e.lng),i.lat=Math.max(u.lat,i.lat),i.lng=Math.max(u.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,u=Math.abs(e.lng-i.lng)*t;return new mt(new rt(e.lat-o,e.lng-u),new rt(i.lat+o,i.lng+u))},getCenter:function(){return new rt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new rt(this.getNorth(),this.getWest())},getSouthEast:function(){return new rt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof rt||"lat"in t?t=wt(t):t=ft(t);var e=this._southWest,i=this._northEast,o,u;return t instanceof mt?(o=t.getSouthWest(),u=t.getNorthEast()):o=u=t,o.lat>=e.lat&&u.lat<=i.lat&&o.lng>=e.lng&&u.lng<=i.lng},intersects:function(t){t=ft(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),u=t.getNorthEast(),w=u.lat>=e.lat&&o.lat<=i.lat,B=u.lng>=e.lng&&o.lng<=i.lng;return w&&B},overlaps:function(t){t=ft(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),u=t.getNorthEast(),w=u.lat>e.lat&&o.lat<i.lat,B=u.lng>e.lng&&o.lng<i.lng;return w&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ft(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ft(t,e){return t instanceof mt?t:new mt(t,e)}function rt(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}rt.prototype={equals:function(t,e){if(!t)return!1;t=wt(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+T(this.lat,t)+", "+T(this.lng,t)+")"},distanceTo:function(t){return Mt.distance(this,wt(t))},wrap:function(){return Mt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return ft([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new rt(this.lat,this.lng,this.alt)}};function wt(t,e,i){return t instanceof rt?t:I(t)&&typeof t[0]!="object"?t.length===3?new rt(t[0],t[1],t[2]):t.length===2?new rt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new rt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new rt(t,e,i)}var Ut={latLngToPoint:function(t,e){var i=this.projection.project(t),o=this.scale(e);return this.transformation._transform(i,o)},pointToLatLng:function(t,e){var i=this.scale(e),o=this.transformation.untransform(t,i);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),o=this.transformation.transform(e.min,i),u=this.transformation.transform(e.max,i);return new W(o,u)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?b(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?b(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return new rt(i,e,o)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),o=e.lat-i.lat,u=e.lng-i.lng;if(o===0&&u===0)return t;var w=t.getSouthWest(),B=t.getNorthEast(),q=new rt(w.lat-o,w.lng-u),$=new rt(B.lat-o,B.lng-u);return new mt(q,$)}},Mt=n({},Ut,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,o=t.lat*i,u=e.lat*i,w=Math.sin((e.lat-t.lat)*i/2),B=Math.sin((e.lng-t.lng)*i/2),q=w*w+Math.cos(o)*Math.cos(u)*B*B,$=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*$}}),Rt=6378137,bt={R:Rt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),u=Math.sin(o*e);return new ot(this.R*t.lng*e,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(t){var e=180/Math.PI;return new rt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Rt*Math.PI;return new W([-t,-t],[t,t])}()};function yt(t,e,i,o){if(I(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=o}yt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new ot((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Tt(t,e,i,o){return new yt(t,e,i,o)}var Dt=n({},Mt,{code:"EPSG:3857",projection:bt,transformation:function(){var t=.5/(Math.PI*bt.R);return Tt(t,.5,-t,.5)}()}),_=n({},Dt,{code:"EPSG:900913"});function et(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t,e){var i="",o,u,w,B,q,$;for(o=0,w=t.length;o<w;o++){for(q=t[o],u=0,B=q.length;u<B;u++)$=q[u],i+=(u?"L":"M")+$.x+" "+$.y;i+=e?kt.svg?"z":"x":""}return i||"M0 0"}var A=document.documentElement.style,D="ActiveXObject"in window,N=D&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),at=Re("webkit"),j=Re("android"),ut=Re("android 2")||Re("android 3"),pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ct=j&&Re("Google")&&pt<537&&!("AudioNode"in window),Lt=!!window.opera,Zt=!nt&&Re("chrome"),xt=Re("gecko")&&!at&&!Lt&&!D,Xt=!Zt&&Re("safari"),fe=Re("phantom"),ie="OTransition"in A,se=navigator.platform.indexOf("Win")===0,Ht=D&&"transition"in A,ae="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ut,Jt="MozPerspective"in A,le=!window.L_DISABLE_3D&&(Ht||ae||Jt)&&!ie&&!fe,ke=typeof orientation<"u"||Re("mobile"),Ie=ke&&at,ze=ke&&ae,qe=!window.PointerEvent&&window.MSPointerEvent,Ce=!!(window.PointerEvent||qe),Yt="ontouchstart"in window||!!window.TouchEvent,Qe=!window.L_NO_TOUCH&&(Yt||Ce),Be=ke&&Lt,Mn=ke&&xt,ur=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,cr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,e),window.removeEventListener("testPassiveEventSupport",g,e)}catch{}return t}(),$i=function(){return!!document.createElement("canvas").getContext}(),Ji=!!(document.createElementNS&&et("svg").createSVGRect),ho=!!Ji&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fr=!Ji&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),uo=navigator.platform.indexOf("Mac")===0,dr=navigator.platform.indexOf("Linux")===0;function Re(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var kt={ie:D,ielt9:N,edge:nt,webkit:at,android:j,android23:ut,androidStock:ct,opera:Lt,chrome:Zt,gecko:xt,safari:Xt,phantom:fe,opera12:ie,win:se,ie3d:Ht,webkit3d:ae,gecko3d:Jt,any3d:le,mobile:ke,mobileWebkit:Ie,mobileWebkit3d:ze,msPointer:qe,pointer:Ce,touch:Qe,touchNative:Yt,mobileOpera:Be,mobileGecko:Mn,retina:ur,passiveEvents:cr,canvas:$i,svg:Ji,vml:fr,inlineSvg:ho,mac:uo,linux:dr},Sn=kt.msPointer?"MSPointerDown":"pointerdown",Qi=kt.msPointer?"MSPointerMove":"pointermove",wi=kt.msPointer?"MSPointerUp":"pointerup",tn=kt.msPointer?"MSPointerCancel":"pointercancel",zi={touchstart:Sn,touchmove:Qi,touchend:wi,touchcancel:tn},en={touchstart:mr,touchmove:ti,touchend:ti,touchcancel:ti},Ne={},_r=!1;function co(t,e,i){return e==="touchstart"&&nn(),en[e]?(i=en[e].bind(this,i),t.addEventListener(zi[e],i,!1),i):(console.warn("wrong event specified:",e),g)}function fo(t,e,i){if(!zi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(zi[e],i,!1)}function _o(t){Ne[t.pointerId]=t}function po(t){Ne[t.pointerId]&&(Ne[t.pointerId]=t)}function pr(t){delete Ne[t.pointerId]}function nn(){_r||(document.addEventListener(Sn,_o,!0),document.addEventListener(Qi,po,!0),document.addEventListener(wi,pr,!0),document.addEventListener(tn,pr,!0),_r=!0)}function ti(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in Ne)e.touches.push(Ne[i]);e.changedTouches=[e],t(e)}}function mr(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ue(e),ti(t,e)}function It(t){var e={},i,o;for(o in t)i=t[o],e[o]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var ai=200;function mo(t,e){t.addEventListener("dblclick",e);var i=0,o;function u(w){if(w.detail!==1){o=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var B=wr(w);if(!(B.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!B.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var q=Date.now();q-i<=ai?(o++,o===2&&e(It(w))):o=1,i=q}}}return t.addEventListener("click",u),{dblclick:e,simDblclick:u}}function go(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Cn=sn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Bi=sn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gr=Bi==="webkitTransition"||Bi==="OTransition"?Bi+"End":"transitionend";function Ze(t){return typeof t=="string"?document.getElementById(t):t}function Ri(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return i==="auto"?null:i}function Ft(t,e,i){var o=document.createElement(t);return o.className=e||"",i&&i.appendChild(o),o}function $t(t){var e=t.parentNode;e&&e.removeChild(t)}function rn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function bi(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ve(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function On(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=on(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function Ot(t,e){if(t.classList!==void 0)for(var i=M(e),o=0,u=i.length;o<u;o++)t.classList.add(i[o]);else if(!On(t,e)){var w=on(t);Dn(t,(w?w+" ":"")+e)}}function Qt(t,e){t.classList!==void 0?t.classList.remove(e):Dn(t,y((" "+on(t)+" ").replace(" "+e+" "," ")))}function Dn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function on(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function pe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&vo(t,e)}function vo(t,e){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(o)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function sn(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function he(t,e,i){var o=e||new ot(0,0);t.style[Cn]=(kt.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}function te(t,e){t._leaflet_pos=e,kt.any3d?he(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function li(t){return t._leaflet_pos||new ot(0,0)}var Ni,Zi,An;if("onselectstart"in document)Ni=function(){St(window,"selectstart",ue)},Zi=function(){Wt(window,"selectstart",ue)};else{var Li=sn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ni=function(){if(Li){var t=document.documentElement.style;An=t[Li],t[Li]="none"}},Zi=function(){Li&&(document.documentElement.style[Li]=An,An=void 0)}}function Fi(){St(window,"dragstart",ue)}function an(){Wt(window,"dragstart",ue)}var hi,In;function ei(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ln(),hi=t,In=t.style.outlineStyle,t.style.outlineStyle="none",St(window,"keydown",ln))}function ln(){hi&&(hi.style.outlineStyle=In,hi=void 0,In=void 0,Wt(window,"keydown",ln))}function vr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function zn(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var yo={__proto__:null,TRANSFORM:Cn,TRANSITION:Bi,TRANSITION_END:gr,get:Ze,getStyle:Ri,create:Ft,remove:$t,empty:rn,toFront:bi,toBack:ve,hasClass:On,addClass:Ot,removeClass:Qt,setClass:Dn,getClass:on,setOpacity:pe,testProp:sn,setTransform:he,setPosition:te,getPosition:li,get disableTextSelection(){return Ni},get enableTextSelection(){return Zi},disableImageDrag:Fi,enableImageDrag:an,preventOutline:ei,restoreOutline:ln,getSizedParentNode:vr,getScale:zn};function St(t,e,i,o){if(e&&typeof e=="object")for(var u in e)Bn(t,u,e[u],i);else{e=M(e);for(var w=0,B=e.length;w<B;w++)Bn(t,e[w],i,o)}return this}var Fe="_leaflet_events";function Wt(t,e,i,o){if(arguments.length===1)yr(t),delete t[Fe];else if(e&&typeof e=="object")for(var u in e)Rn(t,u,e[u],i);else if(e=M(e),arguments.length===2)yr(t,function(q){return Z(e,q)!==-1});else for(var w=0,B=e.length;w<B;w++)Rn(t,e[w],i,o);return this}function yr(t,e){for(var i in t[Fe]){var o=i.split(/\d/)[0];(!e||e(o))&&Rn(t,o,null,null,i)}}var Ui={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bn(t,e,i,o){var u=e+f(i)+(o?"_"+f(o):"");if(t[Fe]&&t[Fe][u])return this;var w=function(q){return i.call(o||t,q||window.event)},B=w;!kt.touchNative&&kt.pointer&&e.indexOf("touch")===0?w=co(t,e,w):kt.touch&&e==="dblclick"?w=mo(t,w):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Ui[e]||e,w,kt.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(w=function(q){q=q||window.event,Zn(t,q)&&B(q)},t.addEventListener(Ui[e],w,!1)):t.addEventListener(e,B,!1):t.attachEvent("on"+e,w),t[Fe]=t[Fe]||{},t[Fe][u]=w}function Rn(t,e,i,o,u){u=u||e+f(i)+(o?"_"+f(o):"");var w=t[Fe]&&t[Fe][u];if(!w)return this;!kt.touchNative&&kt.pointer&&e.indexOf("touch")===0?fo(t,e,w):kt.touch&&e==="dblclick"?go(t,w):"removeEventListener"in t?t.removeEventListener(Ui[e]||e,w,!1):t.detachEvent("on"+e,w),t[Fe][u]=null}function ui(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Nn(t){return Bn(t,"wheel",ui),this}function xi(t){return St(t,"mousedown touchstart dblclick contextmenu",ui),t._leaflet_disable_click=!0,this}function ue(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ii(t){return ue(t),ui(t),this}function wr(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function br(t,e){if(!e)return new ot(t.clientX,t.clientY);var i=zn(e),o=i.boundingClientRect;return new ot((t.clientX-o.left)/i.x-e.clientLeft,(t.clientY-o.top)/i.y-e.clientTop)}var Lr=kt.linux&&kt.chrome?window.devicePixelRatio:kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xr(t){return kt.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Lr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Zn(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var wo={__proto__:null,on:St,off:Wt,stopPropagation:ui,disableScrollPropagation:Nn,disableClickPropagation:xi,preventDefault:ue,stop:ii,getPropagationPath:wr,getMousePosition:br,getWheelDelta:xr,isExternalTarget:Zn,addListener:St,removeListener:Wt},kr=tt.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=li(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),te(this._el,i),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Bt=tt.extend({options:{crs:Dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(wt(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Bi&&kt.any3d&&!kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),St(this._proxy,gr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(wt(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var o=this.getZoomScale(e),u=this.getSize().divideBy(2),w=t instanceof ot?t:this.latLngToContainerPoint(t),B=w.subtract(u).multiplyBy(1-1/o),q=this.containerPointToLatLng(u.add(B));return this.setView(q,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ft(t);var i=it(e.paddingTopLeft||e.padding||[0,0]),o=it(e.paddingBottomRight||e.padding||[0,0]),u=this.getBoundsZoom(t,!1,i.add(o));if(u=typeof e.maxZoom=="number"?Math.min(e.maxZoom,u):u,u===1/0)return{center:t.getCenter(),zoom:u};var w=o.subtract(i).divideBy(2),B=this.project(t.getSouthWest(),u),q=this.project(t.getNorthEast(),u),$=this.unproject(B.add(q).divideBy(2).add(w),u);return{center:$,zoom:u}},fitBounds:function(t,e){if(t=ft(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=it(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Ot(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!kt.any3d)return this.setView(t,e,i);this._stop();var o=this.project(this.getCenter()),u=this.project(t),w=this.getSize(),B=this._zoom;t=wt(t),e=e===void 0?B:e;var q=Math.max(w.x,w.y),$=q*this.getZoomScale(B,e),ht=u.distanceTo(o)||1,vt=1.42,Pt=vt*vt;function zt(oe){var Wr=oe?-1:1,ga=oe?$:q,va=$*$-q*q+Wr*Pt*Pt*ht*ht,ya=2*ga*Pt*ht,Po=va/ya,_s=Math.sqrt(Po*Po+1)-Po,wa=_s<1e-9?-18:Math.log(_s);return wa}function xe(oe){return(Math.exp(oe)-Math.exp(-oe))/2}function _e(oe){return(Math.exp(oe)+Math.exp(-oe))/2}function We(oe){return xe(oe)/_e(oe)}var Pe=zt(0);function mn(oe){return q*(_e(Pe)/_e(Pe+vt*oe))}function da(oe){return q*(_e(Pe)*We(Pe+vt*oe)-xe(Pe))/Pt}function _a(oe){return 1-Math.pow(1-oe,1.5)}var pa=Date.now(),fs=(zt(1)-Pe)/vt,ma=i.duration?1e3*i.duration:1e3*fs*.8;function ds(){var oe=(Date.now()-pa)/ma,Wr=_a(oe)*fs;oe<=1?(this._flyToFrame=X(ds,this),this._move(this.unproject(o.add(u.subtract(o).multiplyBy(da(Wr)/ht)),B),this.getScaleZoom(q/mn(Wr),B),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),ds.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=ft(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,ft(t));return i.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=it(e.paddingTopLeft||e.padding||[0,0]),o=it(e.paddingBottomRight||e.padding||[0,0]),u=this.project(this.getCenter()),w=this.project(t),B=this.getPixelBounds(),q=G([B.min.add(i),B.max.subtract(o)]),$=q.getSize();if(!q.contains(w)){this._enforcingBounds=!0;var ht=w.subtract(q.getCenter()),vt=q.extend(w).getSize().subtract($);u.x+=ht.x<0?-vt.x:vt.x,u.y+=ht.y<0?-vt.y:vt.y,this.panTo(this.unproject(u),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),u=i.divideBy(2).round(),w=o.subtract(u);return!w.x&&!w.y?this:(t.animate&&t.pan?this.panBy(w):(t.pan&&this._rawPanBy(w),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,o=new rt(e,i),u=o.toBounds(t.coords.accuracy*2),w=this._locateOptions;if(w.setView){var B=this.getBoundsZoom(u);this.setView(o,w.maxZoom?Math.min(B,w.maxZoom):B)}var q={latlng:o,bounds:u,timestamp:t.timestamp};for(var $ in t.coords)typeof t.coords[$]=="number"&&(q[$]=t.coords[$]);this.fire("locationfound",q)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)$t(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=Ft("div",i,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new mt(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=ft(t),i=it(i||[0,0]);var o=this.getZoom()||0,u=this.getMinZoom(),w=this.getMaxZoom(),B=t.getNorthWest(),q=t.getSouthEast(),$=this.getSize().subtract(i),ht=G(this.project(q,o),this.project(B,o)).getSize(),vt=kt.any3d?this.options.zoomSnap:1,Pt=$.x/ht.x,zt=$.y/ht.y,xe=e?Math.max(Pt,zt):Math.min(Pt,zt);return o=this.getScaleZoom(xe,o),vt&&(o=Math.round(o/(vt/100))*(vt/100),o=e?Math.ceil(o/vt)*vt:Math.floor(o/vt)*vt),Math.max(u,Math.min(w,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ot(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new W(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var o=i.zoom(t*i.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(wt(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(it(t),e)},layerPointToLatLng:function(t){var e=it(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(wt(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(wt(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ft(t))},distance:function(t,e){return this.options.crs.distance(wt(t),wt(e))},containerPointToLayerPoint:function(t){return it(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return it(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(it(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(wt(t)))},mouseEventToContainerPoint:function(t){return br(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Ze(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");St(e,"scroll",this._onScroll,this),this._containerId=f(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&kt.any3d,Ot(t,"leaflet-container"+(kt.touch?" leaflet-touch":"")+(kt.retina?" leaflet-retina":"")+(kt.ielt9?" leaflet-oldie":"")+(kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Ri(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),te(this._mapPane,new ot(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ot(t.markerPane,"leaflet-zoom-hide"),Ot(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){te(this._mapPane,new ot(0,0));var o=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var u=this._zoom!==e;this._moveStart(u,i)._move(t,e)._moveEnd(u),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,o){e===void 0&&(e=this._zoom);var u=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),o?i&&i.pinch&&this.fire("zoom",i):((u||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){te(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[f(this._container)]=this;var e=t?Wt:St;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),kt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],o,u=e==="mouseout"||e==="mouseover",w=t.target||t.srcElement,B=!1;w;){if(o=this._targets[f(w)],o&&(e==="click"||e==="preclick")&&this._draggableMoved(o)){B=!0;break}if(o&&o.listens(e,!0)&&(u&&!Zn(w,t)||(i.push(o),u))||w===this._container)break;w=w.parentNode}return!i.length&&!B&&!u&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&ei(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}var u=this._findEventTargets(t,e);if(i){for(var w=[],B=0;B<i.length;B++)i[B].listens(e,!0)&&w.push(i[B]);u=w.concat(u)}if(u.length){e==="contextmenu"&&ue(t);var q=u[0],$={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ht=q.getLatLng&&(!q._radius||q._radius<=10);$.containerPoint=ht?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(t),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=ht?q.getLatLng():this.layerPointToLatLng($.layerPoint)}for(B=0;B<u.length;B++)if(u[B].fire(e,$,!0),$.originalEvent._stopped||u[B].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return li(this._mapPane)||new ot(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return G([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var o=this.project(t,e),u=this.getSize().divideBy(2),w=new W(o.subtract(u),o.add(u)),B=this._getBoundsOffset(w,i,e);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?t:this.unproject(o.add(B),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),o=new W(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,i){var o=G(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),u=o.min.subtract(t.min),w=o.max.subtract(t.max),B=this._rebound(u.x,-w.x),q=this._rebound(u.y,-w.y);return new ot(B,q)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),o=kt.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=Ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=Cn,o=this._proxy.style[i];he(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();he(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),u=this._getCenterOffset(t)._divideBy(1-1/o);return i.animate!==!0&&!this.getSize().contains(u)?!1:(X(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bo(t,e){return new Bt(t,e)}var Le=d.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return Ot(e,"leaflet-control"),i.indexOf("bottom")!==-1?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Hi=function(t){return new Le(t)};Bt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=Ft("div",e+"control-container",this._container);function o(u,w){var B=e+u+" "+e+w;t[u+w]=Ft("div",B,i)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)$t(this._controlCorners[t]);$t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Er=Le.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,o){return i<o?-1:o<i?1:0}},initialize:function(t,e,i){p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Le.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(f(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Ft("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),xi(e),Nn(e);var o=this._section=Ft("section",t+"-list");i&&(this._map.on("click",this.collapse,this),St(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var u=this._layersLink=Ft("a",t+"-toggle",e);u.href="#",u.title="Layers",u.setAttribute("role","button"),St(u,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){ue(w),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=Ft("div",t+"-base",o),this._separator=Ft("div",t+"-separator",o),this._overlaysList=Ft("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&f(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(s(function(o,u){return this.options.sortFunction(o.layer,u.layer,o.name,u.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rn(this._baseLayersList),rn(this._overlaysList),this._layerControlInputs=[];var t,e,i,o,u=0;for(i=0;i<this._layers.length;i++)o=this._layers[i],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,u+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&u>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(f(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),o;t.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=i):o=this._createRadioElement("leaflet-base-layers_"+f(this),i),this._layerControlInputs.push(o),o.layerId=f(t.layer),St(o,"click",this._onInputClick,this);var u=document.createElement("span");u.innerHTML=" "+t.name;var w=document.createElement("span");e.appendChild(w),w.appendChild(o),w.appendChild(u);var B=t.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,o=[],u=[];this._handlingClick=!0;for(var w=t.length-1;w>=0;w--)e=t[w],i=this._getLayer(e.layerId).layer,e.checked?o.push(i):e.checked||u.push(i);for(w=0;w<u.length;w++)this._map.hasLayer(u[w])&&this._map.removeLayer(u[w]);for(w=0;w<o.length;w++)this._map.hasLayer(o[w])||this._map.addLayer(o[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,o=this._map.getZoom(),u=t.length-1;u>=0;u--)e=t[u],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&o<i.options.minZoom||i.options.maxZoom!==void 0&&o>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,St(t,"click",ue),this.expand();var e=this;setTimeout(function(){Wt(t,"click",ue),e._preventClick=!1})}}),Lo=function(t,e,i){return new Er(t,e,i)},Fn=Le.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=Ft("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,o,u){var w=Ft("a",i,o);return w.innerHTML=t,w.href="#",w.title=e,w.setAttribute("role","button"),w.setAttribute("aria-label",e),xi(w),St(w,"click",ii),St(w,"click",u,this),St(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Qt(this._zoomInButton,e),Qt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ot(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ot(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bt.mergeOptions({zoomControl:!0}),Bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fn,this.addControl(this.zoomControl))});var xo=function(t){return new Fn(t)},Tr=Le.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=Ft("div",e),o=this.options;return this._addScales(o,e+"-line",i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=Ft("div",e,i)),t.imperial&&(this._iScale=Ft("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,o,u;e>5280?(i=e/5280,o=this._getRoundNum(i),this._updateScale(this._iScale,o+" mi",o/i)):(u=this._getRoundNum(e),this._updateScale(this._iScale,u+" ft",u/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Pr=function(t){return new Tr(t)},Un='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hn=Le.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(kt.inlineSvg?Un+" ":"")+"Leaflet</a>"},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ft("div","leaflet-control-attribution"),xi(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});Bt.mergeOptions({attributionControl:!0}),Bt.addInitHook(function(){this.options.attributionControl&&new Hn().addTo(this)});var ko=function(t){return new Hn(t)};Le.Layers=Er,Le.Zoom=Fn,Le.Scale=Tr,Le.Attribution=Hn,Hi.layers=Lo,Hi.zoom=xo,Hi.scale=Pr,Hi.attribution=ko;var Ue=d.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ue.addTo=function(t,e){return t.addHandler(e,this),this};var Eo={Events:st},Gn=kt.touch?"touchstart mousedown":"mousedown",ni=tt.extend({options:{clickTolerance:3},initialize:function(t,e,i,o){p(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(St(this._dragStartTarget,Gn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ni._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,Gn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!On(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ni._dragging===this&&this.finishDrag();return}if(!(ni._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ni._dragging=this,this._preventOutline&&ei(this._element),Fi(),Ni(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=vr(this._element);this._startPoint=new ot(e.clientX,e.clientY),this._startPos=li(this._element),this._parentScale=zn(i);var o=t.type==="mousedown";St(document,o?"mousemove":"touchmove",this._onMove,this),St(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new ot(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,ue(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ot(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),te(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Qt(document.body,"leaflet-dragging"),this._lastTarget&&(Qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),an(),Zi();var e=this._moved&&this._moving;this._moving=!1,ni._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Mr(t,e,i){var o,u=[1,4,2,8],w,B,q,$,ht,vt,Pt,zt;for(w=0,vt=t.length;w<vt;w++)t[w]._code=fi(t[w],e);for(q=0;q<4;q++){for(Pt=u[q],o=[],w=0,vt=t.length,B=vt-1;w<vt;B=w++)$=t[w],ht=t[B],$._code&Pt?ht._code&Pt||(zt=ki(ht,$,Pt,e,i),zt._code=fi(zt,e),o.push(zt)):(ht._code&Pt&&(zt=ki(ht,$,Pt,e,i),zt._code=fi(zt,e),o.push(zt)),o.push($));t=o}return t}function Sr(t,e){var i,o,u,w,B,q,$,ht,vt;if(!t||t.length===0)throw new Error("latlngs not passed");Ee(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Pt=wt([0,0]),zt=ft(t),xe=zt.getNorthWest().distanceTo(zt.getSouthWest())*zt.getNorthEast().distanceTo(zt.getNorthWest());xe<1700&&(Pt=Wn(t));var _e=t.length,We=[];for(i=0;i<_e;i++){var Pe=wt(t[i]);We.push(e.project(wt([Pe.lat-Pt.lat,Pe.lng-Pt.lng])))}for(q=$=ht=0,i=0,o=_e-1;i<_e;o=i++)u=We[i],w=We[o],B=u.y*w.x-w.y*u.x,$+=(u.x+w.x)*B,ht+=(u.y+w.y)*B,q+=B*3;q===0?vt=We[0]:vt=[$/q,ht/q];var mn=e.unproject(it(vt));return wt([mn.lat+Pt.lat,mn.lng+Pt.lng])}function Wn(t){for(var e=0,i=0,o=0,u=0;u<t.length;u++){var w=wt(t[u]);e+=w.lat,i+=w.lng,o++}return wt([e/o,i/o])}var hn={__proto__:null,clipPolygon:Mr,polygonCenter:Sr,centroid:Wn};function Cr(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=To(t,i),t=He(t,i),t}function ci(t,e,i){return Math.sqrt(Gi(t,e,i,!0))}function Or(t,e,i){return Gi(t,e,i)}function He(t,e){var i=t.length,o=typeof Uint8Array<"u"?Uint8Array:Array,u=new o(i);u[0]=u[i-1]=1,qn(t,u,e,0,i-1);var w,B=[];for(w=0;w<i;w++)u[w]&&B.push(t[w]);return B}function qn(t,e,i,o,u){var w=0,B,q,$;for(q=o+1;q<=u-1;q++)$=Gi(t[q],t[o],t[u],!0),$>w&&(B=q,w=$);w>i&&(e[B]=1,qn(t,e,i,o,B),qn(t,e,i,B,u))}function To(t,e){for(var i=[t[0]],o=1,u=0,w=t.length;o<w;o++)un(t[o],t[u])>e&&(i.push(t[o]),u=o);return u<w-1&&i.push(t[w-1]),i}var Dr;function Ar(t,e,i,o,u){var w=o?Dr:fi(t,i),B=fi(e,i),q,$,ht;for(Dr=B;;){if(!(w|B))return[t,e];if(w&B)return!1;q=w||B,$=ki(t,e,q,i,u),ht=fi($,i),q===w?(t=$,w=ht):(e=$,B=ht)}}function ki(t,e,i,o,u){var w=e.x-t.x,B=e.y-t.y,q=o.min,$=o.max,ht,vt;return i&8?(ht=t.x+w*($.y-t.y)/B,vt=$.y):i&4?(ht=t.x+w*(q.y-t.y)/B,vt=q.y):i&2?(ht=$.x,vt=t.y+B*($.x-t.x)/w):i&1&&(ht=q.x,vt=t.y+B*(q.x-t.x)/w),new ot(ht,vt,u)}function fi(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function un(t,e){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o}function Gi(t,e,i,o){var u=e.x,w=e.y,B=i.x-u,q=i.y-w,$=B*B+q*q,ht;return $>0&&(ht=((t.x-u)*B+(t.y-w)*q)/$,ht>1?(u=i.x,w=i.y):ht>0&&(u+=B*ht,w+=q*ht)),B=t.x-u,q=t.y-w,o?B*B+q*q:new ot(u,w)}function Ee(t){return!I(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Wi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ee(t)}function Vn(t,e){var i,o,u,w,B,q,$,ht;if(!t||t.length===0)throw new Error("latlngs not passed");Ee(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var vt=wt([0,0]),Pt=ft(t),zt=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());zt<1700&&(vt=Wn(t));var xe=t.length,_e=[];for(i=0;i<xe;i++){var We=wt(t[i]);_e.push(e.project(wt([We.lat-vt.lat,We.lng-vt.lng])))}for(i=0,o=0;i<xe-1;i++)o+=_e[i].distanceTo(_e[i+1])/2;if(o===0)ht=_e[0];else for(i=0,w=0;i<xe-1;i++)if(B=_e[i],q=_e[i+1],u=B.distanceTo(q),w+=u,w>o){$=(w-o)/u,ht=[q.x-$*(q.x-B.x),q.y-$*(q.y-B.y)];break}var Pe=e.unproject(it(ht));return wt([Pe.lat+vt.lat,Pe.lng+vt.lng])}var Ir={__proto__:null,simplify:Cr,pointToSegmentDistance:ci,closestPointOnSegment:Or,clipSegment:Ar,_getEdgeIntersection:ki,_getBitCode:fi,_sqClosestPointOnSegment:Gi,isFlat:Ee,_flat:Wi,polylineCenter:Vn},jn={project:function(t){return new ot(t.lng,t.lat)},unproject:function(t){return new rt(t.y,t.x)},bounds:new W([-180,-90],[180,90])},Yn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,o=t.lat*e,u=this.R_MINOR/i,w=Math.sqrt(1-u*u),B=w*Math.sin(o),q=Math.tan(Math.PI/4-o/2)/Math.pow((1-B)/(1+B),w/2);return o=-i*Math.log(Math.max(q,1e-10)),new ot(t.lng*e*i,o)},unproject:function(t){for(var e=180/Math.PI,i=this.R,o=this.R_MINOR/i,u=Math.sqrt(1-o*o),w=Math.exp(-t.y/i),B=Math.PI/2-2*Math.atan(w),q=0,$=.1,ht;q<15&&Math.abs($)>1e-7;q++)ht=u*Math.sin(B),ht=Math.pow((1-ht)/(1+ht),u/2),$=Math.PI/2-2*Math.atan(w*ht)-B,B+=$;return new rt(B*e,t.x*e/i)}},cn={__proto__:null,LonLat:jn,Mercator:Yn,SphericalMercator:bt},di=n({},Mt,{code:"EPSG:3395",projection:Yn,transformation:function(){var t=.5/(Math.PI*Yn.R);return Tt(t,.5,-t,.5)}()}),zr=n({},Mt,{code:"EPSG:4326",projection:jn,transformation:Tt(1/180,1,-1/180,.5)}),Br=n({},Ut,{projection:jn,transformation:Tt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(i*i+o*o)},infinite:!0});Ut.Earth=Mt,Ut.EPSG3395=di,Ut.EPSG3857=Dt,Ut.EPSG900913=_,Ut.EPSG4326=zr,Ut.Simple=Br;var ye=tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[f(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[f(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Bt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=f(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=f(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return f(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?I(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[f(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=f(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var o in this._zoomBoundLayers){var u=this._zoomBoundLayers[o].options;t=u.minZoom===void 0?t:Math.min(t,u.minZoom),e=u.maxZoom===void 0?e:Math.max(e,u.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ei=ye.extend({initialize:function(t,e){p(this,e),this._layers={};var i,o;if(t)for(i=0,o=t.length;i<o;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,o;for(i in this._layers)o=this._layers[i],o[t]&&o[t].apply(o,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f(t)}}),Ti=function(t,e){return new Ei(t,e)},we=Ei.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ei.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ei.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new mt;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),me=function(t,e){return new we(t,e)},Te=d.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(o,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(t,e){var i=this.options,o=i[e+"Size"];typeof o=="number"&&(o=[o,o]);var u=it(o),w=it(e==="shadow"&&i.shadowAnchor||i.iconAnchor||u&&u.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),w&&(t.style.marginLeft=-w.x+"px",t.style.marginTop=-w.y+"px"),u&&(t.style.width=u.x+"px",t.style.height=u.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return kt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Kn(t){return new Te(t)}var _i=Te.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof _i.imagePath!="string"&&(_i.imagePath=this._detectIconPath()),(this.options.imagePath||_i.imagePath)+Te.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,o,u){var w=o.exec(i);return w&&w[u]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ft("div","leaflet-default-icon-path",document.body),e=Ri(t,"background-image")||Ri(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Rr=Ue.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ni(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ot(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,o=this._marker.options.autoPanSpeed,u=this._marker.options.autoPanPadding,w=li(e._icon),B=i.getPixelBounds(),q=i.getPixelOrigin(),$=G(B.min._subtract(q).add(u),B.max._subtract(q).subtract(u));if(!$.contains(w)){var ht=it((Math.max($.max.x,w.x)-$.max.x)/(B.max.x-$.max.x)-(Math.min($.min.x,w.x)-$.min.x)/(B.min.x-$.min.x),(Math.max($.max.y,w.y)-$.max.y)/(B.max.y-$.max.y)-(Math.min($.min.y,w.y)-$.min.y)/(B.min.y-$.min.y)).multiplyBy(o);i.panBy(ht,{animate:!1}),this._draggable._newPos._add(ht),this._draggable._startPos._add(ht),te(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=X(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,o=li(e._icon),u=e._map.layerPointToLatLng(o);i&&te(i,o),e._latlng=u,t.latlng=u,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),pi=ye.extend({options:{icon:new _i,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=wt(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=wt(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),Ot(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&St(i,"focus",this._panOnFocus,this);var u=t.icon.createShadow(this._shadow),w=!1;u!==this._shadow&&(this._removeShadow(),w=!0),u&&(Ot(u,e),u.alt=""),this._shadow=u,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),u&&w&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),$t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$t(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&te(this._icon,t),this._shadow&&te(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?it(e.iconSize):it(0,0),o=e.iconAnchor?it(e.iconAnchor):it(0,0);t.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:i.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fn(t,e){return new pi(t,e)}var ne=ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ve=ne.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=wt(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=wt(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ne.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),o=[t+i,e+i];this._pxBounds=new W(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Nr(t,e){return new Ve(t,e)}var Pi=Ve.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=n({},i,{radius:e})),p(this,e),this._latlng=wt(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new mt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ne.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,o=i.options.crs;if(o.distance===Mt.distance){var u=Math.PI/180,w=this._mRadius/Mt.R/u,B=i.project([e+w,t]),q=i.project([e-w,t]),$=B.add(q).divideBy(2),ht=i.unproject($).lat,vt=Math.acos((Math.cos(w*u)-Math.sin(e*u)*Math.sin(ht*u))/(Math.cos(e*u)*Math.cos(ht*u)))/u;(isNaN(vt)||vt===0)&&(vt=w/Math.cos(Math.PI/180*e)),this._point=$.subtract(i.getPixelOrigin()),this._radius=isNaN(vt)?0:$.x-i.project([ht,t-vt]).x,this._radiusY=$.y-B.y}else{var Pt=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(Pt).x}this._updateBounds()}});function dn(t,e,i){return new Pi(t,e,i)}var Ge=ne.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,o=Gi,u,w,B=0,q=this._parts.length;B<q;B++)for(var $=this._parts[B],ht=1,vt=$.length;ht<vt;ht++){u=$[ht-1],w=$[ht];var Pt=o(t,u,w,!0);Pt<e&&(e=Pt,i=o(t,u,w))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=wt(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new mt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ee(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Ee(t),o=0,u=t.length;o<u;o++)i?(e[o]=wt(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new ot(t,t);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var o=t[0]instanceof rt,u=t.length,w,B;if(o){for(B=[],w=0;w<u;w++)B[w]=this._map.latLngToLayerPoint(t[w]),i.extend(B[w]);e.push(B)}else for(w=0;w<u;w++)this._projectLatlngs(t[w],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,o,u,w,B,q,$;for(i=0,u=0,w=this._rings.length;i<w;i++)for($=this._rings[i],o=0,B=$.length;o<B-1;o++)q=Ar($[o],$[o+1],t,o,!0),q&&(e[u]=e[u]||[],e[u].push(q[0]),(q[1]!==$[o+1]||o===B-2)&&(e[u].push(q[1]),u++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,o=t.length;i<o;i++)t[i]=Cr(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,o,u,w,B,q,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,w=this._parts.length;i<w;i++)for(q=this._parts[i],o=0,B=q.length,u=B-1;o<B;u=o++)if(!(!e&&o===0)&&ci(t,q[u],q[o])<=$)return!0;return!1}});function Zr(t,e){return new Ge(t,e)}Ge._flat=Wi;var mi=Ge.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ge.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof rt&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Ge.prototype._setLatLngs.call(this,t),Ee(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ee(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new ot(e,e);if(t=new W(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,u=this._rings.length,w;o<u;o++)w=Mr(this._rings[o],t,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,o,u,w,B,q,$,ht;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(w=0,$=this._parts.length;w<$;w++)for(i=this._parts[w],B=0,ht=i.length,q=ht-1;B<ht;q=B++)o=i[B],u=i[q],o.y>t.y!=u.y>t.y&&t.x<(u.x-o.x)*(t.y-o.y)/(u.y-o.y)+o.x&&(e=!e);return e||Ge.prototype._containsPoint.call(this,t,!0)}});function Fr(t,e){return new mi(t,e)}var de=we.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=I(t)?t:t.features,i,o,u;if(e){for(i=0,o=e.length;i<o;i++)u=e[i],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(u);return this}var w=this.options;if(w.filter&&!w.filter(t))return this;var B=qi(t,w);return B?(B.feature=l(t),B.defaultOptions=B.options,this.resetStyle(B),w.onEachFeature&&w.onEachFeature(t,B),this.addLayer(B)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function qi(t,e){var i=t.type==="Feature"?t.geometry:t,o=i?i.coordinates:null,u=[],w=e&&e.pointToLayer,B=e&&e.coordsToLatLng||_n,q,$,ht,vt;if(!o&&!i)return null;switch(i.type){case"Point":return q=B(o),Ur(w,t,q,e);case"MultiPoint":for(ht=0,vt=o.length;ht<vt;ht++)q=B(o[ht]),u.push(Ur(w,t,q,e));return new we(u);case"LineString":case"MultiLineString":return $=Mi(o,i.type==="LineString"?0:1,B),new Ge($,e);case"Polygon":case"MultiPolygon":return $=Mi(o,i.type==="Polygon"?1:2,B),new mi($,e);case"GeometryCollection":for(ht=0,vt=i.geometries.length;ht<vt;ht++){var Pt=qi({geometry:i.geometries[ht],type:"Feature",properties:t.properties},e);Pt&&u.push(Pt)}return new we(u);case"FeatureCollection":for(ht=0,vt=i.features.length;ht<vt;ht++){var zt=qi(i.features[ht],e);zt&&u.push(zt)}return new we(u);default:throw new Error("Invalid GeoJSON object.")}}function Ur(t,e,i,o){return t?t(e,i):new pi(i,o&&o.markersInheritOptions&&o)}function _n(t){return new rt(t[1],t[0],t[2])}function Mi(t,e,i){for(var o=[],u=0,w=t.length,B;u<w;u++)B=e?Mi(t[u],e-1,i):(i||_n)(t[u]),o.push(B);return o}function pn(t,e){return t=wt(t),t.alt!==void 0?[T(t.lng,e),T(t.lat,e),T(t.alt,e)]:[T(t.lng,e),T(t.lat,e)]}function Vi(t,e,i,o){for(var u=[],w=0,B=t.length;w<B;w++)u.push(e?Vi(t[w],Ee(t[w])?0:e-1,i,o):pn(t[w],o));return!e&&i&&u.length>0&&u.push(u[0].slice()),u}function gi(t,e){return t.feature?n({},t.feature,{geometry:e}):l(e)}function l(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var k={toGeoJSON:function(t){return gi(this,{type:"Point",coordinates:pn(this.getLatLng(),t)})}};pi.include(k),Pi.include(k),Ve.include(k),Ge.include({toGeoJSON:function(t){var e=!Ee(this._latlngs),i=Vi(this._latlngs,e?1:0,!1,t);return gi(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),mi.include({toGeoJSON:function(t){var e=!Ee(this._latlngs),i=e&&!Ee(this._latlngs[0]),o=Vi(this._latlngs,i?2:e?1:0,!0,t);return e||(o=[o]),gi(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})}}),Ei.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),gi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",o=[];return this.eachLayer(function(u){if(u.toGeoJSON){var w=u.toGeoJSON(t);if(i)o.push(w.geometry);else{var B=l(w);B.type==="FeatureCollection"?o.push.apply(o,B.features):o.push(B)}}}),i?gi(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function z(t,e){return new de(t,e)}var J=z,_t=ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=ft(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&bi(this._image),this},bringToBack:function(){return this._map&&ve(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ft(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:Ft("img");if(Ot(e,"leaflet-image-layer"),this._zoomAnimated&&Ot(e,"leaflet-zoom-animated"),this.options.className&&Ot(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onload=s(this.fire,this,"load"),e.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;he(this._image,i,e)},_reset:function(){var t=this._image,e=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();te(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),dt=function(t,e,i){return new _t(t,e,i)},gt=_t.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:Ft("video");if(Ot(e,"leaflet-image-layer"),this._zoomAnimated&&Ot(e,"leaflet-zoom-animated"),this.options.className&&Ot(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onloadeddata=s(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),o=[],u=0;u<i.length;u++)o.push(i[u].src);this._url=i.length>0?o:[e.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var B=Ft("source");B.src=this._url[w],e.appendChild(B)}}});function Et(t,e,i){return new gt(t,e,i)}var Ct=_t.extend({_initImage:function(){var t=this._image=this._url;Ot(t,"leaflet-image-layer"),this._zoomAnimated&&Ot(t,"leaflet-zoom-animated"),this.options.className&&Ot(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function qt(t,e,i){return new Ct(t,e,i)}var At=ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof rt||I(t))?(this._latlng=wt(t),p(this,e)):(p(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&pe(this._container,1),this.bringToFront(),this.options.interactive&&(Ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(s($t,void 0,this._container),200)):$t(this._container),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=wt(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bi(this._container),this},bringToBack:function(){return this._map&&ve(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof we){e=null;var i=this._source._layers;for(var o in i)if(i[o]._map){e=i[o];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=it(this.options.offset),i=this._getAnchor();this._zoomAnimated?te(this._container,t.add(i)):e=e.add(t).add(i);var o=this._containerBottom=-e.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=u+"px"}},_getAnchor:function(){return[0,0]}});Bt.include({_initOverlay:function(t,e,i,o){var u=e;return u instanceof t||(u=new t(o).setContent(e)),i&&u.setLatLng(i),u}}),ye.include({_initOverlay:function(t,e,i,o){var u=i;return u instanceof t?(p(u,o),u._source=this):(u=e&&!o?e:new t(o,this),u.setContent(i)),u}});var Vt=At.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,At.prototype.openOn.call(this,t)},onAdd:function(t){At.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ne||this._source.on("preclick",ui))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ne||this._source.off("preclick",ui))},getEvents:function(){var t=At.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=Ft("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=Ft("div",t+"-content-wrapper",e);if(this._contentNode=Ft("div",t+"-content",i),xi(e),Nn(this._contentNode),St(e,"contextmenu",ui),this._tipContainer=Ft("div",t+"-tip-container",e),this._tip=Ft("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=Ft("a",t+"-close-button",e);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',St(o,"click",function(u){ue(u),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,u=this.options.maxHeight,w="leaflet-popup-scrolled";u&&o>u?(e.height=u+"px",Ot(t,w)):Qt(t,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();te(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Ri(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,o=this._containerWidth,u=new ot(this._containerLeft,-i-this._containerBottom);u._add(li(this._container));var w=t.layerPointToContainerPoint(u),B=it(this.options.autoPanPadding),q=it(this.options.autoPanPaddingTopLeft||B),$=it(this.options.autoPanPaddingBottomRight||B),ht=t.getSize(),vt=0,Pt=0;w.x+o+$.x>ht.x&&(vt=w.x+o-ht.x+$.x),w.x-vt-q.x<0&&(vt=w.x-q.x),w.y+i+$.y>ht.y&&(Pt=w.y+i-ht.y+$.y),w.y-Pt-q.y<0&&(Pt=w.y-q.y),(vt||Pt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([vt,Pt]))}},_getAnchor:function(){return it(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),re=function(t,e){return new Vt(t,e)};Bt.mergeOptions({closePopupOnClick:!0}),Bt.include({openPopup:function(t,e,i){return this._initOverlay(Vt,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),ye.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Vt,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof we||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ii(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof ne)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ee=At.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){At.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=At.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,o=this._map,u=this._container,w=o.latLngToContainerPoint(o.getCenter()),B=o.layerPointToContainerPoint(t),q=this.options.direction,$=u.offsetWidth,ht=u.offsetHeight,vt=it(this.options.offset),Pt=this._getAnchor();q==="top"?(e=$/2,i=ht):q==="bottom"?(e=$/2,i=0):q==="center"?(e=$/2,i=ht/2):q==="right"?(e=0,i=ht/2):q==="left"?(e=$,i=ht/2):B.x<w.x?(q="right",e=0,i=ht/2):(q="left",e=$+(vt.x+Pt.x)*2,i=ht/2),t=t.subtract(it(e,i,!0)).add(vt).add(Pt),Qt(u,"leaflet-tooltip-right"),Qt(u,"leaflet-tooltip-left"),Qt(u,"leaflet-tooltip-top"),Qt(u,"leaflet-tooltip-bottom"),Ot(u,"leaflet-tooltip-"+q),te(u,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&pe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return it(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ce=function(t,e){return new ee(t,e)};Bt.include({openTooltip:function(t,e,i){return this._initOverlay(ee,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),ye.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ee,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof we||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(St(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),St(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,o;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(e)}});var je=Te.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(rn(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var o=it(i.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ye(t){return new je(t)}Te.Default=_i;var Oe=ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),$t(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ve(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof ot?t:new ot(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),o=0,u=e.length,w;o<u;o++)w=e[o].style.zIndex,e[o]!==this._container&&w&&(i=t(i,+w));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!kt.ielt9){pe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var o in this._tiles){var u=this._tiles[o];if(!(!u.current||!u.loaded)){var w=Math.min(1,(t-u.loaded)/200);pe(u.el,w),w<1?e=!0:(u.active?i=!0:this._onOpaqueTile(u),u.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(O(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):($t(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var o=this._levels[t],u=this._map;return o||(o=this._levels[t]={},o.el=Ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=u.project(u.unproject(u.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,u.getCenter(),u.getZoom()),g(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)$t(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,o){var u=Math.floor(t/2),w=Math.floor(e/2),B=i-1,q=new ot(+u,+w);q.z=+B;var $=this._tileCoordsToKey(q),ht=this._tiles[$];return ht&&ht.active?(ht.retain=!0,!0):(ht&&ht.loaded&&(ht.retain=!0),B>o?this._retainParent(u,w,B,o):!1)},_retainChildren:function(t,e,i,o){for(var u=2*t;u<2*t+2;u++)for(var w=2*e;w<2*e+2;w++){var B=new ot(u,w);B.z=i+1;var q=this._tileCoordsToKey(B),$=this._tiles[q];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);i+1<o&&this._retainChildren(u,w,i+1,o)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,o){var u=Math.round(e);this.options.maxZoom!==void 0&&u>this.options.maxZoom||this.options.minZoom!==void 0&&u<this.options.minZoom?u=void 0:u=this._clampZoom(u);var w=this.options.updateWhenZooming&&u!==this._tileZoom;(!o||w)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var o=this._map.getZoomScale(i,t.zoom),u=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,i)).round();kt.any3d?he(t.el,u,o):te(t.el,u)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),o=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(i,this._tileZoom),u=e.project(t,this._tileZoom).floor(),w=e.getSize().divideBy(o*2);return new W(u.subtract(w),u.add(w))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(t),u=this._pxBoundsToTileRange(o),w=u.getCenter(),B=[],q=this.options.keepBuffer,$=new W(u.getBottomLeft().subtract([q,-q]),u.getTopRight().add([q,-q]));if(!(isFinite(u.min.x)&&isFinite(u.min.y)&&isFinite(u.max.x)&&isFinite(u.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ht in this._tiles){var vt=this._tiles[ht].coords;(vt.z!==this._tileZoom||!$.contains(new ot(vt.x,vt.y)))&&(this._tiles[ht].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var Pt=u.min.y;Pt<=u.max.y;Pt++)for(var zt=u.min.x;zt<=u.max.x;zt++){var xe=new ot(zt,Pt);if(xe.z=this._tileZoom,!!this._isValidTile(xe)){var _e=this._tiles[this._tileCoordsToKey(xe)];_e?_e.current=!0:B.push(xe)}}if(B.sort(function(Pe,mn){return Pe.distanceTo(w)-mn.distanceTo(w)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var We=document.createDocumentFragment();for(zt=0;zt<B.length;zt++)this._addTile(B[zt],We);this._level.el.appendChild(We)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return ft(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),o=t.scaleBy(i),u=o.add(i),w=e.unproject(o,t.z),B=e.unproject(u,t.z);return[w,B]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new mt(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new ot(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&($t(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ot(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=g,t.onmousemove=g,kt.ielt9&&this.options.opacity<1&&pe(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),u=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(u),this.createTile.length<2&&X(s(this._tileReady,this,t,null,u)),te(u,i),this._tiles[o]={el:u,coords:t,current:!0},e.appendChild(u),this.fire("tileloadstart",{tile:u,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);i=this._tiles[o],i&&(i.loaded=+new Date,this._map._fadeAnimated?(pe(i.el,0),O(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(Ot(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),kt.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new ot(this._wrapX?b(t.x,this._wrapX):t.x,this._wrapY?b(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new W(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Hr(t){return new Oe(t)}var Ke=Oe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=p(this,e),e.detectRetina&&kt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return St(i,"load",s(this._tileOnLoad,this,e,i)),St(i,"error",s(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:kt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return P(this._url,n(e,this.options))},_tileOnLoad:function(t,e){kt.ielt9?setTimeout(s(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,o=this.options.zoomOffset;return i&&(t=e-t),t+o},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=g,e.onerror=g,!e.complete)){e.src=S;var i=this._tiles[t].coords;$t(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",S),Oe.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===S))return Oe.prototype._tileReady.call(this,t,e,i)}});function ji(t,e){return new Ke(t,e)}var ts=Ke.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);e=p(this,e);var u=e.detectRetina&&kt.retina?2:1,w=this.getTileSize();i.width=w.x*u,i.height=w.y*u,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ke.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,o=G(i.project(e[0]),i.project(e[1])),u=o.min,w=o.max,B=(this._wmsVersion>=1.3&&this._crs===zr?[u.y,u.x,w.y,w.x]:[u.x,u.y,w.x,w.y]).join(","),q=Ke.prototype.getTileUrl.call(this,t);return q+v(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function la(t,e){return new ts(t,e)}Ke.WMS=ts,ji.wms=la;var vi=ye.extend({options:{padding:.1},initialize:function(t){p(this,t),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),u=this._map.project(this._center,e),w=o.multiplyBy(-i).add(u).subtract(this._map._getNewPixelOrigin(t,e));kt.any3d?he(this._container,w,i):te(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new W(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),es=vi.extend({options:{tolerance:0},getEvents:function(){var t=vi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");St(t,"mousemove",this._onMouseMove,this),St(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),St(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,$t(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vi.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),o=kt.retina?2:1;te(e,t.min),e.width=o*i.x,e.height=o*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[f(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,o=e.prev;i?i.prev=o:this._drawLast=o,o?o.next=i:this._drawFirst=i,delete t._order,delete this._layers[f(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],o,u;for(u=0;u<e.length;u++){if(o=Number(e[u]),isNaN(o))return;i.push(o)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,o,u,w,B=t._parts,q=B.length,$=this._ctx;if(q){for($.beginPath(),i=0;i<q;i++){for(o=0,u=B[i].length;o<u;o++)w=B[i][o],$[o?"lineTo":"moveTo"](w.x,w.y);e&&$.closePath()}this._fillStroke($,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,o=Math.max(Math.round(t._radius),1),u=(Math.max(Math.round(t._radiusY),1)||o)/o;u!==1&&(i.save(),i.scale(1,u)),i.beginPath(),i.arc(e.x,e.y/u,o,0,Math.PI*2,!1),u!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,o,u=this._drawFirst;u;u=u.next)i=u.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(o=i);this._fireEvent(o?[o]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,o,u=this._drawFirst;u;u=u.next)i=u.layer,i.options.interactive&&i._containsPoint(e)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(Ot(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(i)i.prev=o;else return;o?o.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(o)o.next=i;else return;i?i.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function is(t){return kt.canvas?new es(t):null}var Xn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ha={_initContainer:function(){this._container=Ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Xn("shape");Ot(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Xn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;$t(e),t.removeInteractiveTarget(e),delete this._layers[f(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,o=t.options,u=t._container;u.stroked=!!o.stroke,u.filled=!!o.fill,o.stroke?(e||(e=t._stroke=Xn("stroke")),u.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=I(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(u.removeChild(e),t._stroke=null),o.fill?(i||(i=t._fill=Xn("fill")),u.appendChild(i),i.color=o.fillColor||o.color,i.opacity=o.fillOpacity):i&&(u.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),o=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+o+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){bi(t._container)},_bringToBack:function(t){ve(t._container)}},Gr=kt.vml?Xn:et,$n=vi.extend({_initContainer:function(){this._container=Gr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$t(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),te(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Gr("path");t.options.className&&Ot(e,t.options.className),t.options.interactive&&Ot(e,"leaflet-interactive"),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){$t(t._path),t.removeInteractiveTarget(t._path),delete this._layers[f(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,K(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),o=Math.max(Math.round(t._radiusY),1)||i,u="a"+i+","+o+" 0 1,0 ",w=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+u+i*2+",0 "+u+-i*2+",0 ";this._setPath(t,w)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){bi(t._path)},_bringToBack:function(t){ve(t._path)}});kt.vml&&$n.include(ha);function ns(t){return kt.svg||kt.vml?new $n(t):null}Bt.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&is(t)||ns(t)}});var rs=mi.extend({initialize:function(t,e){mi.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ft(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ua(t,e){return new rs(t,e)}$n.create=Gr,$n.pointsToPath=K,de.geometryToLayer=qi,de.coordsToLatLng=_n,de.coordsToLatLngs=Mi,de.latLngToCoords=pn,de.latLngsToCoords=Vi,de.getFeature=gi,de.asFeature=l,Bt.mergeOptions({boxZoom:!0});var os=Ue.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){St(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ni(),Fi(),this._startPoint=this._map.mouseEventToContainerPoint(t),St(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ft("div","leaflet-zoom-box",this._container),Ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new W(this._point,this._startPoint),i=e.getSize();te(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&($t(this._box),Qt(this._container,"leaflet-crosshair")),Zi(),an(),Wt(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new mt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bt.addInitHook("addHandler","boxZoom",os),Bt.mergeOptions({doubleClickZoom:!0});var ss=Ue.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),o=e.options.zoomDelta,u=t.originalEvent.shiftKey?i-o:i+o;e.options.doubleClickZoom==="center"?e.setZoom(u):e.setZoomAround(t.containerPoint,u)}});Bt.addInitHook("addHandler","doubleClickZoom",ss),Bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var as=Ue.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ni(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qt(this._map._container,"leaflet-grab"),Qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ft(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,u=(o-e+i)%t+e-i,w=(o+e+i)%t-e-i,B=Math.abs(u+i)<Math.abs(w+i)?u:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(t){var e=this._map,i=e.options,o=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{this._prunePositions(+new Date);var u=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,B=i.easeLinearity,q=u.multiplyBy(B/w),$=q.distanceTo([0,0]),ht=Math.min(i.inertiaMaxSpeed,$),vt=q.multiplyBy(ht/$),Pt=ht/(i.inertiaDeceleration*B),zt=vt.multiplyBy(-Pt/2).round();!zt.x&&!zt.y?e.fire("moveend"):(zt=e._limitOffset(zt,e.options.maxBounds),X(function(){e.panBy(zt,{duration:Pt,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});Bt.addInitHook("addHandler","dragging",as),Bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ls=Ue.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),St(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,o,u;for(o=0,u=i.left.length;o<u;o++)e[i.left[o]]=[-1*t,0];for(o=0,u=i.right.length;o<u;o++)e[i.right[o]]=[t,0];for(o=0,u=i.down.length;o<u;o++)e[i.down[o]]=[0,t];for(o=0,u=i.up.length;o<u;o++)e[i.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,o,u;for(o=0,u=i.zoomIn.length;o<u;o++)e[i.zoomIn[o]]=t;for(o=0,u=i.zoomOut.length;o<u;o++)e[i.zoomOut[o]]=-t},_addHooks:function(){St(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,o;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(o=this._panKeys[e],t.shiftKey&&(o=it(o).multiplyBy(3)),i.options.maxBounds&&(o=i._limitOffset(it(o),i.options.maxBounds)),i.options.worldCopyJump){var u=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(o)));i.panTo(u)}else i.panBy(o)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;ii(t)}}});Bt.addInitHook("addHandler","keyboard",ls),Bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hs=Ue.extend({addHooks:function(){St(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=xr(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),o),ii(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,w=i?Math.ceil(u/i)*i:u,B=t._limitZoom(e+(this._delta>0?w:-w))-e;this._delta=0,this._startTime=null,B&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+B):t.setZoomAround(this._lastMousePos,e+B))}});Bt.addInitHook("addHandler","scrollWheelZoom",hs);var ca=600;Bt.mergeOptions({tapHold:kt.touchNative&&kt.safari&&kt.mobile,tapTolerance:15});var us=Ue.extend({addHooks:function(){St(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new ot(e.clientX,e.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(St(document,"touchend",ue),St(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ca),St(document,"touchend touchcancel contextmenu",this._cancel,this),St(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Wt(document,"touchend",ue),Wt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new ot(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});Bt.addInitHook("addHandler","tapHold",us),Bt.mergeOptions({touchZoom:kt.touch,bounceAtZoomLimits:!0});var cs=Ue.extend({addHooks:function(){Ot(this._map._container,"leaflet-touch-zoom"),St(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(o)._divideBy(2))),this._startDist=i.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),St(document,"touchmove",this._onTouchMove,this),St(document,"touchend touchcancel",this._onTouchEnd,this),ue(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),u=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(u,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&u<1||this._zoom>e.getMaxZoom()&&u>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,u===1)return}else{var w=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(u===1&&w.x===0&&w.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var B=s(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(B,this,!0),ue(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bt.addInitHook("addHandler","touchZoom",cs),Bt.BoxZoom=os,Bt.DoubleClickZoom=ss,Bt.Drag=as,Bt.Keyboard=ls,Bt.ScrollWheelZoom=hs,Bt.TapHold=us,Bt.TouchZoom=cs,a.Bounds=W,a.Browser=kt,a.CRS=Ut,a.Canvas=es,a.Circle=Pi,a.CircleMarker=Ve,a.Class=d,a.Control=Le,a.DivIcon=je,a.DivOverlay=At,a.DomEvent=wo,a.DomUtil=yo,a.Draggable=ni,a.Evented=tt,a.FeatureGroup=we,a.GeoJSON=de,a.GridLayer=Oe,a.Handler=Ue,a.Icon=Te,a.ImageOverlay=_t,a.LatLng=rt,a.LatLngBounds=mt,a.Layer=ye,a.LayerGroup=Ei,a.LineUtil=Ir,a.Map=Bt,a.Marker=pi,a.Mixin=Eo,a.Path=ne,a.Point=ot,a.PolyUtil=hn,a.Polygon=mi,a.Polyline=Ge,a.Popup=Vt,a.PosAnimation=kr,a.Projection=cn,a.Rectangle=rs,a.Renderer=vi,a.SVG=$n,a.SVGOverlay=Ct,a.TileLayer=Ke,a.Tooltip=ee,a.Transformation=yt,a.Util=U,a.VideoOverlay=gt,a.bind=s,a.bounds=G,a.canvas=is,a.circle=dn,a.circleMarker=Nr,a.control=Hi,a.divIcon=Ye,a.extend=n,a.featureGroup=me,a.geoJSON=z,a.geoJson=J,a.gridLayer=Hr,a.icon=Kn,a.imageOverlay=dt,a.latLng=wt,a.latLngBounds=ft,a.layerGroup=Ti,a.map=bo,a.marker=fn,a.point=it,a.polygon=Fr,a.polyline=Zr,a.popup=re,a.rectangle=ua,a.setOptions=p,a.stamp=f,a.svg=ns,a.svgOverlay=qt,a.tileLayer=ji,a.tooltip=ce,a.transformation=Tt,a.version=C,a.videoOverlay=Et;var fa=window.L;a.noConflict=function(){return window.L=fa,this},window.L=a})}(Qn,Qn.exports)),Qn.exports}var $l=Xl();const Jl=Qo($l);(function(c,x,a){function C(n,r){for(;(n=n.parentElement)&&!n.classList.contains(r););return n}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(n,r){this._map=n,this._container=n._container,this._overlayPane=n._panes.overlayPane,this._popupPane=n._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(L.DomUtil.disableTextSelection(),n.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var n=this._markers.pop(),r=this._poly,s=r.getLatLngs(),h=s.splice(-1,1)[0];this._poly.setLatLngs(s),this._markerGroup.removeLayer(n),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(h,!1)}},addVertex:function(n){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(n)),this._poly.addLatLng(n),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent),s=this._map.layerPointToLatLng(r);this._currentLatLng=s,this._updateTooltip(s),this._updateGuide(r),this._mouseMarker.setLatLng(s),L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(n,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n),this._clickHandled=!0,this._disableNewMarkers();var r=n.originalEvent,s=r.clientX,h=r.clientY;this._startPoint.call(this,s,h)}},_startPoint:function(n,r){this._mouseDownOrigin=L.point(n,r)},_onMouseUp:function(n){var r=n.originalEvent,s=r.clientX,h=r.clientY;this._endPoint.call(this,s,h,n),this._clickHandled=null},_endPoint:function(n,r,s){if(this._mouseDownOrigin){var h=L.point(n,r).distanceTo(this._mouseDownOrigin),f=this._calculateFinishDistance(s.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(s.latlng),this._finishShape()):f<10&&L.Browser.touch?this._finishShape():Math.abs(h)<9*(c.devicePixelRatio||1)&&this.addVertex(s.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var r,s,h=n.originalEvent;!h.touches||!h.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=h.touches[0].clientX,s=h.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,s),this._endPoint.call(this,r,s,n),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var r;if(this._markers.length>0){var s;if(this.type===L.Draw.Polyline.TYPE)s=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;s=this._markers[0]}var h=this._map.latLngToContainerPoint(s.getLatLng()),f=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(f.getLatLng());r=h.distanceTo(m)}else r=1/0;return r},_updateFinishHandler:function(){var n=this._markers.length;n>1&&this._markers[n-1].on("click",this._finishShape,this),n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var r=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(n){var r=this._markers?this._markers.length:0;r>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),n))},_updateTooltip:function(n){var r=this._getTooltipText();n&&this._tooltip.updatePosition(n),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(n,r){var s,h,f,m=Math.floor(Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))),b=this.options.guidelineDistance,g=this.options.maxGuideLineLength,T=m>g?m-g:b;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));T<m;T+=this.options.guidelineDistance)s=T/m,h={x:Math.floor(n.x*(1-s)+s*r.x),y:Math.floor(n.y*(1-s)+s*r.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,h)},_updateGuideColor:function(n){if(this._guidesContainer)for(var r=0,s=this._guidesContainer.childNodes.length;r<s;r++)this._guidesContainer.childNodes[r].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var n,r,s=this.options.showLength;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=s?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),n},_updateRunningMeasure:function(n,r){var s,h,f=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(s=f-(r?2:1),h=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[s].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[s].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=h*(r?1:-1))},_getMeasurementString:function(){var n,r=this._currentLatLng,s=this._markers[this._markers.length-1].getLatLng();return n=L.GeometryUtil.isVersion07x()?s&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(s)*(this.options.factor||1):this._measurementRunningTotal||0:s&&r?this._measurementRunningTotal+this._map.distance(r,s)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(n,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,r){L.Draw.Polyline.prototype.initialize.call(this,n,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;n===1&&this._markers[0].on("click",this._finishShape,this),n>2&&(this._markers[n-1].on("dblclick",this._finishShape,this),n>3&&this._markers[n-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var n,r;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:n,subtext:r}},_getMeasurementString:function(){var n=this._area,r="";return n||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(r+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,r){var s;!this.options.allowIntersection&&this.options.showArea&&(s=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(s)),L.Draw.Polyline.prototype._vertexChanged.call(this,n,r)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),x.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(x,"mouseup",this._onMouseUp,this),L.DomEvent.off(x,"touchend",this._onMouseUp,this),x.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0,this._startLatLng=n.latlng,L.DomEvent.on(x,"mouseup",this._onMouseUp,this).on(x,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(n,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!C(n.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var n,r,s,h=L.Draw.SimpleShape.prototype._getTooltipText.call(this),f=this._shape,m=this.options.showArea;return f&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(n),s=m?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:h.text,subtext:s}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n),this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},_drawShape:function(n){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(n);else var r=this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var r,s=n.latlng,h=this.options.showRadius,f=this.options.metric;if(this._tooltip.updatePosition(s),this._isDrawing){this._drawShape(s),r=this._shape.getRadius().toFixed(1);var m="";h&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,f,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(n,r){this._marker=n,L.setOptions(this,r)},addHooks:function(){var n=this._marker;n.dragging.enable(),n.on("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging.disable(),n.off("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},_onDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,r){var s=parseInt(n.style.marginTop,10)-r,h=parseInt(n.style.marginLeft,10)-r;n.style.marginTop=s+"px",n.style.marginLeft=h+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs],n._holes&&(this.latlngs=this.latlngs.concat(n._holes)),this._poly=n,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var r=0;r<this._verticesHandlers.length;r++)n(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs],n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,r,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=n,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this._latlngs=r,L.setOptions(this,s)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,r=n._path;n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1)),r&&n.options.editing&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(s){L.DomUtil.removeClass(r,s)}),n.options.editing.className.split(" ").forEach(function(s){L.DomUtil.addClass(r,s)})),n.setStyle(n.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,r=n._path;r&&n.options.editing&&n.options.editing.className&&(n.options.editing.className.split(" ").forEach(function(s){L.DomUtil.removeClass(r,s)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(s){L.DomUtil.addClass(r,s)})),n.setStyle(n.options.original),n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var n,r,s,h,f=this._defaultShape();for(n=0,s=f.length;n<s;n++)h=this._createMarker(f[n],n),h.on("click",this._onMarkerClick,this),h.on("contextmenu",this._onContextMenu,this),this._markers.push(h);var m,b;for(n=0,r=s-1;n<s;r=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[r],b=this._markers[n],this._createMiddleMarker(m,b),this._updatePrevNext(m,b))},_createMarker:function(n,r){var s=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});return s._origLatLng=n,s._index=r,s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(s),s},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),r=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),r},_removeMarker:function(n){var r=n._index;this._markerGroup.removeLayer(n),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var r=n.target,s=this._poly,h=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),s.options.poly){var f=s._map._editTooltip;if(!s.options.poly.allowIntersection&&s.intersects()){L.extend(r._origLatLng,h),r.setLatLng(h);var m=s.options.color;s.setStyle({color:this.options.drawError.color}),f&&f.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){s.setStyle({color:m}),f&&f.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var b=this._poly.getLatLngs();this._poly._convertLatLngs(b,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(n){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,s=n.target;this._defaultShape().length<r||(this._removeMarker(s),this._updatePrevNext(s._prev,s._next),s._middleLeft&&this._markerGroup.removeLayer(s._middleLeft),s._middleRight&&this._markerGroup.removeLayer(s._middleRight),s._prev&&s._next?this._createMiddleMarker(s._prev,s._next):s._prev?s._next||(s._prev._middleRight=null):s._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var r=n.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),s=this._map.layerPointToLatLng(r),h=n.target;L.extend(h._origLatLng,s),h._middleLeft&&h._middleLeft.setLatLng(this._getMiddleLatLng(h._prev,h)),h._middleRight&&h._middleRight.setLatLng(this._getMiddleLatLng(h,h._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(n,r){this._markerGroup.eachLayer(function(s){s._index>n&&(s._index+=r)})},_createMiddleMarker:function(n,r){var s,h,f,m=this._getMiddleLatLng(n,r),b=this._createMarker(m);b.setOpacity(.6),n._middleRight=r._middleLeft=b,h=function(){b.off("touchmove",h,this);var g=r._index;b._index=g,b.off("click",s,this).on("click",this._onMarkerClick,this),m.lat=b.getLatLng().lat,m.lng=b.getLatLng().lng,this._spliceLatLngs(g,0,m),this._markers.splice(g,0,b),b.setOpacity(1),this._updateIndexes(g,1),r._index++,this._updatePrevNext(n,b),this._updatePrevNext(b,r),this._poly.fire("editstart")},f=function(){b.off("dragstart",h,this),b.off("dragend",f,this),b.off("touchmove",h,this),this._createMiddleMarker(n,b),this._createMiddleMarker(b,r)},s=function(){h.call(this),f.call(this),this._fireEdit()},b.on("click",s,this).on("dragstart",h,this).on("dragend",f,this).on("touchmove",h,this),this._markerGroup.addLayer(b)},_updatePrevNext:function(n,r){n&&(n._next=r),r&&(r._prev=n)},_getMiddleLatLng:function(n,r){var s=this._poly._map,h=s.project(n.getLatLng()),f=s.project(r.getLatLng());return s.unproject(h._add(f)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=n,L.Util.setOptions(this,r)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var n=this._shape;if(n.setStyle(n.options.original),n._map){this._unbindMarker(this._moveMarker);for(var r=0,s=this._resizeMarkers.length;r<s;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,r){var s=new L.Marker.Touch(n,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(s),this._markerGroup.addLayer(s),s},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){n.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(n){var r=n.target,s=r.getLatLng();r===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){n.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var r=this._getCorners(),s=n.target,h=s._cornerIndex;s.setOpacity(0),this._oppositeCorner=r[(h+2)%4],this._toggleCornerMarkers(0,h)}this._shape.fire("editstart")},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),s=this._map.layerPointToLatLng(r);return n.target===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),!1},_onTouchEnd:function(n){n.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),r=n.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var n=this._getCorners();this._resizeMarkers=[];for(var r=0,s=n.length;r<s;r++)this._resizeMarkers.push(this._createMarker(n[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var r=this._getCorners(),s=n.target,h=s._cornerIndex;this._oppositeCorner=r[(h+2)%4],this._toggleCornerMarkers(0,h)},_onMarkerDragEnd:function(n){var r,s,h=n.target;h===this._moveMarker&&(r=this._shape.getBounds(),s=r.getCenter(),h.setLatLng(s)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var r,s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),h=this._shape.getBounds(),f=h.getCenter(),m=[],b=0,g=s.length;b<g;b++)r=[s[b].lat-f.lat,s[b].lng-f.lng],m.push([n.lat+r[0],n.lng+r[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var r;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds();return[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest()]},_toggleCornerMarkers:function(n){for(var r=0,s=this._resizeMarkers.length;r<s;r++)this._resizeMarkers[r].setOpacity(n)},_repositionCornerMarkers:function(){for(var n=this._getCorners(),r=0,s=this._resizeMarkers.length;r<s;r++)this._resizeMarkers[r].setLatLng(n[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(n),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),r=this._getResizeMarkerPoint(n);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var r=this._shape._radius*Math.cos(Math.PI/4),s=this._map.project(n);return this._map.unproject([s.x+r,s.y-r])},_resize:function(n){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(n):radius=this._map.distance(r,n),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(n,r){var s={};if(n.touches!==void 0){if(!n.touches.length)return;s=n.touches[0]}else if(n.pointerType!=="touch"||(s=n,!this._filterClick(n)))return;var h=this._map.mouseEventToContainerPoint(s),f=this._map.mouseEventToLayerPoint(s),m=this._map.layerPointToLatLng(f);this._map.fire(r,{latlng:m,layerPoint:f,containerPoint:h,pageX:s.pageX,pageY:s.pageY,originalEvent:n})},_filterClick:function(n){var r=n.timeStamp||n.originalEvent.timeStamp,s=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return s&&s>100&&s<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(n){this._map._loaded&&this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){this._map._loaded&&this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(n,r)}},_onTouchLeave:function(n){this._map._loaded&&this._touchEvent(n,"touchleave")},_onTouchMove:function(n){this._map._loaded&&this._touchEvent(n,"touchmove")},_detectIE:function(){var n=c.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var h=n.indexOf("Edge/");return h>0&&parseInt(n.substring(h+5,n.indexOf(".",h)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var n=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(n,"leaflet-clickable"),L.DomEvent.on(n,"click",this._onMouseClick,this),L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(var s=0;s<r.length;s++)L.DomEvent.on(n,r[s],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var n=c.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var s=n.indexOf("rv:");return parseInt(n.substring(s+3,n.indexOf(".",s)),10)}var h=n.indexOf("Edge/");return h>0&&parseInt(n.substring(h+5,n.indexOf(".",h)),10)}}),L.LatLngUtil={cloneLatLngs:function(n){for(var r=[],s=0,h=n.length;s<h;s++)Array.isArray(n[s])?r.push(L.LatLngUtil.cloneLatLngs(n[s])):r.push(this.cloneLatLng(n[s]));return r},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var s,h,f=r.length,m=0,b=Math.PI/180;if(f>2){for(var g=0;g<f;g++)s=r[g],h=r[(g+1)%f],m+=(h.lng-s.lng)*b*(2+Math.sin(s.lat*b)+Math.sin(h.lat*b));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(r,s){var h=parseFloat(r).toFixed(s),f=L.drawLocal.format&&L.drawLocal.format.numeric,m=f&&f.delimiters,b=m&&m.thousands,g=m&&m.decimal;if(b||g){var T=h.split(".");h=b?T[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b):T[0],g=g||".",T.length>1&&(h=h+g+T[1])}return h},readableArea:function(r,s,b){var f,m,b=L.Util.extend({},n,b);return s?(m=["ha","m"],type=typeof s,type==="string"?m=[s]:type!=="boolean"&&(m=s),f=r>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,b.km)+" km²":r>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,b.ha)+" ha":L.GeometryUtil.formattedNumber(r,b.m)+" m²"):(r/=.836127,f=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,b.mi)+" mi²":r>=4840?L.GeometryUtil.formattedNumber(r/4840,b.ac)+" acres":L.GeometryUtil.formattedNumber(r,b.yd)+" yd²"),f},readableDistance:function(r,s,h,f,g){var b,g=L.Util.extend({},n,g);switch(s?typeof s=="string"?s:"metric":h?"feet":f?"nauticalMile":"yards"){case"metric":b=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,g.km)+" km":L.GeometryUtil.formattedNumber(r,g.m)+" m";break;case"feet":r*=3.28083,b=L.GeometryUtil.formattedNumber(r,g.ft)+" ft";break;case"nauticalMile":r*=.53996,b=L.GeometryUtil.formattedNumber(r/1e3,g.nm)+" nm";break;case"yards":default:r*=1.09361,b=r>1760?L.GeometryUtil.formattedNumber(r/1760,g.mi)+" miles":L.GeometryUtil.formattedNumber(r,g.yd)+" yd"}return b},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,r,s,h){return this._checkCounterclockwise(n,s,h)!==this._checkCounterclockwise(r,s,h)&&this._checkCounterclockwise(n,r,s)!==this._checkCounterclockwise(n,r,h)},_checkCounterclockwise:function(n,r,s){return(s.y-n.y)*(r.x-n.x)>(r.y-n.y)*(s.x-n.x)}}),L.Polyline.include({intersects:function(){var n,r,s,h=this._getProjectedPoints(),f=h?h.length:0;if(this._tooFewPointsForIntersection())return!1;for(n=f-1;n>=3;n--)if(r=h[n-1],s=h[n],this._lineSegmentsIntersectsRange(r,s,n-2))return!0;return!1},newLatLngIntersects:function(n,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(n),r)},newPointIntersects:function(n,r){var s=this._getProjectedPoints(),h=s?s.length:0,f=s?s[h-1]:null,m=h-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(f,n,m,r?1:0)},_tooFewPointsForIntersection:function(n){var r=this._getProjectedPoints(),s=r?r.length:0;return s+=n||0,!r||s<=3},_lineSegmentsIntersectsRange:function(n,r,s,h){var f,m,b=this._getProjectedPoints();h=h||0;for(var g=s;g>h;g--)if(f=b[g-1],m=b[g],L.LineUtil.segmentsIntersect(n,r,f,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var n=[],r=this._defaultShape(),s=0;s<r.length;s++)n.push(this._map.latLngToLayerPoint(r[s]));return n}}),L.Polygon.include({intersects:function(){var n,r,s,h,f=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(n=f.length,r=f[0],s=f[n-1],h=n-2,this._lineSegmentsIntersectsRange(s,r,h,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(n){var r,s=L.DomUtil.create("div","leaflet-draw"),h=!1;for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(r=this._toolbars[f].addToolbar(n))&&(h||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),h=!0),s.appendChild(r));return s},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(n)},_toolbarEnabled:function(n){var r=n.target;for(var s in this._toolbars)this._toolbars[s]!==r&&this._toolbars[s].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var r,s=L.DomUtil.create("div","leaflet-draw-section"),h=0,f=this._toolbarClass||"",m=this.getModeHandlers(n);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,r=0;r<m.length;r++)m[r].enabled&&this._initModeHandler(m[r].handler,this._toolbarContainer,h++,f,m[r].title);if(h)return this._lastButtonIndex=--h,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),s.appendChild(this._toolbarContainer),s.appendChild(this._actionsContainer),s},removeToolbar:function(){for(var n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,s=this._actionButtons.length;r<s;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(n,r,s,h,f){var m=n.type;this._modes[m]={},this._modes[m].handler=n,this._modes[m].button=this._createButton({type:m,title:f,className:h+"-"+m,container:r,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=s,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!c.MSStream},_createButton:function(n){var r=L.DomUtil.create("a",n.className||"",n.container),s=L.DomUtil.create("span","sr-only",n.container);r.href="#",r.appendChild(s),n.title&&(r.title=n.title,s.innerHTML=n.title),n.text&&(r.innerHTML=n.text,s.innerHTML=n.text);var h=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,h,n.callback,n.context),r},_disposeButton:function(n,r){var s=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,s,r)},_handlerActivated:function(n){this.disable(),this._activeMode=this._modes[n.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(n){var r,s,h,f,m=this._actionsContainer,b=this.getActions(n),g=b.length;for(s=0,h=this._actionButtons.length;s<h;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var T=0;T<g;T++)"enabled"in b[T]&&!b[T].enabled||(r=L.DomUtil.create("li","",m),f=this._createButton({title:b[T].title,text:b[T].text,container:r,callback:b[T].callback,context:b[T].context}),this._actionButtons.push({button:f,callback:b[T].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,r=this._lastButtonIndex,s=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=s+"px",n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),n===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n,this._popupPane=n._panes.popupPane,this._visible=!1,this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"</span><br />":"")+"<span>"+n.text+"</span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var r=this._map.latLngToLayerPoint(n),s=this._container;return this._container&&(this._visible&&(s.style.visibility="inherit"),L.DomUtil.setPosition(s,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var r in this.options)this.options.hasOwnProperty(r)&&n[r]&&(n[r]=L.extend({},this.options[r],n[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var r in this._modes)this._modes.hasOwnProperty(r)&&n.hasOwnProperty(r)&&this._modes[r].handler.setOptions(n[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(n.edit.selectedPathOptions===void 0&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions)),n.remove&&(n.remove=L.extend({},this.options.remove,n.remove)),n.poly&&(n.poly=L.extend({},this.options.poly,n.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,n),this._selectedFeatureCount=0},getModeHandlers:function(n){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(n){var r=L.Toolbar.prototype.addToolbar.call(this,n);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var n,r=this.options.featureGroup,s=r.getLayers().length!==0;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,s?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,s?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),n._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(n.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var r=L.Util.stamp(n);this._uneditedLayerProps[r]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var r=L.Util.stamp(n);n.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[r].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[r].latlng),n.setRadius(this._uneditedLayerProps[r].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[r].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var r,s,h=n.layer||n.target||n;this._backupLayer(h),this.options.poly&&(s=L.Util.extend({},this.options.poly),h.options.poly=s),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=h.options.color,r.fillColor=h.options.fillColor),h.options.original=L.extend({},h.options),h.options.editing=r),h instanceof L.Marker?(h.editing&&h.editing.enable(),h.dragging.enable(),h.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):h.editing.enable()},_disableLayerEdit:function(n){var r=n.layer||n.target||n;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(n){var r=n.originalEvent.changedTouches[0],s=this._map.mouseEventToLayerPoint(r),h=this._map.layerPointToLatLng(s);n.target.setLatLng(h)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n),n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this),this.save()},_enableLayerDelete:function(n){(n.layer||n.target||n).on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var r=n.layer||n.target||n;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(n){var r=n.layer||n.target||n;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var yi=Fl(()=>Jl),Ql=Pn('<div style="height: 600px; width: 100%;" class="svelte-1ymq5l"></div>');function th(c,x){ao(x,!1);let a=nr(x,"selectedLayer",8),C=er(),n=null,r=null;const s=aa(),h=m=>{n&&(r&&n.removeLayer(r),m?(r=yi().tileLayer(m.value,{attribution:m.attribution}),r.addTo(n)):(r=yi().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}),r.addTo(n)))};Hl(()=>{yi().GeometryUtil&&yi(yi().GeometryUtil.readableArea=function(g,T){const y=T?["m²","ha","km²"]:["ft²","ac","mi²"],M=T?[1e4,1e6]:[43560,27878400];let p=0;for(;g>M[p]&&p<M.length-1;)g/=M[p],p++;return`${g.toFixed(2)} ${y[p]}`}),n=yi().map(Gt(C)).setView([52.474,13.43],13),h(a());const m=new(yi()).FeatureGroup;n.addLayer(m);const b=new(yi()).Control.Draw({draw:{polyline:!1,polygon:!0,rectangle:!0,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:m}});n.addControl(b),n.on(yi().Draw.Event.CREATED,g=>{const{layer:T}=g;m.addLayer(T),s("shapeDrawn",{layer:T})}),n.on("zoomend",()=>{s("mapZoomed",{zoom:n.getZoom()})})}),qs(()=>$o(a()),()=>{a()&&h(a())}),Vs(),Jo();var f=Ql();Zl(f,m=>ge(C,m),()=>Gt(C)),Ln(c,f),lo()}function Vr(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mo={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ts;function eh(){return Ts||(Ts=1,function(c,x){(function(a){c.exports=a()})(function(){return function a(C,n,r){function s(m,b){if(!n[m]){if(!C[m]){var g=typeof Vr=="function"&&Vr;if(!b&&g)return g(m,!0);if(h)return h(m,!0);var T=new Error("Cannot find module '"+m+"'");throw T.code="MODULE_NOT_FOUND",T}var y=n[m]={exports:{}};C[m][0].call(y.exports,function(M){var p=C[m][1][M];return s(p||M)},y,y.exports,a,C,n,r)}return n[m].exports}for(var h=typeof Vr=="function"&&Vr,f=0;f<r.length;f++)s(r[f]);return s}({1:[function(a,C,n){var r=a("./utils"),s=a("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var m,b,g,T,y,M,p,v=[],E=0,P=f.length,I=P,Z=r.getTypeOf(f)!=="string";E<f.length;)I=P-E,g=Z?(m=f[E++],b=E<P?f[E++]:0,E<P?f[E++]:0):(m=f.charCodeAt(E++),b=E<P?f.charCodeAt(E++):0,E<P?f.charCodeAt(E++):0),T=m>>2,y=(3&m)<<4|b>>4,M=1<I?(15&b)<<2|g>>6:64,p=2<I?63&g:64,v.push(h.charAt(T)+h.charAt(y)+h.charAt(M)+h.charAt(p));return v.join("")},n.decode=function(f){var m,b,g,T,y,M,p=0,v=0,E="data:";if(f.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var P,I=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===h.charAt(64)&&I--,f.charAt(f.length-2)===h.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=s.uint8array?new Uint8Array(0|I):new Array(0|I);p<f.length;)m=h.indexOf(f.charAt(p++))<<2|(T=h.indexOf(f.charAt(p++)))>>4,b=(15&T)<<4|(y=h.indexOf(f.charAt(p++)))>>2,g=(3&y)<<6|(M=h.indexOf(f.charAt(p++))),P[v++]=m,y!==64&&(P[v++]=b),M!==64&&(P[v++]=g);return P}},{"./support":30,"./utils":32}],2:[function(a,C,n){var r=a("./external"),s=a("./stream/DataWorker"),h=a("./stream/Crc32Probe"),f=a("./stream/DataLengthProbe");function m(b,g,T,y,M){this.compressedSize=b,this.uncompressedSize=g,this.crc32=T,this.compression=y,this.compressedContent=M}m.prototype={getContentWorker:function(){var b=new s(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),g=this;return b.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new s(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(b,g,T){return b.pipe(new h).pipe(new f("uncompressedSize")).pipe(g.compressWorker(T)).pipe(new f("compressedSize")).withStreamInfo("compression",g)},C.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,C,n){var r=a("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,C,n){var r=a("./utils"),s=function(){for(var h,f=[],m=0;m<256;m++){h=m;for(var b=0;b<8;b++)h=1&h?3988292384^h>>>1:h>>>1;f[m]=h}return f}();C.exports=function(h,f){return h!==void 0&&h.length?r.getTypeOf(h)!=="string"?function(m,b,g,T){var y=s,M=T+g;m^=-1;for(var p=T;p<M;p++)m=m>>>8^y[255&(m^b[p])];return-1^m}(0|f,h,h.length,0):function(m,b,g,T){var y=s,M=T+g;m^=-1;for(var p=T;p<M;p++)m=m>>>8^y[255&(m^b.charCodeAt(p))];return-1^m}(0|f,h,h.length,0):0}},{"./utils":32}],5:[function(a,C,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(a,C,n){var r=null;r=typeof Promise<"u"?Promise:a("lie"),C.exports={Promise:r}},{lie:37}],7:[function(a,C,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=a("pako"),h=a("./utils"),f=a("./stream/GenericWorker"),m=r?"uint8array":"array";function b(g,T){f.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=T,this.meta={}}n.magic="\b\0",h.inherits(b,f),b.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(m,g.data),!1)},b.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(T){g.push({data:T,meta:g.meta})}},n.compressWorker=function(g){return new b("Deflate",g)},n.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,C,n){function r(y,M){var p,v="";for(p=0;p<M;p++)v+=String.fromCharCode(255&y),y>>>=8;return v}function s(y,M,p,v,E,P){var I,Z,S=y.file,V=y.compression,F=P!==m.utf8encode,Y=h.transformTo("string",P(S.name)),R=h.transformTo("string",m.utf8encode(S.name)),Q=S.comment,X=h.transformTo("string",P(Q)),O=h.transformTo("string",m.utf8encode(Q)),U=R.length!==S.name.length,d=O.length!==Q.length,H="",st="",tt="",ot=S.dir,lt=S.date,it={crc32:0,compressedSize:0,uncompressedSize:0};M&&!p||(it.crc32=y.crc32,it.compressedSize=y.compressedSize,it.uncompressedSize=y.uncompressedSize);var W=0;M&&(W|=8),F||!U&&!d||(W|=2048);var G=0,mt=0;ot&&(G|=16),E==="UNIX"?(mt=798,G|=function(rt,wt){var Ut=rt;return rt||(Ut=wt?16893:33204),(65535&Ut)<<16}(S.unixPermissions,ot)):(mt=20,G|=function(rt){return 63&(rt||0)}(S.dosPermissions)),I=lt.getUTCHours(),I<<=6,I|=lt.getUTCMinutes(),I<<=5,I|=lt.getUTCSeconds()/2,Z=lt.getUTCFullYear()-1980,Z<<=4,Z|=lt.getUTCMonth()+1,Z<<=5,Z|=lt.getUTCDate(),U&&(st=r(1,1)+r(b(Y),4)+R,H+="up"+r(st.length,2)+st),d&&(tt=r(1,1)+r(b(X),4)+O,H+="uc"+r(tt.length,2)+tt);var ft="";return ft+=`
\0`,ft+=r(W,2),ft+=V.magic,ft+=r(I,2),ft+=r(Z,2),ft+=r(it.crc32,4),ft+=r(it.compressedSize,4),ft+=r(it.uncompressedSize,4),ft+=r(Y.length,2),ft+=r(H.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ft+Y+H,dirRecord:g.CENTRAL_FILE_HEADER+r(mt,2)+ft+r(X.length,2)+"\0\0\0\0"+r(G,4)+r(v,4)+Y+H+X}}var h=a("../utils"),f=a("../stream/GenericWorker"),m=a("../utf8"),b=a("../crc32"),g=a("../signature");function T(y,M,p,v){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=M,this.zipPlatform=p,this.encodeFileName=v,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(T,f),T.prototype.push=function(y){var M=y.meta.percent||0,p=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,f.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:p?(M+100*(p-v-1))/p:100}}))},T.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var M=this.streamFiles&&!y.file.dir;if(M){var p=s(y,M,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(y){this.accumulate=!1;var M=this.streamFiles&&!y.file.dir,p=s(y,M,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),M)this.push({data:function(v){return g.DATA_DESCRIPTOR+r(v.crc32,4)+r(v.compressedSize,4)+r(v.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var y=this.bytesWritten,M=0;M<this.dirRecords.length;M++)this.push({data:this.dirRecords[M],meta:{percent:100}});var p=this.bytesWritten-y,v=function(E,P,I,Z,S){var V=h.transformTo("string",S(Z));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(E,2)+r(E,2)+r(P,4)+r(I,4)+r(V.length,2)+V}(this.dirRecords.length,p,y,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(y){this._sources.push(y);var M=this;return y.on("data",function(p){M.processChunk(p)}),y.on("end",function(){M.closedSource(M.previous.streamInfo),M._sources.length?M.prepareNextSource():M.end()}),y.on("error",function(p){M.error(p)}),this},T.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(y){var M=this._sources;if(!f.prototype.error.call(this,y))return!1;for(var p=0;p<M.length;p++)try{M[p].error(y)}catch{}return!0},T.prototype.lock=function(){f.prototype.lock.call(this);for(var y=this._sources,M=0;M<y.length;M++)y[M].lock()},C.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,C,n){var r=a("../compressions"),s=a("./ZipFileWorker");n.generateWorker=function(h,f,m){var b=new s(f.streamFiles,m,f.platform,f.encodeFileName),g=0;try{h.forEach(function(T,y){g++;var M=function(P,I){var Z=P||I,S=r[Z];if(!S)throw new Error(Z+" is not a valid compression method !");return S}(y.options.compression,f.compression),p=y.options.compressionOptions||f.compressionOptions||{},v=y.dir,E=y.date;y._compressWorker(M,p).withStreamInfo("file",{name:T,dir:v,date:E,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(b)}),b.entriesCount=g}catch(T){b.error(T)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,C,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new r;for(var h in this)typeof this[h]!="function"&&(s[h]=this[h]);return s}}(r.prototype=a("./object")).loadAsync=a("./load"),r.support=a("./support"),r.defaults=a("./defaults"),r.version="3.10.1",r.loadAsync=function(s,h){return new r().loadAsync(s,h)},r.external=a("./external"),C.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,C,n){var r=a("./utils"),s=a("./external"),h=a("./utf8"),f=a("./zipEntries"),m=a("./stream/Crc32Probe"),b=a("./nodejsUtils");function g(T){return new s.Promise(function(y,M){var p=T.decompressed.getContentWorker().pipe(new m);p.on("error",function(v){M(v)}).on("end",function(){p.streamInfo.crc32!==T.decompressed.crc32?M(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}C.exports=function(T,y){var M=this;return y=r.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),b.isNode&&b.isStream(T)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",T,!0,y.optimizedBinaryString,y.base64).then(function(p){var v=new f(y);return v.load(p),v}).then(function(p){var v=[s.Promise.resolve(p)],E=p.files;if(y.checkCRC32)for(var P=0;P<E.length;P++)v.push(g(E[P]));return s.Promise.all(v)}).then(function(p){for(var v=p.shift(),E=v.files,P=0;P<E.length;P++){var I=E[P],Z=I.fileNameStr,S=r.resolve(I.fileNameStr);M.file(S,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:y.createFolders}),I.dir||(M.file(S).unsafeOriginalName=Z)}return v.zipComment.length&&(M.comment=v.zipComment),M})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,C,n){var r=a("../utils"),s=a("../stream/GenericWorker");function h(f,m){s.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(m)}r.inherits(h,s),h.prototype._bindStream=function(f){var m=this;(this._stream=f).pause(),f.on("data",function(b){m.push({data:b,meta:{percent:0}})}).on("error",function(b){m.isPaused?this.generatedError=b:m.error(b)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},h.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},C.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,C,n){var r=a("readable-stream").Readable;function s(h,f,m){r.call(this,f),this._helper=h;var b=this;h.on("data",function(g,T){b.push(g)||b._helper.pause(),m&&m(T)}).on("error",function(g){b.emit("error",g)}).on("end",function(){b.push(null)})}a("../utils").inherits(s,r),s.prototype._read=function(){this._helper.resume()},C.exports=s},{"../utils":32,"readable-stream":16}],14:[function(a,C,n){C.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,s);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,s)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var s=new Buffer(r);return s.fill(0),s},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(a,C,n){function r(S,V,F){var Y,R=h.getTypeOf(V),Q=h.extend(F||{},b);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(S=E(S)),Q.createFolders&&(Y=v(S))&&P.call(this,Y,!0);var X=R==="string"&&Q.binary===!1&&Q.base64===!1;F&&F.binary!==void 0||(Q.binary=!X),(V instanceof g&&V.uncompressedSize===0||Q.dir||!V||V.length===0)&&(Q.base64=!1,Q.binary=!0,V="",Q.compression="STORE",R="string");var O=null;O=V instanceof g||V instanceof f?V:M.isNode&&M.isStream(V)?new p(S,V):h.prepareContent(S,V,Q.binary,Q.optimizedBinaryString,Q.base64);var U=new T(S,O,Q);this.files[S]=U}var s=a("./utf8"),h=a("./utils"),f=a("./stream/GenericWorker"),m=a("./stream/StreamHelper"),b=a("./defaults"),g=a("./compressedObject"),T=a("./zipObject"),y=a("./generate"),M=a("./nodejsUtils"),p=a("./nodejs/NodejsStreamInputAdapter"),v=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var V=S.lastIndexOf("/");return 0<V?S.substring(0,V):""},E=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},P=function(S,V){return V=V!==void 0?V:b.createFolders,S=E(S),this.files[S]||r.call(this,S,null,{dir:!0,createFolders:V}),this.files[S]};function I(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var Z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var V,F,Y;for(V in this.files)Y=this.files[V],(F=V.slice(this.root.length,V.length))&&V.slice(0,this.root.length)===this.root&&S(F,Y)},filter:function(S){var V=[];return this.forEach(function(F,Y){S(F,Y)&&V.push(Y)}),V},file:function(S,V,F){if(arguments.length!==1)return S=this.root+S,r.call(this,S,V,F),this;if(I(S)){var Y=S;return this.filter(function(Q,X){return!X.dir&&Y.test(Q)})}var R=this.files[this.root+S];return R&&!R.dir?R:null},folder:function(S){if(!S)return this;if(I(S))return this.filter(function(R,Q){return Q.dir&&S.test(R)});var V=this.root+S,F=P.call(this,V),Y=this.clone();return Y.root=F.name,Y},remove:function(S){S=this.root+S;var V=this.files[S];if(V||(S.slice(-1)!=="/"&&(S+="/"),V=this.files[S]),V&&!V.dir)delete this.files[S];else for(var F=this.filter(function(R,Q){return Q.name.slice(0,S.length)===S}),Y=0;Y<F.length;Y++)delete this.files[F[Y].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var V,F={};try{if((F=h.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");h.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var Y=F.comment||this.comment||"";V=y.generateWorker(this,F,Y)}catch(R){(V=new f("error")).error(R)}return new m(V,F.type||"string",F.mimeType)},generateAsync:function(S,V){return this.generateInternalStream(S).accumulate(V)},generateNodeStream:function(S,V){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(V)}};C.exports=Z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,C,n){C.exports=a("stream")},{stream:void 0}],17:[function(a,C,n){var r=a("./DataReader");function s(h){r.call(this,h);for(var f=0;f<this.data.length;f++)h[f]=255&h[f]}a("../utils").inherits(s,r),s.prototype.byteAt=function(h){return this.data[this.zero+h]},s.prototype.lastIndexOfSignature=function(h){for(var f=h.charCodeAt(0),m=h.charCodeAt(1),b=h.charCodeAt(2),g=h.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===f&&this.data[T+1]===m&&this.data[T+2]===b&&this.data[T+3]===g)return T-this.zero;return-1},s.prototype.readAndCheckSignature=function(h){var f=h.charCodeAt(0),m=h.charCodeAt(1),b=h.charCodeAt(2),g=h.charCodeAt(3),T=this.readData(4);return f===T[0]&&m===T[1]&&b===T[2]&&g===T[3]},s.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./DataReader":18}],18:[function(a,C,n){var r=a("../utils");function s(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var f,m=0;for(this.checkOffset(h),f=this.index+h-1;f>=this.index;f--)m=(m<<8)+this.byteAt(f);return this.index+=h,m},readString:function(h){return r.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},C.exports=s},{"../utils":32}],19:[function(a,C,n){var r=a("./Uint8ArrayReader");function s(h){r.call(this,h)}a("../utils").inherits(s,r),s.prototype.readData=function(h){this.checkOffset(h);var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,C,n){var r=a("./DataReader");function s(h){r.call(this,h)}a("../utils").inherits(s,r),s.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},s.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},s.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},s.prototype.readData=function(h){this.checkOffset(h);var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./DataReader":18}],21:[function(a,C,n){var r=a("./ArrayReader");function s(h){r.call(this,h)}a("../utils").inherits(s,r),s.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},C.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(a,C,n){var r=a("../utils"),s=a("../support"),h=a("./ArrayReader"),f=a("./StringReader"),m=a("./NodeBufferReader"),b=a("./Uint8ArrayReader");C.exports=function(g){var T=r.getTypeOf(g);return r.checkSupport(T),T!=="string"||s.uint8array?T==="nodebuffer"?new m(g):s.uint8array?new b(r.transformTo("uint8array",g)):new h(r.transformTo("array",g)):new f(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,C,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,C,n){var r=a("./GenericWorker"),s=a("../utils");function h(f){r.call(this,"ConvertWorker to "+f),this.destType=f}s.inherits(h,r),h.prototype.processChunk=function(f){this.push({data:s.transformTo(this.destType,f.data),meta:f.meta})},C.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(a,C,n){var r=a("./GenericWorker"),s=a("../crc32");function h(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(h,r),h.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},C.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,C,n){var r=a("../utils"),s=a("./GenericWorker");function h(f){s.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}r.inherits(h,s),h.prototype.processChunk=function(f){if(f){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+f.data.length}s.prototype.processChunk.call(this,f)},C.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(a,C,n){var r=a("../utils"),s=a("./GenericWorker");function h(f){s.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(b){m.dataIsReady=!0,m.data=b,m.max=b&&b.length||0,m.type=r.getTypeOf(b),m.isPaused||m._tickAndRepeat()},function(b){m.error(b)})}r.inherits(h,s),h.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,m);break;case"uint8array":f=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":f=this.data.slice(this.index,m)}return this.index=m,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},C.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(a,C,n){function r(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,h){return this._listeners[s].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,h){if(this._listeners[s])for(var f=0;f<this._listeners[s].length;f++)this._listeners[s][f].call(this,h)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var h=this;return s.on("data",function(f){h.processChunk(f)}),s.on("end",function(){h.end()}),s.on("error",function(f){h.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,h){return this.extraStreamInfo[s]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},C.exports=r},{}],29:[function(a,C,n){var r=a("../utils"),s=a("./ConvertWorker"),h=a("./GenericWorker"),f=a("../base64"),m=a("../support"),b=a("../external"),g=null;if(m.nodestream)try{g=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(M,p){return new b.Promise(function(v,E){var P=[],I=M._internalType,Z=M._outputType,S=M._mimeType;M.on("data",function(V,F){P.push(V),p&&p(F)}).on("error",function(V){P=[],E(V)}).on("end",function(){try{var V=function(F,Y,R){switch(F){case"blob":return r.newBlob(r.transformTo("arraybuffer",Y),R);case"base64":return f.encode(Y);default:return r.transformTo(F,Y)}}(Z,function(F,Y){var R,Q=0,X=null,O=0;for(R=0;R<Y.length;R++)O+=Y[R].length;switch(F){case"string":return Y.join("");case"array":return Array.prototype.concat.apply([],Y);case"uint8array":for(X=new Uint8Array(O),R=0;R<Y.length;R++)X.set(Y[R],Q),Q+=Y[R].length;return X;case"nodebuffer":return Buffer.concat(Y);default:throw new Error("concat : unsupported type '"+F+"'")}}(I,P),S);v(V)}catch(F){E(F)}P=[]}).resume()})}function y(M,p,v){var E=p;switch(p){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=p,this._mimeType=v,r.checkSupport(E),this._worker=M.pipe(new s(E)),M.lock()}catch(P){this._worker=new h("error"),this._worker.error(P)}}y.prototype={accumulate:function(M){return T(this,M)},on:function(M,p){var v=this;return M==="data"?this._worker.on(M,function(E){p.call(v,E.data,E.meta)}):this._worker.on(M,function(){r.delay(p,arguments,v)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(M){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},M)}},C.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,C,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(r),n.blob=s.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!a("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(a,C,n){for(var r=a("./utils"),s=a("./support"),h=a("./nodejsUtils"),f=a("./stream/GenericWorker"),m=new Array(256),b=0;b<256;b++)m[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;m[254]=m[254]=1;function g(){f.call(this,"utf-8 decode"),this.leftOver=null}function T(){f.call(this,"utf-8 encode")}n.utf8encode=function(y){return s.nodebuffer?h.newBufferFrom(y,"utf-8"):function(M){var p,v,E,P,I,Z=M.length,S=0;for(P=0;P<Z;P++)(64512&(v=M.charCodeAt(P)))==55296&&P+1<Z&&(64512&(E=M.charCodeAt(P+1)))==56320&&(v=65536+(v-55296<<10)+(E-56320),P++),S+=v<128?1:v<2048?2:v<65536?3:4;for(p=s.uint8array?new Uint8Array(S):new Array(S),P=I=0;I<S;P++)(64512&(v=M.charCodeAt(P)))==55296&&P+1<Z&&(64512&(E=M.charCodeAt(P+1)))==56320&&(v=65536+(v-55296<<10)+(E-56320),P++),v<128?p[I++]=v:(v<2048?p[I++]=192|v>>>6:(v<65536?p[I++]=224|v>>>12:(p[I++]=240|v>>>18,p[I++]=128|v>>>12&63),p[I++]=128|v>>>6&63),p[I++]=128|63&v);return p}(y)},n.utf8decode=function(y){return s.nodebuffer?r.transformTo("nodebuffer",y).toString("utf-8"):function(M){var p,v,E,P,I=M.length,Z=new Array(2*I);for(p=v=0;p<I;)if((E=M[p++])<128)Z[v++]=E;else if(4<(P=m[E]))Z[v++]=65533,p+=P-1;else{for(E&=P===2?31:P===3?15:7;1<P&&p<I;)E=E<<6|63&M[p++],P--;1<P?Z[v++]=65533:E<65536?Z[v++]=E:(E-=65536,Z[v++]=55296|E>>10&1023,Z[v++]=56320|1023&E)}return Z.length!==v&&(Z.subarray?Z=Z.subarray(0,v):Z.length=v),r.applyFromCharCode(Z)}(y=r.transformTo(s.uint8array?"uint8array":"array",y))},r.inherits(g,f),g.prototype.processChunk=function(y){var M=r.transformTo(s.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var p=M;(M=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),M.set(p,this.leftOver.length)}else M=this.leftOver.concat(M);this.leftOver=null}var v=function(P,I){var Z;for((I=I||P.length)>P.length&&(I=P.length),Z=I-1;0<=Z&&(192&P[Z])==128;)Z--;return Z<0||Z===0?I:Z+m[P[Z]]>I?Z:I}(M),E=M;v!==M.length&&(s.uint8array?(E=M.subarray(0,v),this.leftOver=M.subarray(v,M.length)):(E=M.slice(0,v),this.leftOver=M.slice(v,M.length))),this.push({data:n.utf8decode(E),meta:y.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=g,r.inherits(T,f),T.prototype.processChunk=function(y){this.push({data:n.utf8encode(y.data),meta:y.meta})},n.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,C,n){var r=a("./support"),s=a("./base64"),h=a("./nodejsUtils"),f=a("./external");function m(p){return p}function b(p,v){for(var E=0;E<p.length;++E)v[E]=255&p.charCodeAt(E);return v}a("setimmediate"),n.newBlob=function(p,v){n.checkSupport("blob");try{return new Blob([p],{type:v})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(p),E.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(p,v,E){var P=[],I=0,Z=p.length;if(Z<=E)return String.fromCharCode.apply(null,p);for(;I<Z;)v==="array"||v==="nodebuffer"?P.push(String.fromCharCode.apply(null,p.slice(I,Math.min(I+E,Z)))):P.push(String.fromCharCode.apply(null,p.subarray(I,Math.min(I+E,Z)))),I+=E;return P.join("")},stringifyByChar:function(p){for(var v="",E=0;E<p.length;E++)v+=String.fromCharCode(p[E]);return v},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function T(p){var v=65536,E=n.getTypeOf(p),P=!0;if(E==="uint8array"?P=g.applyCanBeUsed.uint8array:E==="nodebuffer"&&(P=g.applyCanBeUsed.nodebuffer),P)for(;1<v;)try{return g.stringifyByChunk(p,E,v)}catch{v=Math.floor(v/2)}return g.stringifyByChar(p)}function y(p,v){for(var E=0;E<p.length;E++)v[E]=p[E];return v}n.applyFromCharCode=T;var M={};M.string={string:m,array:function(p){return b(p,new Array(p.length))},arraybuffer:function(p){return M.string.uint8array(p).buffer},uint8array:function(p){return b(p,new Uint8Array(p.length))},nodebuffer:function(p){return b(p,h.allocBuffer(p.length))}},M.array={string:T,array:m,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return h.newBufferFrom(p)}},M.arraybuffer={string:function(p){return T(new Uint8Array(p))},array:function(p){return y(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:m,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return h.newBufferFrom(new Uint8Array(p))}},M.uint8array={string:T,array:function(p){return y(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:m,nodebuffer:function(p){return h.newBufferFrom(p)}},M.nodebuffer={string:T,array:function(p){return y(p,new Array(p.length))},arraybuffer:function(p){return M.nodebuffer.uint8array(p).buffer},uint8array:function(p){return y(p,new Uint8Array(p.length))},nodebuffer:m},n.transformTo=function(p,v){if(v=v||"",!p)return v;n.checkSupport(p);var E=n.getTypeOf(v);return M[E][p](v)},n.resolve=function(p){for(var v=p.split("/"),E=[],P=0;P<v.length;P++){var I=v[P];I==="."||I===""&&P!==0&&P!==v.length-1||(I===".."?E.pop():E.push(I))}return E.join("/")},n.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&h.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(p){var v,E,P="";for(E=0;E<(p||"").length;E++)P+="\\x"+((v=p.charCodeAt(E))<16?"0":"")+v.toString(16).toUpperCase();return P},n.delay=function(p,v,E){setImmediate(function(){p.apply(E||null,v||[])})},n.inherits=function(p,v){function E(){}E.prototype=v.prototype,p.prototype=new E},n.extend=function(){var p,v,E={};for(p=0;p<arguments.length;p++)for(v in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],v)&&E[v]===void 0&&(E[v]=arguments[p][v]);return E},n.prepareContent=function(p,v,E,P,I){return f.Promise.resolve(v).then(function(Z){return r.blob&&(Z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Z))!==-1)&&typeof FileReader<"u"?new f.Promise(function(S,V){var F=new FileReader;F.onload=function(Y){S(Y.target.result)},F.onerror=function(Y){V(Y.target.error)},F.readAsArrayBuffer(Z)}):Z}).then(function(Z){var S=n.getTypeOf(Z);return S?(S==="arraybuffer"?Z=n.transformTo("uint8array",Z):S==="string"&&(I?Z=s.decode(Z):E&&P!==!0&&(Z=function(V){return b(V,r.uint8array?new Uint8Array(V.length):new Array(V.length))}(Z))),Z):f.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,C,n){var r=a("./reader/readerFor"),s=a("./utils"),h=a("./signature"),f=a("./zipEntry"),m=a("./support");function b(g){this.files=[],this.loadOptions=g}b.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(T)+", expected "+s.pretty(g)+")")}},isSignature:function(g,T){var y=this.reader.index;this.reader.setIndex(g);var M=this.reader.readString(4)===T;return this.reader.setIndex(y),M},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),T=m.uint8array?"uint8array":"array",y=s.transformTo(T,g);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,T,y,M=this.zip64EndOfCentralSize-44;0<M;)g=this.reader.readInt(2),T=this.reader.readInt(4),y=this.reader.readData(T),this.zip64ExtensibleData[g]={id:g,length:T,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,T;for(g=0;g<this.files.length;g++)T=this.files[g],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(g=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var T=g;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var M=T-y;if(0<M)this.isSignature(T,h.CENTRAL_FILE_HEADER)||(this.reader.zero=M);else if(M<0)throw new Error("Corrupted zip: missing "+Math.abs(M)+" bytes.")},prepareReader:function(g){this.reader=r(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},C.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,C,n){var r=a("./reader/readerFor"),s=a("./utils"),h=a("./compressedObject"),f=a("./crc32"),m=a("./utf8"),b=a("./compressions"),g=a("./support");function T(y,M){this.options=y,this.loadOptions=M}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var M,p;if(y.skip(22),this.fileNameLength=y.readInt(2),p=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((M=function(v){for(var E in b)if(Object.prototype.hasOwnProperty.call(b,E)&&b[E].magic===v)return b[E];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,M,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var M=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(M),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=r(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var M,p,v,E=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<E;)M=y.readInt(2),p=y.readInt(2),v=y.readData(p),this.extraFields[M]={id:M,length:p,value:v};y.setIndex(E)},handleUTF8:function(){var y=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var M=this.findExtraFieldUnicodePath();if(M!==null)this.fileNameStr=M;else{var p=s.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var E=s.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var M=r(y.value);return M.readInt(1)!==1||f(this.fileName)!==M.readInt(4)?null:m.utf8decode(M.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var M=r(y.value);return M.readInt(1)!==1||f(this.fileComment)!==M.readInt(4)?null:m.utf8decode(M.readData(y.length-5))}return null}},C.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,C,n){function r(M,p,v){this.name=M,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=p,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var s=a("./stream/StreamHelper"),h=a("./stream/DataWorker"),f=a("./utf8"),m=a("./compressedObject"),b=a("./stream/GenericWorker");r.prototype={internalStream:function(M){var p=null,v="string";try{if(!M)throw new Error("No output type specified.");var E=(v=M.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),p=this._decompressWorker();var P=!this._dataBinary;P&&!E&&(p=p.pipe(new f.Utf8EncodeWorker)),!P&&E&&(p=p.pipe(new f.Utf8DecodeWorker))}catch(I){(p=new b("error")).error(I)}return new s(p,v,"")},async:function(M,p){return this.internalStream(M).accumulate(p)},nodeStream:function(M,p){return this.internalStream(M||"nodebuffer").toNodejsStream(p)},_compressWorker:function(M,p){if(this._data instanceof m&&this._data.compression.magic===M.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new f.Utf8EncodeWorker)),m.createWorkerFrom(v,M,p)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof b?this._data:new h(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<g.length;y++)r.prototype[g[y]]=T;C.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,C,n){(function(r){var s,h,f=r.MutationObserver||r.WebKitMutationObserver;if(f){var m=0,b=new f(M),g=r.document.createTextNode("");b.observe(g,{characterData:!0}),s=function(){g.data=m=++m%2}}else if(r.setImmediate||r.MessageChannel===void 0)s="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){M(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(M,0)};else{var T=new r.MessageChannel;T.port1.onmessage=M,s=function(){T.port2.postMessage(0)}}var y=[];function M(){var p,v;h=!0;for(var E=y.length;E;){for(v=y,y=[],p=-1;++p<E;)v[p]();E=y.length}h=!1}C.exports=function(p){y.push(p)!==1||h||s()}}).call(this,typeof Ci<"u"?Ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,C,n){var r=a("immediate");function s(){}var h={},f=["REJECTED"],m=["FULFILLED"],b=["PENDING"];function g(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,E!==s&&p(this,E)}function T(E,P,I){this.promise=E,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function y(E,P,I){r(function(){var Z;try{Z=P(I)}catch(S){return h.reject(E,S)}Z===E?h.reject(E,new TypeError("Cannot resolve promise with itself")):h.resolve(E,Z)})}function M(E){var P=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof P=="function")return function(){P.apply(E,arguments)}}function p(E,P){var I=!1;function Z(F){I||(I=!0,h.reject(E,F))}function S(F){I||(I=!0,h.resolve(E,F))}var V=v(function(){P(S,Z)});V.status==="error"&&Z(V.value)}function v(E,P){var I={};try{I.value=E(P),I.status="success"}catch(Z){I.status="error",I.value=Z}return I}(C.exports=g).prototype.finally=function(E){if(typeof E!="function")return this;var P=this.constructor;return this.then(function(I){return P.resolve(E()).then(function(){return I})},function(I){return P.resolve(E()).then(function(){throw I})})},g.prototype.catch=function(E){return this.then(null,E)},g.prototype.then=function(E,P){if(typeof E!="function"&&this.state===m||typeof P!="function"&&this.state===f)return this;var I=new this.constructor(s);return this.state!==b?y(I,this.state===m?E:P,this.outcome):this.queue.push(new T(I,E,P)),I},T.prototype.callFulfilled=function(E){h.resolve(this.promise,E)},T.prototype.otherCallFulfilled=function(E){y(this.promise,this.onFulfilled,E)},T.prototype.callRejected=function(E){h.reject(this.promise,E)},T.prototype.otherCallRejected=function(E){y(this.promise,this.onRejected,E)},h.resolve=function(E,P){var I=v(M,P);if(I.status==="error")return h.reject(E,I.value);var Z=I.value;if(Z)p(E,Z);else{E.state=m,E.outcome=P;for(var S=-1,V=E.queue.length;++S<V;)E.queue[S].callFulfilled(P)}return E},h.reject=function(E,P){E.state=f,E.outcome=P;for(var I=-1,Z=E.queue.length;++I<Z;)E.queue[I].callRejected(P);return E},g.resolve=function(E){return E instanceof this?E:h.resolve(new this(s),E)},g.reject=function(E){var P=new this(s);return h.reject(P,E)},g.all=function(E){var P=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=E.length,Z=!1;if(!I)return this.resolve([]);for(var S=new Array(I),V=0,F=-1,Y=new this(s);++F<I;)R(E[F],F);return Y;function R(Q,X){P.resolve(Q).then(function(O){S[X]=O,++V!==I||Z||(Z=!0,h.resolve(Y,S))},function(O){Z||(Z=!0,h.reject(Y,O))})}},g.race=function(E){var P=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=E.length,Z=!1;if(!I)return this.resolve([]);for(var S=-1,V=new this(s);++S<I;)F=E[S],P.resolve(F).then(function(Y){Z||(Z=!0,h.resolve(V,Y))},function(Y){Z||(Z=!0,h.reject(V,Y))});var F;return V}},{immediate:36}],38:[function(a,C,n){var r={};(0,a("./lib/utils/common").assign)(r,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),C.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,C,n){var r=a("./zlib/deflate"),s=a("./utils/common"),h=a("./utils/strings"),f=a("./zlib/messages"),m=a("./zlib/zstream"),b=Object.prototype.toString,g=0,T=-1,y=0,M=8;function p(E){if(!(this instanceof p))return new p(E);this.options=s.assign({level:T,method:M,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},E||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var I=r.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(I!==g)throw new Error(f[I]);if(P.header&&r.deflateSetHeader(this.strm,P.header),P.dictionary){var Z;if(Z=typeof P.dictionary=="string"?h.string2buf(P.dictionary):b.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(I=r.deflateSetDictionary(this.strm,Z))!==g)throw new Error(f[I]);this._dict_set=!0}}function v(E,P){var I=new p(P);if(I.push(E,!0),I.err)throw I.msg||f[I.err];return I.result}p.prototype.push=function(E,P){var I,Z,S=this.strm,V=this.options.chunkSize;if(this.ended)return!1;Z=P===~~P?P:P===!0?4:0,typeof E=="string"?S.input=h.string2buf(E):b.call(E)==="[object ArrayBuffer]"?S.input=new Uint8Array(E):S.input=E,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new s.Buf8(V),S.next_out=0,S.avail_out=V),(I=r.deflate(S,Z))!==1&&I!==g)return this.onEnd(I),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||Z!==4&&Z!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(s.shrinkBuf(S.output,S.next_out))):this.onData(s.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&I!==1);return Z===4?(I=r.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===g):Z!==2||(this.onEnd(g),!(S.avail_out=0))},p.prototype.onData=function(E){this.chunks.push(E)},p.prototype.onEnd=function(E){E===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},n.Deflate=p,n.deflate=v,n.deflateRaw=function(E,P){return(P=P||{}).raw=!0,v(E,P)},n.gzip=function(E,P){return(P=P||{}).gzip=!0,v(E,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,C,n){var r=a("./zlib/inflate"),s=a("./utils/common"),h=a("./utils/strings"),f=a("./zlib/constants"),m=a("./zlib/messages"),b=a("./zlib/zstream"),g=a("./zlib/gzheader"),T=Object.prototype.toString;function y(p){if(!(this instanceof y))return new y(p);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},p||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||p&&p.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var E=r.inflateInit2(this.strm,v.windowBits);if(E!==f.Z_OK)throw new Error(m[E]);this.header=new g,r.inflateGetHeader(this.strm,this.header)}function M(p,v){var E=new y(v);if(E.push(p,!0),E.err)throw E.msg||m[E.err];return E.result}y.prototype.push=function(p,v){var E,P,I,Z,S,V,F=this.strm,Y=this.options.chunkSize,R=this.options.dictionary,Q=!1;if(this.ended)return!1;P=v===~~v?v:v===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof p=="string"?F.input=h.binstring2buf(p):T.call(p)==="[object ArrayBuffer]"?F.input=new Uint8Array(p):F.input=p,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new s.Buf8(Y),F.next_out=0,F.avail_out=Y),(E=r.inflate(F,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&R&&(V=typeof R=="string"?h.string2buf(R):T.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,E=r.inflateSetDictionary(this.strm,V)),E===f.Z_BUF_ERROR&&Q===!0&&(E=f.Z_OK,Q=!1),E!==f.Z_STREAM_END&&E!==f.Z_OK)return this.onEnd(E),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&E!==f.Z_STREAM_END&&(F.avail_in!==0||P!==f.Z_FINISH&&P!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=h.utf8border(F.output,F.next_out),Z=F.next_out-I,S=h.buf2string(F.output,I),F.next_out=Z,F.avail_out=Y-Z,Z&&s.arraySet(F.output,F.output,I,Z,0),this.onData(S)):this.onData(s.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(Q=!0)}while((0<F.avail_in||F.avail_out===0)&&E!==f.Z_STREAM_END);return E===f.Z_STREAM_END&&(P=f.Z_FINISH),P===f.Z_FINISH?(E=r.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f.Z_OK):P!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(F.avail_out=0))},y.prototype.onData=function(p){this.chunks.push(p)},y.prototype.onEnd=function(p){p===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},n.Inflate=y,n.inflate=M,n.inflateRaw=function(p,v){return(v=v||{}).raw=!0,M(p,v)},n.ungzip=M},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,C,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var b=m.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var g in b)b.hasOwnProperty(g)&&(f[g]=b[g])}}return f},n.shrinkBuf=function(f,m){return f.length===m?f:f.subarray?f.subarray(0,m):(f.length=m,f)};var s={arraySet:function(f,m,b,g,T){if(m.subarray&&f.subarray)f.set(m.subarray(b,b+g),T);else for(var y=0;y<g;y++)f[T+y]=m[b+y]},flattenChunks:function(f){var m,b,g,T,y,M;for(m=g=0,b=f.length;m<b;m++)g+=f[m].length;for(M=new Uint8Array(g),m=T=0,b=f.length;m<b;m++)y=f[m],M.set(y,T),T+=y.length;return M}},h={arraySet:function(f,m,b,g,T){for(var y=0;y<g;y++)f[T+y]=m[b+y]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,h))},n.setTyped(r)},{}],42:[function(a,C,n){var r=a("./common"),s=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var f=new r.Buf8(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function b(g,T){if(T<65537&&(g.subarray&&h||!g.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(g,T));for(var y="",M=0;M<T;M++)y+=String.fromCharCode(g[M]);return y}f[254]=f[254]=1,n.string2buf=function(g){var T,y,M,p,v,E=g.length,P=0;for(p=0;p<E;p++)(64512&(y=g.charCodeAt(p)))==55296&&p+1<E&&(64512&(M=g.charCodeAt(p+1)))==56320&&(y=65536+(y-55296<<10)+(M-56320),p++),P+=y<128?1:y<2048?2:y<65536?3:4;for(T=new r.Buf8(P),p=v=0;v<P;p++)(64512&(y=g.charCodeAt(p)))==55296&&p+1<E&&(64512&(M=g.charCodeAt(p+1)))==56320&&(y=65536+(y-55296<<10)+(M-56320),p++),y<128?T[v++]=y:(y<2048?T[v++]=192|y>>>6:(y<65536?T[v++]=224|y>>>12:(T[v++]=240|y>>>18,T[v++]=128|y>>>12&63),T[v++]=128|y>>>6&63),T[v++]=128|63&y);return T},n.buf2binstring=function(g){return b(g,g.length)},n.binstring2buf=function(g){for(var T=new r.Buf8(g.length),y=0,M=T.length;y<M;y++)T[y]=g.charCodeAt(y);return T},n.buf2string=function(g,T){var y,M,p,v,E=T||g.length,P=new Array(2*E);for(y=M=0;y<E;)if((p=g[y++])<128)P[M++]=p;else if(4<(v=f[p]))P[M++]=65533,y+=v-1;else{for(p&=v===2?31:v===3?15:7;1<v&&y<E;)p=p<<6|63&g[y++],v--;1<v?P[M++]=65533:p<65536?P[M++]=p:(p-=65536,P[M++]=55296|p>>10&1023,P[M++]=56320|1023&p)}return b(P,M)},n.utf8border=function(g,T){var y;for((T=T||g.length)>g.length&&(T=g.length),y=T-1;0<=y&&(192&g[y])==128;)y--;return y<0||y===0?T:y+f[g[y]]>T?y:T}},{"./common":41}],43:[function(a,C,n){C.exports=function(r,s,h,f){for(var m=65535&r|0,b=r>>>16&65535|0,g=0;h!==0;){for(h-=g=2e3<h?2e3:h;b=b+(m=m+s[f++]|0)|0,--g;);m%=65521,b%=65521}return m|b<<16|0}},{}],44:[function(a,C,n){C.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,C,n){var r=function(){for(var s,h=[],f=0;f<256;f++){s=f;for(var m=0;m<8;m++)s=1&s?3988292384^s>>>1:s>>>1;h[f]=s}return h}();C.exports=function(s,h,f,m){var b=r,g=m+f;s^=-1;for(var T=m;T<g;T++)s=s>>>8^b[255&(s^h[T])];return-1^s}},{}],46:[function(a,C,n){var r,s=a("../utils/common"),h=a("./trees"),f=a("./adler32"),m=a("./crc32"),b=a("./messages"),g=0,T=4,y=0,M=-2,p=-1,v=4,E=2,P=8,I=9,Z=286,S=30,V=19,F=2*Z+1,Y=15,R=3,Q=258,X=Q+R+1,O=42,U=113,d=1,H=2,st=3,tt=4;function ot(_,et){return _.msg=b[et],et}function lt(_){return(_<<1)-(4<_?9:0)}function it(_){for(var et=_.length;0<=--et;)_[et]=0}function W(_){var et=_.state,K=et.pending;K>_.avail_out&&(K=_.avail_out),K!==0&&(s.arraySet(_.output,et.pending_buf,et.pending_out,K,_.next_out),_.next_out+=K,et.pending_out+=K,_.total_out+=K,_.avail_out-=K,et.pending-=K,et.pending===0&&(et.pending_out=0))}function G(_,et){h._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,et),_.block_start=_.strstart,W(_.strm)}function mt(_,et){_.pending_buf[_.pending++]=et}function ft(_,et){_.pending_buf[_.pending++]=et>>>8&255,_.pending_buf[_.pending++]=255&et}function rt(_,et){var K,A,D=_.max_chain_length,N=_.strstart,nt=_.prev_length,at=_.nice_match,j=_.strstart>_.w_size-X?_.strstart-(_.w_size-X):0,ut=_.window,pt=_.w_mask,ct=_.prev,Lt=_.strstart+Q,Zt=ut[N+nt-1],xt=ut[N+nt];_.prev_length>=_.good_match&&(D>>=2),at>_.lookahead&&(at=_.lookahead);do if(ut[(K=et)+nt]===xt&&ut[K+nt-1]===Zt&&ut[K]===ut[N]&&ut[++K]===ut[N+1]){N+=2,K++;do;while(ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&ut[++N]===ut[++K]&&N<Lt);if(A=Q-(Lt-N),N=Lt-Q,nt<A){if(_.match_start=et,at<=(nt=A))break;Zt=ut[N+nt-1],xt=ut[N+nt]}}while((et=ct[et&pt])>j&&--D!=0);return nt<=_.lookahead?nt:_.lookahead}function wt(_){var et,K,A,D,N,nt,at,j,ut,pt,ct=_.w_size;do{if(D=_.window_size-_.lookahead-_.strstart,_.strstart>=ct+(ct-X)){for(s.arraySet(_.window,_.window,ct,ct,0),_.match_start-=ct,_.strstart-=ct,_.block_start-=ct,et=K=_.hash_size;A=_.head[--et],_.head[et]=ct<=A?A-ct:0,--K;);for(et=K=ct;A=_.prev[--et],_.prev[et]=ct<=A?A-ct:0,--K;);D+=ct}if(_.strm.avail_in===0)break;if(nt=_.strm,at=_.window,j=_.strstart+_.lookahead,ut=D,pt=void 0,pt=nt.avail_in,ut<pt&&(pt=ut),K=pt===0?0:(nt.avail_in-=pt,s.arraySet(at,nt.input,nt.next_in,pt,j),nt.state.wrap===1?nt.adler=f(nt.adler,at,pt,j):nt.state.wrap===2&&(nt.adler=m(nt.adler,at,pt,j)),nt.next_in+=pt,nt.total_in+=pt,pt),_.lookahead+=K,_.lookahead+_.insert>=R)for(N=_.strstart-_.insert,_.ins_h=_.window[N],_.ins_h=(_.ins_h<<_.hash_shift^_.window[N+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[N+R-1])&_.hash_mask,_.prev[N&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=N,N++,_.insert--,!(_.lookahead+_.insert<R)););}while(_.lookahead<X&&_.strm.avail_in!==0)}function Ut(_,et){for(var K,A;;){if(_.lookahead<X){if(wt(_),_.lookahead<X&&et===g)return d;if(_.lookahead===0)break}if(K=0,_.lookahead>=R&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,K=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),K!==0&&_.strstart-K<=_.w_size-X&&(_.match_length=rt(_,K)),_.match_length>=R)if(A=h._tr_tally(_,_.strstart-_.match_start,_.match_length-R),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=R){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,K=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else A=h._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(A&&(G(_,!1),_.strm.avail_out===0))return d}return _.insert=_.strstart<R-1?_.strstart:R-1,et===T?(G(_,!0),_.strm.avail_out===0?st:tt):_.last_lit&&(G(_,!1),_.strm.avail_out===0)?d:H}function Mt(_,et){for(var K,A,D;;){if(_.lookahead<X){if(wt(_),_.lookahead<X&&et===g)return d;if(_.lookahead===0)break}if(K=0,_.lookahead>=R&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,K=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=R-1,K!==0&&_.prev_length<_.max_lazy_match&&_.strstart-K<=_.w_size-X&&(_.match_length=rt(_,K),_.match_length<=5&&(_.strategy===1||_.match_length===R&&4096<_.strstart-_.match_start)&&(_.match_length=R-1)),_.prev_length>=R&&_.match_length<=_.prev_length){for(D=_.strstart+_.lookahead-R,A=h._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-R),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=D&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+R-1])&_.hash_mask,K=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=R-1,_.strstart++,A&&(G(_,!1),_.strm.avail_out===0))return d}else if(_.match_available){if((A=h._tr_tally(_,0,_.window[_.strstart-1]))&&G(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return d}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(A=h._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<R-1?_.strstart:R-1,et===T?(G(_,!0),_.strm.avail_out===0?st:tt):_.last_lit&&(G(_,!1),_.strm.avail_out===0)?d:H}function Rt(_,et,K,A,D){this.good_length=_,this.max_lazy=et,this.nice_length=K,this.max_chain=A,this.func=D}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*F),this.dyn_dtree=new s.Buf16(2*(2*S+1)),this.bl_tree=new s.Buf16(2*(2*V+1)),it(this.dyn_ltree),it(this.dyn_dtree),it(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Y+1),this.heap=new s.Buf16(2*Z+1),it(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*Z+1),it(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yt(_){var et;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=E,(et=_.state).pending=0,et.pending_out=0,et.wrap<0&&(et.wrap=-et.wrap),et.status=et.wrap?O:U,_.adler=et.wrap===2?0:1,et.last_flush=g,h._tr_init(et),y):ot(_,M)}function Tt(_){var et=yt(_);return et===y&&function(K){K.window_size=2*K.w_size,it(K.head),K.max_lazy_match=r[K.level].max_lazy,K.good_match=r[K.level].good_length,K.nice_match=r[K.level].nice_length,K.max_chain_length=r[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=R-1,K.match_available=0,K.ins_h=0}(_.state),et}function Dt(_,et,K,A,D,N){if(!_)return M;var nt=1;if(et===p&&(et=6),A<0?(nt=0,A=-A):15<A&&(nt=2,A-=16),D<1||I<D||K!==P||A<8||15<A||et<0||9<et||N<0||v<N)return ot(_,M);A===8&&(A=9);var at=new bt;return(_.state=at).strm=_,at.wrap=nt,at.gzhead=null,at.w_bits=A,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=D+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+R-1)/R),at.window=new s.Buf8(2*at.w_size),at.head=new s.Buf16(at.hash_size),at.prev=new s.Buf16(at.w_size),at.lit_bufsize=1<<D+6,at.pending_buf_size=4*at.lit_bufsize,at.pending_buf=new s.Buf8(at.pending_buf_size),at.d_buf=1*at.lit_bufsize,at.l_buf=3*at.lit_bufsize,at.level=et,at.strategy=N,at.method=K,Tt(_)}r=[new Rt(0,0,0,0,function(_,et){var K=65535;for(K>_.pending_buf_size-5&&(K=_.pending_buf_size-5);;){if(_.lookahead<=1){if(wt(_),_.lookahead===0&&et===g)return d;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var A=_.block_start+K;if((_.strstart===0||_.strstart>=A)&&(_.lookahead=_.strstart-A,_.strstart=A,G(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-X&&(G(_,!1),_.strm.avail_out===0))return d}return _.insert=0,et===T?(G(_,!0),_.strm.avail_out===0?st:tt):(_.strstart>_.block_start&&(G(_,!1),_.strm.avail_out),d)}),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,Mt),new Rt(8,16,32,32,Mt),new Rt(8,16,128,128,Mt),new Rt(8,32,128,256,Mt),new Rt(32,128,258,1024,Mt),new Rt(32,258,258,4096,Mt)],n.deflateInit=function(_,et){return Dt(_,et,P,15,8,0)},n.deflateInit2=Dt,n.deflateReset=Tt,n.deflateResetKeep=yt,n.deflateSetHeader=function(_,et){return _&&_.state?_.state.wrap!==2?M:(_.state.gzhead=et,y):M},n.deflate=function(_,et){var K,A,D,N;if(!_||!_.state||5<et||et<0)return _?ot(_,M):M;if(A=_.state,!_.output||!_.input&&_.avail_in!==0||A.status===666&&et!==T)return ot(_,_.avail_out===0?-5:M);if(A.strm=_,K=A.last_flush,A.last_flush=et,A.status===O)if(A.wrap===2)_.adler=0,mt(A,31),mt(A,139),mt(A,8),A.gzhead?(mt(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),mt(A,255&A.gzhead.time),mt(A,A.gzhead.time>>8&255),mt(A,A.gzhead.time>>16&255),mt(A,A.gzhead.time>>24&255),mt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),mt(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(mt(A,255&A.gzhead.extra.length),mt(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(_.adler=m(_.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(mt(A,0),mt(A,0),mt(A,0),mt(A,0),mt(A,0),mt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),mt(A,3),A.status=U);else{var nt=P+(A.w_bits-8<<4)<<8;nt|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(nt|=32),nt+=31-nt%31,A.status=U,ft(A,nt),A.strstart!==0&&(ft(A,_.adler>>>16),ft(A,65535&_.adler)),_.adler=1}if(A.status===69)if(A.gzhead.extra){for(D=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),W(_),D=A.pending,A.pending!==A.pending_buf_size));)mt(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){D=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),W(_),D=A.pending,A.pending===A.pending_buf_size)){N=1;break}N=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,mt(A,N)}while(N!==0);A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),N===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){D=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),W(_),D=A.pending,A.pending===A.pending_buf_size)){N=1;break}N=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,mt(A,N)}while(N!==0);A.gzhead.hcrc&&A.pending>D&&(_.adler=m(_.adler,A.pending_buf,A.pending-D,D)),N===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&W(_),A.pending+2<=A.pending_buf_size&&(mt(A,255&_.adler),mt(A,_.adler>>8&255),_.adler=0,A.status=U)):A.status=U),A.pending!==0){if(W(_),_.avail_out===0)return A.last_flush=-1,y}else if(_.avail_in===0&&lt(et)<=lt(K)&&et!==T)return ot(_,-5);if(A.status===666&&_.avail_in!==0)return ot(_,-5);if(_.avail_in!==0||A.lookahead!==0||et!==g&&A.status!==666){var at=A.strategy===2?function(j,ut){for(var pt;;){if(j.lookahead===0&&(wt(j),j.lookahead===0)){if(ut===g)return d;break}if(j.match_length=0,pt=h._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++,pt&&(G(j,!1),j.strm.avail_out===0))return d}return j.insert=0,ut===T?(G(j,!0),j.strm.avail_out===0?st:tt):j.last_lit&&(G(j,!1),j.strm.avail_out===0)?d:H}(A,et):A.strategy===3?function(j,ut){for(var pt,ct,Lt,Zt,xt=j.window;;){if(j.lookahead<=Q){if(wt(j),j.lookahead<=Q&&ut===g)return d;if(j.lookahead===0)break}if(j.match_length=0,j.lookahead>=R&&0<j.strstart&&(ct=xt[Lt=j.strstart-1])===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]){Zt=j.strstart+Q;do;while(ct===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]&&ct===xt[++Lt]&&Lt<Zt);j.match_length=Q-(Zt-Lt),j.match_length>j.lookahead&&(j.match_length=j.lookahead)}if(j.match_length>=R?(pt=h._tr_tally(j,1,j.match_length-R),j.lookahead-=j.match_length,j.strstart+=j.match_length,j.match_length=0):(pt=h._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++),pt&&(G(j,!1),j.strm.avail_out===0))return d}return j.insert=0,ut===T?(G(j,!0),j.strm.avail_out===0?st:tt):j.last_lit&&(G(j,!1),j.strm.avail_out===0)?d:H}(A,et):r[A.level].func(A,et);if(at!==st&&at!==tt||(A.status=666),at===d||at===st)return _.avail_out===0&&(A.last_flush=-1),y;if(at===H&&(et===1?h._tr_align(A):et!==5&&(h._tr_stored_block(A,0,0,!1),et===3&&(it(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),W(_),_.avail_out===0))return A.last_flush=-1,y}return et!==T?y:A.wrap<=0?1:(A.wrap===2?(mt(A,255&_.adler),mt(A,_.adler>>8&255),mt(A,_.adler>>16&255),mt(A,_.adler>>24&255),mt(A,255&_.total_in),mt(A,_.total_in>>8&255),mt(A,_.total_in>>16&255),mt(A,_.total_in>>24&255)):(ft(A,_.adler>>>16),ft(A,65535&_.adler)),W(_),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?y:1)},n.deflateEnd=function(_){var et;return _&&_.state?(et=_.state.status)!==O&&et!==69&&et!==73&&et!==91&&et!==103&&et!==U&&et!==666?ot(_,M):(_.state=null,et===U?ot(_,-3):y):M},n.deflateSetDictionary=function(_,et){var K,A,D,N,nt,at,j,ut,pt=et.length;if(!_||!_.state||(N=(K=_.state).wrap)===2||N===1&&K.status!==O||K.lookahead)return M;for(N===1&&(_.adler=f(_.adler,et,pt,0)),K.wrap=0,pt>=K.w_size&&(N===0&&(it(K.head),K.strstart=0,K.block_start=0,K.insert=0),ut=new s.Buf8(K.w_size),s.arraySet(ut,et,pt-K.w_size,K.w_size,0),et=ut,pt=K.w_size),nt=_.avail_in,at=_.next_in,j=_.input,_.avail_in=pt,_.next_in=0,_.input=et,wt(K);K.lookahead>=R;){for(A=K.strstart,D=K.lookahead-(R-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[A+R-1])&K.hash_mask,K.prev[A&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=A,A++,--D;);K.strstart=A,K.lookahead=R-1,wt(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=R-1,K.match_available=0,_.next_in=at,_.input=j,_.avail_in=nt,K.wrap=N,y},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,C,n){C.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,C,n){C.exports=function(r,s){var h,f,m,b,g,T,y,M,p,v,E,P,I,Z,S,V,F,Y,R,Q,X,O,U,d,H;h=r.state,f=r.next_in,d=r.input,m=f+(r.avail_in-5),b=r.next_out,H=r.output,g=b-(s-r.avail_out),T=b+(r.avail_out-257),y=h.dmax,M=h.wsize,p=h.whave,v=h.wnext,E=h.window,P=h.hold,I=h.bits,Z=h.lencode,S=h.distcode,V=(1<<h.lenbits)-1,F=(1<<h.distbits)-1;t:do{I<15&&(P+=d[f++]<<I,I+=8,P+=d[f++]<<I,I+=8),Y=Z[P&V];e:for(;;){if(P>>>=R=Y>>>24,I-=R,(R=Y>>>16&255)===0)H[b++]=65535&Y;else{if(!(16&R)){if(!(64&R)){Y=Z[(65535&Y)+(P&(1<<R)-1)];continue e}if(32&R){h.mode=12;break t}r.msg="invalid literal/length code",h.mode=30;break t}Q=65535&Y,(R&=15)&&(I<R&&(P+=d[f++]<<I,I+=8),Q+=P&(1<<R)-1,P>>>=R,I-=R),I<15&&(P+=d[f++]<<I,I+=8,P+=d[f++]<<I,I+=8),Y=S[P&F];i:for(;;){if(P>>>=R=Y>>>24,I-=R,!(16&(R=Y>>>16&255))){if(!(64&R)){Y=S[(65535&Y)+(P&(1<<R)-1)];continue i}r.msg="invalid distance code",h.mode=30;break t}if(X=65535&Y,I<(R&=15)&&(P+=d[f++]<<I,(I+=8)<R&&(P+=d[f++]<<I,I+=8)),y<(X+=P&(1<<R)-1)){r.msg="invalid distance too far back",h.mode=30;break t}if(P>>>=R,I-=R,(R=b-g)<X){if(p<(R=X-R)&&h.sane){r.msg="invalid distance too far back",h.mode=30;break t}if(U=E,(O=0)===v){if(O+=M-R,R<Q){for(Q-=R;H[b++]=E[O++],--R;);O=b-X,U=H}}else if(v<R){if(O+=M+v-R,(R-=v)<Q){for(Q-=R;H[b++]=E[O++],--R;);if(O=0,v<Q){for(Q-=R=v;H[b++]=E[O++],--R;);O=b-X,U=H}}}else if(O+=v-R,R<Q){for(Q-=R;H[b++]=E[O++],--R;);O=b-X,U=H}for(;2<Q;)H[b++]=U[O++],H[b++]=U[O++],H[b++]=U[O++],Q-=3;Q&&(H[b++]=U[O++],1<Q&&(H[b++]=U[O++]))}else{for(O=b-X;H[b++]=H[O++],H[b++]=H[O++],H[b++]=H[O++],2<(Q-=3););Q&&(H[b++]=H[O++],1<Q&&(H[b++]=H[O++]))}break}}break}}while(f<m&&b<T);f-=Q=I>>3,P&=(1<<(I-=Q<<3))-1,r.next_in=f,r.next_out=b,r.avail_in=f<m?m-f+5:5-(f-m),r.avail_out=b<T?T-b+257:257-(b-T),h.hold=P,h.bits=I}},{}],49:[function(a,C,n){var r=a("../utils/common"),s=a("./adler32"),h=a("./crc32"),f=a("./inffast"),m=a("./inftrees"),b=1,g=2,T=0,y=-2,M=1,p=852,v=592;function E(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(O){var U;return O&&O.state?(U=O.state,O.total_in=O.total_out=U.total=0,O.msg="",U.wrap&&(O.adler=1&U.wrap),U.mode=M,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new r.Buf32(p),U.distcode=U.distdyn=new r.Buf32(v),U.sane=1,U.back=-1,T):y}function Z(O){var U;return O&&O.state?((U=O.state).wsize=0,U.whave=0,U.wnext=0,I(O)):y}function S(O,U){var d,H;return O&&O.state?(H=O.state,U<0?(d=0,U=-U):(d=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?y:(H.window!==null&&H.wbits!==U&&(H.window=null),H.wrap=d,H.wbits=U,Z(O))):y}function V(O,U){var d,H;return O?(H=new P,(O.state=H).window=null,(d=S(O,U))!==T&&(O.state=null),d):y}var F,Y,R=!0;function Q(O){if(R){var U;for(F=new r.Buf32(512),Y=new r.Buf32(32),U=0;U<144;)O.lens[U++]=8;for(;U<256;)O.lens[U++]=9;for(;U<280;)O.lens[U++]=7;for(;U<288;)O.lens[U++]=8;for(m(b,O.lens,0,288,F,0,O.work,{bits:9}),U=0;U<32;)O.lens[U++]=5;m(g,O.lens,0,32,Y,0,O.work,{bits:5}),R=!1}O.lencode=F,O.lenbits=9,O.distcode=Y,O.distbits=5}function X(O,U,d,H){var st,tt=O.state;return tt.window===null&&(tt.wsize=1<<tt.wbits,tt.wnext=0,tt.whave=0,tt.window=new r.Buf8(tt.wsize)),H>=tt.wsize?(r.arraySet(tt.window,U,d-tt.wsize,tt.wsize,0),tt.wnext=0,tt.whave=tt.wsize):(H<(st=tt.wsize-tt.wnext)&&(st=H),r.arraySet(tt.window,U,d-H,st,tt.wnext),(H-=st)?(r.arraySet(tt.window,U,d-H,H,0),tt.wnext=H,tt.whave=tt.wsize):(tt.wnext+=st,tt.wnext===tt.wsize&&(tt.wnext=0),tt.whave<tt.wsize&&(tt.whave+=st))),0}n.inflateReset=Z,n.inflateReset2=S,n.inflateResetKeep=I,n.inflateInit=function(O){return V(O,15)},n.inflateInit2=V,n.inflate=function(O,U){var d,H,st,tt,ot,lt,it,W,G,mt,ft,rt,wt,Ut,Mt,Rt,bt,yt,Tt,Dt,_,et,K,A,D=0,N=new r.Buf8(4),nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return y;(d=O.state).mode===12&&(d.mode=13),ot=O.next_out,st=O.output,it=O.avail_out,tt=O.next_in,H=O.input,lt=O.avail_in,W=d.hold,G=d.bits,mt=lt,ft=it,et=T;t:for(;;)switch(d.mode){case M:if(d.wrap===0){d.mode=13;break}for(;G<16;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(2&d.wrap&&W===35615){N[d.check=0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0),G=W=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&W)<<8)+(W>>8))%31){O.msg="incorrect header check",d.mode=30;break}if((15&W)!=8){O.msg="unknown compression method",d.mode=30;break}if(G-=4,_=8+(15&(W>>>=4)),d.wbits===0)d.wbits=_;else if(_>d.wbits){O.msg="invalid window size",d.mode=30;break}d.dmax=1<<_,O.adler=d.check=1,d.mode=512&W?10:12,G=W=0;break;case 2:for(;G<16;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(d.flags=W,(255&d.flags)!=8){O.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){O.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=W>>8&1),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0)),G=W=0,d.mode=3;case 3:for(;G<32;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}d.head&&(d.head.time=W),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,N[2]=W>>>16&255,N[3]=W>>>24&255,d.check=h(d.check,N,4,0)),G=W=0,d.mode=4;case 4:for(;G<16;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}d.head&&(d.head.xflags=255&W,d.head.os=W>>8),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0)),G=W=0,d.mode=5;case 5:if(1024&d.flags){for(;G<16;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}d.length=W,d.head&&(d.head.extra_len=W),512&d.flags&&(N[0]=255&W,N[1]=W>>>8&255,d.check=h(d.check,N,2,0)),G=W=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(lt<(rt=d.length)&&(rt=lt),rt&&(d.head&&(_=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),r.arraySet(d.head.extra,H,tt,rt,_)),512&d.flags&&(d.check=h(d.check,H,rt,tt)),lt-=rt,tt+=rt,d.length-=rt),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(lt===0)break t;for(rt=0;_=H[tt+rt++],d.head&&_&&d.length<65536&&(d.head.name+=String.fromCharCode(_)),_&&rt<lt;);if(512&d.flags&&(d.check=h(d.check,H,rt,tt)),lt-=rt,tt+=rt,_)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(lt===0)break t;for(rt=0;_=H[tt+rt++],d.head&&_&&d.length<65536&&(d.head.comment+=String.fromCharCode(_)),_&&rt<lt;);if(512&d.flags&&(d.check=h(d.check,H,rt,tt)),lt-=rt,tt+=rt,_)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;G<16;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(W!==(65535&d.check)){O.msg="header crc mismatch",d.mode=30;break}G=W=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),O.adler=d.check=0,d.mode=12;break;case 10:for(;G<32;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}O.adler=d.check=E(W),G=W=0,d.mode=11;case 11:if(d.havedict===0)return O.next_out=ot,O.avail_out=it,O.next_in=tt,O.avail_in=lt,d.hold=W,d.bits=G,2;O.adler=d.check=1,d.mode=12;case 12:if(U===5||U===6)break t;case 13:if(d.last){W>>>=7&G,G-=7&G,d.mode=27;break}for(;G<3;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}switch(d.last=1&W,G-=1,3&(W>>>=1)){case 0:d.mode=14;break;case 1:if(Q(d),d.mode=20,U!==6)break;W>>>=2,G-=2;break t;case 2:d.mode=17;break;case 3:O.msg="invalid block type",d.mode=30}W>>>=2,G-=2;break;case 14:for(W>>>=7&G,G-=7&G;G<32;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if((65535&W)!=(W>>>16^65535)){O.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&W,G=W=0,d.mode=15,U===6)break t;case 15:d.mode=16;case 16:if(rt=d.length){if(lt<rt&&(rt=lt),it<rt&&(rt=it),rt===0)break t;r.arraySet(st,H,tt,rt,ot),lt-=rt,tt+=rt,it-=rt,ot+=rt,d.length-=rt;break}d.mode=12;break;case 17:for(;G<14;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(d.nlen=257+(31&W),W>>>=5,G-=5,d.ndist=1+(31&W),W>>>=5,G-=5,d.ncode=4+(15&W),W>>>=4,G-=4,286<d.nlen||30<d.ndist){O.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;G<3;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}d.lens[nt[d.have++]]=7&W,W>>>=3,G-=3}for(;d.have<19;)d.lens[nt[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,K={bits:d.lenbits},et=m(0,d.lens,0,19,d.lencode,0,d.work,K),d.lenbits=K.bits,et){O.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;Rt=(D=d.lencode[W&(1<<d.lenbits)-1])>>>16&255,bt=65535&D,!((Mt=D>>>24)<=G);){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(bt<16)W>>>=Mt,G-=Mt,d.lens[d.have++]=bt;else{if(bt===16){for(A=Mt+2;G<A;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(W>>>=Mt,G-=Mt,d.have===0){O.msg="invalid bit length repeat",d.mode=30;break}_=d.lens[d.have-1],rt=3+(3&W),W>>>=2,G-=2}else if(bt===17){for(A=Mt+3;G<A;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}G-=Mt,_=0,rt=3+(7&(W>>>=Mt)),W>>>=3,G-=3}else{for(A=Mt+7;G<A;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}G-=Mt,_=0,rt=11+(127&(W>>>=Mt)),W>>>=7,G-=7}if(d.have+rt>d.nlen+d.ndist){O.msg="invalid bit length repeat",d.mode=30;break}for(;rt--;)d.lens[d.have++]=_}}if(d.mode===30)break;if(d.lens[256]===0){O.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,K={bits:d.lenbits},et=m(b,d.lens,0,d.nlen,d.lencode,0,d.work,K),d.lenbits=K.bits,et){O.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,K={bits:d.distbits},et=m(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,K),d.distbits=K.bits,et){O.msg="invalid distances set",d.mode=30;break}if(d.mode=20,U===6)break t;case 20:d.mode=21;case 21:if(6<=lt&&258<=it){O.next_out=ot,O.avail_out=it,O.next_in=tt,O.avail_in=lt,d.hold=W,d.bits=G,f(O,ft),ot=O.next_out,st=O.output,it=O.avail_out,tt=O.next_in,H=O.input,lt=O.avail_in,W=d.hold,G=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;Rt=(D=d.lencode[W&(1<<d.lenbits)-1])>>>16&255,bt=65535&D,!((Mt=D>>>24)<=G);){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(Rt&&!(240&Rt)){for(yt=Mt,Tt=Rt,Dt=bt;Rt=(D=d.lencode[Dt+((W&(1<<yt+Tt)-1)>>yt)])>>>16&255,bt=65535&D,!(yt+(Mt=D>>>24)<=G);){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}W>>>=yt,G-=yt,d.back+=yt}if(W>>>=Mt,G-=Mt,d.back+=Mt,d.length=bt,Rt===0){d.mode=26;break}if(32&Rt){d.back=-1,d.mode=12;break}if(64&Rt){O.msg="invalid literal/length code",d.mode=30;break}d.extra=15&Rt,d.mode=22;case 22:if(d.extra){for(A=d.extra;G<A;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}d.length+=W&(1<<d.extra)-1,W>>>=d.extra,G-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;Rt=(D=d.distcode[W&(1<<d.distbits)-1])>>>16&255,bt=65535&D,!((Mt=D>>>24)<=G);){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(!(240&Rt)){for(yt=Mt,Tt=Rt,Dt=bt;Rt=(D=d.distcode[Dt+((W&(1<<yt+Tt)-1)>>yt)])>>>16&255,bt=65535&D,!(yt+(Mt=D>>>24)<=G);){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}W>>>=yt,G-=yt,d.back+=yt}if(W>>>=Mt,G-=Mt,d.back+=Mt,64&Rt){O.msg="invalid distance code",d.mode=30;break}d.offset=bt,d.extra=15&Rt,d.mode=24;case 24:if(d.extra){for(A=d.extra;G<A;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}d.offset+=W&(1<<d.extra)-1,W>>>=d.extra,G-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){O.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(it===0)break t;if(rt=ft-it,d.offset>rt){if((rt=d.offset-rt)>d.whave&&d.sane){O.msg="invalid distance too far back",d.mode=30;break}wt=rt>d.wnext?(rt-=d.wnext,d.wsize-rt):d.wnext-rt,rt>d.length&&(rt=d.length),Ut=d.window}else Ut=st,wt=ot-d.offset,rt=d.length;for(it<rt&&(rt=it),it-=rt,d.length-=rt;st[ot++]=Ut[wt++],--rt;);d.length===0&&(d.mode=21);break;case 26:if(it===0)break t;st[ot++]=d.length,it--,d.mode=21;break;case 27:if(d.wrap){for(;G<32;){if(lt===0)break t;lt--,W|=H[tt++]<<G,G+=8}if(ft-=it,O.total_out+=ft,d.total+=ft,ft&&(O.adler=d.check=d.flags?h(d.check,st,ft,ot-ft):s(d.check,st,ft,ot-ft)),ft=it,(d.flags?W:E(W))!==d.check){O.msg="incorrect data check",d.mode=30;break}G=W=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;G<32;){if(lt===0)break t;lt--,W+=H[tt++]<<G,G+=8}if(W!==(4294967295&d.total)){O.msg="incorrect length check",d.mode=30;break}G=W=0}d.mode=29;case 29:et=1;break t;case 30:et=-3;break t;case 31:return-4;case 32:default:return y}return O.next_out=ot,O.avail_out=it,O.next_in=tt,O.avail_in=lt,d.hold=W,d.bits=G,(d.wsize||ft!==O.avail_out&&d.mode<30&&(d.mode<27||U!==4))&&X(O,O.output,O.next_out,ft-O.avail_out)?(d.mode=31,-4):(mt-=O.avail_in,ft-=O.avail_out,O.total_in+=mt,O.total_out+=ft,d.total+=ft,d.wrap&&ft&&(O.adler=d.check=d.flags?h(d.check,st,ft,O.next_out-ft):s(d.check,st,ft,O.next_out-ft)),O.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),(mt==0&&ft===0||U===4)&&et===T&&(et=-5),et)},n.inflateEnd=function(O){if(!O||!O.state)return y;var U=O.state;return U.window&&(U.window=null),O.state=null,T},n.inflateGetHeader=function(O,U){var d;return O&&O.state&&2&(d=O.state).wrap?((d.head=U).done=!1,T):y},n.inflateSetDictionary=function(O,U){var d,H=U.length;return O&&O.state?(d=O.state).wrap!==0&&d.mode!==11?y:d.mode===11&&s(1,U,H,0)!==d.check?-3:X(O,U,H,H)?(d.mode=31,-4):(d.havedict=1,T):y},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,C,n){var r=a("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];C.exports=function(b,g,T,y,M,p,v,E){var P,I,Z,S,V,F,Y,R,Q,X=E.bits,O=0,U=0,d=0,H=0,st=0,tt=0,ot=0,lt=0,it=0,W=0,G=null,mt=0,ft=new r.Buf16(16),rt=new r.Buf16(16),wt=null,Ut=0;for(O=0;O<=15;O++)ft[O]=0;for(U=0;U<y;U++)ft[g[T+U]]++;for(st=X,H=15;1<=H&&ft[H]===0;H--);if(H<st&&(st=H),H===0)return M[p++]=20971520,M[p++]=20971520,E.bits=1,0;for(d=1;d<H&&ft[d]===0;d++);for(st<d&&(st=d),O=lt=1;O<=15;O++)if(lt<<=1,(lt-=ft[O])<0)return-1;if(0<lt&&(b===0||H!==1))return-1;for(rt[1]=0,O=1;O<15;O++)rt[O+1]=rt[O]+ft[O];for(U=0;U<y;U++)g[T+U]!==0&&(v[rt[g[T+U]]++]=U);if(F=b===0?(G=wt=v,19):b===1?(G=s,mt-=257,wt=h,Ut-=257,256):(G=f,wt=m,-1),O=d,V=p,ot=U=W=0,Z=-1,S=(it=1<<(tt=st))-1,b===1&&852<it||b===2&&592<it)return 1;for(;;){for(Y=O-ot,Q=v[U]<F?(R=0,v[U]):v[U]>F?(R=wt[Ut+v[U]],G[mt+v[U]]):(R=96,0),P=1<<O-ot,d=I=1<<tt;M[V+(W>>ot)+(I-=P)]=Y<<24|R<<16|Q|0,I!==0;);for(P=1<<O-1;W&P;)P>>=1;if(P!==0?(W&=P-1,W+=P):W=0,U++,--ft[O]==0){if(O===H)break;O=g[T+v[U]]}if(st<O&&(W&S)!==Z){for(ot===0&&(ot=st),V+=d,lt=1<<(tt=O-ot);tt+ot<H&&!((lt-=ft[tt+ot])<=0);)tt++,lt<<=1;if(it+=1<<tt,b===1&&852<it||b===2&&592<it)return 1;M[Z=W&S]=st<<24|tt<<16|V-p|0}}return W!==0&&(M[V+W]=O-ot<<24|64<<16|0),E.bits=st,0}},{"../utils/common":41}],51:[function(a,C,n){C.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,C,n){var r=a("../utils/common"),s=0,h=1;function f(D){for(var N=D.length;0<=--N;)D[N]=0}var m=0,b=29,g=256,T=g+1+b,y=30,M=19,p=2*T+1,v=15,E=16,P=7,I=256,Z=16,S=17,V=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(T+2));f(X);var O=new Array(2*y);f(O);var U=new Array(512);f(U);var d=new Array(256);f(d);var H=new Array(b);f(H);var st,tt,ot,lt=new Array(y);function it(D,N,nt,at,j){this.static_tree=D,this.extra_bits=N,this.extra_base=nt,this.elems=at,this.max_length=j,this.has_stree=D&&D.length}function W(D,N){this.dyn_tree=D,this.max_code=0,this.stat_desc=N}function G(D){return D<256?U[D]:U[256+(D>>>7)]}function mt(D,N){D.pending_buf[D.pending++]=255&N,D.pending_buf[D.pending++]=N>>>8&255}function ft(D,N,nt){D.bi_valid>E-nt?(D.bi_buf|=N<<D.bi_valid&65535,mt(D,D.bi_buf),D.bi_buf=N>>E-D.bi_valid,D.bi_valid+=nt-E):(D.bi_buf|=N<<D.bi_valid&65535,D.bi_valid+=nt)}function rt(D,N,nt){ft(D,nt[2*N],nt[2*N+1])}function wt(D,N){for(var nt=0;nt|=1&D,D>>>=1,nt<<=1,0<--N;);return nt>>>1}function Ut(D,N,nt){var at,j,ut=new Array(v+1),pt=0;for(at=1;at<=v;at++)ut[at]=pt=pt+nt[at-1]<<1;for(j=0;j<=N;j++){var ct=D[2*j+1];ct!==0&&(D[2*j]=wt(ut[ct]++,ct))}}function Mt(D){var N;for(N=0;N<T;N++)D.dyn_ltree[2*N]=0;for(N=0;N<y;N++)D.dyn_dtree[2*N]=0;for(N=0;N<M;N++)D.bl_tree[2*N]=0;D.dyn_ltree[2*I]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function Rt(D){8<D.bi_valid?mt(D,D.bi_buf):0<D.bi_valid&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function bt(D,N,nt,at){var j=2*N,ut=2*nt;return D[j]<D[ut]||D[j]===D[ut]&&at[N]<=at[nt]}function yt(D,N,nt){for(var at=D.heap[nt],j=nt<<1;j<=D.heap_len&&(j<D.heap_len&&bt(N,D.heap[j+1],D.heap[j],D.depth)&&j++,!bt(N,at,D.heap[j],D.depth));)D.heap[nt]=D.heap[j],nt=j,j<<=1;D.heap[nt]=at}function Tt(D,N,nt){var at,j,ut,pt,ct=0;if(D.last_lit!==0)for(;at=D.pending_buf[D.d_buf+2*ct]<<8|D.pending_buf[D.d_buf+2*ct+1],j=D.pending_buf[D.l_buf+ct],ct++,at===0?rt(D,j,N):(rt(D,(ut=d[j])+g+1,N),(pt=F[ut])!==0&&ft(D,j-=H[ut],pt),rt(D,ut=G(--at),nt),(pt=Y[ut])!==0&&ft(D,at-=lt[ut],pt)),ct<D.last_lit;);rt(D,I,N)}function Dt(D,N){var nt,at,j,ut=N.dyn_tree,pt=N.stat_desc.static_tree,ct=N.stat_desc.has_stree,Lt=N.stat_desc.elems,Zt=-1;for(D.heap_len=0,D.heap_max=p,nt=0;nt<Lt;nt++)ut[2*nt]!==0?(D.heap[++D.heap_len]=Zt=nt,D.depth[nt]=0):ut[2*nt+1]=0;for(;D.heap_len<2;)ut[2*(j=D.heap[++D.heap_len]=Zt<2?++Zt:0)]=1,D.depth[j]=0,D.opt_len--,ct&&(D.static_len-=pt[2*j+1]);for(N.max_code=Zt,nt=D.heap_len>>1;1<=nt;nt--)yt(D,ut,nt);for(j=Lt;nt=D.heap[1],D.heap[1]=D.heap[D.heap_len--],yt(D,ut,1),at=D.heap[1],D.heap[--D.heap_max]=nt,D.heap[--D.heap_max]=at,ut[2*j]=ut[2*nt]+ut[2*at],D.depth[j]=(D.depth[nt]>=D.depth[at]?D.depth[nt]:D.depth[at])+1,ut[2*nt+1]=ut[2*at+1]=j,D.heap[1]=j++,yt(D,ut,1),2<=D.heap_len;);D.heap[--D.heap_max]=D.heap[1],function(xt,Xt){var fe,ie,se,Ht,ae,Jt,le=Xt.dyn_tree,ke=Xt.max_code,Ie=Xt.stat_desc.static_tree,ze=Xt.stat_desc.has_stree,qe=Xt.stat_desc.extra_bits,Ce=Xt.stat_desc.extra_base,Yt=Xt.stat_desc.max_length,Qe=0;for(Ht=0;Ht<=v;Ht++)xt.bl_count[Ht]=0;for(le[2*xt.heap[xt.heap_max]+1]=0,fe=xt.heap_max+1;fe<p;fe++)Yt<(Ht=le[2*le[2*(ie=xt.heap[fe])+1]+1]+1)&&(Ht=Yt,Qe++),le[2*ie+1]=Ht,ke<ie||(xt.bl_count[Ht]++,ae=0,Ce<=ie&&(ae=qe[ie-Ce]),Jt=le[2*ie],xt.opt_len+=Jt*(Ht+ae),ze&&(xt.static_len+=Jt*(Ie[2*ie+1]+ae)));if(Qe!==0){do{for(Ht=Yt-1;xt.bl_count[Ht]===0;)Ht--;xt.bl_count[Ht]--,xt.bl_count[Ht+1]+=2,xt.bl_count[Yt]--,Qe-=2}while(0<Qe);for(Ht=Yt;Ht!==0;Ht--)for(ie=xt.bl_count[Ht];ie!==0;)ke<(se=xt.heap[--fe])||(le[2*se+1]!==Ht&&(xt.opt_len+=(Ht-le[2*se+1])*le[2*se],le[2*se+1]=Ht),ie--)}}(D,N),Ut(ut,Zt,D.bl_count)}function _(D,N,nt){var at,j,ut=-1,pt=N[1],ct=0,Lt=7,Zt=4;for(pt===0&&(Lt=138,Zt=3),N[2*(nt+1)+1]=65535,at=0;at<=nt;at++)j=pt,pt=N[2*(at+1)+1],++ct<Lt&&j===pt||(ct<Zt?D.bl_tree[2*j]+=ct:j!==0?(j!==ut&&D.bl_tree[2*j]++,D.bl_tree[2*Z]++):ct<=10?D.bl_tree[2*S]++:D.bl_tree[2*V]++,ut=j,Zt=(ct=0)===pt?(Lt=138,3):j===pt?(Lt=6,3):(Lt=7,4))}function et(D,N,nt){var at,j,ut=-1,pt=N[1],ct=0,Lt=7,Zt=4;for(pt===0&&(Lt=138,Zt=3),at=0;at<=nt;at++)if(j=pt,pt=N[2*(at+1)+1],!(++ct<Lt&&j===pt)){if(ct<Zt)for(;rt(D,j,D.bl_tree),--ct!=0;);else j!==0?(j!==ut&&(rt(D,j,D.bl_tree),ct--),rt(D,Z,D.bl_tree),ft(D,ct-3,2)):ct<=10?(rt(D,S,D.bl_tree),ft(D,ct-3,3)):(rt(D,V,D.bl_tree),ft(D,ct-11,7));ut=j,Zt=(ct=0)===pt?(Lt=138,3):j===pt?(Lt=6,3):(Lt=7,4)}}f(lt);var K=!1;function A(D,N,nt,at){ft(D,(m<<1)+(at?1:0),3),function(j,ut,pt,ct){Rt(j),mt(j,pt),mt(j,~pt),r.arraySet(j.pending_buf,j.window,ut,pt,j.pending),j.pending+=pt}(D,N,nt)}n._tr_init=function(D){K||(function(){var N,nt,at,j,ut,pt=new Array(v+1);for(j=at=0;j<b-1;j++)for(H[j]=at,N=0;N<1<<F[j];N++)d[at++]=j;for(d[at-1]=j,j=ut=0;j<16;j++)for(lt[j]=ut,N=0;N<1<<Y[j];N++)U[ut++]=j;for(ut>>=7;j<y;j++)for(lt[j]=ut<<7,N=0;N<1<<Y[j]-7;N++)U[256+ut++]=j;for(nt=0;nt<=v;nt++)pt[nt]=0;for(N=0;N<=143;)X[2*N+1]=8,N++,pt[8]++;for(;N<=255;)X[2*N+1]=9,N++,pt[9]++;for(;N<=279;)X[2*N+1]=7,N++,pt[7]++;for(;N<=287;)X[2*N+1]=8,N++,pt[8]++;for(Ut(X,T+1,pt),N=0;N<y;N++)O[2*N+1]=5,O[2*N]=wt(N,5);st=new it(X,F,g+1,T,v),tt=new it(O,Y,0,y,v),ot=new it(new Array(0),R,0,M,P)}(),K=!0),D.l_desc=new W(D.dyn_ltree,st),D.d_desc=new W(D.dyn_dtree,tt),D.bl_desc=new W(D.bl_tree,ot),D.bi_buf=0,D.bi_valid=0,Mt(D)},n._tr_stored_block=A,n._tr_flush_block=function(D,N,nt,at){var j,ut,pt=0;0<D.level?(D.strm.data_type===2&&(D.strm.data_type=function(ct){var Lt,Zt=4093624447;for(Lt=0;Lt<=31;Lt++,Zt>>>=1)if(1&Zt&&ct.dyn_ltree[2*Lt]!==0)return s;if(ct.dyn_ltree[18]!==0||ct.dyn_ltree[20]!==0||ct.dyn_ltree[26]!==0)return h;for(Lt=32;Lt<g;Lt++)if(ct.dyn_ltree[2*Lt]!==0)return h;return s}(D)),Dt(D,D.l_desc),Dt(D,D.d_desc),pt=function(ct){var Lt;for(_(ct,ct.dyn_ltree,ct.l_desc.max_code),_(ct,ct.dyn_dtree,ct.d_desc.max_code),Dt(ct,ct.bl_desc),Lt=M-1;3<=Lt&&ct.bl_tree[2*Q[Lt]+1]===0;Lt--);return ct.opt_len+=3*(Lt+1)+5+5+4,Lt}(D),j=D.opt_len+3+7>>>3,(ut=D.static_len+3+7>>>3)<=j&&(j=ut)):j=ut=nt+5,nt+4<=j&&N!==-1?A(D,N,nt,at):D.strategy===4||ut===j?(ft(D,2+(at?1:0),3),Tt(D,X,O)):(ft(D,4+(at?1:0),3),function(ct,Lt,Zt,xt){var Xt;for(ft(ct,Lt-257,5),ft(ct,Zt-1,5),ft(ct,xt-4,4),Xt=0;Xt<xt;Xt++)ft(ct,ct.bl_tree[2*Q[Xt]+1],3);et(ct,ct.dyn_ltree,Lt-1),et(ct,ct.dyn_dtree,Zt-1)}(D,D.l_desc.max_code+1,D.d_desc.max_code+1,pt+1),Tt(D,D.dyn_ltree,D.dyn_dtree)),Mt(D),at&&Rt(D)},n._tr_tally=function(D,N,nt){return D.pending_buf[D.d_buf+2*D.last_lit]=N>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&N,D.pending_buf[D.l_buf+D.last_lit]=255&nt,D.last_lit++,N===0?D.dyn_ltree[2*nt]++:(D.matches++,N--,D.dyn_ltree[2*(d[nt]+g+1)]++,D.dyn_dtree[2*G(N)]++),D.last_lit===D.lit_bufsize-1},n._tr_align=function(D){ft(D,2,3),rt(D,I,X),function(N){N.bi_valid===16?(mt(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)}(D)}},{"../utils/common":41}],53:[function(a,C,n){C.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,C,n){(function(r){(function(s,h){if(!s.setImmediate){var f,m,b,g,T=1,y={},M=!1,p=s.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(s);v=v&&v.setTimeout?v:s,f={}.toString.call(s.process)==="[object process]"?function(Z){process.nextTick(function(){P(Z)})}:function(){if(s.postMessage&&!s.importScripts){var Z=!0,S=s.onmessage;return s.onmessage=function(){Z=!1},s.postMessage("","*"),s.onmessage=S,Z}}()?(g="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",I,!1):s.attachEvent("onmessage",I),function(Z){s.postMessage(g+Z,"*")}):s.MessageChannel?((b=new MessageChannel).port1.onmessage=function(Z){P(Z.data)},function(Z){b.port2.postMessage(Z)}):p&&"onreadystatechange"in p.createElement("script")?(m=p.documentElement,function(Z){var S=p.createElement("script");S.onreadystatechange=function(){P(Z),S.onreadystatechange=null,m.removeChild(S),S=null},m.appendChild(S)}):function(Z){setTimeout(P,0,Z)},v.setImmediate=function(Z){typeof Z!="function"&&(Z=new Function(""+Z));for(var S=new Array(arguments.length-1),V=0;V<S.length;V++)S[V]=arguments[V+1];var F={callback:Z,args:S};return y[T]=F,f(T),T++},v.clearImmediate=E}function E(Z){delete y[Z]}function P(Z){if(M)setTimeout(P,0,Z);else{var S=y[Z];if(S){M=!0;try{(function(V){var F=V.callback,Y=V.args;switch(Y.length){case 0:F();break;case 1:F(Y[0]);break;case 2:F(Y[0],Y[1]);break;case 3:F(Y[0],Y[1],Y[2]);break;default:F.apply(h,Y)}})(S)}finally{E(Z),M=!1}}}}function I(Z){Z.source===s&&typeof Z.data=="string"&&Z.data.indexOf(g)===0&&P(+Z.data.slice(g.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Ci<"u"?Ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Mo)),Mo.exports}var ih=eh();const nh=Qo(ih);var tr={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var rh=tr.exports,Ps;function oh(){return Ps||(Ps=1,function(c,x){(function(){var a,C="4.15.0",n=200,r="Expected a function",s="__lodash_hash_undefined__",h=1,f=2,m=9007199254740991,b="[object Arguments]",g="[object Array]",T="[object Boolean]",y="[object Date]",M="[object Error]",p="[object Function]",v="[object GeneratorFunction]",E="[object Map]",P="[object Number]",I="[object Object]",Z="[object Promise]",S="[object RegExp]",V="[object Set]",F="[object String]",Y="[object Symbol]",R="[object WeakMap]",Q="[object ArrayBuffer]",X="[object DataView]",O="[object Float32Array]",U="[object Float64Array]",d="[object Int8Array]",H="[object Int16Array]",st="[object Int32Array]",tt="[object Uint8Array]",ot="[object Uint8ClampedArray]",lt="[object Uint16Array]",it="[object Uint32Array]",W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,mt=/^\./,ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,wt=/\\(\\)?/g,Ut=/\w*$/,Mt=/^\[object .+?Constructor\]$/,Rt=/^(?:0|[1-9]\d*)$/,bt={};bt[O]=bt[U]=bt[d]=bt[H]=bt[st]=bt[tt]=bt[ot]=bt[lt]=bt[it]=!0,bt[b]=bt[g]=bt[Q]=bt[T]=bt[X]=bt[y]=bt[M]=bt[p]=bt[E]=bt[P]=bt[I]=bt[S]=bt[V]=bt[F]=bt[R]=!1;var yt={};yt[b]=yt[g]=yt[Q]=yt[X]=yt[T]=yt[y]=yt[O]=yt[U]=yt[d]=yt[H]=yt[st]=yt[E]=yt[P]=yt[I]=yt[S]=yt[V]=yt[F]=yt[Y]=yt[tt]=yt[ot]=yt[lt]=yt[it]=!0,yt[M]=yt[p]=yt[R]=!1;var Tt=typeof Ci=="object"&&Ci&&Ci.Object===Object&&Ci,Dt=typeof self=="object"&&self&&self.Object===Object&&self,_=Tt||Dt||Function("return this")(),et=x&&!x.nodeType&&x,K=et&&!0&&c&&!c.nodeType&&c,A=K&&K.exports===et,D=A&&Tt.process,N=function(){try{return D&&D.binding("util")}catch{}}(),nt=N&&N.isTypedArray;function at(l,k){return l.set(k[0],k[1]),l}function j(l,k){return l.add(k),l}function ut(l,k,z){switch(z.length){case 0:return l.call(k);case 1:return l.call(k,z[0]);case 2:return l.call(k,z[0],z[1]);case 3:return l.call(k,z[0],z[1],z[2])}return l.apply(k,z)}function pt(l,k){for(var z=-1,J=l?l.length:0;++z<J&&k(l[z],z,l)!==!1;);return l}function ct(l,k){for(var z=-1,J=k.length,_t=l.length;++z<J;)l[_t+z]=k[z];return l}function Lt(l,k,z,J){for(var _t=-1,dt=l?l.length:0;++_t<dt;)z=k(z,l[_t],_t,l);return z}function Zt(l,k){for(var z=-1,J=l?l.length:0;++z<J;)if(k(l[z],z,l))return!0;return!1}function xt(l){return function(k){return k==null?a:k[l]}}function Xt(l,k){for(var z=-1,J=Array(l);++z<l;)J[z]=k(z);return J}function fe(l){return function(k){return l(k)}}function ie(l,k){return l==null?a:l[k]}function se(l){var k=!1;if(l!=null&&typeof l.toString!="function")try{k=!!(l+"")}catch{}return k}function Ht(l){var k=-1,z=Array(l.size);return l.forEach(function(J,_t){z[++k]=[_t,J]}),z}function ae(l,k){return function(z){return l(k(z))}}function Jt(l){var k=-1,z=Array(l.size);return l.forEach(function(J){z[++k]=J}),z}var le=Array.prototype,ke=Function.prototype,Ie=Object.prototype,ze=_["__core-js_shared__"],qe=function(){var l=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Ce=ke.toString,Yt=Ie.hasOwnProperty,Qe=Ce.call(Object),Be=Ie.toString,Mn=RegExp("^"+Ce.call(Yt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ur=A?_.Buffer:a,cr=_.Symbol,$i=_.Uint8Array,Ji=ae(Object.getPrototypeOf,Object),ho=Object.create,fr=Ie.propertyIsEnumerable,uo=le.splice,dr=Object.getOwnPropertySymbols,Re=ur?ur.isBuffer:a,kt=ae(Object.keys,Object),Sn=Math.max,Qi=ci(_,"DataView"),wi=ci(_,"Map"),tn=ci(_,"Promise"),zi=ci(_,"Set"),en=ci(_,"WeakMap"),Ne=ci(Object,"create"),_r=!fr.call({valueOf:1},"valueOf"),co=di(Qi),fo=di(wi),_o=di(tn),po=di(zi),pr=di(en),nn=cr?cr.prototype:a,ti=nn?nn.valueOf:a,mr=nn?nn.toString:a;function It(){}function ai(l){var k=-1,z=l?l.length:0;for(this.clear();++k<z;){var J=l[k];this.set(J[0],J[1])}}function mo(){this.__data__=Ne?Ne(null):{}}function go(l){return this.has(l)&&delete this.__data__[l]}function Cn(l){var k=this.__data__;if(Ne){var z=k[l];return z===s?a:z}return Yt.call(k,l)?k[l]:a}function Bi(l){var k=this.__data__;return Ne?k[l]!==a:Yt.call(k,l)}function gr(l,k){var z=this.__data__;return z[l]=Ne&&k===a?s:k,this}ai.prototype.clear=mo,ai.prototype.delete=go,ai.prototype.get=Cn,ai.prototype.has=Bi,ai.prototype.set=gr;function Ze(l){var k=-1,z=l?l.length:0;for(this.clear();++k<z;){var J=l[k];this.set(J[0],J[1])}}function Ri(){this.__data__=[]}function Ft(l){var k=this.__data__,z=hi(k,l);if(z<0)return!1;var J=k.length-1;return z==J?k.pop():uo.call(k,z,1),!0}function $t(l){var k=this.__data__,z=hi(k,l);return z<0?a:k[z][1]}function rn(l){return hi(this.__data__,l)>-1}function bi(l,k){var z=this.__data__,J=hi(z,l);return J<0?z.push([l,k]):z[J][1]=k,this}Ze.prototype.clear=Ri,Ze.prototype.delete=Ft,Ze.prototype.get=$t,Ze.prototype.has=rn,Ze.prototype.set=bi;function ve(l){var k=-1,z=l?l.length:0;for(this.clear();++k<z;){var J=l[k];this.set(J[0],J[1])}}function On(){this.__data__={hash:new ai,map:new(wi||Ze),string:new ai}}function Ot(l){return hn(this,l).delete(l)}function Qt(l){return hn(this,l).get(l)}function Dn(l){return hn(this,l).has(l)}function on(l,k){return hn(this,l).set(l,k),this}ve.prototype.clear=On,ve.prototype.delete=Ot,ve.prototype.get=Qt,ve.prototype.has=Dn,ve.prototype.set=on;function pe(l){var k=-1,z=l?l.length:0;for(this.__data__=new ve;++k<z;)this.add(l[k])}function vo(l){return this.__data__.set(l,s),this}function sn(l){return this.__data__.has(l)}pe.prototype.add=pe.prototype.push=vo,pe.prototype.has=sn;function he(l){this.__data__=new Ze(l)}function te(){this.__data__=new Ze}function li(l){return this.__data__.delete(l)}function Ni(l){return this.__data__.get(l)}function Zi(l){return this.__data__.has(l)}function An(l,k){var z=this.__data__;if(z instanceof Ze){var J=z.__data__;if(!wi||J.length<n-1)return J.push([l,k]),this;z=this.__data__=new ve(J)}return z.set(l,k),this}he.prototype.clear=te,he.prototype.delete=li,he.prototype.get=Ni,he.prototype.has=Zi,he.prototype.set=An;function Li(l,k){var z=me(l)||we(l)?Xt(l.length,String):[],J=z.length,_t=!!J;for(var dt in l)(k||Yt.call(l,dt))&&!(_t&&(dt=="length"||ki(dt,J)))&&z.push(dt);return z}function Fi(l,k,z){(z!==a&&!Ti(l[k],z)||typeof k=="number"&&z===a&&!(k in l))&&(l[k]=z)}function an(l,k,z){var J=l[k];(!(Yt.call(l,k)&&Ti(J,z))||z===a&&!(k in l))&&(l[k]=z)}function hi(l,k){for(var z=l.length;z--;)if(Ti(l[z][0],k))return z;return-1}function In(l,k){return l&&Un(k,de(k),l)}function ei(l,k,z,J,_t,dt,gt){var Et;if(J&&(Et=dt?J(l,_t,dt,gt):J(l)),Et!==a)return Et;if(!ne(l))return l;var Ct=me(l);if(Ct){if(Et=To(l),!k)return Pr(l,Et)}else{var qt=He(l),At=qt==p||qt==v;if(_i(l))return bo(l,k);if(qt==I||qt==b||At&&!dt){if(se(l))return dt?l:{};if(Et=Dr(At?{}:l),!k)return Hn(l,In(Et,l))}else{if(!yt[qt])return dt?l:{};Et=Ar(l,qt,ei,k)}}gt||(gt=new he);var Vt=gt.get(l);if(Vt)return Vt;if(gt.set(l,Et),!Ct)var re=z?Sr(l):de(l);return pt(re||l,function(ee,ce){re&&(ce=ee,ee=l[ce]),an(Et,ce,ei(ee,k,z,J,ce,l,gt))}),Et}function ln(l){return ne(l)?ho(l):{}}var vr=Ue(yo),zn=Eo();function yo(l,k){return l&&zn(l,k,de)}function St(l,k){k=un(k,l)?[k]:Bt(k);for(var z=0,J=k.length;l!=null&&z<J;)l=l[cn(k[z++])];return z&&z==J?l:a}function Fe(l,k,z){var J=k(l);return me(l)?J:ct(J,z(l))}function Wt(l){return Be.call(l)}function yr(l,k){return l!=null&&k in Object(l)}function Ui(l,k,z,J,_t){return l===k?!0:l==null||k==null||!ne(l)&&!Ve(k)?l!==l&&k!==k:Bn(l,k,Ui,z,J,_t)}function Bn(l,k,z,J,_t,dt){var gt=me(l),Et=me(k),Ct=g,qt=g;gt||(Ct=He(l),Ct=Ct==b?I:Ct),Et||(qt=He(k),qt=qt==b?I:qt);var At=Ct==I&&!se(l),Vt=qt==I&&!se(k),re=Ct==qt;if(re&&!At)return dt||(dt=new he),gt||dn(l)?Gn(l,k,z,J,_t,dt):ni(l,k,Ct,z,J,_t,dt);if(!(_t&f)){var ee=At&&Yt.call(l,"__wrapped__"),ce=Vt&&Yt.call(k,"__wrapped__");if(ee||ce){var je=ee?l.value():l,Ye=ce?k.value():k;return dt||(dt=new he),z(je,Ye,J,_t,dt)}}return re?(dt||(dt=new he),Mr(l,k,z,J,_t,dt)):!1}function Rn(l,k,z,J){var _t=z.length,dt=_t;if(l==null)return!dt;for(l=Object(l);_t--;){var gt=z[_t];if(gt[2]?gt[1]!==l[gt[0]]:!(gt[0]in l))return!1}for(;++_t<dt;){gt=z[_t];var Et=gt[0],Ct=l[Et],qt=gt[1];if(gt[2]){if(Ct===a&&!(Et in l))return!1}else{var At=new he,Vt;if(!(Vt===a?Ui(qt,Ct,J,h|f,At):Vt))return!1}}return!0}function ui(l){if(!ne(l)||Ee(l))return!1;var k=pi(l)||se(l)?Mn:Mt;return k.test(di(l))}function Nn(l){return Ve(l)&&fn(l.length)&&!!bt[Be.call(l)]}function xi(l){return typeof l=="function"?l:l==null?_n:typeof l=="object"?me(l)?br(l[0],l[1]):wr(l):pn(l)}function ue(l){if(!Wi(l))return kt(l);var k=[];for(var z in Object(l))Yt.call(l,z)&&z!="constructor"&&k.push(z);return k}function ii(l){if(!ne(l))return jn(l);var k=Wi(l),z=[];for(var J in l)J=="constructor"&&(k||!Yt.call(l,J))||z.push(J);return z}function wr(l){var k=Cr(l);return k.length==1&&k[0][2]?Ir(k[0][0],k[0][1]):function(z){return z===l||Rn(z,l,k)}}function br(l,k){return un(l)&&Vn(k)?Ir(cn(l),k):function(z){var J=mi(z,l);return J===a&&J===k?Fr(z,l):Ui(k,J,a,h|f)}}function Lr(l,k,z,J,_t){if(l!==k){if(!(me(k)||dn(k)))var dt=ii(k);pt(dt||k,function(gt,Et){if(dt&&(Et=gt,gt=k[Et]),ne(gt))_t||(_t=new he),xr(l,k,Et,z,Lr,J,_t);else{var Ct=J?J(l[Et],gt,Et+"",l,k,_t):a;Ct===a&&(Ct=gt),Fi(l,Et,Ct)}})}}function xr(l,k,z,J,_t,dt,gt){var Et=l[z],Ct=k[z],qt=gt.get(Ct);if(qt){Fi(l,z,qt);return}var At=dt?dt(Et,Ct,z+"",l,k,gt):a,Vt=At===a;Vt&&(At=Ct,me(Ct)||dn(Ct)?me(Et)?At=Et:Kn(Et)?At=Pr(Et):(Vt=!1,At=ei(Ct,!0)):Nr(Ct)||we(Ct)?we(Et)?At=Ge(Et):!ne(Et)||J&&pi(Et)?(Vt=!1,At=ei(Ct,!0)):At=Et:Vt=!1),Vt&&(gt.set(Ct,At),_t(At,Ct,J,dt,gt),gt.delete(Ct)),Fi(l,z,At)}function Zn(l){return function(k){return St(k,l)}}function wo(l,k){return k=Sn(k===a?l.length-1:k,0),function(){for(var z=arguments,J=-1,_t=Sn(z.length-k,0),dt=Array(_t);++J<_t;)dt[J]=z[k+J];J=-1;for(var gt=Array(k+1);++J<k;)gt[J]=z[J];return gt[k]=dt,ut(l,this,gt)}}function kr(l){if(typeof l=="string")return l;if(Pi(l))return mr?mr.call(l):"";var k=l+"";return k=="0"&&1/l==-1/0?"-0":k}function Bt(l){return me(l)?l:Yn(l)}function bo(l,k){if(k)return l.slice();var z=new l.constructor(l.length);return l.copy(z),z}function Le(l){var k=new l.constructor(l.byteLength);return new $i(k).set(new $i(l)),k}function Hi(l,k){var z=k?Le(l.buffer):l.buffer;return new l.constructor(z,l.byteOffset,l.byteLength)}function Er(l,k,z){var J=k?z(Ht(l),!0):Ht(l);return Lt(J,at,new l.constructor)}function Lo(l){var k=new l.constructor(l.source,Ut.exec(l));return k.lastIndex=l.lastIndex,k}function Fn(l,k,z){var J=k?z(Jt(l),!0):Jt(l);return Lt(J,j,new l.constructor)}function xo(l){return ti?Object(ti.call(l)):{}}function Tr(l,k){var z=k?Le(l.buffer):l.buffer;return new l.constructor(z,l.byteOffset,l.length)}function Pr(l,k){var z=-1,J=l.length;for(k||(k=Array(J));++z<J;)k[z]=l[z];return k}function Un(l,k,z,J){z||(z={});for(var _t=-1,dt=k.length;++_t<dt;){var gt=k[_t],Et=a;an(z,gt,Et===a?l[gt]:Et)}return z}function Hn(l,k){return Un(l,Or(l),k)}function ko(l){return wo(function(k,z){var J=-1,_t=z.length,dt=_t>1?z[_t-1]:a,gt=_t>2?z[2]:a;for(dt=l.length>3&&typeof dt=="function"?(_t--,dt):a,gt&&fi(z[0],z[1],gt)&&(dt=_t<3?a:dt,_t=1),k=Object(k);++J<_t;){var Et=z[J];Et&&l(k,Et,J,dt)}return k})}function Ue(l,k){return function(z,J){if(z==null)return z;if(!Te(z))return l(z,J);for(var _t=z.length,dt=-1,gt=Object(z);++dt<_t&&J(gt[dt],dt,gt)!==!1;);return z}}function Eo(l){return function(k,z,J){for(var _t=-1,dt=Object(k),gt=J(k),Et=gt.length;Et--;){var Ct=gt[++_t];if(z(dt[Ct],Ct,dt)===!1)break}return k}}function Gn(l,k,z,J,_t,dt){var gt=_t&f,Et=l.length,Ct=k.length;if(Et!=Ct&&!(gt&&Ct>Et))return!1;var qt=dt.get(l);if(qt&&dt.get(k))return qt==k;var At=-1,Vt=!0,re=_t&h?new pe:a;for(dt.set(l,k),dt.set(k,l);++At<Et;){var ee=l[At],ce=k[At];if(J)var je=gt?J(ce,ee,At,k,l,dt):J(ee,ce,At,l,k,dt);if(je!==a){if(je)continue;Vt=!1;break}if(re){if(!Zt(k,function(Ye,Oe){if(!re.has(Oe)&&(ee===Ye||z(ee,Ye,J,_t,dt)))return re.add(Oe)})){Vt=!1;break}}else if(!(ee===ce||z(ee,ce,J,_t,dt))){Vt=!1;break}}return dt.delete(l),dt.delete(k),Vt}function ni(l,k,z,J,_t,dt,gt){switch(z){case X:if(l.byteLength!=k.byteLength||l.byteOffset!=k.byteOffset)return!1;l=l.buffer,k=k.buffer;case Q:return!(l.byteLength!=k.byteLength||!J(new $i(l),new $i(k)));case T:case y:case P:return Ti(+l,+k);case M:return l.name==k.name&&l.message==k.message;case S:case F:return l==k+"";case E:var Et=Ht;case V:var Ct=dt&f;if(Et||(Et=Jt),l.size!=k.size&&!Ct)return!1;var qt=gt.get(l);if(qt)return qt==k;dt|=h,gt.set(l,k);var At=Gn(Et(l),Et(k),J,_t,dt,gt);return gt.delete(l),At;case Y:if(ti)return ti.call(l)==ti.call(k)}return!1}function Mr(l,k,z,J,_t,dt){var gt=_t&f,Et=de(l),Ct=Et.length,qt=de(k),At=qt.length;if(Ct!=At&&!gt)return!1;for(var Vt=Ct;Vt--;){var re=Et[Vt];if(!(gt?re in k:Yt.call(k,re)))return!1}var ee=dt.get(l);if(ee&&dt.get(k))return ee==k;var ce=!0;dt.set(l,k),dt.set(k,l);for(var je=gt;++Vt<Ct;){re=Et[Vt];var Ye=l[re],Oe=k[re];if(J)var Hr=gt?J(Oe,Ye,re,k,l,dt):J(Ye,Oe,re,l,k,dt);if(!(Hr===a?Ye===Oe||z(Ye,Oe,J,_t,dt):Hr)){ce=!1;break}je||(je=re=="constructor")}if(ce&&!je){var Ke=l.constructor,ji=k.constructor;Ke!=ji&&"constructor"in l&&"constructor"in k&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof ji=="function"&&ji instanceof ji)&&(ce=!1)}return dt.delete(l),dt.delete(k),ce}function Sr(l){return Fe(l,de,Or)}function Wn(){var l=It.iteratee||Mi;return l=l===Mi?xi:l,arguments.length?l(arguments[0],arguments[1]):l}function hn(l,k){var z=l.__data__;return Gi(k)?z[typeof k=="string"?"string":"hash"]:z.map}function Cr(l){for(var k=de(l),z=k.length;z--;){var J=k[z],_t=l[J];k[z]=[J,_t,Vn(_t)]}return k}function ci(l,k){var z=ie(l,k);return ui(z)?z:a}var Or=dr?ae(dr,Object):Vi,He=Wt;(Qi&&He(new Qi(new ArrayBuffer(1)))!=X||wi&&He(new wi)!=E||tn&&He(tn.resolve())!=Z||zi&&He(new zi)!=V||en&&He(new en)!=R)&&(He=function(l){var k=Be.call(l),z=k==I?l.constructor:a,J=z?di(z):a;if(J)switch(J){case co:return X;case fo:return E;case _o:return Z;case po:return V;case pr:return R}return k});function qn(l,k,z){k=un(k,l)?[k]:Bt(k);for(var J,_t=-1,gt=k.length;++_t<gt;){var dt=cn(k[_t]);if(!(J=l!=null&&z(l,dt)))break;l=l[dt]}if(J)return J;var gt=l?l.length:0;return!!gt&&fn(gt)&&ki(dt,gt)&&(me(l)||we(l))}function To(l){var k=l.length,z=l.constructor(k);return k&&typeof l[0]=="string"&&Yt.call(l,"index")&&(z.index=l.index,z.input=l.input),z}function Dr(l){return typeof l.constructor=="function"&&!Wi(l)?ln(Ji(l)):{}}function Ar(l,k,z,J){var _t=l.constructor;switch(k){case Q:return Le(l);case T:case y:return new _t(+l);case X:return Hi(l,J);case O:case U:case d:case H:case st:case tt:case ot:case lt:case it:return Tr(l,J);case E:return Er(l,J,z);case P:case F:return new _t(l);case S:return Lo(l);case V:return Fn(l,J,z);case Y:return xo(l)}}function ki(l,k){return k=k??m,!!k&&(typeof l=="number"||Rt.test(l))&&l>-1&&l%1==0&&l<k}function fi(l,k,z){if(!ne(z))return!1;var J=typeof k;return(J=="number"?Te(z)&&ki(k,z.length):J=="string"&&k in z)?Ti(z[k],l):!1}function un(l,k){if(me(l))return!1;var z=typeof l;return z=="number"||z=="symbol"||z=="boolean"||l==null||Pi(l)?!0:G.test(l)||!W.test(l)||k!=null&&l in Object(k)}function Gi(l){var k=typeof l;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?l!=="__proto__":l===null}function Ee(l){return!!qe&&qe in l}function Wi(l){var k=l&&l.constructor,z=typeof k=="function"&&k.prototype||Ie;return l===z}function Vn(l){return l===l&&!ne(l)}function Ir(l,k){return function(z){return z==null?!1:z[l]===k&&(k!==a||l in Object(z))}}function jn(l){var k=[];if(l!=null)for(var z in Object(l))k.push(z);return k}var Yn=ye(function(l){l=Zr(l);var k=[];return mt.test(l)&&k.push(""),l.replace(ft,function(z,J,_t,dt){k.push(_t?dt.replace(wt,"$1"):J||z)}),k});function cn(l){if(typeof l=="string"||Pi(l))return l;var k=l+"";return k=="0"&&1/l==-1/0?"-0":k}function di(l){if(l!=null){try{return Ce.call(l)}catch{}try{return l+""}catch{}}return""}function zr(l){for(var k=-1,z=l?l.length:0,J=0,_t=[];++k<z;){var dt=l[k];dt&&(_t[J++]=dt)}return _t}function Br(l,k){var z=me(l)?pt:vr;return z(l,Wn(k,3))}function ye(l,k){if(typeof l!="function"||k&&typeof k!="function")throw new TypeError(r);var z=function(){var J=arguments,_t=k?k.apply(this,J):J[0],dt=z.cache;if(dt.has(_t))return dt.get(_t);var gt=l.apply(this,J);return z.cache=dt.set(_t,gt),gt};return z.cache=new(ye.Cache||ve),z}ye.Cache=ve;function Ei(l){return ei(l,!1,!0)}function Ti(l,k){return l===k||l!==l&&k!==k}function we(l){return Kn(l)&&Yt.call(l,"callee")&&(!fr.call(l,"callee")||Be.call(l)==b)}var me=Array.isArray;function Te(l){return l!=null&&fn(l.length)&&!pi(l)}function Kn(l){return Ve(l)&&Te(l)}var _i=Re||gi;function Rr(l){if(Te(l)&&(me(l)||typeof l=="string"||typeof l.splice=="function"||_i(l)||we(l)))return!l.length;var k=He(l);if(k==E||k==V)return!l.size;if(_r||Wi(l))return!kt(l).length;for(var z in l)if(Yt.call(l,z))return!1;return!0}function pi(l){var k=ne(l)?Be.call(l):"";return k==p||k==v}function fn(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=m}function ne(l){var k=typeof l;return!!l&&(k=="object"||k=="function")}function Ve(l){return!!l&&typeof l=="object"}function Nr(l){if(!Ve(l)||Be.call(l)!=I||se(l))return!1;var k=Ji(l);if(k===null)return!0;var z=Yt.call(k,"constructor")&&k.constructor;return typeof z=="function"&&z instanceof z&&Ce.call(z)==Qe}function Pi(l){return typeof l=="symbol"||Ve(l)&&Be.call(l)==Y}var dn=nt?fe(nt):Nn;function Ge(l){return Un(l,qi(l))}function Zr(l){return l==null?"":kr(l)}function mi(l,k,z){var J=l==null?a:St(l,k);return J===a?z:J}function Fr(l,k){return l!=null&&qn(l,k,yr)}function de(l){return Te(l)?Li(l):ue(l)}function qi(l){return Te(l)?Li(l,!0):ii(l)}var Ur=ko(function(l,k,z){Lr(l,k,z)});function _n(l){return l}function Mi(l){return xi(typeof l=="function"?l:ei(l,!0))}function pn(l){return un(l)?xt(cn(l)):Zn(l)}function Vi(){return[]}function gi(){return!1}It.compact=zr,It.iteratee=Mi,It.keys=de,It.keysIn=qi,It.memoize=ye,It.merge=Ur,It.property=pn,It.toPlainObject=Ge,It.clone=Ei,It.eq=Ti,It.forEach=Br,It.get=mi,It.hasIn=Fr,It.identity=_n,It.isArguments=we,It.isArray=me,It.isArrayLike=Te,It.isArrayLikeObject=Kn,It.isBuffer=_i,It.isEmpty=Rr,It.isFunction=pi,It.isLength=fn,It.isObject=ne,It.isObjectLike=Ve,It.isPlainObject=Nr,It.isSymbol=Pi,It.isTypedArray=dn,It.stubArray=Vi,It.stubFalse=gi,It.toString=Zr,It.each=Br,It.VERSION=C,K&&((K.exports=It)._=It,et._=It)}).call(rh)}(tr,tr.exports)),tr.exports}var So,Ms;function sh(){if(Ms)return So;Ms=1,So=c;function c(C,n){var r=C&&C.type,s;if(r==="FeatureCollection")for(s=0;s<C.features.length;s++)c(C.features[s],n);else if(r==="GeometryCollection")for(s=0;s<C.geometries.length;s++)c(C.geometries[s],n);else if(r==="Feature")c(C.geometry,n);else if(r==="Polygon")x(C.coordinates,n);else if(r==="MultiPolygon")for(s=0;s<C.coordinates.length;s++)x(C.coordinates[s],n);return C}function x(C,n){if(C.length!==0){a(C[0],n);for(var r=1;r<C.length;r++)a(C[r],!n)}}function a(C,n){for(var r=0,s=0,h=0,f=C.length,m=f-1;h<f;m=h++){var b=(C[h][0]-C[m][0])*(C[m][1]+C[h][1]),g=r+b;s+=Math.abs(r)>=Math.abs(b)?r-g+b:b-g+r,r=g}r+s>=0!=!!n&&C.reverse()}return So}const ah=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var Co,Ss;function lh(){return Ss||(Ss=1,Co=ah),Co}var Oo,Cs;function hh(){if(Cs)return Oo;Cs=1;var c=oh(),x=sh(),a={};lh().forEach(function(s){if(s.polygon==="all")a[s.key]=!0;else{var h=s.polygon==="whitelist"?"included_values":"excluded_values",f={};s.values.forEach(function(m){f[m]=!0}),a[s.key]={},a[s.key][h]=f}});function C(s,h){return(s.version||h.version)&&s.version!==h.version?(+s.version||0)>(+h.version||0)?s:h:c.merge(s,h)}var n={};n=function(s,h,f){h=c.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:a,deduplicator:C},h);var m;return typeof XMLDocument<"u"&&s instanceof XMLDocument||typeof XMLDocument>"u"&&s.childNodes?m=g(s):m=b(s),m;function b(M){var p=new Array,v=new Array,E=new Array;function P(X){var O=c.clone(X);O.lat=X.center.lat,O.lon=X.center.lon,O.__is_center_placeholder=!0,p.push(O)}function I(X){var O=c.clone(X);O.nodes=[];function U(d,H,st){var tt={type:"node",id:"_"+O.type+"/"+O.id+"bounds"+st,lat:d,lon:H};O.nodes.push(tt.id),p.push(tt)}U(O.bounds.minlat,O.bounds.minlon,1),U(O.bounds.maxlat,O.bounds.minlon,2),U(O.bounds.maxlat,O.bounds.maxlon,3),U(O.bounds.minlat,O.bounds.maxlon,4),O.nodes.push(O.nodes[0]),O.__is_bounds_placeholder=!0,v.push(O)}function Z(X){function O(U,d,H){var st={type:"node",id:H,lat:U,lon:d};p.push(st)}c.isArray(X.nodes)||(X.nodes=X.geometry.map(function(U){return U!==null?"_anonymous@"+U.lat+"/"+U.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(U,d){U&&O(U.lat,U.lon,X.nodes[d])})}function S(X){function O(d,H,st){var tt={type:"node",id:st,lat:d,lon:H};p.push(tt)}function U(d,H){if(v.some(function(ot){return ot.type=="way"&&ot.id==H}))return;var st={type:"way",id:H,nodes:[]};function tt(ot,lt){var it={type:"node",id:"_anonymous@"+ot+"/"+lt,lat:ot,lon:lt};st.nodes.push(it.id),p.push(it)}d.forEach(function(ot){ot?tt(ot.lat,ot.lon):st.nodes.push(void 0)}),v.push(st)}X.members.forEach(function(d,H){d.type=="node"?d.lat&&O(d.lat,d.lon,d.ref):d.type=="way"&&d.geometry&&(d.ref="_fullGeom"+d.ref,U(d.geometry,d.ref))})}for(var V=0;V<M.elements.length;V++)switch(M.elements[V].type){case"node":var F=M.elements[V];p.push(F);break;case"way":var Y=c.clone(M.elements[V]);Y.nodes=c.clone(Y.nodes),v.push(Y),Y.center&&P(Y),Y.geometry?Z(Y):Y.bounds&&I(Y);break;case"relation":var R=c.clone(M.elements[V]);R.members=c.clone(R.members),E.push(R);var Q=R.members&&R.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});R.center&&P(R),Q?S(R):R.bounds&&I(R);break}return T(p,v,E)}function g(M){var p=new Array,v=new Array,E=new Array;function P(R,Q,X){R.hasAttribute(X)&&(Q[X]=R.getAttribute(X))}function I(R,Q){var X=c.clone(R);P(Q,X,"lat"),P(Q,X,"lon"),X.__is_center_placeholder=!0,p.push(X)}function Z(R,Q){var X=c.clone(R);X.nodes=[];function O(U,d,H){var st={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+H,lat:U,lon:d};X.nodes.push(st.id),p.push(st)}O(Q.getAttribute("minlat"),Q.getAttribute("minlon"),1),O(Q.getAttribute("maxlat"),Q.getAttribute("minlon"),2),O(Q.getAttribute("maxlat"),Q.getAttribute("maxlon"),3),O(Q.getAttribute("minlat"),Q.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,v.push(X)}function S(R,Q){function X(O,U,d){var H={type:"node",id:d,lat:O,lon:U};return p.push(H),H.id}c.isArray(R.nodes)||(R.nodes=[],c.each(Q,function(O,U){R.nodes.push("_anonymous@"+O.getAttribute("lat")+"/"+O.getAttribute("lon"))})),c.each(Q,function(O,U){O.getAttribute("lat")&&X(O.getAttribute("lat"),O.getAttribute("lon"),R.nodes[U])})}function V(R,Q){function X(U,d,H){var st={type:"node",id:H,lat:U,lon:d};p.push(st)}function O(U,d){if(v.some(function(tt){return tt.type=="way"&&tt.id==d}))return;var H={type:"way",id:d,nodes:[]};function st(tt,ot){var lt={type:"node",id:"_anonymous@"+tt+"/"+ot,lat:tt,lon:ot};H.nodes.push(lt.id),p.push(lt)}c.each(U,function(tt){tt.getAttribute("lat")?st(tt.getAttribute("lat"),tt.getAttribute("lon")):H.nodes.push(void 0)}),v.push(H)}c.each(Q,function(U,d){R.members[d].type=="node"?U.getAttribute("lat")&&X(U.getAttribute("lat"),U.getAttribute("lon"),R.members[d].ref):R.members[d].type=="way"&&U.getElementsByTagName("nd").length>0&&(R.members[d].ref="_fullGeom"+R.members[d].ref,O(U.getElementsByTagName("nd"),R.members[d].ref))})}c.each(M.getElementsByTagName("node"),function(R,Q){var X={};c.each(R.getElementsByTagName("tag"),function(U){X[U.getAttribute("k")]=U.getAttribute("v")});var O={type:"node"};P(R,O,"id"),P(R,O,"lat"),P(R,O,"lon"),P(R,O,"version"),P(R,O,"timestamp"),P(R,O,"changeset"),P(R,O,"uid"),P(R,O,"user"),c.isEmpty(X)||(O.tags=X),p.push(O)});var F,Y;return c.each(M.getElementsByTagName("way"),function(R,Q){var X={},O=[];c.each(R.getElementsByTagName("tag"),function(H){X[H.getAttribute("k")]=H.getAttribute("v")});var U=!1;c.each(R.getElementsByTagName("nd"),function(H,st){var tt;(tt=H.getAttribute("ref"))&&(O[st]=tt),!U&&H.getAttribute("lat")&&(U=!0)});var d={type:"way"};P(R,d,"id"),P(R,d,"version"),P(R,d,"timestamp"),P(R,d,"changeset"),P(R,d,"uid"),P(R,d,"user"),O.length>0&&(d.nodes=O),c.isEmpty(X)||(d.tags=X),(F=R.getElementsByTagName("center")[0])&&I(d,F),U?S(d,R.getElementsByTagName("nd")):(Y=R.getElementsByTagName("bounds")[0])&&Z(d,Y),v.push(d)}),c.each(M.getElementsByTagName("relation"),function(R,Q){var X={},O=[];c.each(R.getElementsByTagName("tag"),function(H){X[H.getAttribute("k")]=H.getAttribute("v")});var U=!1;c.each(R.getElementsByTagName("member"),function(H,st){O[st]={},P(H,O[st],"ref"),P(H,O[st],"role"),P(H,O[st],"type"),(!U&&O[st].type=="node"&&H.getAttribute("lat")||O[st].type=="way"&&H.getElementsByTagName("nd").length>0)&&(U=!0)});var d={type:"relation"};P(R,d,"id"),P(R,d,"version"),P(R,d,"timestamp"),P(R,d,"changeset"),P(R,d,"uid"),P(R,d,"user"),O.length>0&&(d.members=O),c.isEmpty(X)||(d.tags=X),(F=R.getElementsByTagName("center")[0])&&I(d,F),U?V(d,R.getElementsByTagName("member")):(Y=R.getElementsByTagName("bounds")[0])&&Z(d,Y),E.push(d)}),T(p,v,E)}function T(M,p,v){function E(bt,yt){if(typeof yt!="object"&&(yt={}),typeof h.uninterestingTags=="function")return!h.uninterestingTags(bt,yt);for(var Tt in bt)if(h.uninterestingTags[Tt]!==!0&&!(yt[Tt]===!0||yt[Tt]===bt[Tt]))return!0;return!1}function P(bt){var yt={timestamp:bt.timestamp,version:bt.version,changeset:bt.changeset,user:bt.user,uid:bt.uid};for(var Tt in yt)yt[Tt]===void 0&&delete yt[Tt];return yt}for(var I=new Object,Z=new Object,S=0;S<M.length;S++){var V=M[S];I[V.id]!==void 0&&(V=h.deduplicator(V,I[V.id])),I[V.id]=V,typeof V.tags<"u"&&E(V.tags)&&(Z[V.id]=!0)}for(var S=0;S<v.length;S++)if(c.isArray(v[S].members))for(var F=0;F<v[S].members.length;F++)v[S].members[F].type=="node"&&(Z[v[S].members[F].ref]=!0);for(var Y=new Object,R=new Object,S=0;S<p.length;S++){var Q=p[S];if(Y[Q.id]&&(Q=h.deduplicator(Q,Y[Q.id])),Y[Q.id]=Q,c.isArray(Q.nodes))for(var F=0;F<Q.nodes.length;F++)typeof Q.nodes[F]!="object"&&(R[Q.nodes[F]]=!0,Q.nodes[F]=I[Q.nodes[F]])}var X=new Array;for(var O in I){var V=I[O];(!R[O]||Z[O])&&X.push(V)}for(var U=new Array,S=0;S<v.length;S++){var d=v[S];U[d.id]&&(d=h.deduplicator(d,U[d.id])),U[d.id]=d}var H={node:{},way:{},relation:{}};for(var O in U){var d=U[O];if(!c.isArray(d.members)){h.verbose&&console.warn("Relation",d.type+"/"+d.id,"ignored because it has no members");continue}for(var F=0;F<d.members.length;F++){var st=d.members[F].type,tt=d.members[F].ref;if(typeof tt!="number"&&(tt=tt.replace("_fullGeom","")),!H[st]){h.verbose&&console.warn("Relation",d.type+"/"+d.id,"member",st+"/"+tt,"ignored because it has an invalid type");continue}typeof H[st][tt]>"u"&&(H[st][tt]=[]),H[st][tt].push({role:d.members[F].role,rel:d.id,reltags:d.tags})}}var ot,lt=[];for(S=0;S<X.length;S++){if(typeof X[S].lon>"u"||typeof X[S].lat>"u"){h.verbose&&console.warn("POI",X[S].type+"/"+X[S].id,"ignored because it lacks coordinates");continue}var it={type:"Feature",id:X[S].type+"/"+X[S].id,properties:{type:X[S].type,id:X[S].id,tags:X[S].tags||{},relations:H.node[X[S].id]||[],meta:P(X[S])},geometry:{type:"Point",coordinates:[+X[S].lon,+X[S].lat]}};X[S].__is_center_placeholder&&(it.properties.geometry="center"),f?f(it):lt.push(it)}for(var W=[],G=[],S=0;S<v.length;S++)if(U[v[S].id]===v[S]){if(typeof v[S].tags<"u"&&(v[S].tags.type=="route"||v[S].tags.type=="waterway")){let yt=function(Tt){var Dt=!1,_;_=Tt.members.filter(function(D){return D.type==="way"}),_=_.map(function(D){var N=Y[D.ref];if(N===void 0||N.nodes===void 0){h.verbose&&console.warn("Route "+Tt.type+"/"+Tt.id,"tainted by a missing or incomplete  way",D.type+"/"+D.ref),Dt=!0;return}return{id:D.ref,role:D.role,way:N,nodes:N.nodes.filter(function(nt){return nt!==void 0?!0:(Dt=!0,h.verbose&&console.warn("Route",Tt.type+"/"+Tt.id,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),_=c.compact(_);var et;et=r(_);var K=[];if(K=c.compact(et.map(function(D){return c.compact(D.map(function(N){return[+N.lon,+N.lat]}))})),K.length==0)return h.verbose&&console.warn("Route",Tt.type+"/"+Tt.id,"contains no coordinates"),!1;var A={type:"Feature",id:Tt.type+"/"+Tt.id,properties:{type:Tt.type,id:Tt.id,tags:Tt.tags||{},relations:H[Tt.type][Tt.id]||[],meta:P(Tt)},geometry:{type:K.length===1?"LineString":"MultiLineString",coordinates:K.length===1?K[0]:K}};return Dt&&(h.verbose&&console.warn("Route",Tt.type+"/"+Tt.id,"is tainted"),A.properties.tainted=!0),A};var Mt=yt;if(!c.isArray(v[S].members)){h.verbose&&console.warn("Route",v[S].type+"/"+v[S].id,"ignored because it has no members");continue}if(v[S].members.forEach(function(Tt){Y[Tt.ref]&&!E(Y[Tt.ref].tags)&&(Y[Tt.ref].is_skippablerelationmember=!0)}),it=yt(v[S]),it===!1){h.verbose&&console.warn("Route relation",v[S].type+"/"+v[S].id,"ignored because it has invalid geometry");continue}f?f(x(it)):G.push(it)}if(typeof v[S].tags<"u"&&(v[S].tags.type=="multipolygon"||v[S].tags.type=="boundary")){let Tt=function(Dt,_){var et=!1,K=ft?"way":"relation",A=typeof Dt.id=="number"?Dt.id:+Dt.id.replace("_fullGeom",""),D;D=_.members.filter(function(xt){return xt.type==="way"}),D=D.map(function(xt){var Xt=Y[xt.ref];if(Xt===void 0||Xt.nodes===void 0){h.verbose&&console.warn("Multipolygon",K+"/"+A,"tainted by a missing or incomplete way",xt.type+"/"+xt.ref),et=!0;return}return{id:xt.ref,role:xt.role||"outer",way:Xt,nodes:Xt.nodes.filter(function(fe){return fe!==void 0?!0:(et=!0,h.verbose&&console.warn("Multipolygon",K+"/"+A,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),D=c.compact(D);var N,nt;N=r(D.filter(function(xt){return xt.role==="outer"})),nt=r(D.filter(function(xt){return xt.role==="inner"}));var at;function j(xt){var Xt=function(ae,Jt){for(var le=0;le<Jt.length;le++)if(ie(Jt[le],ae))return!0;return!1},fe=function(ae){return ae.map(function(Jt){return[+Jt.lat,+Jt.lon]})},ie=function(ae,Jt){for(var le=ae[0],ke=ae[1],Ie=!1,ze=0,qe=Jt.length-1;ze<Jt.length;qe=ze++){var Ce=Jt[ze][0],Yt=Jt[ze][1],Qe=Jt[qe][0],Be=Jt[qe][1],Mn=Yt>ke!=Be>ke&&le<(Qe-Ce)*(ke-Yt)/(Be-Yt)+Ce;Mn&&(Ie=!Ie)}return Ie},se,Ht;for(xt=fe(xt),se=0;se<N.length;se++)if(Ht=fe(N[se]),Xt(Ht,xt))return se}at=N.map(function(xt){return[xt]});for(var ut=0;ut<nt.length;ut++){var pt=j(nt[ut]);pt!==void 0?at[pt].push(nt[ut]):h.verbose&&console.warn("Multipolygon",K+"/"+A,"contains an inner ring with no containing outer")}var ct=[];if(ct=c.compact(at.map(function(xt){var Xt=c.compact(xt.map(function(fe){if(fe.length<4){h.verbose&&console.warn("Multipolygon",K+"/"+A,"contains a ring with less than four nodes");return}return c.compact(fe.map(function(ie){return[+ie.lon,+ie.lat]}))}));if(Xt.length==0){h.verbose&&console.warn("Multipolygon",K+"/"+A,"contains an empty ring cluster");return}return Xt})),ct.length==0)return h.verbose&&console.warn("Multipolygon",K+"/"+A,"contains no coordinates"),!1;var Lt="MultiPolygon";ct.length===1&&(Lt="Polygon",ct=ct[0]);var Zt={type:"Feature",id:Dt.type+"/"+A,properties:{type:Dt.type,id:A,tags:Dt.tags||{},relations:H[Dt.type][Dt.id]||[],meta:P(Dt)},geometry:{type:Lt,coordinates:ct}};return et&&(h.verbose&&console.warn("Multipolygon",K+"/"+A,"is tainted"),Zt.properties.tainted=!0),Zt};var Rt=Tt;if(!c.isArray(v[S].members)){h.verbose&&console.warn("Multipolygon",v[S].type+"/"+v[S].id,"ignored because it has no members");continue}for(var mt=0,F=0;F<v[S].members.length;F++)v[S].members[F].role=="outer"?mt++:h.verbose&&v[S].members[F].role!="inner"&&console.warn("Multipolygon",v[S].type+"/"+v[S].id,"member",v[S].members[F].type+"/"+v[S].members[F].ref,'ignored because it has an invalid role: "'+v[S].members[F].role+'"');if(v[S].members.forEach(function(Dt){Y[Dt.ref]&&(Dt.role==="outer"&&!E(Y[Dt.ref].tags,v[S].tags)&&(Y[Dt.ref].is_skippablerelationmember=!0),Dt.role==="inner"&&!E(Y[Dt.ref].tags)&&(Y[Dt.ref].is_skippablerelationmember=!0))}),mt==0){h.verbose&&console.warn("Multipolygon relation",v[S].type+"/"+v[S].id,"ignored because it has no outer ways");continue}var ft=!1;mt==1&&!E(v[S].tags,{type:!0})&&(ft=!0);var it=null;if(!ft)it=Tt(v[S],v[S]);else{var rt=v[S].members.filter(function(Dt){return Dt.role==="outer"})[0];if(rt=Y[rt.ref],rt===void 0){h.verbose&&console.warn("Multipolygon relation",v[S].type+"/"+v[S].id,"ignored because outer way",rt.type+"/"+rt.ref,"is missing");continue}rt.is_skippablerelationmember=!0,it=Tt(rt,v[S])}if(it===!1){h.verbose&&console.warn("Multipolygon relation",v[S].type+"/"+v[S].id,"ignored because it has invalid geometry");continue}f?f(x(it)):G.push(it)}}for(var S=0;S<p.length;S++)if(Y[p[S].id]===p[S]){if(!c.isArray(p[S].nodes)){h.verbose&&console.warn("Way",p[S].type+"/"+p[S].id,"ignored because it has no nodes");continue}if(!p[S].is_skippablerelationmember){typeof p[S].id!="number"&&(p[S].id=+p[S].id.replace("_fullGeom","")),p[S].tainted=!1,p[S].hidden=!1;var wt=new Array;for(F=0;F<p[S].nodes.length;F++)typeof p[S].nodes[F]=="object"?wt.push([+p[S].nodes[F].lon,+p[S].nodes[F].lat]):(h.verbose&&console.warn("Way",p[S].type+"/"+p[S].id,"is tainted by an invalid node"),p[S].tainted=!0);if(wt.length<=1){h.verbose&&console.warn("Way",p[S].type+"/"+p[S].id,"ignored because it contains too few nodes");continue}var Ut="LineString";typeof p[S].nodes[0]<"u"&&typeof p[S].nodes[p[S].nodes.length-1]<"u"&&p[S].nodes[0].id===p[S].nodes[p[S].nodes.length-1].id&&(typeof p[S].tags<"u"&&y(p[S].tags)||p[S].__is_bounds_placeholder)&&(Ut="Polygon",wt=[wt]);var it={type:"Feature",id:p[S].type+"/"+p[S].id,properties:{type:p[S].type,id:p[S].id,tags:p[S].tags||{},relations:H.way[p[S].id]||[],meta:P(p[S])},geometry:{type:Ut,coordinates:wt}};p[S].tainted&&(h.verbose&&console.warn("Way",p[S].type+"/"+p[S].id,"is tainted"),it.properties.tainted=!0),p[S].__is_bounds_placeholder&&(it.properties.geometry="bounds"),f?f(x(it)):Ut=="LineString"?W.push(it):G.push(it)}}return f?!0:(ot={type:"FeatureCollection",features:[]},ot.features=ot.features.concat(G),ot.features=ot.features.concat(W),ot.features=ot.features.concat(lt),h.flatProperties&&ot.features.forEach(function(bt){bt.properties=c.merge(bt.properties.meta,bt.properties.tags,{id:bt.properties.type+"/"+bt.properties.id})}),ot=x(ot),ot)}function y(M){var p=h.polygonFeatures;if(typeof p=="function")return p(M);if(M.area==="no")return!1;for(var v in M){var E=M[v],P=p[v];if(!(typeof P>"u")&&E!=="no"&&(P===!0||P.included_values&&P.included_values[E]===!0||P.excluded_values&&P.excluded_values[E]!==!0))return!0}return!1}};function r(s){for(var h=function(E){return E[0]},f=function(E){return E[E.length-1]},m=function(E,P){return E!==void 0&&P!==void 0&&E.id===P.id},b=[],g,T,y,M,p,v;s.length;)for(g=s.pop().nodes.slice(),b.push(g);s.length&&!m(h(g),f(g));){for(T=h(g),y=f(g),M=0;M<s.length;M++)if(v=s[M].nodes,m(y,h(v))){p=g.push,v=v.slice(1);break}else if(m(y,f(v))){p=g.push,v=v.slice(0,-1).reverse();break}else if(m(T,f(v))){p=g.unshift,v=v.slice(0,-1);break}else if(m(T,h(v))){p=g.unshift,v=v.slice(1).reverse();break}else v=p=null;if(!v)break;s.splice(M,1),p.apply(g,v)}return b}return n.toGeojson=n,Oo=n,Oo}var uh=hh();const ch=Qo(uh);var fh=Pn('<p class="svelte-1tmczmq">The selected area is too large. Please reduce the area.</p>'),dh=Pn('<div class="svelte-1tmczmq"><!> <button class="svelte-1tmczmq">Download Data</button></div>');function _h(c,x){ao(x,!1);let a=nr(x,"area",8),C=nr(x,"latlngs",8),n=nr(x,"selectedLayer",8);const r=5e7;let s=er(!1);const h=()=>{ge(s,a()<=r)},f=v=>{const E=L.latLngBounds(v);return[E.getSouthWest(),E.getNorthEast()]},m=async()=>{if(!C())return null;const[v,E]=f(C()),P="https://overpass-api.de/api/interpreter",I=`
            [out:json];
            (
                way["building"](${v.lat},${v.lng},${E.lat},${E.lng});
                relation["building"](${v.lat},${v.lng},${E.lat},${E.lng});
            );
            out body;
            >;
            out skel qt;
        `,Z=await fetch(P,{method:"POST",body:I,headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!Z.ok)return alert("Failed to fetch GeoJSON data."),null;const S=await Z.json();return ch(S)},b=async()=>{if(!C()||!n())return null;const[v,E]=f(C()),P=256,I=17,Z=(H,st,tt)=>{const ot=Math.pow(2,tt),lt=Math.floor((st+180)/360*ot),it=Math.floor((1-Math.log(Math.tan(H*Math.PI/180)+1/Math.cos(H*Math.PI/180))/Math.PI)/2*ot);return{x:lt,y:it}},S=Z(v.lat,v.lng,I),V=Z(E.lat,E.lng,I),F={x:Math.min(S.x,V.x),y:Math.min(S.y,V.y)},Y={x:Math.max(S.x,V.x),y:Math.max(S.y,V.y)},R=Y.x-F.x+1,Q=Y.y-F.y+1;if(console.log("Tile counts:",{tileCountX:R,tileCountY:Q}),R<=0||Q<=0)return console.error("Invalid tile counts:",{tileCountX:R,tileCountY:Q}),null;const X=document.createElement("canvas"),O=X.getContext("2d");X.width=R*P,X.height=Q*P;const U=[];for(let H=F.x;H<=Y.x;H++)for(let st=F.y;st<=Y.y;st++){const tt=n().value.replace("{z}",I).replace("{x}",H).replace("{y}",st);U.push({url:tt,x:H-F.x,y:st-F.y})}return(await Promise.all(U.map(H=>fetch(H.url).then(st=>{if(!st.ok)throw new Error(`Failed to fetch tile: ${H.url}`);return st.blob()}).then(st=>createImageBitmap(st)).then(st=>({img:st,x:H.x,y:H.y}))))).forEach(({img:H,x:st,y:tt})=>{const ot=st*P,lt=tt*P;O.drawImage(H,ot,lt,P,P)}),X},g=async()=>{if(!Gt(s)){alert("The area is too large or the zoom level is too low.");return}console.log("Handle Download");const v=new nh,E=await m();E&&v.file("buildings.geojson",JSON.stringify(E,null,2));const P=await b();if(P){const V=await new Promise(F=>P.toBlob(F,"image/png"));v.file("map-tiles.png",V)}const I=await v.generateAsync({type:"blob"}),Z=URL.createObjectURL(I),S=document.createElement("a");S.href=Z,S.download="vantage-scene-setup.zip",S.click(),URL.revokeObjectURL(Z)};qs(()=>$o(a()),()=>{a()&&h()}),Vs(),Jo();var T=dh(),y=Kr(T);{var M=v=>{var E=fh();Ln(v,E)};Ol(y,v=>{Gt(s)||v(M)})}var p=Xr(y,2);js(()=>p.disabled=!Gt(s)),sa("click",p,g),Ln(c,T),lo()}var ph=Pn("<div><!> <!> <!></div>");function mh(c){let x=er(null),a=er(),C=er([]);const n=m=>{ge(a,m.detail.layer)};var r=ph(),s=Kr(r);Yl(s,{get selectedLayer(){return Gt(a)},set selectedLayer(m){ge(a,m)},$$events:{change:n},$$legacy:!0});var h=Xr(s,2);th(h,{get selectedLayer(){return Gt(a)},$$events:{shapeDrawn:m=>{const b=m.detail.layer;ge(x,L.GeometryUtil.geodesicArea(b._latlngs[0])),ge(C,b._latlngs[0])}}});var f=Xr(h,2);_h(f,{get area(){return Gt(x)},get latlngs(){return Gt(C)},get selectedLayer(){return Gt(a)}}),Ln(c,r)}Ml(mh,{target:document.getElementById("app")});
