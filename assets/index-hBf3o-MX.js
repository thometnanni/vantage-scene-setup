var Sl=Object.defineProperty;var Ml=(a,u,o)=>u in a?Sl(a,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[u]=o;var Pt=(a,u,o)=>Ml(a,typeof u!="symbol"?u+"":u,o);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&f(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();const na=!1;var No=Array.isArray,Cl=Array.prototype.indexOf,Ss=Array.from,Ol=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,Al=Object.getOwnPropertyDescriptors,Il=Object.prototype,Dl=Array.prototype,Ca=Object.getPrototypeOf;const Gn=()=>{};function zl(a){return a()}function ms(a){for(var u=0;u<a.length;u++)a[u]()}const si=2,Oa=4,Mr=8,Ms=16,ai=32,Cr=64,gs=128,vn=256,ko=512,Ie=1024,Yi=2048,Or=4096,mi=8192,Wn=16384,Rl=32768,Cs=65536,Bl=1<<17,Nl=1<<19,Aa=1<<20,_n=Symbol("$state"),Zl=Symbol("legacy props");function Ia(a){return a===this.v}function Da(a,u){return a!=a?u==u:a!==u||a!==null&&typeof a=="object"||typeof a=="function"}function Os(a){return!Da(a,this.v)}function Fl(a){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ul(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gl(a){throw new Error("https://svelte.dev/e/effect_orphan")}function Hl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Wl(a){throw new Error("https://svelte.dev/e/props_invalid_value")}function ql(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Vl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function jl(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Yl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let qn=!1,Kl=!1;function Xl(){qn=!0}const $l=1,Jl=2,Ql=16,th=1,eh=2,ih=4,nh=8,rh=16,oh=2,Oe=Symbol();function Ne(a,u){var o={f:0,v:a,reactions:null,equals:Ia,rv:0,wv:0};return o}function Zo(a,u=!1){var f;const o=Ne(a);return u||(o.equals=Os),qn&&$t!==null&&$t.l!==null&&((f=$t.l).s??(f.s=[])).push(o),o}function mn(a,u=!1){return sh(Zo(a,u))}function sh(a){return Kt!==null&&Kt.f&si&&(gi===null?gh([a]):gi.push(a)),a}function te(a,u){return Kt!==null&&Ns()&&Kt.f&(si|Ms)&&(gi===null||!gi.includes(a))&&Yl(),za(a,u)}function za(a,u){return a.equals(u)||(a.v,a.v=u,a.wv=nl(),Ra(a,Yi),Ns()&&Gt!==null&&Gt.f&Ie&&!(Gt.f&ai)&&(Ee!==null&&Ee.includes(a)?(li(Gt,Yi),Go(Gt)):ji===null?vh([a]):ji.push(a))),u}function Ra(a,u){var o=a.reactions;if(o!==null)for(var f=Ns(),i=o.length,n=0;n<i;n++){var s=o[n],h=s.f;h&Yi||!f&&s===Gt||(li(s,u),h&(Ie|vn)&&(h&si?Ra(s,Or):Go(s)))}}let ah=!1;function Fn(a,u=null,o){if(typeof a!="object"||a===null||_n in a)return a;const f=Ca(a);if(f!==Il&&f!==Dl)return a;var i=new Map,n=No(a),s=Ne(0);n&&i.set("length",Ne(a.length));var h;return new Proxy(a,{defineProperty(p,_,E){(!("value"in E)||E.configurable===!1||E.enumerable===!1||E.writable===!1)&&ql();var y=i.get(_);return y===void 0?(y=Ne(E.value),i.set(_,y)):te(y,Fn(E.value,h)),!0},deleteProperty(p,_){var E=i.get(_);if(E===void 0)_ in p&&i.set(_,Ne(Oe));else{if(n&&typeof _=="string"){var y=i.get("length"),M=Number(_);Number.isInteger(M)&&M<y.v&&te(y,M)}te(E,Oe),ra(s)}return!0},get(p,_,E){var D;if(_===_n)return a;var y=i.get(_),M=_ in p;if(y===void 0&&(!M||(D=Un(p,_))!=null&&D.writable)&&(y=Ne(Fn(M?p[_]:Oe,h)),i.set(_,y)),y!==void 0){var k=Ct(y);return k===Oe?void 0:k}return Reflect.get(p,_,E)},getOwnPropertyDescriptor(p,_){var E=Reflect.getOwnPropertyDescriptor(p,_);if(E&&"value"in E){var y=i.get(_);y&&(E.value=Ct(y))}else if(E===void 0){var M=i.get(_),k=M==null?void 0:M.v;if(M!==void 0&&k!==Oe)return{enumerable:!0,configurable:!0,value:k,writable:!0}}return E},has(p,_){var k;if(_===_n)return!0;var E=i.get(_),y=E!==void 0&&E.v!==Oe||Reflect.has(p,_);if(E!==void 0||Gt!==null&&(!y||(k=Un(p,_))!=null&&k.writable)){E===void 0&&(E=Ne(y?Fn(p[_],h):Oe),i.set(_,E));var M=Ct(E);if(M===Oe)return!1}return y},set(p,_,E,y){var H;var M=i.get(_),k=_ in p;if(n&&_==="length")for(var D=E;D<M.v;D+=1){var b=i.get(D+"");b!==void 0?te(b,Oe):D in p&&(b=Ne(Oe),i.set(D+"",b))}M===void 0?(!k||(H=Un(p,_))!=null&&H.writable)&&(M=Ne(void 0),te(M,Fn(E,h)),i.set(_,M)):(k=M.v!==Oe,te(M,Fn(E,h)));var S=Reflect.getOwnPropertyDescriptor(p,_);if(S!=null&&S.set&&S.set.call(y,E),!k){if(n&&typeof _=="string"){var z=i.get("length"),T=Number(_);Number.isInteger(T)&&T>=z.v&&te(z,T+1)}ra(s)}return!0},ownKeys(p){Ct(s);var _=Reflect.ownKeys(p).filter(M=>{var k=i.get(M);return k===void 0||k.v!==Oe});for(var[E,y]of i)y.v!==Oe&&!(E in p)&&_.push(E);return _},setPrototypeOf(){Vl()}})}function ra(a,u=1){te(a,a.v+u)}var oa,Ba,Na;function lh(){if(oa===void 0){oa=window;var a=Element.prototype,u=Node.prototype;Ba=Un(u,"firstChild").get,Na=Un(u,"nextSibling").get,a.__click=void 0,a.__className="",a.__attributes=null,a.__styles=null,a.__e=void 0,Text.prototype.__t=void 0}}function Za(a=""){return document.createTextNode(a)}function Fa(a){return Ba.call(a)}function As(a){return Na.call(a)}function To(a,u){return Fa(a)}function Ai(a,u=1,o=!1){let f=a;for(;u--;)f=As(f);return f}function hh(a){a.textContent=""}function Po(a){var u=si|Yi;Gt===null?u|=vn:Gt.f|=Aa;var o=Kt!==null&&Kt.f&si?Kt:null;const f={children:null,ctx:$t,deps:null,equals:Ia,f:u,fn:a,reactions:null,rv:0,v:null,wv:0,parent:o??Gt};return o!==null&&(o.children??(o.children=[])).push(f),f}function uh(a){const u=Po(a);return u.equals=Os,u}function Ua(a){var u=a.children;if(u!==null){a.children=null;for(var o=0;o<u.length;o+=1){var f=u[o];f.f&si?Is(f):Ki(f)}}}function ch(a){for(var u=a.parent;u!==null;){if(!(u.f&si))return u;u=u.parent}return null}function Ga(a){var u,o=Gt;vi(ch(a));try{Ua(a),u=rl(a)}finally{vi(o)}return u}function Ha(a){var u=Ga(a),o=(pn||a.f&vn)&&a.deps!==null?Or:Ie;li(a,o),a.equals(u)||(a.v=u,a.wv=nl())}function Is(a){Ua(a),Sr(a,0),li(a,Wn),a.v=a.children=a.deps=a.ctx=a.reactions=null}function Wa(a){Gt===null&&Kt===null&&Gl(),Kt!==null&&Kt.f&vn&&Ul(),Bs&&Fl()}function fh(a,u){var o=u.last;o===null?u.last=u.first=a:(o.next=a,a.prev=o,u.last=a)}function Vn(a,u,o,f=!0){var i=(a&Cr)!==0,n=Gt,s={ctx:$t,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:a|Yi,first:null,fn:u,last:null,next:null,parent:i?null:n,prev:null,teardown:null,transitions:null,wv:0};if(o){var h=Hn;try{sa(!0),Ar(s),s.f|=Rl}catch(E){throw Ki(s),E}finally{sa(h)}}else u!==null&&Go(s);var p=o&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Aa)===0;if(!p&&!i&&f&&(n!==null&&fh(s,n),Kt!==null&&Kt.f&si)){var _=Kt;(_.children??(_.children=[])).push(s)}return s}function qa(a){const u=Vn(Mr,null,!1);return li(u,Ie),u.teardown=a,u}function vs(a){Wa();var u=Gt!==null&&(Gt.f&ai)!==0&&$t!==null&&!$t.m;if(u){var o=$t;(o.e??(o.e=[])).push({fn:a,effect:Gt,reaction:Kt})}else{var f=Ds(a);return f}}function dh(a){return Wa(),Fo(a)}function ph(a){const u=Vn(Cr,a,!0);return(o={})=>new Promise(f=>{o.outro?So(u,()=>{Ki(u),f(void 0)}):(Ki(u),f(void 0))})}function Ds(a){return Vn(Oa,a,!1)}function yo(a,u){var o=$t,f={effect:null,ran:!1};o.l.r1.push(f),f.effect=Fo(()=>{a(),!f.ran&&(f.ran=!0,te(o.l.r2,!0),gn(u))})}function Va(){var a=$t;Fo(()=>{if(Ct(a.l.r2)){for(var u of a.l.r1){var o=u.effect;o.f&Ie&&li(o,Or),jn(o)&&Ar(o),u.ran=!1}a.l.r2.v=!1}})}function Fo(a){return Vn(Mr,a,!0)}function ja(a){return zs(a)}function zs(a,u=0){return Vn(Mr|Ms|u,a,!0)}function Pr(a,u=!0){return Vn(Mr|ai,a,!0,u)}function Ya(a){var u=a.teardown;if(u!==null){const o=Bs,f=Kt;aa(!0),Xi(null);try{u.call(null)}finally{aa(o),Xi(f)}}}function Ka(a){var u=a.deriveds;if(u!==null){a.deriveds=null;for(var o=0;o<u.length;o+=1)Is(u[o])}}function Xa(a,u=!1){var o=a.first;for(a.first=a.last=null;o!==null;){var f=o.next;Ki(o,u),o=f}}function _h(a){for(var u=a.first;u!==null;){var o=u.next;u.f&ai||Ki(u),u=o}}function Ki(a,u=!0){var o=!1;if((u||a.f&Nl)&&a.nodes_start!==null){for(var f=a.nodes_start,i=a.nodes_end;f!==null;){var n=f===i?null:As(f);f.remove(),f=n}o=!0}Xa(a,u&&!o),Ka(a),Sr(a,0),li(a,Wn);var s=a.transitions;if(s!==null)for(const p of s)p.stop();Ya(a);var h=a.parent;h!==null&&h.first!==null&&$a(a),a.next=a.prev=a.teardown=a.ctx=a.deps=a.fn=a.nodes_start=a.nodes_end=null}function $a(a){var u=a.parent,o=a.prev,f=a.next;o!==null&&(o.next=f),f!==null&&(f.prev=o),u!==null&&(u.first===a&&(u.first=f),u.last===a&&(u.last=o))}function So(a,u){var o=[];Rs(a,o,!0),Ja(o,()=>{Ki(a),u&&u()})}function Ja(a,u){var o=a.length;if(o>0){var f=()=>--o||u();for(var i of a)i.out(f)}else u()}function Rs(a,u,o){if(!(a.f&mi)){if(a.f^=mi,a.transitions!==null)for(const s of a.transitions)(s.is_global||o)&&u.push(s);for(var f=a.first;f!==null;){var i=f.next,n=(f.f&Cs)!==0||(f.f&ai)!==0;Rs(f,u,n?o:!1),f=i}}}function Mo(a){Qa(a,!0)}function Qa(a,u){if(a.f&mi){jn(a)&&Ar(a),a.f^=mi;for(var o=a.first;o!==null;){var f=o.next,i=(o.f&Cs)!==0||(o.f&ai)!==0;Qa(o,i?u:!1),o=f}if(a.transitions!==null)for(const n of a.transitions)(n.is_global||u)&&n.in()}}let ys=!1,ws=[];function mh(){ys=!1;const a=ws.slice();ws=[],ms(a)}function tl(a){ys||(ys=!0,queueMicrotask(mh)),ws.push(a)}function el(a){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let wo=!1,Co=!1,Oo=null,Hn=!1,Bs=!1;function sa(a){Hn=a}function aa(a){Bs=a}let bs=[],kr=0;let Kt=null;function Xi(a){Kt=a}let Gt=null;function vi(a){Gt=a}let gi=null;function gh(a){gi=a}let Ee=null,Be=0,ji=null;function vh(a){ji=a}let il=1,Ao=0,pn=!1,$t=null;function nl(){return++il}function Ns(){return!qn||$t!==null&&$t.l===null}function jn(a){var _;var u=a.f;if(u&Yi)return!0;if(u&Or){var o=a.deps,f=(u&vn)!==0;if(o!==null){var i,n,s=(u&ko)!==0,h=f&&Gt!==null&&!pn,p=o.length;if(s||h){for(i=0;i<p;i++)n=o[i],(s||!((_=n==null?void 0:n.reactions)!=null&&_.includes(a)))&&(n.reactions??(n.reactions=[])).push(a);s&&(a.f^=ko)}for(i=0;i<p;i++)if(n=o[i],jn(n)&&Ha(n),n.wv>a.wv)return!0}(!f||Gt!==null&&!pn)&&li(a,Ie)}return!1}function yh(a,u){for(var o=u;o!==null;){if(o.f&gs)try{o.fn(a);return}catch{o.f^=gs}o=o.parent}throw wo=!1,a}function wh(a){return(a.f&Wn)===0&&(a.parent===null||(a.parent.f&gs)===0)}function Uo(a,u,o,f){if(wo){if(o===null&&(wo=!1),wh(u))throw a;return}o!==null&&(wo=!0);{yh(a,u);return}}function rl(a){var M;var u=Ee,o=Be,f=ji,i=Kt,n=pn,s=gi,h=$t,p=a.f;Ee=null,Be=0,ji=null,Kt=p&(ai|Cr)?null:a,pn=!Hn&&(p&vn)!==0,gi=null,$t=a.ctx,Ao++;try{var _=(0,a.fn)(),E=a.deps;if(Ee!==null){var y;if(Sr(a,Be),E!==null&&Be>0)for(E.length=Be+Ee.length,y=0;y<Ee.length;y++)E[Be+y]=Ee[y];else a.deps=E=Ee;if(!pn)for(y=Be;y<E.length;y++)((M=E[y]).reactions??(M.reactions=[])).push(a)}else E!==null&&Be<E.length&&(Sr(a,Be),E.length=Be);return i!==null&&Ao++,_}finally{Ee=u,Be=o,ji=f,Kt=i,pn=n,gi=s,$t=h}}function bh(a,u){let o=u.reactions;if(o!==null){var f=Cl.call(o,a);if(f!==-1){var i=o.length-1;i===0?o=u.reactions=null:(o[f]=o[i],o.pop())}}o===null&&u.f&si&&(Ee===null||!Ee.includes(u))&&(li(u,Or),u.f&(vn|ko)||(u.f^=ko),Sr(u,0))}function Sr(a,u){var o=a.deps;if(o!==null)for(var f=u;f<o.length;f++)bh(a,o[f])}function Ar(a){var u=a.f;if(!(u&Wn)){li(a,Ie);var o=Gt,f=$t;Gt=a;try{u&Ms?_h(a):Xa(a),Ka(a),Ya(a);var i=rl(a);a.teardown=typeof i=="function"?i:null,a.wv=il;var n=a.deps,s;na&&Kl&&a.f&Yi}catch(h){Uo(h,a,o,f||a.ctx)}finally{Gt=o}}}function Lh(){if(kr>1e3){kr=0;try{Hl()}catch(a){if(Oo!==null)Uo(a,Oo,null);else throw a}}kr++}function xh(a){var u=a.length;if(u!==0){Lh();var o=Hn;Hn=!0;try{for(var f=0;f<u;f++){var i=a[f];i.f&Ie||(i.f^=Ie);var n=[];ol(i,n),Eh(n)}}finally{Hn=o}}}function Eh(a){var u=a.length;if(u!==0)for(var o=0;o<u;o++){var f=a[o];if(!(f.f&(Wn|mi)))try{jn(f)&&(Ar(f),f.deps===null&&f.first===null&&f.nodes_start===null&&(f.teardown===null?$a(f):f.fn=null))}catch(i){Uo(i,f,null,f.ctx)}}}function kh(){if(Co=!1,kr>1001)return;const a=bs;bs=[],xh(a),Co||(kr=0,Oo=null)}function Go(a){Co||(Co=!0,queueMicrotask(kh)),Oo=a;for(var u=a;u.parent!==null;){u=u.parent;var o=u.f;if(o&(Cr|ai)){if(!(o&Ie))return;u.f^=Ie}}bs.push(u)}function ol(a,u){var o=a.first,f=[];t:for(;o!==null;){var i=o.f,n=(i&ai)!==0,s=n&&(i&Ie)!==0,h=o.next;if(!s&&!(i&mi))if(i&Mr){if(n)o.f^=Ie;else try{jn(o)&&Ar(o)}catch(y){Uo(y,o,null,o.ctx)}var p=o.first;if(p!==null){o=p;continue}}else i&Oa&&f.push(o);if(h===null){let y=o.parent;for(;y!==null;){if(a===y)break t;var _=y.next;if(_!==null){o=_;continue t}y=y.parent}}o=h}for(var E=0;E<f.length;E++)p=f[E],u.push(p),ol(p,u)}function Ct(a){var E;var u=a.f,o=(u&si)!==0;if(o&&u&Wn){var f=Ga(a);return Is(a),f}if(Kt!==null){gi!==null&&gi.includes(a)&&jl();var i=Kt.deps;a.rv<Ao&&(a.rv=Ao,Ee===null&&i!==null&&i[Be]===a?Be++:Ee===null?Ee=[a]:Ee.push(a),ji!==null&&Gt!==null&&Gt.f&Ie&&!(Gt.f&ai)&&ji.includes(a)&&(li(Gt,Yi),Go(Gt)))}else if(o&&a.deps===null)for(var n=a,s=n.parent,h=n;s!==null;)if(s.f&si){var p=s;h=p,s=p.parent}else{var _=s;(E=_.deriveds)!=null&&E.includes(h)||(_.deriveds??(_.deriveds=[])).push(h);break}return o&&(n=a,jn(n)&&Ha(n)),a.v}function gn(a){const u=Kt;try{return Kt=null,a()}finally{Kt=u}}const Th=-7169;function li(a,u){a.f=a.f&Th|u}function Ho(a,u=!1,o){$t={p:$t,c:null,e:null,m:!1,s:a,x:null,l:null},qn&&!u&&($t.l={s:null,u:null,r1:[],r2:Ne(!1)})}function Wo(a){const u=$t;if(u!==null){const s=u.e;if(s!==null){var o=Gt,f=Kt;u.e=null;try{for(var i=0;i<s.length;i++){var n=s[i];vi(n.effect),Xi(n.reaction),Ds(n.fn)}}finally{vi(o),Xi(f)}}$t=u.p,u.m=!0}return{}}function Zs(a){if(!(typeof a!="object"||!a||a instanceof EventTarget)){if(_n in a)Ls(a);else if(!Array.isArray(a))for(let u in a){const o=a[u];typeof o=="object"&&o&&_n in o&&Ls(o)}}}function Ls(a,u=new Set){if(typeof a=="object"&&a!==null&&!(a instanceof EventTarget)&&!u.has(a)){u.add(a),a instanceof Date&&a.getTime();for(let f in a)try{Ls(a[f],u)}catch{}const o=Ca(a);if(o!==Object.prototype&&o!==Array.prototype&&o!==Map.prototype&&o!==Set.prototype&&o!==Date.prototype){const f=Al(o);for(let i in f){const n=f[i].get;if(n)try{n.call(a)}catch{}}}}}const Ph=["touchstart","touchmove"];function Sh(a){return Ph.includes(a)}function Mh(a){var u=Kt,o=Gt;Xi(null),vi(null);try{return a()}finally{Xi(u),vi(o)}}const Ch=new Set,la=new Set;function Oh(a,u,o,f){function i(n){if(f.capture||wr.call(u,n),!n.cancelBubble)return Mh(()=>o.call(this,n))}return a.startsWith("pointer")||a.startsWith("touch")||a==="wheel"?tl(()=>{u.addEventListener(a,i,f)}):u.addEventListener(a,i,f),i}function bo(a,u,o,f,i){var n={capture:f,passive:i},s=Oh(a,u,o,n);(u===document.body||u===window||u===document)&&qa(()=>{u.removeEventListener(a,s,n)})}function wr(a){var T;var u=this,o=u.ownerDocument,f=a.type,i=((T=a.composedPath)==null?void 0:T.call(a))||[],n=i[0]||a.target,s=0,h=a.__root;if(h){var p=i.indexOf(h);if(p!==-1&&(u===document||u===window)){a.__root=u;return}var _=i.indexOf(u);if(_===-1)return;p<=_&&(s=p)}if(n=i[s]||a.target,n!==u){Ol(a,"currentTarget",{configurable:!0,get(){return n||o}});var E=Kt,y=Gt;Xi(null),vi(null);try{for(var M,k=[];n!==null;){var D=n.assignedSlot||n.parentNode||n.host||null;try{var b=n["__"+f];if(b!==void 0&&!n.disabled)if(No(b)){var[S,...z]=b;S.apply(n,[a,...z])}else b.call(n,a)}catch(H){M?k.push(H):M=H}if(a.cancelBubble||D===u||D===null)break;n=D}if(M){for(let H of k)queueMicrotask(()=>{throw H});throw M}}finally{a.__root=u,delete a.currentTarget,Xi(E),vi(y)}}}function Ah(a){var u=document.createElement("template");return u.innerHTML=a,u.content}function Ih(a,u){var o=Gt;o.nodes_start===null&&(o.nodes_start=a,o.nodes_end=u)}function Ji(a,u){var o=(u&oh)!==0,f,i=!a.startsWith("<!>");return()=>{f===void 0&&(f=Ah(i?a:"<!>"+a),f=Fa(f));var n=o?document.importNode(f,!0):f.cloneNode(!0);return Ih(n,n),n}}function qi(a,u){a!==null&&a.before(u)}function Dh(a,u){var o=u==null?"":typeof u=="object"?u+"":u;o!==(a.__t??(a.__t=a.nodeValue))&&(a.__t=o,a.nodeValue=o==null?"":o+"")}function zh(a,u){return Rh(a,u)}const Nn=new Map;function Rh(a,{target:u,anchor:o,props:f={},events:i,context:n,intro:s=!0}){lh();var h=new Set,p=y=>{for(var M=0;M<y.length;M++){var k=y[M];if(!h.has(k)){h.add(k);var D=Sh(k);u.addEventListener(k,wr,{passive:D});var b=Nn.get(k);b===void 0?(document.addEventListener(k,wr,{passive:D}),Nn.set(k,1)):Nn.set(k,b+1)}}};p(Ss(Ch)),la.add(p);var _=void 0,E=ph(()=>{var y=o??u.appendChild(Za());return Pr(()=>{if(n){Ho({});var M=$t;M.c=n}i&&(f.$$events=i),_=a(y,f)||{},n&&Wo()}),()=>{var D;for(var M of h){u.removeEventListener(M,wr);var k=Nn.get(M);--k===0?(document.removeEventListener(M,wr),Nn.delete(M)):Nn.set(M,k)}la.delete(p),y!==o&&((D=y.parentNode)==null||D.removeChild(y))}});return Bh.set(_,E),_}let Bh=new WeakMap;function hs(a,u,o=!1){var f=a,i=null,n=null,s=Oe,h=o?Cs:0,p=!1;const _=(y,M=!0)=>{p=!0,E(M,y)},E=(y,M)=>{s!==(s=y)&&(s?(i?Mo(i):M&&(i=Pr(()=>M(f))),n&&So(n,()=>{n=null})):(n?Mo(n):M&&(n=Pr(()=>M(f))),i&&So(i,()=>{i=null})))};zs(()=>{p=!1,u(_),p||E(null,null)},h)}function Nh(a,u){return u}function Zh(a,u,o,f){for(var i=[],n=u.length,s=0;s<n;s++)Rs(u[s].e,i,!0);var h=n>0&&i.length===0&&o!==null;if(h){var p=o.parentNode;hh(p),p.append(o),f.clear(),Wi(a,u[0].prev,u[n-1].next)}Ja(i,()=>{for(var _=0;_<n;_++){var E=u[_];h||(f.delete(E.k),Wi(a,E.prev,E.next)),Ki(E.e,!h)}})}function Fh(a,u,o,f,i,n=null){var s=a,h={flags:u,items:new Map,first:null};{var p=a;s=p.appendChild(Za())}var _=null,E=!1;zs(()=>{var y=o(),M=No(y)?y:y==null?[]:Ss(y),k=M.length;if(!(E&&k===0)){E=k===0;{var D=Kt;Uh(M,h,s,i,u,(D.f&mi)!==0,f)}n!==null&&(k===0?_?Mo(_):_=Pr(()=>n(s)):_!==null&&So(_,()=>{_=null}))}})}function Uh(a,u,o,f,i,n,s,h){var p=a.length,_=u.items,E=u.first,y=E,M,k=null,D=[],b=[],S,z,T,H;for(H=0;H<p;H+=1){if(S=a[H],z=s(S,H),T=_.get(z),T===void 0){var $=y?y.e.nodes_start:o;k=Hh($,u,k,k===null?u.first:k.next,S,z,H,f,i),_.set(z,k),D=[],b=[],y=k.next;continue}if(Gh(T,S,H),T.e.f&mi&&Mo(T.e),T!==y){if(M!==void 0&&M.has(T)){if(D.length<b.length){var B=b[0],Q;k=B.prev;var X=D[0],x=D[D.length-1];for(Q=0;Q<D.length;Q+=1)ha(D[Q],B,o);for(Q=0;Q<b.length;Q+=1)M.delete(b[Q]);Wi(u,X.prev,x.next),Wi(u,k,X),Wi(u,x,B),y=B,k=x,H-=1,D=[],b=[]}else M.delete(T),ha(T,y,o),Wi(u,T.prev,T.next),Wi(u,T,k===null?u.first:k.next),Wi(u,k,T),k=T;continue}for(D=[],b=[];y!==null&&y.k!==z;)(n||!(y.e.f&mi))&&(M??(M=new Set)).add(y),b.push(y),y=y.next;if(y===null)continue;T=y}D.push(T),k=T,y=T.next}if(y!==null||M!==void 0){for(var w=M===void 0?[]:Ss(M);y!==null;)(n||!(y.e.f&mi))&&w.push(y),y=y.next;var P=w.length;if(P>0){var R=p===0?o:null;Zh(u,w,R,_)}}Gt.first=u.first&&u.first.e,Gt.last=k&&k.e}function Gh(a,u,o,f){za(a.v,u),a.i=o}function Hh(a,u,o,f,i,n,s,h,p,_){var E=(p&$l)!==0,y=(p&Ql)===0,M=E?y?Zo(i):Ne(i):i,k=p&Jl?Ne(s):s,D={i:k,v:M,k:n,a:null,e:null,prev:o,next:f};try{return D.e=Pr(()=>h(a,M,k),ah),D.e.prev=o&&o.e,D.e.next=f&&f.e,o===null?u.first=D:(o.next=D,o.e.next=D.e),f!==null&&(f.prev=D,f.e.prev=D.e),D}finally{}}function ha(a,u,o){for(var f=a.next?a.next.e.nodes_start:o,i=u?u.e.nodes_start:o,n=a.e.nodes_start;n!==f;){var s=As(n);i.before(n),n=s}}function Wi(a,u,o){u===null?a.first=o:(u.next=o,u.e.next=o&&o.e),o!==null&&(o.prev=u,o.e.prev=u&&u.e)}function Wh(a,u){u?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}function ua(a,u){return a===u||(a==null?void 0:a[_n])===u}function qh(a={},u,o,f){return Ds(()=>{var i,n;return Fo(()=>{i=n,n=[],gn(()=>{a!==o(...n)&&(u(a,...n),i&&ua(o(...i),a)&&u(null,...i))})}),()=>{tl(()=>{n&&ua(o(...n),a)&&u(null,...n)})}}),a}function Fs(a=!1){const u=$t,o=u.l.u;if(!o)return;let f=()=>Zs(u.s);if(a){let i=0,n={};const s=Po(()=>{let h=!1;const p=u.s;for(const _ in p)p[_]!==n[_]&&(n[_]=p[_],h=!0);return h&&i++,i});f=()=>Ct(s)}o.b.length&&dh(()=>{ca(u,f),ms(o.b)}),vs(()=>{const i=gn(()=>o.m.map(zl));return()=>{for(const n of i)typeof n=="function"&&n()}}),o.a.length&&vs(()=>{ca(u,f),ms(o.a)})}function ca(a,u){if(a.l.s)for(const o of a.l.s)Ct(o);u()}function Vh(a){var u=Ne(0);return function(){return arguments.length===1?(te(u,Ct(u)+1),arguments[0]):(Ct(u),a())}}function jh(a,u,o){if(a==null)return u(void 0),Gn;const f=gn(()=>a.subscribe(u,o));return f.unsubscribe?()=>f.unsubscribe():f}let _o=!1;function fa(a,u,o){const f=o[u]??(o[u]={store:null,source:Zo(void 0),unsubscribe:Gn});if(f.store!==a)if(f.unsubscribe(),f.store=a??null,a==null)f.source.v=void 0,f.unsubscribe=Gn;else{var i=!0;f.unsubscribe=jh(a,n=>{i?f.source.v=n:te(f.source,n)}),i=!1}return Ct(f.source)}function Yh(a,u){return a.set(u),u}function sl(){const a={};return qa(()=>{for(var u in a)a[u].unsubscribe()}),a}function Kh(a){var u=_o;try{return _o=!1,[a(),_o]}finally{_o=u}}function da(a){for(var u=Gt,o=Gt;u!==null&&!(u.f&(ai|Cr));)u=u.parent;try{return vi(u),a()}finally{vi(o)}}function Tr(a,u,o,f){var X;var i=(o&th)!==0,n=!qn||(o&eh)!==0,s=(o&nh)!==0,h=(o&rh)!==0,p=!1,_;s?[_,p]=Kh(()=>a[u]):_=a[u];var E=_n in a||Zl in a,y=s&&(((X=Un(a,u))==null?void 0:X.set)??(E&&u in a&&(x=>a[u]=x)))||void 0,M=f,k=!0,D=!1,b=()=>(D=!0,k&&(k=!1,h?M=gn(f):M=f),M);_===void 0&&f!==void 0&&(y&&n&&Wl(),_=b(),y&&y(_));var S;if(n)S=()=>{var x=a[u];return x===void 0?b():(k=!0,D=!1,x)};else{var z=da(()=>(i?Po:uh)(()=>a[u]));z.f|=Bl,S=()=>{var x=Ct(z);return x!==void 0&&(M=void 0),x===void 0?M:x}}if(!(o&ih))return S;if(y){var T=a.$$legacy;return function(x,w){return arguments.length>0?((!n||!w||T||p)&&y(w?S():x),x):S()}}var H=!1,$=!1,B=Zo(_),Q=da(()=>Po(()=>{var x=S(),w=Ct(B);return H?(H=!1,$=!0,w):($=!1,B.v=x)}));return i||(Q.equals=Os),function(x,w){if(arguments.length>0){const P=w?Ct(Q):n&&s?Fn(x):x;return Q.equals(P)||(H=!0,te(B,P),D&&M!==void 0&&(M=P),gn(()=>Ct(Q))),x}return Ct(Q)}}function Xh(a){$t===null&&el(),qn&&$t.l!==null?Jh($t).m.push(a):vs(()=>{const u=gn(a);if(typeof u=="function")return u})}function $h(a,u,{bubbles:o=!1,cancelable:f=!1}={}){return new CustomEvent(a,{detail:u,bubbles:o,cancelable:f})}function al(){const a=$t;return a===null&&el(),(u,o,f)=>{var n;const i=(n=a.s.$$events)==null?void 0:n[u];if(i){const s=No(i)?i.slice():[i],h=$h(u,o,f);for(const p of s)p.call(a.x,h);return!h.defaultPrevented}return!0}}function Jh(a){var u=a.l;return u.u??(u.u={a:[],b:[],m:[]})}const Qh="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qh);Xl();const Zn=[];function ll(a,u=Gn){let o=null;const f=new Set;function i(h){if(Da(a,h)&&(a=h,o)){const p=!Zn.length;for(const _ of f)_[1](),Zn.push(_,a);if(p){for(let _=0;_<Zn.length;_+=2)Zn[_][0](Zn[_+1]);Zn.length=0}}}function n(h){i(h(a))}function s(h,p=Gn){const _=[h,p];return f.add(_),f.size===1&&(o=u(i,n)||Gn),h(a),()=>{f.delete(_),f.size===0&&o&&(o(),o=null)}}return{set:i,update:n,subscribe:s}}const Lo=ll(null),Io=ll(null);var tu=Ji("<option> </option>"),eu=Ji('<div class="svelte-1lvjhsb"><label for="layer-selector">Select Map Layer:</label> <select id="layer-selector"></select></div>');function iu(a,u){Ho(u,!1);const o=[{label:"OpenStreetMap Default",value:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors"},{label:"CartoDB Positron",value:"https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CartoDB"},{label:"CartoDB Dark Matter",value:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CartoDB"},{label:"OpenTopoMap",value:"https://tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors &copy; OpenTopoMap"},{label:"ESRI Satellite",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{label:"ESRI World Imagery",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},{label:"ESRI World Street Map",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ"},{label:"ESRI World Topo Map",value:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ"}];let f=Tr(u,"selectedLayer",28,()=>o[0]);const i=al(),n=p=>{f(p),i("change",{layer:p})};Fs();var s=eu(),h=Ai(To(s),2);Fh(h,5,()=>o,Nh,(p,_)=>{var E=tu(),y={},M=To(E);ja(()=>{y!==(y=Ct(_).value)&&(E.value=(E.__value=Ct(_).value)==null?"":Ct(_).value),Wh(E,Ct(_)===f()),Dh(M,Ct(_).label)}),qi(p,E)}),bo("change",h,p=>n(o[p.target.selectedIndex])),qi(a,s),Wo()}var Vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Us(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var br={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var nu=br.exports,pa;function ru(){return pa||(pa=1,function(a,u){(function(o,f){f(u)})(nu,function(o){var f="1.9.4";function i(t){var e,r,l,m;for(r=1,l=arguments.length;r<l;r++){m=arguments[r];for(e in m)t[e]=m[e]}return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function s(t,e){var r=Array.prototype.slice;if(t.bind)return t.bind.apply(t,r.call(arguments,1));var l=r.call(arguments,2);return function(){return t.apply(e,l.length?l.concat(r.call(arguments)):arguments)}}var h=0;function p(t){return"_leaflet_id"in t||(t._leaflet_id=++h),t._leaflet_id}function _(t,e,r){var l,m,C,V;return V=function(){l=!1,m&&(C.apply(r,m),m=!1)},C=function(){l?m=arguments:(t.apply(r,arguments),setTimeout(V,e),l=!0)},C}function E(t,e,r){var l=e[1],m=e[0],C=l-m;return t===l&&r?t:((t-m)%C+C)%C+m}function y(){return!1}function M(t,e){if(e===!1)return t;var r=Math.pow(10,e===void 0?6:e);return Math.round(t*r)/r}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function D(t){return k(t).split(/\s+/)}function b(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{});for(var r in e)t.options[r]=e[r];return t.options}function S(t,e,r){var l=[];for(var m in t)l.push(encodeURIComponent(r?m.toUpperCase():m)+"="+encodeURIComponent(t[m]));return(!e||e.indexOf("?")===-1?"?":"&")+l.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function T(t,e){return t.replace(z,function(r,l){var m=e[l];if(m===void 0)throw new Error("No value provided for variable "+r);return typeof m=="function"&&(m=m(e)),m})}var H=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function $(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}var B="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Q(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var X=0;function x(t){var e=+new Date,r=Math.max(0,16-(e-X));return X=e+r,window.setTimeout(t,r)}var w=window.requestAnimationFrame||Q("RequestAnimationFrame")||x,P=window.cancelAnimationFrame||Q("CancelAnimationFrame")||Q("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function R(t,e,r){if(r&&w===x)t.call(e);else return w.call(window,s(t,e))}function v(t){t&&P.call(window,t)}var A={__proto__:null,extend:i,create:n,bind:s,get lastId(){return h},stamp:p,throttle:_,wrapNum:E,falseFn:y,formatNum:M,trim:k,splitWords:D,setOptions:b,getParamString:S,template:T,isArray:H,indexOf:$,emptyImageUrl:B,requestFn:w,cancelFn:P,requestAnimFrame:R,cancelAnimFrame:v};function c(){}c.extend=function(t){var e=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,l=n(r);l.constructor=e,e.prototype=l;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(e[m]=this[m]);return t.statics&&i(e,t.statics),t.includes&&(O(t.includes),i.apply(null,[l].concat(t.includes))),i(l,t),delete l.statics,delete l.includes,l.options&&(l.options=r.options?n(r.options):{},i(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,V=l._initHooks.length;C<V;C++)l._initHooks[C].call(this)}},e},c.include=function(t){var e=this.prototype.options;return i(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},c.mergeOptions=function(t){return i(this.prototype.options,t),this},c.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),r=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function O(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=H(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(t,e,r){if(typeof t=="object")for(var l in t)this._on(l,t[l],e);else{t=D(t);for(var m=0,C=t.length;m<C;m++)this._on(t[m],e,r)}return this},off:function(t,e,r){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],e);else{t=D(t);for(var m=arguments.length===1,C=0,V=t.length;C<V;C++)m?this._off(t[C]):this._off(t[C],e,r)}return this},_on:function(t,e,r,l){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,r)===!1){r===this&&(r=void 0);var m={fn:e,ctx:r};l&&(m.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(m)}},_off:function(t,e,r){var l,m,C;if(this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(m=0,C=l.length;m<C;m++)l[m].fn=y;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var V=this._listens(t,e,r);if(V!==!1){var it=l[V];this._firingCount&&(it.fn=y,this._events[t]=l=l.slice()),l.splice(V,1)}}},fire:function(t,e,r){if(!this.listens(t,r))return this;var l=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var m=this._events[t];if(m){this._firingCount=this._firingCount+1||1;for(var C=0,V=m.length;C<V;C++){var it=m[C],ot=it.fn;it.once&&this.off(t,ot,it.ctx),ot.call(it.ctx||this,l)}this._firingCount--}}return r&&this._propagateEvent(l),this},listens:function(t,e,r,l){typeof t!="string"&&console.warn('"string" type argument expected');var m=e;typeof e!="function"&&(l=!!e,m=void 0,r=void 0);var C=this._events&&this._events[t];if(C&&C.length&&this._listens(t,m,r)!==!1)return!0;if(l){for(var V in this._eventParents)if(this._eventParents[V].listens(t,e,r,l))return!0}return!1},_listens:function(t,e,r){if(!this._events)return!1;var l=this._events[t]||[];if(!e)return!!l.length;r===this&&(r=void 0);for(var m=0,C=l.length;m<C;m++)if(l[m].fn===e&&l[m].ctx===r)return m;return!1},once:function(t,e,r){if(typeof t=="object")for(var l in t)this._on(l,t[l],e,!0);else{t=D(t);for(var m=0,C=t.length;m<C;m++)this._on(t[m],e,r,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[p(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[p(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var Z=c.extend(G);function F(t,e,r){this.x=r?Math.round(t):t,this.y=r?Math.round(e):e}var j=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(J(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(J(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(t){t=J(t);var e=t.x-this.x,r=t.y-this.y;return Math.sqrt(e*e+r*r)},equals:function(t){return t=J(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=J(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function J(t,e,r){return t instanceof F?t:H(t)?new F(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,e,r)}function q(t,e){if(t)for(var r=e?[t,e]:t,l=0,m=r.length;l<m;l++)this.extend(r[l])}q.prototype={extend:function(t){var e,r;if(!t)return this;if(t instanceof F||typeof t[0]=="number"||"x"in t)e=r=J(t);else if(t=Y(t),e=t.min,r=t.max,!e||!r)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=r.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(t){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,r;return typeof t[0]=="number"||t instanceof F?t=J(t):t=Y(t),t instanceof q?(e=t.min,r=t.max):e=r=t,e.x>=this.min.x&&r.x<=this.max.x&&e.y>=this.min.y&&r.y<=this.max.y},intersects:function(t){t=Y(t);var e=this.min,r=this.max,l=t.min,m=t.max,C=m.x>=e.x&&l.x<=r.x,V=m.y>=e.y&&l.y<=r.y;return C&&V},overlaps:function(t){t=Y(t);var e=this.min,r=this.max,l=t.min,m=t.max,C=m.x>e.x&&l.x<r.x,V=m.y>e.y&&l.y<r.y;return C&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,r=this.max,l=Math.abs(e.x-r.x)*t,m=Math.abs(e.y-r.y)*t;return Y(J(e.x-l,e.y-m),J(r.x+l,r.y+m))},equals:function(t){return t?(t=Y(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Y(t,e){return!t||t instanceof q?t:new q(t,e)}function ct(t,e){if(t)for(var r=e?[t,e]:t,l=0,m=r.length;l<m;l++)this.extend(r[l])}ct.prototype={extend:function(t){var e=this._southWest,r=this._northEast,l,m;if(t instanceof rt)l=t,m=t;else if(t instanceof ct){if(l=t._southWest,m=t._northEast,!l||!m)return this}else return t?this.extend(ft(t)||lt(t)):this;return!e&&!r?(this._southWest=new rt(l.lat,l.lng),this._northEast=new rt(m.lat,m.lng)):(e.lat=Math.min(l.lat,e.lat),e.lng=Math.min(l.lng,e.lng),r.lat=Math.max(m.lat,r.lat),r.lng=Math.max(m.lng,r.lng)),this},pad:function(t){var e=this._southWest,r=this._northEast,l=Math.abs(e.lat-r.lat)*t,m=Math.abs(e.lng-r.lng)*t;return new ct(new rt(e.lat-l,e.lng-m),new rt(r.lat+l,r.lng+m))},getCenter:function(){return new rt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new rt(this.getNorth(),this.getWest())},getSouthEast:function(){return new rt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof rt||"lat"in t?t=ft(t):t=lt(t);var e=this._southWest,r=this._northEast,l,m;return t instanceof ct?(l=t.getSouthWest(),m=t.getNorthEast()):l=m=t,l.lat>=e.lat&&m.lat<=r.lat&&l.lng>=e.lng&&m.lng<=r.lng},intersects:function(t){t=lt(t);var e=this._southWest,r=this._northEast,l=t.getSouthWest(),m=t.getNorthEast(),C=m.lat>=e.lat&&l.lat<=r.lat,V=m.lng>=e.lng&&l.lng<=r.lng;return C&&V},overlaps:function(t){t=lt(t);var e=this._southWest,r=this._northEast,l=t.getSouthWest(),m=t.getNorthEast(),C=m.lat>e.lat&&l.lat<r.lat,V=m.lng>e.lng&&l.lng<r.lng;return C&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=lt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function lt(t,e){return t instanceof ct?t:new ct(t,e)}function rt(t,e,r){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,r!==void 0&&(this.alt=+r)}rt.prototype={equals:function(t,e){if(!t)return!1;t=ft(t);var r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+M(this.lat,t)+", "+M(this.lng,t)+")"},distanceTo:function(t){return Mt.distance(this,ft(t))},wrap:function(){return Mt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return lt([this.lat-e,this.lng-r],[this.lat+e,this.lng+r])},clone:function(){return new rt(this.lat,this.lng,this.alt)}};function ft(t,e,r){return t instanceof rt?t:H(t)&&typeof t[0]!="object"?t.length===3?new rt(t[0],t[1],t[2]):t.length===2?new rt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new rt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new rt(t,e,r)}var Ot={latLngToPoint:function(t,e){var r=this.projection.project(t),l=this.scale(e);return this.transformation._transform(r,l)},pointToLatLng:function(t,e){var r=this.scale(e),l=this.transformation.untransform(t,r);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,r=this.scale(t),l=this.transformation.transform(e.min,r),m=this.transformation.transform(e.max,r);return new q(l,m)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?E(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?E(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new rt(r,e,l)},wrapLatLngBounds:function(t){var e=t.getCenter(),r=this.wrapLatLng(e),l=e.lat-r.lat,m=e.lng-r.lng;if(l===0&&m===0)return t;var C=t.getSouthWest(),V=t.getNorthEast(),it=new rt(C.lat-l,C.lng-m),ot=new rt(V.lat-l,V.lng-m);return new ct(it,ot)}},Mt=i({},Ot,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var r=Math.PI/180,l=t.lat*r,m=e.lat*r,C=Math.sin((e.lat-t.lat)*r/2),V=Math.sin((e.lng-t.lng)*r/2),it=C*C+Math.cos(l)*Math.cos(m)*V*V,ot=2*Math.atan2(Math.sqrt(it),Math.sqrt(1-it));return this.R*ot}}),Rt=6378137,yt={R:Rt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,r=this.MAX_LATITUDE,l=Math.max(Math.min(r,t.lat),-r),m=Math.sin(l*e);return new F(this.R*t.lng*e,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(t){var e=180/Math.PI;return new rt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Rt*Math.PI;return new q([-t,-t],[t,t])}()};function gt(t,e,r,l){if(H(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=r,this._d=l}gt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new F((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Lt(t,e,r,l){return new gt(t,e,r,l)}var St=i({},Mt,{code:"EPSG:3857",projection:yt,transformation:function(){var t=.5/(Math.PI*yt.R);return Lt(t,.5,-t,.5)}()}),g=i({},St,{code:"EPSG:900913"});function tt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function et(t,e){var r="",l,m,C,V,it,ot;for(l=0,C=t.length;l<C;l++){for(it=t[l],m=0,V=it.length;m<V;m++)ot=it[m],r+=(m?"L":"M")+ot.x+" "+ot.y;r+=e?kt.svg?"z":"x":""}return r||"M0 0"}var U=document.documentElement.style,N="ActiveXObject"in window,K=N&&!document.addEventListener,at="msLaunchUri"in navigator&&!("documentMode"in document),ht=Ge("webkit"),nt=Ge("android"),dt=Ge("android 2")||Ge("android 3"),vt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pt=nt&&Ge("Google")&&vt<537&&!("AudioNode"in window),xt=!!window.opera,Ht=!at&&Ge("chrome"),Et=Ge("gecko")&&!ht&&!xt&&!N,Jt=!Ht&&Ge("safari"),me=Ge("phantom"),se="OTransition"in U,ue=navigator.platform.indexOf("Win")===0,qt=N&&"transition"in U,ce="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dt,ee="MozPerspective"in U,fe=!window.L_DISABLE_3D&&(qt||ce||ee)&&!se&&!me,Pe=typeof orientation<"u"||Ge("mobile"),Ze=Pe&&ht,Fe=Pe&&ce,Qe=!window.PointerEvent&&window.MSPointerEvent,De=!!(window.PointerEvent||Qe),Xt="ontouchstart"in window||!!window.TouchEvent,hi=!window.L_NO_TOUCH&&(Xt||De),Ue=Pe&&xt,Yn=Pe&&Et,Ir=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",y,e),window.removeEventListener("testPassiveEventSupport",y,e)}catch{}return t}(),yn=function(){return!!document.createElement("canvas").getContext}(),wn=!!(document.createElementNS&&tt("svg").createSVGRect),qo=!!wn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zr=!wn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Vo=navigator.platform.indexOf("Mac")===0,Rr=navigator.platform.indexOf("Linux")===0;function Ge(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var kt={ie:N,ielt9:K,edge:at,webkit:ht,android:nt,android23:dt,androidStock:pt,opera:xt,chrome:Ht,gecko:Et,safari:Jt,phantom:me,opera12:se,win:ue,ie3d:qt,webkit3d:ce,gecko3d:ee,any3d:fe,mobile:Pe,mobileWebkit:Ze,mobileWebkit3d:Fe,msPointer:Qe,pointer:De,touch:hi,touchNative:Xt,mobileOpera:Ue,mobileGecko:Yn,retina:Ir,passiveEvents:Dr,canvas:yn,svg:wn,vml:zr,inlineSvg:qo,mac:Vo,linux:Rr},Kn=kt.msPointer?"MSPointerDown":"pointerdown",bn=kt.msPointer?"MSPointerMove":"pointermove",Di=kt.msPointer?"MSPointerUp":"pointerup",Ln=kt.msPointer?"MSPointerCancel":"pointercancel",Qi={touchstart:Kn,touchmove:bn,touchend:Di,touchcancel:Ln},xn={touchstart:Zr,touchmove:ui,touchend:ui,touchcancel:ui},He={},Br=!1;function jo(t,e,r){return e==="touchstart"&&En(),xn[e]?(r=xn[e].bind(this,r),t.addEventListener(Qi[e],r,!1),r):(console.warn("wrong event specified:",e),y)}function Yo(t,e,r){if(!Qi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Qi[e],r,!1)}function Ko(t){He[t.pointerId]=t}function Xo(t){He[t.pointerId]&&(He[t.pointerId]=t)}function Nr(t){delete He[t.pointerId]}function En(){Br||(document.addEventListener(Kn,Ko,!0),document.addEventListener(bn,Xo,!0),document.addEventListener(Di,Nr,!0),document.addEventListener(Ln,Nr,!0),Br=!0)}function ui(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var r in He)e.touches.push(He[r]);e.changedTouches=[e],t(e)}}function Zr(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&pe(e),ui(t,e)}function Zt(t){var e={},r,l;for(l in t)r=t[l],e[l]=r&&r.bind?r.bind(t):r;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var yi=200;function $o(t,e){t.addEventListener("dblclick",e);var r=0,l;function m(C){if(C.detail!==1){l=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var V=Hr(C);if(!(V.some(function(ot){return ot instanceof HTMLLabelElement&&ot.attributes.for})&&!V.some(function(ot){return ot instanceof HTMLInputElement||ot instanceof HTMLSelectElement}))){var it=Date.now();it-r<=yi?(l++,l===2&&e(Zt(C))):l=1,r=it}}}return t.addEventListener("click",m),{dblclick:e,simDblclick:m}}function Jo(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Xn=Pn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tn=Pn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fr=tn==="webkitTransition"||tn==="OTransition"?tn+"End":"transitionend";function We(t){return typeof t=="string"?document.getElementById(t):t}function en(t,e){var r=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!r||r==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);r=l?l[e]:null}return r==="auto"?null:r}function Wt(t,e,r){var l=document.createElement(t);return l.className=e||"",r&&r.appendChild(l),l}function Qt(t){var e=t.parentNode;e&&e.removeChild(t)}function kn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function zi(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function be(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function $n(t,e){if(t.classList!==void 0)return t.classList.contains(e);var r=Tn(t);return r.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(r)}function Bt(t,e){if(t.classList!==void 0)for(var r=D(e),l=0,m=r.length;l<m;l++)t.classList.add(r[l]);else if(!$n(t,e)){var C=Tn(t);Jn(t,(C?C+" ":"")+e)}}function ie(t,e){t.classList!==void 0?t.classList.remove(e):Jn(t,k((" "+Tn(t)+" ").replace(" "+e+" "," ")))}function Jn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Tn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function ye(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Qo(t,e)}function Qo(t,e){var r=!1,l="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(l)}catch{if(e===1)return}e=Math.round(e*100),r?(r.Enabled=e!==100,r.Opacity=e):t.style.filter+=" progid:"+l+"(opacity="+e+")"}function Pn(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}function de(t,e,r){var l=e||new F(0,0);t.style[Xn]=(kt.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(r?" scale("+r+")":"")}function re(t,e){t._leaflet_pos=e,kt.any3d?de(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function wi(t){return t._leaflet_pos||new F(0,0)}var nn,rn,Qn;if("onselectstart"in document)nn=function(){It(window,"selectstart",pe)},rn=function(){Vt(window,"selectstart",pe)};else{var Ri=Pn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);nn=function(){if(Ri){var t=document.documentElement.style;Qn=t[Ri],t[Ri]="none"}},rn=function(){Ri&&(document.documentElement.style[Ri]=Qn,Qn=void 0)}}function on(){It(window,"dragstart",pe)}function Sn(){Vt(window,"dragstart",pe)}var bi,tr;function ci(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Mn(),bi=t,tr=t.style.outlineStyle,t.style.outlineStyle="none",It(window,"keydown",Mn))}function Mn(){bi&&(bi.style.outlineStyle=tr,bi=void 0,tr=void 0,Vt(window,"keydown",Mn))}function Ur(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function er(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ts={__proto__:null,TRANSFORM:Xn,TRANSITION:tn,TRANSITION_END:Fr,get:We,getStyle:en,create:Wt,remove:Qt,empty:kn,toFront:zi,toBack:be,hasClass:$n,addClass:Bt,removeClass:ie,setClass:Jn,getClass:Tn,setOpacity:ye,testProp:Pn,setTransform:de,setPosition:re,getPosition:wi,get disableTextSelection(){return nn},get enableTextSelection(){return rn},disableImageDrag:on,enableImageDrag:Sn,preventOutline:ci,restoreOutline:Mn,getSizedParentNode:Ur,getScale:er};function It(t,e,r,l){if(e&&typeof e=="object")for(var m in e)ir(t,m,e[m],r);else{e=D(e);for(var C=0,V=e.length;C<V;C++)ir(t,e[C],r,l)}return this}var qe="_leaflet_events";function Vt(t,e,r,l){if(arguments.length===1)Gr(t),delete t[qe];else if(e&&typeof e=="object")for(var m in e)nr(t,m,e[m],r);else if(e=D(e),arguments.length===2)Gr(t,function(it){return $(e,it)!==-1});else for(var C=0,V=e.length;C<V;C++)nr(t,e[C],r,l);return this}function Gr(t,e){for(var r in t[qe]){var l=r.split(/\d/)[0];(!e||e(l))&&nr(t,l,null,null,r)}}var sn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ir(t,e,r,l){var m=e+p(r)+(l?"_"+p(l):"");if(t[qe]&&t[qe][m])return this;var C=function(it){return r.call(l||t,it||window.event)},V=C;!kt.touchNative&&kt.pointer&&e.indexOf("touch")===0?C=jo(t,e,C):kt.touch&&e==="dblclick"?C=$o(t,C):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(sn[e]||e,C,kt.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(C=function(it){it=it||window.event,or(t,it)&&V(it)},t.addEventListener(sn[e],C,!1)):t.addEventListener(e,V,!1):t.attachEvent("on"+e,C),t[qe]=t[qe]||{},t[qe][m]=C}function nr(t,e,r,l,m){m=m||e+p(r)+(l?"_"+p(l):"");var C=t[qe]&&t[qe][m];if(!C)return this;!kt.touchNative&&kt.pointer&&e.indexOf("touch")===0?Yo(t,e,C):kt.touch&&e==="dblclick"?Jo(t,C):"removeEventListener"in t?t.removeEventListener(sn[e]||e,C,!1):t.detachEvent("on"+e,C),t[qe][m]=null}function Li(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function rr(t){return ir(t,"wheel",Li),this}function Bi(t){return It(t,"mousedown touchstart dblclick contextmenu",Li),t._leaflet_disable_click=!0,this}function pe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function fi(t){return pe(t),Li(t),this}function Hr(t){if(t.composedPath)return t.composedPath();for(var e=[],r=t.target;r;)e.push(r),r=r.parentNode;return e}function Wr(t,e){if(!e)return new F(t.clientX,t.clientY);var r=er(e),l=r.boundingClientRect;return new F((t.clientX-l.left)/r.x-e.clientLeft,(t.clientY-l.top)/r.y-e.clientTop)}var qr=kt.linux&&kt.chrome?window.devicePixelRatio:kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Vr(t){return kt.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/qr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function or(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t}var es={__proto__:null,on:It,off:Vt,stopPropagation:Li,disableScrollPropagation:rr,disableClickPropagation:Bi,preventDefault:pe,stop:fi,getPropagationPath:Hr,getMousePosition:Wr,getWheelDelta:Vr,isExternalTarget:or,addListener:It,removeListener:Vt},jr=Z.extend({run:function(t,e,r,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=wi(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,r=this._duration*1e3;e<r?this._runFrame(this._easeOut(e/r),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var r=this._startPos.add(this._offset.multiplyBy(t));e&&r._round(),re(this._el,r),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ut=Z.extend({options:{crs:St,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=b(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(ft(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tn&&kt.any3d&&!kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),It(this._proxy,Fr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(ft(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=i({animate:r.animate},r.zoom),r.pan=i({animate:r.animate,duration:r.duration},r.pan));var l=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,r.pan&&r.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,r){var l=this.getZoomScale(e),m=this.getSize().divideBy(2),C=t instanceof F?t:this.latLngToContainerPoint(t),V=C.subtract(m).multiplyBy(1-1/l),it=this.containerPointToLatLng(m.add(V));return this.setView(it,e,{zoom:r})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():lt(t);var r=J(e.paddingTopLeft||e.padding||[0,0]),l=J(e.paddingBottomRight||e.padding||[0,0]),m=this.getBoundsZoom(t,!1,r.add(l));if(m=typeof e.maxZoom=="number"?Math.min(e.maxZoom,m):m,m===1/0)return{center:t.getCenter(),zoom:m};var C=l.subtract(r).divideBy(2),V=this.project(t.getSouthWest(),m),it=this.project(t.getNorthEast(),m),ot=this.unproject(V.add(it).divideBy(2).add(C),m);return{center:ot,zoom:m}},fitBounds:function(t,e){if(t=lt(t),!t.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(t,e);return this.setView(r.center,r.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=J(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Bt(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,r,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,r){if(r=r||{},r.animate===!1||!kt.any3d)return this.setView(t,e,r);this._stop();var l=this.project(this.getCenter()),m=this.project(t),C=this.getSize(),V=this._zoom;t=ft(t),e=e===void 0?V:e;var it=Math.max(C.x,C.y),ot=it*this.getZoomScale(V,e),ut=m.distanceTo(l)||1,bt=1.42,At=bt*bt;function Ft(he){var po=he?-1:1,El=he?ot:it,kl=ot*ot-it*it+po*At*At*ut*ut,Tl=2*El*At*ut,ls=kl/Tl,ia=Math.sqrt(ls*ls+1)-ls,Pl=ia<1e-9?-18:Math.log(ia);return Pl}function Te(he){return(Math.exp(he)-Math.exp(-he))/2}function ve(he){return(Math.exp(he)+Math.exp(-he))/2}function Ke(he){return Te(he)/ve(he)}var Ce=Ft(0);function Bn(he){return it*(ve(Ce)/ve(Ce+bt*he))}function wl(he){return it*(ve(Ce)*Ke(Ce+bt*he)-Te(Ce))/At}function bl(he){return 1-Math.pow(1-he,1.5)}var Ll=Date.now(),ta=(Ft(1)-Ce)/bt,xl=r.duration?1e3*r.duration:1e3*ta*.8;function ea(){var he=(Date.now()-Ll)/xl,po=bl(he)*ta;he<=1?(this._flyToFrame=R(ea,this),this._move(this.unproject(l.add(m.subtract(l).multiplyBy(wl(po)/ut)),V),this.getScaleZoom(it/Bn(po),V),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),ea.call(this),this},flyToBounds:function(t,e){var r=this._getBoundsCenterZoom(t,e);return this.flyTo(r.center,r.zoom,e)},setMaxBounds:function(t){return t=lt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var r=this.getCenter(),l=this._limitCenter(r,this._zoom,lt(t));return r.equals(l)||this.panTo(l,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var r=J(e.paddingTopLeft||e.padding||[0,0]),l=J(e.paddingBottomRight||e.padding||[0,0]),m=this.project(this.getCenter()),C=this.project(t),V=this.getPixelBounds(),it=Y([V.min.add(r),V.max.subtract(l)]),ot=it.getSize();if(!it.contains(C)){this._enforcingBounds=!0;var ut=C.subtract(it.getCenter()),bt=it.extend(C).getSize().subtract(ot);m.x+=ut.x<0?-bt.x:bt.x,m.y+=ut.y<0?-bt.y:bt.y,this.panTo(this.unproject(m),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),l=e.divideBy(2).round(),m=r.divideBy(2).round(),C=l.subtract(m);return!C.x&&!C.y?this:(t.animate&&t.pan?this.panBy(C):(t.pan&&this._rawPanBy(C),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s(this._handleGeolocationResponse,this),r=s(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,r=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,r=t.coords.longitude,l=new rt(e,r),m=l.toBounds(t.coords.accuracy*2),C=this._locateOptions;if(C.setView){var V=this.getBoundsZoom(m);this.setView(l,C.maxZoom?Math.min(V,C.maxZoom):V)}var it={latlng:l,bounds:m,timestamp:t.timestamp};for(var ot in t.coords)typeof t.coords[ot]=="number"&&(it[ot]=t.coords[ot]);this.fire("locationfound",it)}},addHandler:function(t,e){if(!e)return this;var r=this[t]=new e(this);return this._handlers.push(r),this.options[t]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(v(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Qt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var r="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=Wt("div",r,e||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),r=this.unproject(t.getTopRight());return new ct(e,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,r){t=lt(t),r=J(r||[0,0]);var l=this.getZoom()||0,m=this.getMinZoom(),C=this.getMaxZoom(),V=t.getNorthWest(),it=t.getSouthEast(),ot=this.getSize().subtract(r),ut=Y(this.project(it,l),this.project(V,l)).getSize(),bt=kt.any3d?this.options.zoomSnap:1,At=ot.x/ut.x,Ft=ot.y/ut.y,Te=e?Math.max(At,Ft):Math.min(At,Ft);return l=this.getScaleZoom(Te,l),bt&&(l=Math.round(l/(bt/100))*(bt/100),l=e?Math.ceil(l/bt)*bt:Math.floor(l/bt)*bt),Math.max(m,Math.min(C,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var r=this._getTopLeftPoint(t,e);return new q(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var r=this.options.crs;return e=e===void 0?this._zoom:e,r.scale(t)/r.scale(e)},getScaleZoom:function(t,e){var r=this.options.crs;e=e===void 0?this._zoom:e;var l=r.zoom(t*r.scale(e));return isNaN(l)?1/0:l},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(ft(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(J(t),e)},layerPointToLatLng:function(t){var e=J(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(ft(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ft(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(lt(t))},distance:function(t,e){return this.options.crs.distance(ft(t),ft(e))},containerPointToLayerPoint:function(t){return J(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return J(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(J(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ft(t)))},mouseEventToContainerPoint:function(t){return Wr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=We(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");It(e,"scroll",this._onScroll,this),this._containerId=p(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&kt.any3d,Bt(t,"leaflet-container"+(kt.touch?" leaflet-touch":"")+(kt.retina?" leaflet-retina":"")+(kt.ielt9?" leaflet-oldie":"")+(kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=en(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),re(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Bt(t.markerPane,"leaflet-zoom-hide"),Bt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,r){re(this._mapPane,new F(0,0));var l=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var m=this._zoom!==e;this._moveStart(m,r)._move(t,e)._moveEnd(m),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,r,l){e===void 0&&(e=this._zoom);var m=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?r&&r.pinch&&this.fire("zoom",r):((m||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){re(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[p(this._container)]=this;var e=t?Vt:It;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),kt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var r=[],l,m=e==="mouseout"||e==="mouseover",C=t.target||t.srcElement,V=!1;C;){if(l=this._targets[p(C)],l&&(e==="click"||e==="preclick")&&this._draggableMoved(l)){V=!0;break}if(l&&l.listens(e,!0)&&(m&&!or(C,t)||(r.push(l),m))||C===this._container)break;C=C.parentNode}return!r.length&&!V&&!m&&this.listens(e,!0)&&(r=[this]),r},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var r=t.type;r==="mousedown"&&ci(e),this._fireDOMEvent(t,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if(t.type==="click"){var l=i({},t);l.type="preclick",this._fireDOMEvent(l,l.type,r)}var m=this._findEventTargets(t,e);if(r){for(var C=[],V=0;V<r.length;V++)r[V].listens(e,!0)&&C.push(r[V]);m=C.concat(m)}if(m.length){e==="contextmenu"&&pe(t);var it=m[0],ot={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ut=it.getLatLng&&(!it._radius||it._radius<=10);ot.containerPoint=ut?this.latLngToContainerPoint(it.getLatLng()):this.mouseEventToContainerPoint(t),ot.layerPoint=this.containerPointToLayerPoint(ot.containerPoint),ot.latlng=ut?it.getLatLng():this.layerPointToLatLng(ot.layerPoint)}for(V=0;V<m.length;V++)if(m[V].fire(e,ot,!0),ot.originalEvent._stopped||m[V].options.bubblingMouseEvents===!1&&$(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return wi(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var r=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var r=this.getSize()._divideBy(2);return this.project(t,e)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,r){var l=this._getNewPixelOrigin(r,e);return this.project(t,e)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,e,r){var l=this._getNewPixelOrigin(r,e);return Y([this.project(t.getSouthWest(),e)._subtract(l),this.project(t.getNorthWest(),e)._subtract(l),this.project(t.getSouthEast(),e)._subtract(l),this.project(t.getNorthEast(),e)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,r){if(!r)return t;var l=this.project(t,e),m=this.getSize().divideBy(2),C=new q(l.subtract(m),l.add(m)),V=this._getBoundsOffset(C,r,e);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?t:this.unproject(l.add(V),e)},_limitOffset:function(t,e){if(!e)return t;var r=this.getPixelBounds(),l=new q(r.min.add(t),r.max.add(t));return t.add(this._getBoundsOffset(l,e))},_getBoundsOffset:function(t,e,r){var l=Y(this.project(e.getNorthEast(),r),this.project(e.getSouthWest(),r)),m=l.min.subtract(t.min),C=l.max.subtract(t.max),V=this._rebound(m.x,-C.x),it=this._rebound(m.y,-C.y);return new F(V,it)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),r=this.getMaxZoom(),l=kt.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(e,Math.min(r,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ie(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var r=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,e),!0)},_createAnimProxy:function(){var t=this._proxy=Wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var r=Xn,l=this._proxy.style[r];de(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),l===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();de(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(e),m=this._getCenterOffset(t)._divideBy(1-1/l);return r.animate!==!0&&!this.getSize().contains(m)?!1:(R(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,r,l){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ie(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function is(t,e){return new Ut(t,e)}var ke=c.extend({options:{position:"topright"},initialize:function(t){b(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),r=this.getPosition(),l=t._controlCorners[r];return Bt(e,"leaflet-control"),r.indexOf("bottom")!==-1?l.insertBefore(e,l.firstChild):l.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),an=function(t){return new ke(t)};Ut.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",r=this._controlContainer=Wt("div",e+"control-container",this._container);function l(m,C){var V=e+m+" "+e+C;t[m+C]=Wt("div",V,r)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Qt(this._controlCorners[t]);Qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yr=ke.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,r,l){return r<l?-1:l<r?1:0}},initialize:function(t,e,r){b(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in e)this._addLayer(e[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ke.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(p(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ie(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ie(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Wt("div",t),r=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Bi(e),rr(e);var l=this._section=Wt("section",t+"-list");r&&(this._map.on("click",this.collapse,this),It(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Wt("a",t+"-toggle",e);m.href="#",m.title="Layers",m.setAttribute("role","button"),It(m,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){pe(C),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=Wt("div",t+"-base",l),this._separator=Wt("div",t+"-separator",l),this._overlaysList=Wt("div",t+"-overlays",l),e.appendChild(l)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&p(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:r}),this.options.sortLayers&&this._layers.sort(s(function(l,m){return this.options.sortFunction(l.layer,m.layer,l.name,m.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;kn(this._baseLayersList),kn(this._overlaysList),this._layerControlInputs=[];var t,e,r,l,m=0;for(r=0;r<this._layers.length;r++)l=this._layers[r],this._addItem(l),e=e||l.overlay,t=t||!l.overlay,m+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&m>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(p(t.target)),r=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;r&&this._map.fire(r,e)},_createRadioElement:function(t,e){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=r,l.firstChild},_addItem:function(t){var e=document.createElement("label"),r=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=r):l=this._createRadioElement("leaflet-base-layers_"+p(this),r),this._layerControlInputs.push(l),l.layerId=p(t.layer),It(l,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+t.name;var C=document.createElement("span");e.appendChild(C),C.appendChild(l),C.appendChild(m);var V=t.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,r,l=[],m=[];this._handlingClick=!0;for(var C=t.length-1;C>=0;C--)e=t[C],r=this._getLayer(e.layerId).layer,e.checked?l.push(r):e.checked||m.push(r);for(C=0;C<m.length;C++)this._map.hasLayer(m[C])&&this._map.removeLayer(m[C]);for(C=0;C<l.length;C++)this._map.hasLayer(l[C])||this._map.addLayer(l[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,r,l=this._map.getZoom(),m=t.length-1;m>=0;m--)e=t[m],r=this._getLayer(e.layerId).layer,e.disabled=r.options.minZoom!==void 0&&l<r.options.minZoom||r.options.maxZoom!==void 0&&l>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,It(t,"click",pe),this.expand();var e=this;setTimeout(function(){Vt(t,"click",pe),e._preventClick=!1})}}),ns=function(t,e,r){return new Yr(t,e,r)},sr=ke.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",r=Wt("div",e+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,e+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,e+"-out",r,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,r,l,m){var C=Wt("a",r,l);return C.innerHTML=t,C.href="#",C.title=e,C.setAttribute("role","button"),C.setAttribute("aria-label",e),Bi(C),It(C,"click",fi),It(C,"click",m,this),It(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ie(this._zoomInButton,e),ie(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Bt(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Bt(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ut.mergeOptions({zoomControl:!0}),Ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new sr,this.addControl(this.zoomControl))});var rs=function(t){return new sr(t)},Kr=ke.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",r=Wt("div",e),l=this.options;return this._addScales(l,e+"-line",r),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),r},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,r){t.metric&&(this._mScale=Wt("div",e,r)),t.imperial&&(this._iScale=Wt("div",e,r))},_update:function(){var t=this._map,e=t.getSize().y/2,r=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(r)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),r=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,r,e/t)},_updateImperial:function(t){var e=t*3.2808399,r,l,m;e>5280?(r=e/5280,l=this._getRoundNum(r),this._updateScale(this._iScale,l+" mi",l/r)):(m=this._getRoundNum(e),this._updateScale(this._iScale,m+" ft",m/e))},_updateScale:function(t,e,r){t.style.width=Math.round(this.options.maxWidth*r)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),r=t/e;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,e*r}}),Xr=function(t){return new Kr(t)},ar='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',lr=ke.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(kt.inlineSvg?ar+" ":"")+"Leaflet</a>"},initialize:function(t){b(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Wt("div","leaflet-control-attribution"),Bi(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var r=[];this.options.prefix&&r.push(this.options.prefix),t.length&&r.push(t.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});Ut.mergeOptions({attributionControl:!0}),Ut.addInitHook(function(){this.options.attributionControl&&new lr().addTo(this)});var os=function(t){return new lr(t)};ke.Layers=Yr,ke.Zoom=sr,ke.Scale=Kr,ke.Attribution=lr,an.layers=ns,an.zoom=rs,an.scale=Xr,an.attribution=os;var Ve=c.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ve.addTo=function(t,e){return t.addHandler(e,this),this};var ss={Events:G},hr=kt.touch?"touchstart mousedown":"mousedown",di=Z.extend({options:{clickTolerance:3},initialize:function(t,e,r,l){b(this,l),this._element=t,this._dragStartTarget=e||t,this._preventOutline=r},enable:function(){this._enabled||(It(this._dragStartTarget,hr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(di._dragging===this&&this.finishDrag(!0),Vt(this._dragStartTarget,hr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!$n(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){di._dragging===this&&this.finishDrag();return}if(!(di._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(di._dragging=this,this._preventOutline&&ci(this._element),on(),nn(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,r=Ur(this._element);this._startPoint=new F(e.clientX,e.clientY),this._startPos=wi(this._element),this._parentScale=er(r);var l=t.type==="mousedown";It(document,l?"mousemove":"touchmove",this._onMove,this),It(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,r=new F(e.clientX,e.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,pe(t),this._moved||(this.fire("dragstart"),this._moved=!0,Bt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),re(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ie(document.body,"leaflet-dragging"),this._lastTarget&&(ie(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vt(document,"mousemove touchmove",this._onMove,this),Vt(document,"mouseup touchend touchcancel",this._onUp,this),Sn(),rn();var e=this._moved&&this._moving;this._moving=!1,di._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function $r(t,e,r){var l,m=[1,4,2,8],C,V,it,ot,ut,bt,At,Ft;for(C=0,bt=t.length;C<bt;C++)t[C]._code=Ei(t[C],e);for(it=0;it<4;it++){for(At=m[it],l=[],C=0,bt=t.length,V=bt-1;C<bt;V=C++)ot=t[C],ut=t[V],ot._code&At?ut._code&At||(Ft=Ni(ut,ot,At,e,r),Ft._code=Ei(Ft,e),l.push(Ft)):(ut._code&At&&(Ft=Ni(ut,ot,At,e,r),Ft._code=Ei(Ft,e),l.push(Ft)),l.push(ot));t=l}return t}function Jr(t,e){var r,l,m,C,V,it,ot,ut,bt;if(!t||t.length===0)throw new Error("latlngs not passed");Se(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var At=ft([0,0]),Ft=lt(t),Te=Ft.getNorthWest().distanceTo(Ft.getSouthWest())*Ft.getNorthEast().distanceTo(Ft.getNorthWest());Te<1700&&(At=ur(t));var ve=t.length,Ke=[];for(r=0;r<ve;r++){var Ce=ft(t[r]);Ke.push(e.project(ft([Ce.lat-At.lat,Ce.lng-At.lng])))}for(it=ot=ut=0,r=0,l=ve-1;r<ve;l=r++)m=Ke[r],C=Ke[l],V=m.y*C.x-C.y*m.x,ot+=(m.x+C.x)*V,ut+=(m.y+C.y)*V,it+=V*3;it===0?bt=Ke[0]:bt=[ot/it,ut/it];var Bn=e.unproject(J(bt));return ft([Bn.lat+At.lat,Bn.lng+At.lng])}function ur(t){for(var e=0,r=0,l=0,m=0;m<t.length;m++){var C=ft(t[m]);e+=C.lat,r+=C.lng,l++}return ft([e/l,r/l])}var Cn={__proto__:null,clipPolygon:$r,polygonCenter:Jr,centroid:ur};function Qr(t,e){if(!e||!t.length)return t.slice();var r=e*e;return t=as(t,r),t=je(t,r),t}function xi(t,e,r){return Math.sqrt(ln(t,e,r,!0))}function to(t,e,r){return ln(t,e,r)}function je(t,e){var r=t.length,l=typeof Uint8Array<"u"?Uint8Array:Array,m=new l(r);m[0]=m[r-1]=1,cr(t,m,e,0,r-1);var C,V=[];for(C=0;C<r;C++)m[C]&&V.push(t[C]);return V}function cr(t,e,r,l,m){var C=0,V,it,ot;for(it=l+1;it<=m-1;it++)ot=ln(t[it],t[l],t[m],!0),ot>C&&(V=it,C=ot);C>r&&(e[V]=1,cr(t,e,r,l,V),cr(t,e,r,V,m))}function as(t,e){for(var r=[t[0]],l=1,m=0,C=t.length;l<C;l++)On(t[l],t[m])>e&&(r.push(t[l]),m=l);return m<C-1&&r.push(t[C-1]),r}var eo;function io(t,e,r,l,m){var C=l?eo:Ei(t,r),V=Ei(e,r),it,ot,ut;for(eo=V;;){if(!(C|V))return[t,e];if(C&V)return!1;it=C||V,ot=Ni(t,e,it,r,m),ut=Ei(ot,r),it===C?(t=ot,C=ut):(e=ot,V=ut)}}function Ni(t,e,r,l,m){var C=e.x-t.x,V=e.y-t.y,it=l.min,ot=l.max,ut,bt;return r&8?(ut=t.x+C*(ot.y-t.y)/V,bt=ot.y):r&4?(ut=t.x+C*(it.y-t.y)/V,bt=it.y):r&2?(ut=ot.x,bt=t.y+V*(ot.x-t.x)/C):r&1&&(ut=it.x,bt=t.y+V*(it.x-t.x)/C),new F(ut,bt,m)}function Ei(t,e){var r=0;return t.x<e.min.x?r|=1:t.x>e.max.x&&(r|=2),t.y<e.min.y?r|=4:t.y>e.max.y&&(r|=8),r}function On(t,e){var r=e.x-t.x,l=e.y-t.y;return r*r+l*l}function ln(t,e,r,l){var m=e.x,C=e.y,V=r.x-m,it=r.y-C,ot=V*V+it*it,ut;return ot>0&&(ut=((t.x-m)*V+(t.y-C)*it)/ot,ut>1?(m=r.x,C=r.y):ut>0&&(m+=V*ut,C+=it*ut)),V=t.x-m,it=t.y-C,l?V*V+it*it:new F(m,C)}function Se(t){return!H(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function hn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Se(t)}function fr(t,e){var r,l,m,C,V,it,ot,ut;if(!t||t.length===0)throw new Error("latlngs not passed");Se(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var bt=ft([0,0]),At=lt(t),Ft=At.getNorthWest().distanceTo(At.getSouthWest())*At.getNorthEast().distanceTo(At.getNorthWest());Ft<1700&&(bt=ur(t));var Te=t.length,ve=[];for(r=0;r<Te;r++){var Ke=ft(t[r]);ve.push(e.project(ft([Ke.lat-bt.lat,Ke.lng-bt.lng])))}for(r=0,l=0;r<Te-1;r++)l+=ve[r].distanceTo(ve[r+1])/2;if(l===0)ut=ve[0];else for(r=0,C=0;r<Te-1;r++)if(V=ve[r],it=ve[r+1],m=V.distanceTo(it),C+=m,C>l){ot=(C-l)/m,ut=[it.x-ot*(it.x-V.x),it.y-ot*(it.y-V.y)];break}var Ce=e.unproject(J(ut));return ft([Ce.lat+bt.lat,Ce.lng+bt.lng])}var no={__proto__:null,simplify:Qr,pointToSegmentDistance:xi,closestPointOnSegment:to,clipSegment:io,_getEdgeIntersection:Ni,_getBitCode:Ei,_sqClosestPointOnSegment:ln,isFlat:Se,_flat:hn,polylineCenter:fr},dr={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new rt(t.y,t.x)},bounds:new q([-180,-90],[180,90])},pr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,r=this.R,l=t.lat*e,m=this.R_MINOR/r,C=Math.sqrt(1-m*m),V=C*Math.sin(l),it=Math.tan(Math.PI/4-l/2)/Math.pow((1-V)/(1+V),C/2);return l=-r*Math.log(Math.max(it,1e-10)),new F(t.lng*e*r,l)},unproject:function(t){for(var e=180/Math.PI,r=this.R,l=this.R_MINOR/r,m=Math.sqrt(1-l*l),C=Math.exp(-t.y/r),V=Math.PI/2-2*Math.atan(C),it=0,ot=.1,ut;it<15&&Math.abs(ot)>1e-7;it++)ut=m*Math.sin(V),ut=Math.pow((1-ut)/(1+ut),m/2),ot=Math.PI/2-2*Math.atan(C*ut)-V,V+=ot;return new rt(V*e,t.x*e/r)}},An={__proto__:null,LonLat:dr,Mercator:pr,SphericalMercator:yt},ki=i({},Mt,{code:"EPSG:3395",projection:pr,transformation:function(){var t=.5/(Math.PI*pr.R);return Lt(t,.5,-t,.5)}()}),ro=i({},Mt,{code:"EPSG:4326",projection:dr,transformation:Lt(1/180,1,-1/180,.5)}),oo=i({},Ot,{projection:dr,transformation:Lt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var r=e.lng-t.lng,l=e.lat-t.lat;return Math.sqrt(r*r+l*l)},infinite:!0});Ot.Earth=Mt,Ot.EPSG3395=ki,Ot.EPSG3857=St,Ot.EPSG900913=g,Ot.EPSG4326=ro,Ot.Simple=oo;var Le=Z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[p(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[p(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var r=this.getEvents();e.on(r,this),this.once("remove",function(){e.off(r,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ut.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=p(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=p(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return p(t)in this._layers},eachLayer:function(t,e){for(var r in this._layers)t.call(e,this._layers[r]);return this},_addLayers:function(t){t=t?H(t)?t:[t]:[];for(var e=0,r=t.length;e<r;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[p(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=p(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,r=this._getZoomSpan();for(var l in this._zoomBoundLayers){var m=this._zoomBoundLayers[l].options;t=m.minZoom===void 0?t:Math.min(t,m.minZoom),e=m.maxZoom===void 0?e:Math.max(e,m.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zi=Le.extend({initialize:function(t,e){b(this,e),this._layers={};var r,l;if(t)for(r=0,l=t.length;r<l;r++)this.addLayer(t[r])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),r,l;for(r in this._layers)l=this._layers[r],l[t]&&l[t].apply(l,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var r in this._layers)t.call(e,this._layers[r]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return p(t)}}),Fi=function(t,e){return new Zi(t,e)},xe=Zi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Zi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Zi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ct;for(var e in this._layers){var r=this._layers[e];t.extend(r.getBounds?r.getBounds():r.getLatLng())}return t}}),we=function(t,e){return new xe(t,e)},Me=c.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){b(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var r=this._getIconUrl(t);if(!r){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(r,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,e){var r=this.options,l=r[e+"Size"];typeof l=="number"&&(l=[l,l]);var m=J(l),C=J(e==="shadow"&&r.shadowAnchor||r.iconAnchor||m&&m.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(r.className||""),C&&(t.style.marginLeft=-C.x+"px",t.style.marginTop=-C.y+"px"),m&&(t.style.width=m.x+"px",t.style.height=m.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return kt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function _r(t){return new Me(t)}var Ti=Me.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ti.imagePath!="string"&&(Ti.imagePath=this._detectIconPath()),(this.options.imagePath||Ti.imagePath)+Me.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(r,l,m){var C=l.exec(r);return C&&C[m]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Wt("div","leaflet-default-icon-path",document.body),e=en(t,"background-image")||en(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),so=Ve.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new di(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Bt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ie(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,r=e._map,l=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,C=wi(e._icon),V=r.getPixelBounds(),it=r.getPixelOrigin(),ot=Y(V.min._subtract(it).add(m),V.max._subtract(it).subtract(m));if(!ot.contains(C)){var ut=J((Math.max(ot.max.x,C.x)-ot.max.x)/(V.max.x-ot.max.x)-(Math.min(ot.min.x,C.x)-ot.min.x)/(V.min.x-ot.min.x),(Math.max(ot.max.y,C.y)-ot.max.y)/(V.max.y-ot.max.y)-(Math.min(ot.min.y,C.y)-ot.min.y)/(V.min.y-ot.min.y)).multiplyBy(l);r.panBy(ut,{animate:!1}),this._draggable._newPos._add(ut),this._draggable._startPos._add(ut),re(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=R(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(v(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,r=e._shadow,l=wi(e._icon),m=e._map.layerPointToLatLng(l);r&&re(r,l),e._latlng=m,t.latlng=m,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){v(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Pi=Le.extend({options:{icon:new Ti,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){b(this,e),this._latlng=ft(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=ft(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=t.icon.createIcon(this._icon),l=!1;r!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(r.title=t.title),r.tagName==="IMG"&&(r.alt=t.alt||"")),Bt(r,e),t.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(r,"focus",this._panOnFocus,this);var m=t.icon.createShadow(this._shadow),C=!1;m!==this._shadow&&(this._removeShadow(),C=!0),m&&(Bt(m,e),m.alt=""),this._shadow=m,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&C&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(this._icon,"focus",this._panOnFocus,this),Qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&re(this._icon,t),this._shadow&&re(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),so)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new so(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,r=e.iconSize?J(e.iconSize):J(0,0),l=e.iconAnchor?J(e.iconAnchor):J(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:r.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function In(t,e){return new Pi(t,e)}var ae=Le.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return b(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ti=ae.extend({options:{fill:!0,radius:10},initialize:function(t,e){b(this,e),this._latlng=ft(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=ft(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ae.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,r=this._clickTolerance(),l=[t+r,e+r];this._pxBounds=new q(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ao(t,e){return new ti(t,e)}var Ui=ti.extend({initialize:function(t,e,r){if(typeof e=="number"&&(e=i({},r,{radius:e})),b(this,e),this._latlng=ft(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ct(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ae.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,r=this._map,l=r.options.crs;if(l.distance===Mt.distance){var m=Math.PI/180,C=this._mRadius/Mt.R/m,V=r.project([e+C,t]),it=r.project([e-C,t]),ot=V.add(it).divideBy(2),ut=r.unproject(ot).lat,bt=Math.acos((Math.cos(C*m)-Math.sin(e*m)*Math.sin(ut*m))/(Math.cos(e*m)*Math.cos(ut*m)))/m;(isNaN(bt)||bt===0)&&(bt=C/Math.cos(Math.PI/180*e)),this._point=ot.subtract(r.getPixelOrigin()),this._radius=isNaN(bt)?0:ot.x-r.project([ut,t-bt]).x,this._radiusY=ot.y-V.y}else{var At=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(At).x}this._updateBounds()}});function Dn(t,e,r){return new Ui(t,e,r)}var Ye=ae.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){b(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,r=null,l=ln,m,C,V=0,it=this._parts.length;V<it;V++)for(var ot=this._parts[V],ut=1,bt=ot.length;ut<bt;ut++){m=ot[ut-1],C=ot[ut];var At=l(t,m,C,!0);At<e&&(e=At,r=l(t,m,C))}return r&&(r.distance=Math.sqrt(e)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=ft(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ct,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Se(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],r=Se(t),l=0,m=t.length;l<m;l++)r?(e[l]=ft(t[l]),this._bounds.extend(e[l])):e[l]=this._convertLatLngs(t[l]);return e},_project:function(){var t=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new F(t,t);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,r){var l=t[0]instanceof rt,m=t.length,C,V;if(l){for(V=[],C=0;C<m;C++)V[C]=this._map.latLngToLayerPoint(t[C]),r.extend(V[C]);e.push(V)}else for(C=0;C<m;C++)this._projectLatlngs(t[C],e,r)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,r,l,m,C,V,it,ot;for(r=0,m=0,C=this._rings.length;r<C;r++)for(ot=this._rings[r],l=0,V=ot.length;l<V-1;l++)it=io(ot[l],ot[l+1],t,l,!0),it&&(e[m]=e[m]||[],e[m].push(it[0]),(it[1]!==ot[l+1]||l===V-2)&&(e[m].push(it[1]),m++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,r=0,l=t.length;r<l;r++)t[r]=Qr(t[r],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var r,l,m,C,V,it,ot=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,C=this._parts.length;r<C;r++)for(it=this._parts[r],l=0,V=it.length,m=V-1;l<V;m=l++)if(!(!e&&l===0)&&xi(t,it[m],it[l])<=ot)return!0;return!1}});function lo(t,e){return new Ye(t,e)}Ye._flat=hn;var Si=Ye.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ye.prototype._convertLatLngs.call(this,t),r=e.length;return r>=2&&e[0]instanceof rt&&e[0].equals(e[r-1])&&e.pop(),e},_setLatLngs:function(t){Ye.prototype._setLatLngs.call(this,t),Se(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Se(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,r=new F(e,e);if(t=new q(t.min.subtract(r),t.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,m=this._rings.length,C;l<m;l++)C=$r(this._rings[l],t,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,r,l,m,C,V,it,ot,ut;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(C=0,ot=this._parts.length;C<ot;C++)for(r=this._parts[C],V=0,ut=r.length,it=ut-1;V<ut;it=V++)l=r[V],m=r[it],l.y>t.y!=m.y>t.y&&t.x<(m.x-l.x)*(t.y-l.y)/(m.y-l.y)+l.x&&(e=!e);return e||Ye.prototype._containsPoint.call(this,t,!0)}});function ho(t,e){return new Si(t,e)}var ge=xe.extend({initialize:function(t,e){b(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=H(t)?t:t.features,r,l,m;if(e){for(r=0,l=e.length;r<l;r++)m=e[r],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var C=this.options;if(C.filter&&!C.filter(t))return this;var V=un(t,C);return V?(V.feature=d(t),V.defaultOptions=V.options,this.resetStyle(V),C.onEachFeature&&C.onEachFeature(t,V),this.addLayer(V)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function un(t,e){var r=t.type==="Feature"?t.geometry:t,l=r?r.coordinates:null,m=[],C=e&&e.pointToLayer,V=e&&e.coordsToLatLng||zn,it,ot,ut,bt;if(!l&&!r)return null;switch(r.type){case"Point":return it=V(l),uo(C,t,it,e);case"MultiPoint":for(ut=0,bt=l.length;ut<bt;ut++)it=V(l[ut]),m.push(uo(C,t,it,e));return new xe(m);case"LineString":case"MultiLineString":return ot=Gi(l,r.type==="LineString"?0:1,V),new Ye(ot,e);case"Polygon":case"MultiPolygon":return ot=Gi(l,r.type==="Polygon"?1:2,V),new Si(ot,e);case"GeometryCollection":for(ut=0,bt=r.geometries.length;ut<bt;ut++){var At=un({geometry:r.geometries[ut],type:"Feature",properties:t.properties},e);At&&m.push(At)}return new xe(m);case"FeatureCollection":for(ut=0,bt=r.features.length;ut<bt;ut++){var Ft=un(r.features[ut],e);Ft&&m.push(Ft)}return new xe(m);default:throw new Error("Invalid GeoJSON object.")}}function uo(t,e,r,l){return t?t(e,r):new Pi(r,l&&l.markersInheritOptions&&l)}function zn(t){return new rt(t[1],t[0],t[2])}function Gi(t,e,r){for(var l=[],m=0,C=t.length,V;m<C;m++)V=e?Gi(t[m],e-1,r):(r||zn)(t[m]),l.push(V);return l}function Rn(t,e){return t=ft(t),t.alt!==void 0?[M(t.lng,e),M(t.lat,e),M(t.alt,e)]:[M(t.lng,e),M(t.lat,e)]}function cn(t,e,r,l){for(var m=[],C=0,V=t.length;C<V;C++)m.push(e?cn(t[C],Se(t[C])?0:e-1,r,l):Rn(t[C],l));return!e&&r&&m.length>0&&m.push(m[0].slice()),m}function Mi(t,e){return t.feature?i({},t.feature,{geometry:e}):d(e)}function d(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var I={toGeoJSON:function(t){return Mi(this,{type:"Point",coordinates:Rn(this.getLatLng(),t)})}};Pi.include(I),Ui.include(I),ti.include(I),Ye.include({toGeoJSON:function(t){var e=!Se(this._latlngs),r=cn(this._latlngs,e?1:0,!1,t);return Mi(this,{type:(e?"Multi":"")+"LineString",coordinates:r})}}),Si.include({toGeoJSON:function(t){var e=!Se(this._latlngs),r=e&&!Se(this._latlngs[0]),l=cn(this._latlngs,r?2:e?1:0,!0,t);return e||(l=[l]),Mi(this,{type:(r?"Multi":"")+"Polygon",coordinates:l})}}),Zi.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(r){e.push(r.toGeoJSON(t).geometry.coordinates)}),Mi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var r=e==="GeometryCollection",l=[];return this.eachLayer(function(m){if(m.toGeoJSON){var C=m.toGeoJSON(t);if(r)l.push(C.geometry);else{var V=d(C);V.type==="FeatureCollection"?l.push.apply(l,V.features):l.push(V)}}}),r?Mi(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function W(t,e){return new ge(t,e)}var st=W,mt=Le.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,r){this._url=t,this._bounds=lt(e),b(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&zi(this._image),this},bringToBack:function(){return this._map&&be(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=lt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:Wt("img");if(Bt(e,"leaflet-image-layer"),this._zoomAnimated&&Bt(e,"leaflet-zoom-animated"),this.options.className&&Bt(e,this.options.className),e.onselectstart=y,e.onmousemove=y,e.onload=s(this.fire,this,"load"),e.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;de(this._image,r,e)},_reset:function(){var t=this._image,e=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=e.getSize();re(t,e.min),t.style.width=r.x+"px",t.style.height=r.y+"px"},_updateOpacity:function(){ye(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),_t=function(t,e,r){return new mt(t,e,r)},wt=mt.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:Wt("video");if(Bt(e,"leaflet-image-layer"),this._zoomAnimated&&Bt(e,"leaflet-zoom-animated"),this.options.className&&Bt(e,this.options.className),e.onselectstart=y,e.onmousemove=y,e.onloadeddata=s(this.fire,this,"load"),t){for(var r=e.getElementsByTagName("source"),l=[],m=0;m<r.length;m++)l.push(r[m].src);this._url=r.length>0?l:[e.src];return}H(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var V=Wt("source");V.src=this._url[C],e.appendChild(V)}}});function Tt(t,e,r){return new wt(t,e,r)}var Dt=mt.extend({_initImage:function(){var t=this._image=this._url;Bt(t,"leaflet-image-layer"),this._zoomAnimated&&Bt(t,"leaflet-zoom-animated"),this.options.className&&Bt(t,this.options.className),t.onselectstart=y,t.onmousemove=y}});function jt(t,e,r){return new Dt(t,e,r)}var Nt=Le.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof rt||H(t))?(this._latlng=ft(t),b(this,e)):(b(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ye(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ye(this._container,1),this.bringToFront(),this.options.interactive&&(Bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(ye(this._container,0),this._removeTimeout=setTimeout(s(Qt,void 0,this._container),200)):Qt(this._container),this.options.interactive&&(ie(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ft(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zi(this._container),this},bringToBack:function(){return this._map&&be(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof xe){e=null;var r=this._source._layers;for(var l in r)if(r[l]._map){e=r[l];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=J(this.options.offset),r=this._getAnchor();this._zoomAnimated?re(this._container,t.add(r)):e=e.add(t).add(r);var l=this._containerBottom=-e.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=l+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Ut.include({_initOverlay:function(t,e,r,l){var m=e;return m instanceof t||(m=new t(l).setContent(e)),r&&m.setLatLng(r),m}}),Le.include({_initOverlay:function(t,e,r,l){var m=r;return m instanceof t?(b(m,l),m._source=this):(m=e&&!l?e:new t(l,this),m.setContent(r)),m}});var Yt=Nt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Nt.prototype.openOn.call(this,t)},onAdd:function(t){Nt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ae||this._source.on("preclick",Li))},onRemove:function(t){Nt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ae||this._source.off("preclick",Li))},getEvents:function(){var t=Nt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=Wt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=Wt("div",t+"-content-wrapper",e);if(this._contentNode=Wt("div",t+"-content",r),Bi(e),rr(this._contentNode),It(e,"contextmenu",Li),this._tipContainer=Wt("div",t+"-tip-container",e),this._tip=Wt("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=Wt("a",t+"-close-button",e);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',It(l,"click",function(m){pe(m),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var r=t.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),e.width=r+1+"px",e.whiteSpace="",e.height="";var l=t.offsetHeight,m=this.options.maxHeight,C="leaflet-popup-scrolled";m&&l>m?(e.height=m+"px",Bt(t,C)):ie(t,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),r=this._getAnchor();re(this._container,e.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(en(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+e,l=this._containerWidth,m=new F(this._containerLeft,-r-this._containerBottom);m._add(wi(this._container));var C=t.layerPointToContainerPoint(m),V=J(this.options.autoPanPadding),it=J(this.options.autoPanPaddingTopLeft||V),ot=J(this.options.autoPanPaddingBottomRight||V),ut=t.getSize(),bt=0,At=0;C.x+l+ot.x>ut.x&&(bt=C.x+l-ut.x+ot.x),C.x-bt-it.x<0&&(bt=C.x-it.x),C.y+r+ot.y>ut.y&&(At=C.y+r-ut.y+ot.y),C.y-At-it.y<0&&(At=C.y-it.y),(bt||At)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([bt,At]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),le=function(t,e){return new Yt(t,e)};Ut.mergeOptions({closePopupOnClick:!0}),Ut.include({openPopup:function(t,e,r){return this._initOverlay(Yt,t,e,r).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Le.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Yt,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof xe||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){fi(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof ae)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var oe=Nt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Nt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Nt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Nt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Wt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,r,l=this._map,m=this._container,C=l.latLngToContainerPoint(l.getCenter()),V=l.layerPointToContainerPoint(t),it=this.options.direction,ot=m.offsetWidth,ut=m.offsetHeight,bt=J(this.options.offset),At=this._getAnchor();it==="top"?(e=ot/2,r=ut):it==="bottom"?(e=ot/2,r=0):it==="center"?(e=ot/2,r=ut/2):it==="right"?(e=0,r=ut/2):it==="left"?(e=ot,r=ut/2):V.x<C.x?(it="right",e=0,r=ut/2):(it="left",e=ot+(bt.x+At.x)*2,r=ut/2),t=t.subtract(J(e,r,!0)).add(bt).add(At),ie(m,"leaflet-tooltip-right"),ie(m,"leaflet-tooltip-left"),ie(m,"leaflet-tooltip-top"),ie(m,"leaflet-tooltip-bottom"),Bt(m,"leaflet-tooltip-"+it),re(m,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ye(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_e=function(t,e){return new oe(t,e)};Ut.include({openTooltip:function(t,e,r){return this._initOverlay(oe,t,e,r).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Le.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(oe,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[e](r),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof xe||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(It(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),It(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,r,l;this._tooltip.options.sticky&&t.originalEvent&&(r=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(r),e=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(e)}});var ei=Me.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),r=this.options;if(r.html instanceof Element?(kn(e),e.appendChild(r.html)):e.innerHTML=r.html!==!1?r.html:"",r.bgPos){var l=J(r.bgPos);e.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function ii(t){return new ei(t)}Me.Default=Ti;var ze=Le.extend({options:{tileSize:256,opacity:1,updateWhenIdle:kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){b(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Qt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(be(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,r=-t(-1/0,1/0),l=0,m=e.length,C;l<m;l++)C=e[l].style.zIndex,e[l]!==this._container&&C&&(r=t(r,+C));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!kt.ielt9){ye(this._container,this.options.opacity);var t=+new Date,e=!1,r=!1;for(var l in this._tiles){var m=this._tiles[l];if(!(!m.current||!m.loaded)){var C=Math.min(1,(t-m.loaded)/200);ye(m.el,C),C<1?e=!0:(m.active?r=!0:this._onOpaqueTile(m),m.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),e&&(v(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===t?(this._levels[r].el.style.zIndex=e-Math.abs(t-r),this._onUpdateLevel(r)):(Qt(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var l=this._levels[t],m=this._map;return l||(l=this._levels[t]={},l.el=Wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=e,l.origin=m.project(m.unproject(m.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,m.getCenter(),m.getZoom()),y(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var t,e,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var l=e.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Qt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,r,l){var m=Math.floor(t/2),C=Math.floor(e/2),V=r-1,it=new F(+m,+C);it.z=+V;var ot=this._tileCoordsToKey(it),ut=this._tiles[ot];return ut&&ut.active?(ut.retain=!0,!0):(ut&&ut.loaded&&(ut.retain=!0),V>l?this._retainParent(m,C,V,l):!1)},_retainChildren:function(t,e,r,l){for(var m=2*t;m<2*t+2;m++)for(var C=2*e;C<2*e+2;C++){var V=new F(m,C);V.z=r+1;var it=this._tileCoordsToKey(V),ot=this._tiles[it];if(ot&&ot.active){ot.retain=!0;continue}else ot&&ot.loaded&&(ot.retain=!0);r+1<l&&this._retainChildren(m,C,r+1,l)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,r,l){var m=Math.round(e);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var C=this.options.updateWhenZooming&&m!==this._tileZoom;(!l||C)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(t),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var r in this._levels)this._setZoomTransform(this._levels[r],t,e)},_setZoomTransform:function(t,e,r){var l=this._map.getZoomScale(r,t.zoom),m=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(e,r)).round();kt.any3d?de(t.el,m,l):re(t.el,m)},_resetGrid:function(){var t=this._map,e=t.options.crs,r=this._tileSize=this.getTileSize(),l=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],l).x/r.x),Math.ceil(t.project([0,e.wrapLng[1]],l).x/r.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],l).y/r.x),Math.ceil(t.project([e.wrapLat[1],0],l).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,r=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),l=e.getZoomScale(r,this._tileZoom),m=e.project(t,this._tileZoom).floor(),C=e.getSize().divideBy(l*2);return new q(m.subtract(C),m.add(C))},_update:function(t){var e=this._map;if(e){var r=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),m=this._pxBoundsToTileRange(l),C=m.getCenter(),V=[],it=this.options.keepBuffer,ot=new q(m.getBottomLeft().subtract([it,-it]),m.getTopRight().add([it,-it]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ut in this._tiles){var bt=this._tiles[ut].coords;(bt.z!==this._tileZoom||!ot.contains(new F(bt.x,bt.y)))&&(this._tiles[ut].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(t,r);return}for(var At=m.min.y;At<=m.max.y;At++)for(var Ft=m.min.x;Ft<=m.max.x;Ft++){var Te=new F(Ft,At);if(Te.z=this._tileZoom,!!this._isValidTile(Te)){var ve=this._tiles[this._tileCoordsToKey(Te)];ve?ve.current=!0:V.push(Te)}}if(V.sort(function(Ce,Bn){return Ce.distanceTo(C)-Bn.distanceTo(C)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ke=document.createDocumentFragment();for(Ft=0;Ft<V.length;Ft++)this._addTile(V[Ft],Ke);this._level.el.appendChild(Ke)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var r=this._globalTileRange;if(!e.wrapLng&&(t.x<r.min.x||t.x>r.max.x)||!e.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return lt(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,r=this.getTileSize(),l=t.scaleBy(r),m=l.add(r),C=e.unproject(l,t.z),V=e.unproject(m,t.z);return[C,V]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),r=new ct(e[0],e[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),r=new F(+e[0],+e[1]);return r.z=+e[2],r},_removeTile:function(t){var e=this._tiles[t];e&&(Qt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Bt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=y,t.onmousemove=y,kt.ielt9&&this.options.opacity<1&&ye(t,this.options.opacity)},_addTile:function(t,e){var r=this._getTilePos(t),l=this._tileCoordsToKey(t),m=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(m),this.createTile.length<2&&R(s(this._tileReady,this,t,null,m)),re(m,r),this._tiles[l]={el:m,coords:t,current:!0},e.appendChild(m),this.fire("tileloadstart",{tile:m,coords:t})},_tileReady:function(t,e,r){e&&this.fire("tileerror",{error:e,tile:r,coords:t});var l=this._tileCoordsToKey(t);r=this._tiles[l],r&&(r.loaded=+new Date,this._map._fadeAnimated?(ye(r.el,0),v(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),e||(Bt(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),kt.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new F(this._wrapX?E(t.x,this._wrapX):t.x,this._wrapY?E(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new q(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function co(t){return new ze(t)}var ni=ze.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=b(this,e),e.detectRetina&&kt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var r=document.createElement("img");return It(r,"load",s(this._tileOnLoad,this,e,r)),It(r,"error",s(this._tileOnError,this,e,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(t),r},getTileUrl:function(t){var e={r:kt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return T(this._url,i(e,this.options))},_tileOnLoad:function(t,e){kt.ielt9?setTimeout(s(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,r){var l=this.options.errorTileUrl;l&&e.getAttribute("src")!==l&&(e.src=l),t(r,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,r=this.options.zoomReverse,l=this.options.zoomOffset;return r&&(t=e-t),t+l},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=y,e.onerror=y,!e.complete)){e.src=B;var r=this._tiles[t].coords;Qt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:r})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",B),ze.prototype._removeTile.call(this,t)},_tileReady:function(t,e,r){if(!(!this._map||r&&r.getAttribute("src")===B))return ze.prototype._tileReady.call(this,t,e,r)}});function fn(t,e){return new ni(t,e)}var Gs=ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=i({},this.defaultWmsParams);for(var l in e)l in this.options||(r[l]=e[l]);e=b(this,e);var m=e.detectRetina&&kt.retina?2:1,C=this.getTileSize();r.width=C.x*m,r.height=C.y*m,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ni.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),r=this._crs,l=Y(r.project(e[0]),r.project(e[1])),m=l.min,C=l.max,V=(this._wmsVersion>=1.3&&this._crs===ro?[m.y,m.x,C.y,C.x]:[m.x,m.y,C.x,C.y]).join(","),it=ni.prototype.getTileUrl.call(this,t);return it+S(this.wmsParams,it,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});function _l(t,e){return new Gs(t,e)}ni.WMS=Gs,fn.wms=_l;var Ci=Le.extend({options:{padding:.1},initialize:function(t){b(this,t),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var r=this._map.getZoomScale(e,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,e),C=l.multiplyBy(-r).add(m).subtract(this._map._getNewPixelOrigin(t,e));kt.any3d?de(this._container,C,r):re(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),r=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new q(r,r.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hs=Ci.extend({options:{tolerance:0},getEvents:function(){var t=Ci.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");It(t,"mousemove",this._onMouseMove,this),It(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),It(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){v(this._redrawRequest),delete this._ctx,Qt(this._container),Vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var t=this._bounds,e=this._container,r=t.getSize(),l=kt.retina?2:1;re(e,t.min),e.width=l*r.x,e.height=l*r.y,e.style.width=r.x+"px",e.style.height=r.y+"px",kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[p(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,r=e.next,l=e.prev;r?r.prev=l:this._drawLast=l,l?l.next=r:this._drawFirst=r,delete t._order,delete this._layers[p(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),r=[],l,m;for(m=0;m<e.length;m++){if(l=Number(e[m]),isNaN(l))return;r.push(l)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var r=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var r,l,m,C,V=t._parts,it=V.length,ot=this._ctx;if(it){for(ot.beginPath(),r=0;r<it;r++){for(l=0,m=V[r].length;l<m;l++)C=V[r][l],ot[l?"lineTo":"moveTo"](C.x,C.y);e&&ot.closePath()}this._fillStroke(ot,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,r=this._ctx,l=Math.max(Math.round(t._radius),1),m=(Math.max(Math.round(t._radiusY),1)||l)/l;m!==1&&(r.save(),r.scale(1,m)),r.beginPath(),r.arc(e.x,e.y/m,l,0,Math.PI*2,!1),m!==1&&r.restore(),this._fillStroke(r,t)}},_fillStroke:function(t,e){var r=e.options;r.fill&&(t.globalAlpha=r.fillOpacity,t.fillStyle=r.fillColor||r.color,t.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=r.opacity,t.lineWidth=r.weight,t.strokeStyle=r.color,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),r,l,m=this._drawFirst;m;m=m.next)r=m.layer,r.options.interactive&&r._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(r))&&(l=r);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ie(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var r,l,m=this._drawFirst;m;m=m.next)r=m.layer,r.options.interactive&&r._containsPoint(e)&&(l=r);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(Bt(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,r){this._map._fireDOMEvent(e,r||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var r=e.next,l=e.prev;if(r)r.prev=l;else return;l?l.next=r:r&&(this._drawFirst=r),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var r=e.next,l=e.prev;if(l)l.next=r;else return;r?r.prev=l:l&&(this._drawLast=l),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Ws(t){return kt.canvas?new Hs(t):null}var mr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ml={_initContainer:function(){this._container=Wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ci.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=mr("shape");Bt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=mr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Qt(e),t.removeInteractiveTarget(e),delete this._layers[p(t)]},_updateStyle:function(t){var e=t._stroke,r=t._fill,l=t.options,m=t._container;m.stroked=!!l.stroke,m.filled=!!l.fill,l.stroke?(e||(e=t._stroke=mr("stroke")),m.appendChild(e),e.weight=l.weight+"px",e.color=l.color,e.opacity=l.opacity,l.dashArray?e.dashStyle=H(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=l.lineCap.replace("butt","flat"),e.joinstyle=l.lineJoin):e&&(m.removeChild(e),t._stroke=null),l.fill?(r||(r=t._fill=mr("fill")),m.appendChild(r),r.color=l.fillColor||l.color,r.opacity=l.fillOpacity):r&&(m.removeChild(r),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),r=Math.round(t._radius),l=Math.round(t._radiusY||r);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+r+","+l+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){zi(t._container)},_bringToBack:function(t){be(t._container)}},fo=kt.vml?mr:tt,gr=Ci.extend({_initContainer:function(){this._container=fo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qt(this._container),Vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var t=this._bounds,e=t.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,r.setAttribute("width",e.x),r.setAttribute("height",e.y)),re(r,t.min),r.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fo("path");t.options.className&&Bt(e,t.options.className),t.options.interactive&&Bt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Qt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[p(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,r=t.options;e&&(r.stroke?(e.setAttribute("stroke",r.color),e.setAttribute("stroke-opacity",r.opacity),e.setAttribute("stroke-width",r.weight),e.setAttribute("stroke-linecap",r.lineCap),e.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?e.setAttribute("stroke-dasharray",r.dashArray):e.removeAttribute("stroke-dasharray"),r.dashOffset?e.setAttribute("stroke-dashoffset",r.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),r.fill?(e.setAttribute("fill",r.fillColor||r.color),e.setAttribute("fill-opacity",r.fillOpacity),e.setAttribute("fill-rule",r.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,et(t._parts,e))},_updateCircle:function(t){var e=t._point,r=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||r,m="a"+r+","+l+" 0 1,0 ",C=t._empty()?"M0 0":"M"+(e.x-r)+","+e.y+m+r*2+",0 "+m+-r*2+",0 ";this._setPath(t,C)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){zi(t._path)},_bringToBack:function(t){be(t._path)}});kt.vml&&gr.include(ml);function qs(t){return kt.svg||kt.vml?new gr(t):null}Ut.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Ws(t)||qs(t)}});var Vs=Si.extend({initialize:function(t,e){Si.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=lt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function gl(t,e){return new Vs(t,e)}gr.create=fo,gr.pointsToPath=et,ge.geometryToLayer=un,ge.coordsToLatLng=zn,ge.coordsToLatLngs=Gi,ge.latLngToCoords=Rn,ge.latLngsToCoords=cn,ge.getFeature=Mi,ge.asFeature=d,Ut.mergeOptions({boxZoom:!0});var js=Ve.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),nn(),on(),this._startPoint=this._map.mouseEventToContainerPoint(t),It(document,{contextmenu:fi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Wt("div","leaflet-zoom-box",this._container),Bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new q(this._point,this._startPoint),r=e.getSize();re(this._box,e.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(Qt(this._box),ie(this._container,"leaflet-crosshair")),rn(),Sn(),Vt(document,{contextmenu:fi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new ct(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ut.addInitHook("addHandler","boxZoom",js),Ut.mergeOptions({doubleClickZoom:!0});var Ys=Ve.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,r=e.getZoom(),l=e.options.zoomDelta,m=t.originalEvent.shiftKey?r-l:r+l;e.options.doubleClickZoom==="center"?e.setZoom(m):e.setZoomAround(t.containerPoint,m)}});Ut.addInitHook("addHandler","doubleClickZoom",Ys),Ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ks=Ve.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new di(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ie(this._map._container,"leaflet-grab"),ie(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=lt(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),r=this._initialWorldOffset,l=this._draggable._newPos.x,m=(l-e+r)%t+e-r,C=(l+e+r)%t-e-r,V=Math.abs(m+r)<Math.abs(C+r)?m:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(t){var e=this._map,r=e.options,l=!r.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),l)e.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,V=r.easeLinearity,it=m.multiplyBy(V/C),ot=it.distanceTo([0,0]),ut=Math.min(r.inertiaMaxSpeed,ot),bt=it.multiplyBy(ut/ot),At=ut/(r.inertiaDeceleration*V),Ft=bt.multiplyBy(-At/2).round();!Ft.x&&!Ft.y?e.fire("moveend"):(Ft=e._limitOffset(Ft,e.options.maxBounds),R(function(){e.panBy(Ft,{duration:At,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ut.addInitHook("addHandler","dragging",Ks),Ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xs=Ve.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),It(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,r=t.scrollTop||e.scrollTop,l=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(l,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},r=this.keyCodes,l,m;for(l=0,m=r.left.length;l<m;l++)e[r.left[l]]=[-1*t,0];for(l=0,m=r.right.length;l<m;l++)e[r.right[l]]=[t,0];for(l=0,m=r.down.length;l<m;l++)e[r.down[l]]=[0,t];for(l=0,m=r.up.length;l<m;l++)e[r.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},r=this.keyCodes,l,m;for(l=0,m=r.zoomIn.length;l<m;l++)e[r.zoomIn[l]]=t;for(l=0,m=r.zoomOut.length;l<m;l++)e[r.zoomOut[l]]=-t},_addHooks:function(){It(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,r=this._map,l;if(e in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(l=this._panKeys[e],t.shiftKey&&(l=J(l).multiplyBy(3)),r.options.maxBounds&&(l=r._limitOffset(J(l),r.options.maxBounds)),r.options.worldCopyJump){var m=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(l)));r.panTo(m)}else r.panBy(l)}else if(e in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;fi(t)}}});Ut.addInitHook("addHandler","keyboard",Xs),Ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $s=Ve.extend({addHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Vr(t),r=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),l),fi(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),r=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,C=r?Math.ceil(m/r)*r:m,V=t._limitZoom(e+(this._delta>0?C:-C))-e;this._delta=0,this._startTime=null,V&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+V):t.setZoomAround(this._lastMousePos,e+V))}});Ut.addInitHook("addHandler","scrollWheelZoom",$s);var vl=600;Ut.mergeOptions({tapHold:kt.touchNative&&kt.safari&&kt.mobile,tapTolerance:15});var Js=Ve.extend({addHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new F(e.clientX,e.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(It(document,"touchend",pe),It(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),vl),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Vt(document,"touchend",pe),Vt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new F(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var r=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});r._simulated=!0,e.target.dispatchEvent(r)}});Ut.addInitHook("addHandler","tapHold",Js),Ut.mergeOptions({touchZoom:kt.touch,bounceAtZoomLimits:!0});var Qs=Ve.extend({addHooks:function(){Bt(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ie(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var r=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(r.add(l)._divideBy(2))),this._startDist=r.distanceTo(l),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),pe(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,r=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]),m=r.distanceTo(l)/this._startDist;if(this._zoom=e.getScaleZoom(m,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&m<1||this._zoom>e.getMaxZoom()&&m>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var C=r._add(l)._divideBy(2)._subtract(this._centerPoint);if(m===1&&C.x===0&&C.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),v(this._animRequest);var V=s(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(V,this,!0),pe(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,v(this._animRequest),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ut.addInitHook("addHandler","touchZoom",Qs),Ut.BoxZoom=js,Ut.DoubleClickZoom=Ys,Ut.Drag=Ks,Ut.Keyboard=Xs,Ut.ScrollWheelZoom=$s,Ut.TapHold=Js,Ut.TouchZoom=Qs,o.Bounds=q,o.Browser=kt,o.CRS=Ot,o.Canvas=Hs,o.Circle=Ui,o.CircleMarker=ti,o.Class=c,o.Control=ke,o.DivIcon=ei,o.DivOverlay=Nt,o.DomEvent=es,o.DomUtil=ts,o.Draggable=di,o.Evented=Z,o.FeatureGroup=xe,o.GeoJSON=ge,o.GridLayer=ze,o.Handler=Ve,o.Icon=Me,o.ImageOverlay=mt,o.LatLng=rt,o.LatLngBounds=ct,o.Layer=Le,o.LayerGroup=Zi,o.LineUtil=no,o.Map=Ut,o.Marker=Pi,o.Mixin=ss,o.Path=ae,o.Point=F,o.PolyUtil=Cn,o.Polygon=Si,o.Polyline=Ye,o.Popup=Yt,o.PosAnimation=jr,o.Projection=An,o.Rectangle=Vs,o.Renderer=Ci,o.SVG=gr,o.SVGOverlay=Dt,o.TileLayer=ni,o.Tooltip=oe,o.Transformation=gt,o.Util=A,o.VideoOverlay=wt,o.bind=s,o.bounds=Y,o.canvas=Ws,o.circle=Dn,o.circleMarker=ao,o.control=an,o.divIcon=ii,o.extend=i,o.featureGroup=we,o.geoJSON=W,o.geoJson=st,o.gridLayer=co,o.icon=_r,o.imageOverlay=_t,o.latLng=ft,o.latLngBounds=lt,o.layerGroup=Fi,o.map=is,o.marker=In,o.point=J,o.polygon=ho,o.polyline=lo,o.popup=le,o.rectangle=gl,o.setOptions=b,o.stamp=p,o.svg=qs,o.svgOverlay=jt,o.tileLayer=fn,o.tooltip=_e,o.transformation=Lt,o.version=f,o.videoOverlay=Tt;var yl=window.L;o.noConflict=function(){return window.L=yl,this},window.L=o})}(br,br.exports)),br.exports}var ou=ru();const su=Us(ou);(function(a,u,o){function f(i,n){for(;(i=i.parentElement)&&!i.classList.contains(n););return i}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(i,n){this._map=i,this._container=i._container,this._overlayPane=i._panes.overlayPane,this._popupPane=i._panes.popupPane,n&&n.shapeOptions&&(n.shapeOptions=L.Util.extend({},this.options.shapeOptions,n.shapeOptions)),L.setOptions(this,n);var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(L.DomUtil.disableTextSelection(),i.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(i){L.setOptions(this,i)},_fireCreatedEvent:function(i){this._map.fire(L.Draw.Event.CREATED,{layer:i,layerType:this.type})},_cancelDrawing:function(i){i.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(i,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,i,n)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var i=this._markers.pop(),n=this._poly,s=n.getLatLngs(),h=s.splice(-1,1)[0];this._poly.setLatLngs(s),this._markerGroup.removeLayer(i),n.getLatLngs().length<2&&this._map.removeLayer(n),this._vertexChanged(h,!1)}},addVertex:function(i){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(i))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(i)),this._poly.addLatLng(i),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(i,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var i=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),n=this._poly.newLatLngIntersects(i[i.length-1]);if(!this.options.allowIntersection&&n||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(i){var n=this._map.mouseEventToLayerPoint(i.originalEvent),s=this._map.layerPointToLatLng(n);this._currentLatLng=s,this._updateTooltip(s),this._updateGuide(n),this._mouseMarker.setLatLng(s),L.DomEvent.preventDefault(i.originalEvent)},_vertexChanged:function(i,n){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(i,n),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(i){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(i),this._clickHandled=!0,this._disableNewMarkers();var n=i.originalEvent,s=n.clientX,h=n.clientY;this._startPoint.call(this,s,h)}},_startPoint:function(i,n){this._mouseDownOrigin=L.point(i,n)},_onMouseUp:function(i){var n=i.originalEvent,s=n.clientX,h=n.clientY;this._endPoint.call(this,s,h,i),this._clickHandled=null},_endPoint:function(i,n,s){if(this._mouseDownOrigin){var h=L.point(i,n).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(s.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(s.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(h)<9*(a.devicePixelRatio||1)&&this.addVertex(s.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(i){var n,s,h=i.originalEvent;!h.touches||!h.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(n=h.touches[0].clientX,s=h.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,n,s),this._endPoint.call(this,n,s,i),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(i){var n;if(this._markers.length>0){var s;if(this.type===L.Draw.Polyline.TYPE)s=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;s=this._markers[0]}var h=this._map.latLngToContainerPoint(s.getLatLng()),p=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),_=this._map.latLngToContainerPoint(p.getLatLng());n=h.distanceTo(_)}else n=1/0;return n},_updateFinishHandler:function(){var i=this._markers.length;i>1&&this._markers[i-1].on("click",this._finishShape,this),i>2&&this._markers[i-2].off("click",this._finishShape,this)},_createMarker:function(i){var n=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(n),n},_updateGuide:function(i){var n=this._markers?this._markers.length:0;n>0&&(i=i||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[n-1].getLatLng()),i))},_updateTooltip:function(i){var n=this._getTooltipText();i&&this._tooltip.updatePosition(i),this._errorShown||this._tooltip.updateContent(n)},_drawGuide:function(i,n){var s,h,p,_=Math.floor(Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))),E=this.options.guidelineDistance,y=this.options.maxGuideLineLength,M=_>y?_-y:E;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));M<_;M+=this.options.guidelineDistance)s=M/_,h={x:Math.floor(i.x*(1-s)+s*n.x),y:Math.floor(i.y*(1-s)+s*n.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,h)},_updateGuideColor:function(i){if(this._guidesContainer)for(var n=0,s=this._guidesContainer.childNodes.length;n<s;n++)this._guidesContainer.childNodes[n].style.backgroundColor=i},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var i,n,s=this.options.showLength;return this._markers.length===0?i={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(n=s?this._getMeasurementString():"",i=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:n}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:n}),i},_updateRunningMeasure:function(i,n){var s,h,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(s=p-(n?2:1),h=L.GeometryUtil.isVersion07x()?i.distanceTo(this._markers[s].getLatLng())*(this.options.factor||1):this._map.distance(i,this._markers[s].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=h*(n?1:-1))},_getMeasurementString:function(){var i,n=this._currentLatLng,s=this._markers[this._markers.length-1].getLatLng();return i=L.GeometryUtil.isVersion07x()?s&&n&&n.distanceTo?this._measurementRunningTotal+n.distanceTo(s)*(this.options.factor||1):this._measurementRunningTotal||0:s&&n?this._measurementRunningTotal+this._map.distance(n,s)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(i,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var i=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(i,n){L.Draw.Polyline.prototype.initialize.call(this,i,n),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var i=this._markers.length;i===1&&this._markers[0].on("click",this._finishShape,this),i>2&&(this._markers[i-1].on("dblclick",this._finishShape,this),i>3&&this._markers[i-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var i,n;return this._markers.length===0?i=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(i=L.drawLocal.draw.handlers.polygon.tooltip.cont,n=this._getMeasurementString()):(i=L.drawLocal.draw.handlers.polygon.tooltip.end,n=this._getMeasurementString()),{text:i,subtext:n}},_getMeasurementString:function(){var i=this._area,n="";return i||this.options.showLength?(this.options.showLength&&(n=L.Draw.Polyline.prototype._getMeasurementString.call(this)),i&&(n+="<br>"+L.GeometryUtil.readableArea(i,this.options.metric,this.options.precision)),n):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(i,n){var s;!this.options.allowIntersection&&this.options.showArea&&(s=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(s)),L.Draw.Polyline.prototype._vertexChanged.call(this,i,n)},_cleanUpShape:function(){var i=this._markers.length;i>0&&(this._markers[0].off("click",this._finishShape,this),i>2&&this._markers[i-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(i,n){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,i,n)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),u.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(u,"mouseup",this._onMouseUp,this),L.DomEvent.off(u,"touchend",this._onMouseUp,this),u.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(i){this._isDrawing=!0,this._startLatLng=i.latlng,L.DomEvent.on(u,"mouseup",this._onMouseUp,this).on(u,"touchend",this._onMouseUp,this).preventDefault(i.originalEvent)},_onMouseMove:function(i){var n=i.latlng;this._tooltip.updatePosition(n),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(n))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(i,n){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,n)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(i){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!f(i.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(i){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,i)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,i),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_getTooltipText:function(){var i,n,s,h=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,_=this.options.showArea;return p&&(i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),n=L.GeometryUtil.geodesicArea(i),s=_?L.GeometryUtil.readableArea(n,this.options.metric):""),{text:h.text,subtext:s}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(i,n){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,n)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(i){var n=i.latlng;this._tooltip.updatePosition(n),this._mouseMarker.setLatLng(n),this._marker?(n=this._mouseMarker.getLatLng(),this._marker.setLatLng(n)):(this._marker=this._createMarker(n),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(i){return new L.Marker(i,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(i){this._onMouseMove(i),this._onClick()},_fireCreatedEvent:function(){var i=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(i,n){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,n)},_fireCreatedEvent:function(){var i=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)},_createMarker:function(i){return new L.CircleMarker(i,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(i,n){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,n)},_drawShape:function(i){if(L.GeometryUtil.isVersion07x())var n=this._startLatLng.distanceTo(i);else var n=this._map.distance(this._startLatLng,i);this._shape?this._shape.setRadius(n):(this._shape=new L.Circle(this._startLatLng,n,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_onMouseMove:function(i){var n,s=i.latlng,h=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(s),this._isDrawing){this._drawShape(s),n=this._shape.getRadius().toFixed(1);var _="";h&&(_=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(n,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:_})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(i,n){this._marker=i,L.setOptions(this,n)},addHooks:function(){var i=this._marker;i.dragging.enable(),i.on("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},removeHooks:function(){var i=this._marker;i.dragging.disable(),i.off("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},_onDragEnd:function(i){var n=i.target;n.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:n})},_toggleMarkerHighlight:function(){var i=this._marker._icon;i&&(i.style.display="none",L.DomUtil.hasClass(i,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,-4)):(L.DomUtil.addClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,4)),i.style.display="")},_offsetMarker:function(i,n){var s=parseInt(i.style.marginTop,10)-n,h=parseInt(i.style.marginLeft,10)-n;i.style.marginTop=s+"px",i.style.marginLeft=h+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(i){this.latlngs=[i._latlngs],i._holes&&(this.latlngs=this.latlngs.concat(i._holes)),this._poly=i,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(i){for(var n=0;n<this._verticesHandlers.length;n++)i(this._verticesHandlers[n])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(i){i.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(i){i.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(i){i.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var i=0;i<this.latlngs.length;i++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[i],this._poly.options.poly))},_updateLatLngs:function(i){this.latlngs=[i.layer._latlngs],i.layer._holes&&(this.latlngs=this.latlngs.concat(i.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(i,n,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=i,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this._latlngs=n,L.setOptions(this,s)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var i=this._poly,n=i._path;i instanceof L.Polygon||(i.options.fill=!1,i.options.editing&&(i.options.editing.fill=!1)),n&&i.options.editing&&i.options.editing.className&&(i.options.original.className&&i.options.original.className.split(" ").forEach(function(s){L.DomUtil.removeClass(n,s)}),i.options.editing.className.split(" ").forEach(function(s){L.DomUtil.addClass(n,s)})),i.setStyle(i.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var i=this._poly,n=i._path;n&&i.options.editing&&i.options.editing.className&&(i.options.editing.className.split(" ").forEach(function(s){L.DomUtil.removeClass(n,s)}),i.options.original.className&&i.options.original.className.split(" ").forEach(function(s){L.DomUtil.addClass(n,s)})),i.setStyle(i.options.original),i._map&&(i._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var i,n,s,h,p=this._defaultShape();for(i=0,s=p.length;i<s;i++)h=this._createMarker(p[i],i),h.on("click",this._onMarkerClick,this),h.on("contextmenu",this._onContextMenu,this),this._markers.push(h);var _,E;for(i=0,n=s-1;i<s;n=i++)(i!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(_=this._markers[n],E=this._markers[i],this._createMiddleMarker(_,E),this._updatePrevNext(_,E))},_createMarker:function(i,n){var s=new L.Marker.Touch(i,{draggable:!0,icon:this.options.icon});return s._origLatLng=i,s._index=n,s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(s),s},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var i=this._defaultShape(),n=[].splice.apply(i,arguments);return this._poly._convertLatLngs(i,!0),this._poly.redraw(),n},_removeMarker:function(i){var n=i._index;this._markerGroup.removeLayer(i),this._markers.splice(n,1),this._spliceLatLngs(n,1),this._updateIndexes(n,-1),i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(i){var n=i.target,s=this._poly,h=L.LatLngUtil.cloneLatLng(n._origLatLng);if(L.extend(n._origLatLng,n._latlng),s.options.poly){var p=s._map._editTooltip;if(!s.options.poly.allowIntersection&&s.intersects()){L.extend(n._origLatLng,h),n.setLatLng(h);var _=s.options.color;s.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){s.setStyle({color:_}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}n._middleLeft&&n._middleLeft.setLatLng(this._getMiddleLatLng(n._prev,n)),n._middleRight&&n._middleRight.setLatLng(this._getMiddleLatLng(n,n._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var E=this._poly.getLatLngs();this._poly._convertLatLngs(E,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(i){var n=L.Polygon&&this._poly instanceof L.Polygon?4:3,s=i.target;this._defaultShape().length<n||(this._removeMarker(s),this._updatePrevNext(s._prev,s._next),s._middleLeft&&this._markerGroup.removeLayer(s._middleLeft),s._middleRight&&this._markerGroup.removeLayer(s._middleRight),s._prev&&s._next?this._createMiddleMarker(s._prev,s._next):s._prev?s._next||(s._prev._middleRight=null):s._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(i){var n=i.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:n,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(i){var n=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),s=this._map.layerPointToLatLng(n),h=i.target;L.extend(h._origLatLng,s),h._middleLeft&&h._middleLeft.setLatLng(this._getMiddleLatLng(h._prev,h)),h._middleRight&&h._middleRight.setLatLng(this._getMiddleLatLng(h,h._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(i,n){this._markerGroup.eachLayer(function(s){s._index>i&&(s._index+=n)})},_createMiddleMarker:function(i,n){var s,h,p,_=this._getMiddleLatLng(i,n),E=this._createMarker(_);E.setOpacity(.6),i._middleRight=n._middleLeft=E,h=function(){E.off("touchmove",h,this);var y=n._index;E._index=y,E.off("click",s,this).on("click",this._onMarkerClick,this),_.lat=E.getLatLng().lat,_.lng=E.getLatLng().lng,this._spliceLatLngs(y,0,_),this._markers.splice(y,0,E),E.setOpacity(1),this._updateIndexes(y,1),n._index++,this._updatePrevNext(i,E),this._updatePrevNext(E,n),this._poly.fire("editstart")},p=function(){E.off("dragstart",h,this),E.off("dragend",p,this),E.off("touchmove",h,this),this._createMiddleMarker(i,E),this._createMiddleMarker(E,n)},s=function(){h.call(this),p.call(this),this._fireEdit()},E.on("click",s,this).on("dragstart",h,this).on("dragend",p,this).on("touchmove",h,this),this._markerGroup.addLayer(E)},_updatePrevNext:function(i,n){i&&(i._next=n),n&&(n._prev=i)},_getMiddleLatLng:function(i,n){var s=this._poly._map,h=s.project(i.getLatLng()),p=s.project(n.getLatLng());return s.unproject(h._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(i,n){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=i,L.Util.setOptions(this,n)},addHooks:function(){var i=this._shape;this._shape._map&&(this._map=this._shape._map,i.setStyle(i.options.editing),i._map&&(this._map=i._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var i=this._shape;if(i.setStyle(i.options.original),i._map){this._unbindMarker(this._moveMarker);for(var n=0,s=this._resizeMarkers.length;n<s;n++)this._unbindMarker(this._resizeMarkers[n]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(i,n){var s=new L.Marker.Touch(i,{draggable:!0,icon:n,zIndexOffset:10});return this._bindMarker(s),this._markerGroup.addLayer(s),s},_bindMarker:function(i){i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(i){i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(i){i.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(i){var n=i.target,s=n.getLatLng();n===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(i){i.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(i){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i),typeof this._getCorners=="function"){var n=this._getCorners(),s=i.target,h=s._cornerIndex;s.setOpacity(0),this._oppositeCorner=n[(h+2)%4],this._toggleCornerMarkers(0,h)}this._shape.fire("editstart")},_onTouchMove:function(i){var n=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),s=this._map.layerPointToLatLng(n);return i.target===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),!1},_onTouchEnd:function(i){i.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getBounds(),n=i.getCenter();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){var i=this._getCorners();this._resizeMarkers=[];for(var n=0,s=i.length;n<s;n++)this._resizeMarkers.push(this._createMarker(i[n],this.options.resizeIcon)),this._resizeMarkers[n]._cornerIndex=n},_onMarkerDragStart:function(i){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i);var n=this._getCorners(),s=i.target,h=s._cornerIndex;this._oppositeCorner=n[(h+2)%4],this._toggleCornerMarkers(0,h)},_onMarkerDragEnd:function(i){var n,s,h=i.target;h===this._moveMarker&&(n=this._shape.getBounds(),s=n.getCenter(),h.setLatLng(s)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,i)},_move:function(i){for(var n,s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),h=this._shape.getBounds(),p=h.getCenter(),_=[],E=0,y=s.length;E<y;E++)n=[s[E].lat-p.lat,s[E].lng-p.lng],_.push([i.lat+n[0],i.lng+n[1]]);this._shape.setLatLngs(_),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(i){var n;this._shape.setBounds(L.latLngBounds(i,this._oppositeCorner)),n=this._shape.getBounds(),this._moveMarker.setLatLng(n.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var i=this._shape.getBounds();return[i.getNorthWest(),i.getNorthEast(),i.getSouthEast(),i.getSouthWest()]},_toggleCornerMarkers:function(i){for(var n=0,s=this._resizeMarkers.length;n<s;n++)this._resizeMarkers[n].setOpacity(i)},_repositionCornerMarkers:function(){for(var i=this._getCorners(),n=0,s=this._resizeMarkers.length;n<s;n++)this._resizeMarkers[n].setLatLng(i[n])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getLatLng();this._moveMarker=this._createMarker(i,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(i){if(this._resizeMarkers.length){var n=this._getResizeMarkerPoint(i);this._resizeMarkers[0].setLatLng(n)}this._shape.setLatLng(i),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var i=this._shape.getLatLng(),n=this._getResizeMarkerPoint(i);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(n,this.options.resizeIcon))},_getResizeMarkerPoint:function(i){var n=this._shape._radius*Math.cos(Math.PI/4),s=this._map.project(i);return this._map.unproject([s.x+n,s.y-n])},_resize:function(i){var n=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=n.distanceTo(i):radius=this._map.distance(n,i),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(i,n){var s={};if(i.touches!==void 0){if(!i.touches.length)return;s=i.touches[0]}else if(i.pointerType!=="touch"||(s=i,!this._filterClick(i)))return;var h=this._map.mouseEventToContainerPoint(s),p=this._map.mouseEventToLayerPoint(s),_=this._map.layerPointToLatLng(p);this._map.fire(n,{latlng:_,layerPoint:p,containerPoint:h,pageX:s.pageX,pageY:s.pageY,originalEvent:i})},_filterClick:function(i){var n=i.timeStamp||i.originalEvent.timeStamp,s=L.DomEvent._lastClick&&n-L.DomEvent._lastClick;return s&&s>100&&s<500||i.target._simulatedClick&&!i._simulated?(L.DomEvent.stop(i),!1):(L.DomEvent._lastClick=n,!0)},_onTouchStart:function(i){this._map._loaded&&this._touchEvent(i,"touchstart")},_onTouchEnd:function(i){this._map._loaded&&this._touchEvent(i,"touchend")},_onTouchCancel:function(i){if(this._map._loaded){var n="touchcancel";this._detectIE()&&(n="pointercancel"),this._touchEvent(i,n)}},_onTouchLeave:function(i){this._map._loaded&&this._touchEvent(i,"touchleave")},_onTouchMove:function(i){this._map._loaded&&this._touchEvent(i,"touchmove")},_detectIE:function(){var i=a.navigator.userAgent,n=i.indexOf("MSIE ");if(n>0)return parseInt(i.substring(n+5,i.indexOf(".",n)),10);if(i.indexOf("Trident/")>0){var s=i.indexOf("rv:");return parseInt(i.substring(s+3,i.indexOf(".",s)),10)}var h=i.indexOf("Edge/");return h>0&&parseInt(i.substring(h+5,i.indexOf(".",h)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var i=this._icon,n=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?n.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):n.concat(["touchcancel"]),L.DomUtil.addClass(i,"leaflet-clickable"),L.DomEvent.on(i,"click",this._onMouseClick,this),L.DomEvent.on(i,"keypress",this._onKeyPress,this);for(var s=0;s<n.length;s++)L.DomEvent.on(i,n[s],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var i=a.navigator.userAgent,n=i.indexOf("MSIE ");if(n>0)return parseInt(i.substring(n+5,i.indexOf(".",n)),10);if(i.indexOf("Trident/")>0){var s=i.indexOf("rv:");return parseInt(i.substring(s+3,i.indexOf(".",s)),10)}var h=i.indexOf("Edge/");return h>0&&parseInt(i.substring(h+5,i.indexOf(".",h)),10)}}),L.LatLngUtil={cloneLatLngs:function(i){for(var n=[],s=0,h=i.length;s<h;s++)Array.isArray(i[s])?n.push(L.LatLngUtil.cloneLatLngs(i[s])):n.push(this.cloneLatLng(i[s]));return n},cloneLatLng:function(i){return L.latLng(i.lat,i.lng)}},function(){var i={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(n){var s,h,p=n.length,_=0,E=Math.PI/180;if(p>2){for(var y=0;y<p;y++)s=n[y],h=n[(y+1)%p],_+=(h.lng-s.lng)*E*(2+Math.sin(s.lat*E)+Math.sin(h.lat*E));_=6378137*_*6378137/2}return Math.abs(_)},formattedNumber:function(n,s){var h=parseFloat(n).toFixed(s),p=L.drawLocal.format&&L.drawLocal.format.numeric,_=p&&p.delimiters,E=_&&_.thousands,y=_&&_.decimal;if(E||y){var M=h.split(".");h=E?M[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+E):M[0],y=y||".",M.length>1&&(h=h+y+M[1])}return h},readableArea:function(n,s,E){var p,_,E=L.Util.extend({},i,E);return s?(_=["ha","m"],type=typeof s,type==="string"?_=[s]:type!=="boolean"&&(_=s),p=n>=1e6&&_.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*n,E.km)+" km²":n>=1e4&&_.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*n,E.ha)+" ha":L.GeometryUtil.formattedNumber(n,E.m)+" m²"):(n/=.836127,p=n>=3097600?L.GeometryUtil.formattedNumber(n/3097600,E.mi)+" mi²":n>=4840?L.GeometryUtil.formattedNumber(n/4840,E.ac)+" acres":L.GeometryUtil.formattedNumber(n,E.yd)+" yd²"),p},readableDistance:function(n,s,h,p,y){var E,y=L.Util.extend({},i,y);switch(s?typeof s=="string"?s:"metric":h?"feet":p?"nauticalMile":"yards"){case"metric":E=n>1e3?L.GeometryUtil.formattedNumber(n/1e3,y.km)+" km":L.GeometryUtil.formattedNumber(n,y.m)+" m";break;case"feet":n*=3.28083,E=L.GeometryUtil.formattedNumber(n,y.ft)+" ft";break;case"nauticalMile":n*=.53996,E=L.GeometryUtil.formattedNumber(n/1e3,y.nm)+" nm";break;case"yards":default:n*=1.09361,E=n>1760?L.GeometryUtil.formattedNumber(n/1760,y.mi)+" miles":L.GeometryUtil.formattedNumber(n,y.yd)+" yd"}return E},isVersion07x:function(){var n=L.version.split(".");return parseInt(n[0],10)===0&&parseInt(n[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(i,n,s,h){return this._checkCounterclockwise(i,s,h)!==this._checkCounterclockwise(n,s,h)&&this._checkCounterclockwise(i,n,s)!==this._checkCounterclockwise(i,n,h)},_checkCounterclockwise:function(i,n,s){return(s.y-i.y)*(n.x-i.x)>(n.y-i.y)*(s.x-i.x)}}),L.Polyline.include({intersects:function(){var i,n,s,h=this._getProjectedPoints(),p=h?h.length:0;if(this._tooFewPointsForIntersection())return!1;for(i=p-1;i>=3;i--)if(n=h[i-1],s=h[i],this._lineSegmentsIntersectsRange(n,s,i-2))return!0;return!1},newLatLngIntersects:function(i,n){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(i),n)},newPointIntersects:function(i,n){var s=this._getProjectedPoints(),h=s?s.length:0,p=s?s[h-1]:null,_=h-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,i,_,n?1:0)},_tooFewPointsForIntersection:function(i){var n=this._getProjectedPoints(),s=n?n.length:0;return s+=i||0,!n||s<=3},_lineSegmentsIntersectsRange:function(i,n,s,h){var p,_,E=this._getProjectedPoints();h=h||0;for(var y=s;y>h;y--)if(p=E[y-1],_=E[y],L.LineUtil.segmentsIntersect(i,n,p,_))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var i=[],n=this._defaultShape(),s=0;s<n.length;s++)i.push(this._map.latLngToLayerPoint(n[s]));return i}}),L.Polygon.include({intersects:function(){var i,n,s,h,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(i=p.length,n=p[0],s=p[i-1],h=i-2,this._lineSegmentsIntersectsRange(s,n,h,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(i){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,i);var n;this._toolbars={},L.DrawToolbar&&this.options.draw&&(n=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=n,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(n=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=n,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(i){var n,s=L.DomUtil.create("div","leaflet-draw"),h=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(n=this._toolbars[p].addToolbar(i))&&(h||(L.DomUtil.hasClass(n,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(n.childNodes[0],"leaflet-draw-toolbar-top"),h=!0),s.appendChild(n));return s},onRemove:function(){for(var i in this._toolbars)this._toolbars.hasOwnProperty(i)&&this._toolbars[i].removeToolbar()},setDrawingOptions:function(i){for(var n in this._toolbars)this._toolbars[n]instanceof L.DrawToolbar&&this._toolbars[n].setOptions(i)},_toolbarEnabled:function(i){var n=i.target;for(var s in this._toolbars)this._toolbars[s]!==n&&this._toolbars[s].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(i){L.setOptions(this,i),this._modes={},this._actionButtons=[],this._activeMode=null;var n=L.version.split(".");parseInt(n[0],10)===1&&parseInt(n[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(i){var n,s=L.DomUtil.create("div","leaflet-draw-section"),h=0,p=this._toolbarClass||"",_=this.getModeHandlers(i);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=i,n=0;n<_.length;n++)_[n].enabled&&this._initModeHandler(_[n].handler,this._toolbarContainer,h++,p,_[n].title);if(h)return this._lastButtonIndex=--h,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),s.appendChild(this._toolbarContainer),s.appendChild(this._actionsContainer),s},removeToolbar:function(){for(var i in this._modes)this._modes.hasOwnProperty(i)&&(this._disposeButton(this._modes[i].button,this._modes[i].handler.enable,this._modes[i].handler),this._modes[i].handler.disable(),this._modes[i].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var n=0,s=this._actionButtons.length;n<s;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(i,n,s,h,p){var _=i.type;this._modes[_]={},this._modes[_].handler=i,this._modes[_].button=this._createButton({type:_,title:p,className:h+"-"+_,container:n,callback:this._modes[_].handler.enable,context:this._modes[_].handler}),this._modes[_].buttonIndex=s,this._modes[_].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!a.MSStream},_createButton:function(i){var n=L.DomUtil.create("a",i.className||"",i.container),s=L.DomUtil.create("span","sr-only",i.container);n.href="#",n.appendChild(s),i.title&&(n.title=i.title,s.innerHTML=i.title),i.text&&(n.innerHTML=i.text,s.innerHTML=i.text);var h=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(n,"click",L.DomEvent.stopPropagation).on(n,"mousedown",L.DomEvent.stopPropagation).on(n,"dblclick",L.DomEvent.stopPropagation).on(n,"touchstart",L.DomEvent.stopPropagation).on(n,"click",L.DomEvent.preventDefault).on(n,h,i.callback,i.context),n},_disposeButton:function(i,n){var s=this._detectIOS()?"touchstart":"click";L.DomEvent.off(i,"click",L.DomEvent.stopPropagation).off(i,"mousedown",L.DomEvent.stopPropagation).off(i,"dblclick",L.DomEvent.stopPropagation).off(i,"touchstart",L.DomEvent.stopPropagation).off(i,"click",L.DomEvent.preventDefault).off(i,s,n)},_handlerActivated:function(i){this.disable(),this._activeMode=this._modes[i.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(i){var n,s,h,p,_=this._actionsContainer,E=this.getActions(i),y=E.length;for(s=0,h=this._actionButtons.length;s<h;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback);for(this._actionButtons=[];_.firstChild;)_.removeChild(_.firstChild);for(var M=0;M<y;M++)"enabled"in E[M]&&!E[M].enabled||(n=L.DomUtil.create("li","",_),p=this._createButton({title:E[M].title,text:E[M].text,container:n,callback:E[M].callback,context:E[M].context}),this._actionButtons.push({button:p,callback:E[M].callback}))},_showActionsToolbar:function(){var i=this._activeMode.buttonIndex,n=this._lastButtonIndex,s=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=s+"px",i===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),i===n&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(i){this._map=i,this._popupPane=i._panes.popupPane,this._visible=!1,this._container=i.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(i){return this._container?(i.subtext=i.subtext||"",i.subtext.length!==0||this._singleLineLabel?i.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(i.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+i.subtext+"</span><br />":"")+"<span>"+i.text+"</span>",i.text||i.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(i){var n=this._map.latLngToLayerPoint(i),s=this._container;return this._container&&(this._visible&&(s.style.visibility="inherit"),L.DomUtil.setPosition(s,n)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(i){for(var n in this.options)this.options.hasOwnProperty(n)&&i[n]&&(i[n]=L.extend({},this.options[n],i[n]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,i)},getModeHandlers:function(i){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(i,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(i,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(i,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(i,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(i,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(i,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(i){return[{enabled:i.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:i.completeShape,context:i},{enabled:i.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:i.deleteLastVertex,context:i},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(i){L.setOptions(this,i);for(var n in this._modes)this._modes.hasOwnProperty(n)&&i.hasOwnProperty(n)&&this._modes[n].handler.setOptions(i[n])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(i){i.edit&&(i.edit.selectedPathOptions===void 0&&(i.edit.selectedPathOptions=this.options.edit.selectedPathOptions),i.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,i.edit.selectedPathOptions)),i.remove&&(i.remove=L.extend({},this.options.remove,i.remove)),i.poly&&(i.poly=L.extend({},this.options.poly,i.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,i),this._selectedFeatureCount=0},getModeHandlers:function(i){var n=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(i,{featureGroup:n,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(i,{featureGroup:n}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(i){var n=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return i.removeAllLayers&&n.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),n},addToolbar:function(i){var n=L.Toolbar.prototype.addToolbar.call(this,i);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),n},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var i,n=this.options.featureGroup,s=n.getLayers().length!==0;this.options.edit&&(i=this._modes[L.EditToolbar.Edit.TYPE].button,s?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(i=this._modes[L.EditToolbar.Delete.TYPE].button,s?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(i,n){if(L.Handler.prototype.initialize.call(this,i),L.setOptions(this,n),this._featureGroup=n.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),i._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(i){this._revertLayer(i)},this)},save:function(){var i=new L.LayerGroup;this._featureGroup.eachLayer(function(n){n.edited&&(i.addLayer(n),n.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:i})},_backupLayer:function(i){var n=L.Util.stamp(i);this._uneditedLayerProps[n]||(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?this._uneditedLayerProps[n]={latlngs:L.LatLngUtil.cloneLatLngs(i.getLatLngs())}:i instanceof L.Circle?this._uneditedLayerProps[n]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng()),radius:i.getRadius()}:(i instanceof L.Marker||i instanceof L.CircleMarker)&&(this._uneditedLayerProps[n]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(i){var n=L.Util.stamp(i);i.edited=!1,this._uneditedLayerProps.hasOwnProperty(n)&&(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?i.setLatLngs(this._uneditedLayerProps[n].latlngs):i instanceof L.Circle?(i.setLatLng(this._uneditedLayerProps[n].latlng),i.setRadius(this._uneditedLayerProps[n].radius)):(i instanceof L.Marker||i instanceof L.CircleMarker)&&i.setLatLng(this._uneditedLayerProps[n].latlng),i.fire("revert-edited",{layer:i}))},_enableLayerEdit:function(i){var n,s,h=i.layer||i.target||i;this._backupLayer(h),this.options.poly&&(s=L.Util.extend({},this.options.poly),h.options.poly=s),this.options.selectedPathOptions&&(n=L.Util.extend({},this.options.selectedPathOptions),n.maintainColor&&(n.color=h.options.color,n.fillColor=h.options.fillColor),h.options.original=L.extend({},h.options),h.options.editing=n),h instanceof L.Marker?(h.editing&&h.editing.enable(),h.dragging.enable(),h.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):h.editing.enable()},_disableLayerEdit:function(i){var n=i.layer||i.target||i;n.edited=!1,n.editing&&n.editing.disable(),delete n.options.editing,delete n.options.original,this._selectedPathOptions&&(n instanceof L.Marker?this._toggleMarkerHighlight(n):(n.setStyle(n.options.previousOptions),delete n.options.previousOptions)),n instanceof L.Marker?(n.dragging.disable(),n.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):n.editing.disable()},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_onMarkerDragEnd:function(i){var n=i.target;n.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:n})},_onTouchMove:function(i){var n=i.originalEvent.changedTouches[0],s=this._map.mouseEventToLayerPoint(n),h=this._map.layerPointToLatLng(s);i.target.setLatLng(h)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(i,n){if(L.Handler.prototype.initialize.call(this,i),L.Util.setOptions(this,n),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(i){this._deletableLayers.addLayer(i),i.fire("revert-deleted",{layer:i})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(i){this._removeLayer({layer:i})},this),this.save()},_enableLayerDelete:function(i){(i.layer||i.target||i).on("click",this._removeLayer,this)},_disableLayerDelete:function(i){var n=i.layer||i.target||i;n.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(n)},_removeLayer:function(i){var n=i.layer||i.target||i;this._deletableLayers.removeLayer(n),this._deletedLayers.addLayer(n),n.fire("deleted")},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var ri=Vh(()=>su),au=Ji('<div style="height: 600px; width: 100%;" class="svelte-1ymq5l"></div>');function lu(a,u){Ho(u,!1);let o=Tr(u,"selectedLayer",8),f=mn(),i=mn(null),n=null,s=null;const h=al(),p=y=>{Ct(i)&&(n&&Ct(i).removeLayer(n),y?(n=ri().tileLayer(y.value,{attribution:y.attribution}),n.addTo(Ct(i))):(n=ri().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}),n.addTo(Ct(i))))},_=y=>{s&&Ct(i).removeLayer(s),s=ri().geoJSON(y,{style:{color:"blue",fillColor:"blue",fillOpacity:.6,weight:2}}).addTo(Ct(i))};Xh(()=>{ri().GeometryUtil&&ri(ri().GeometryUtil.readableArea=function(k,D){const b=D?["m²","ha","km²"]:["ft²","ac","mi²"],S=D?[1e4,1e6]:[43560,27878400];let z=0;for(;k>S[z]&&z<S.length-1;)k/=S[z],z++;return`${k.toFixed(2)} ${b[z]}`}),te(i,ri().map(Ct(f)).setView([52.474,13.43],13)),p(o());const y=new(ri()).FeatureGroup;Ct(i).addLayer(y);const M=new(ri()).Control.Draw({draw:{polyline:!1,polygon:{shapeOptions:{color:"var(--highlite)",fillColor:"var(--highlite)",fillOpacity:.2,weight:2}},rectangle:{shapeOptions:{color:"var(--highlite)",fillColor:"var(--highlite)",fillOpacity:.2,weight:2}},circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:y,edit:{selectedPathOptions:{color:"var(--stroke)",fillColor:"var(--highlite)",fillOpacity:.2,weight:2}}}});Ct(i).addControl(M),Ct(i).on(ri().Draw.Event.CREATED,k=>{const{layer:D}=k;y.clearLayers(),D.setStyle({color:"var(--stroke)",fillColor:"var(--highlite)",fillOpacity:.2,weight:2}),y.addLayer(D),h("shapeDrawn",{layer:D})}),Ct(i).on("draw:edited",k=>{k.layers.eachLayer(b=>{const S=ri().GeometryUtil.geodesicArea(b.getLatLngs()[0]),z=b.getLatLngs()[0];h("shapeEdited",{layer:b,area:S,latlngs:z})})}),Ct(i).on("zoomend",()=>{h("mapZoomed",{zoom:Ct(i).getZoom()})})}),yo(()=>Ct(i),()=>{Lo.subscribe(y=>{y&&Ct(i)&&_(y)})}),yo(()=>Ct(i),()=>{Io.subscribe(y=>{y&&Ct(i)&&_(y)})}),yo(()=>Zs(o()),()=>{o()&&p(o())}),Va(),Fs();var E=au();qh(E,y=>te(f,y),()=>Ct(f)),qi(a,E),Wo()}function mo(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var us={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var _a;function hu(){return _a||(_a=1,function(a,u){(function(o){a.exports=o()})(function(){return function o(f,i,n){function s(_,E){if(!i[_]){if(!f[_]){var y=typeof mo=="function"&&mo;if(!E&&y)return y(_,!0);if(h)return h(_,!0);var M=new Error("Cannot find module '"+_+"'");throw M.code="MODULE_NOT_FOUND",M}var k=i[_]={exports:{}};f[_][0].call(k.exports,function(D){var b=f[_][1][D];return s(b||D)},k,k.exports,o,f,i,n)}return i[_].exports}for(var h=typeof mo=="function"&&mo,p=0;p<n.length;p++)s(n[p]);return s}({1:[function(o,f,i){var n=o("./utils"),s=o("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(p){for(var _,E,y,M,k,D,b,S=[],z=0,T=p.length,H=T,$=n.getTypeOf(p)!=="string";z<p.length;)H=T-z,y=$?(_=p[z++],E=z<T?p[z++]:0,z<T?p[z++]:0):(_=p.charCodeAt(z++),E=z<T?p.charCodeAt(z++):0,z<T?p.charCodeAt(z++):0),M=_>>2,k=(3&_)<<4|E>>4,D=1<H?(15&E)<<2|y>>6:64,b=2<H?63&y:64,S.push(h.charAt(M)+h.charAt(k)+h.charAt(D)+h.charAt(b));return S.join("")},i.decode=function(p){var _,E,y,M,k,D,b=0,S=0,z="data:";if(p.substr(0,z.length)===z)throw new Error("Invalid base64 input, it looks like a data url.");var T,H=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===h.charAt(64)&&H--,p.charAt(p.length-2)===h.charAt(64)&&H--,H%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=s.uint8array?new Uint8Array(0|H):new Array(0|H);b<p.length;)_=h.indexOf(p.charAt(b++))<<2|(M=h.indexOf(p.charAt(b++)))>>4,E=(15&M)<<4|(k=h.indexOf(p.charAt(b++)))>>2,y=(3&k)<<6|(D=h.indexOf(p.charAt(b++))),T[S++]=_,k!==64&&(T[S++]=E),D!==64&&(T[S++]=y);return T}},{"./support":30,"./utils":32}],2:[function(o,f,i){var n=o("./external"),s=o("./stream/DataWorker"),h=o("./stream/Crc32Probe"),p=o("./stream/DataLengthProbe");function _(E,y,M,k,D){this.compressedSize=E,this.uncompressedSize=y,this.crc32=M,this.compression=k,this.compressedContent=D}_.prototype={getContentWorker:function(){var E=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),y=this;return E.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),E},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(E,y,M){return E.pipe(new h).pipe(new p("uncompressedSize")).pipe(y.compressWorker(M)).pipe(new p("compressedSize")).withStreamInfo("compression",y)},f.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,f,i){var n=o("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,f,i){var n=o("./utils"),s=function(){for(var h,p=[],_=0;_<256;_++){h=_;for(var E=0;E<8;E++)h=1&h?3988292384^h>>>1:h>>>1;p[_]=h}return p}();f.exports=function(h,p){return h!==void 0&&h.length?n.getTypeOf(h)!=="string"?function(_,E,y,M){var k=s,D=M+y;_^=-1;for(var b=M;b<D;b++)_=_>>>8^k[255&(_^E[b])];return-1^_}(0|p,h,h.length,0):function(_,E,y,M){var k=s,D=M+y;_^=-1;for(var b=M;b<D;b++)_=_>>>8^k[255&(_^E.charCodeAt(b))];return-1^_}(0|p,h,h.length,0):0}},{"./utils":32}],5:[function(o,f,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(o,f,i){var n=null;n=typeof Promise<"u"?Promise:o("lie"),f.exports={Promise:n}},{lie:37}],7:[function(o,f,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=o("pako"),h=o("./utils"),p=o("./stream/GenericWorker"),_=n?"uint8array":"array";function E(y,M){p.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=M,this.meta={}}i.magic="\b\0",h.inherits(E,p),E.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(_,y.data),!1)},E.prototype.flush=function(){p.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},E.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},E.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(M){y.push({data:M,meta:y.meta})}},i.compressWorker=function(y){return new E("Deflate",y)},i.uncompressWorker=function(){return new E("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,f,i){function n(k,D){var b,S="";for(b=0;b<D;b++)S+=String.fromCharCode(255&k),k>>>=8;return S}function s(k,D,b,S,z,T){var H,$,B=k.file,Q=k.compression,X=T!==_.utf8encode,x=h.transformTo("string",T(B.name)),w=h.transformTo("string",_.utf8encode(B.name)),P=B.comment,R=h.transformTo("string",T(P)),v=h.transformTo("string",_.utf8encode(P)),A=w.length!==B.name.length,c=v.length!==P.length,O="",G="",Z="",F=B.dir,j=B.date,J={crc32:0,compressedSize:0,uncompressedSize:0};D&&!b||(J.crc32=k.crc32,J.compressedSize=k.compressedSize,J.uncompressedSize=k.uncompressedSize);var q=0;D&&(q|=8),X||!A&&!c||(q|=2048);var Y=0,ct=0;F&&(Y|=16),z==="UNIX"?(ct=798,Y|=function(rt,ft){var Ot=rt;return rt||(Ot=ft?16893:33204),(65535&Ot)<<16}(B.unixPermissions,F)):(ct=20,Y|=function(rt){return 63&(rt||0)}(B.dosPermissions)),H=j.getUTCHours(),H<<=6,H|=j.getUTCMinutes(),H<<=5,H|=j.getUTCSeconds()/2,$=j.getUTCFullYear()-1980,$<<=4,$|=j.getUTCMonth()+1,$<<=5,$|=j.getUTCDate(),A&&(G=n(1,1)+n(E(x),4)+w,O+="up"+n(G.length,2)+G),c&&(Z=n(1,1)+n(E(R),4)+v,O+="uc"+n(Z.length,2)+Z);var lt="";return lt+=`
\0`,lt+=n(q,2),lt+=Q.magic,lt+=n(H,2),lt+=n($,2),lt+=n(J.crc32,4),lt+=n(J.compressedSize,4),lt+=n(J.uncompressedSize,4),lt+=n(x.length,2),lt+=n(O.length,2),{fileRecord:y.LOCAL_FILE_HEADER+lt+x+O,dirRecord:y.CENTRAL_FILE_HEADER+n(ct,2)+lt+n(R.length,2)+"\0\0\0\0"+n(Y,4)+n(S,4)+x+O+R}}var h=o("../utils"),p=o("../stream/GenericWorker"),_=o("../utf8"),E=o("../crc32"),y=o("../signature");function M(k,D,b,S){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=b,this.encodeFileName=S,this.streamFiles=k,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(M,p),M.prototype.push=function(k){var D=k.meta.percent||0,b=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(k):(this.bytesWritten+=k.data.length,p.prototype.push.call(this,{data:k.data,meta:{currentFile:this.currentFile,percent:b?(D+100*(b-S-1))/b:100}}))},M.prototype.openedSource=function(k){this.currentSourceOffset=this.bytesWritten,this.currentFile=k.file.name;var D=this.streamFiles&&!k.file.dir;if(D){var b=s(k,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},M.prototype.closedSource=function(k){this.accumulate=!1;var D=this.streamFiles&&!k.file.dir,b=s(k,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),D)this.push({data:function(S){return y.DATA_DESCRIPTOR+n(S.crc32,4)+n(S.compressedSize,4)+n(S.uncompressedSize,4)}(k),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},M.prototype.flush=function(){for(var k=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var b=this.bytesWritten-k,S=function(z,T,H,$,B){var Q=h.transformTo("string",B($));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(z,2)+n(z,2)+n(T,4)+n(H,4)+n(Q.length,2)+Q}(this.dirRecords.length,b,k,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},M.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},M.prototype.registerPrevious=function(k){this._sources.push(k);var D=this;return k.on("data",function(b){D.processChunk(b)}),k.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),k.on("error",function(b){D.error(b)}),this},M.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},M.prototype.error=function(k){var D=this._sources;if(!p.prototype.error.call(this,k))return!1;for(var b=0;b<D.length;b++)try{D[b].error(k)}catch{}return!0},M.prototype.lock=function(){p.prototype.lock.call(this);for(var k=this._sources,D=0;D<k.length;D++)k[D].lock()},f.exports=M},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,f,i){var n=o("../compressions"),s=o("./ZipFileWorker");i.generateWorker=function(h,p,_){var E=new s(p.streamFiles,_,p.platform,p.encodeFileName),y=0;try{h.forEach(function(M,k){y++;var D=function(T,H){var $=T||H,B=n[$];if(!B)throw new Error($+" is not a valid compression method !");return B}(k.options.compression,p.compression),b=k.options.compressionOptions||p.compressionOptions||{},S=k.dir,z=k.date;k._compressWorker(D,b).withStreamInfo("file",{name:M,dir:S,date:z,comment:k.comment||"",unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions}).pipe(E)}),E.entriesCount=y}catch(M){E.error(M)}return E}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,f,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var h in this)typeof this[h]!="function"&&(s[h]=this[h]);return s}}(n.prototype=o("./object")).loadAsync=o("./load"),n.support=o("./support"),n.defaults=o("./defaults"),n.version="3.10.1",n.loadAsync=function(s,h){return new n().loadAsync(s,h)},n.external=o("./external"),f.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,f,i){var n=o("./utils"),s=o("./external"),h=o("./utf8"),p=o("./zipEntries"),_=o("./stream/Crc32Probe"),E=o("./nodejsUtils");function y(M){return new s.Promise(function(k,D){var b=M.decompressed.getContentWorker().pipe(new _);b.on("error",function(S){D(S)}).on("end",function(){b.streamInfo.crc32!==M.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):k()}).resume()})}f.exports=function(M,k){var D=this;return k=n.extend(k||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),E.isNode&&E.isStream(M)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",M,!0,k.optimizedBinaryString,k.base64).then(function(b){var S=new p(k);return S.load(b),S}).then(function(b){var S=[s.Promise.resolve(b)],z=b.files;if(k.checkCRC32)for(var T=0;T<z.length;T++)S.push(y(z[T]));return s.Promise.all(S)}).then(function(b){for(var S=b.shift(),z=S.files,T=0;T<z.length;T++){var H=z[T],$=H.fileNameStr,B=n.resolve(H.fileNameStr);D.file(B,H.decompressed,{binary:!0,optimizedBinaryString:!0,date:H.date,dir:H.dir,comment:H.fileCommentStr.length?H.fileCommentStr:null,unixPermissions:H.unixPermissions,dosPermissions:H.dosPermissions,createFolders:k.createFolders}),H.dir||(D.file(B).unsafeOriginalName=$)}return S.zipComment.length&&(D.comment=S.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,f,i){var n=o("../utils"),s=o("../stream/GenericWorker");function h(p,_){s.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(_)}n.inherits(h,s),h.prototype._bindStream=function(p){var _=this;(this._stream=p).pause(),p.on("data",function(E){_.push({data:E,meta:{percent:0}})}).on("error",function(E){_.isPaused?this.generatedError=E:_.error(E)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},h.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},f.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,f,i){var n=o("readable-stream").Readable;function s(h,p,_){n.call(this,p),this._helper=h;var E=this;h.on("data",function(y,M){E.push(y)||E._helper.pause(),_&&_(M)}).on("error",function(y){E.emit("error",y)}).on("end",function(){E.push(null)})}o("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},f.exports=s},{"../utils":32,"readable-stream":16}],14:[function(o,f,i){f.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(o,f,i){function n(B,Q,X){var x,w=h.getTypeOf(Q),P=h.extend(X||{},E);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(B=z(B)),P.createFolders&&(x=S(B))&&T.call(this,x,!0);var R=w==="string"&&P.binary===!1&&P.base64===!1;X&&X.binary!==void 0||(P.binary=!R),(Q instanceof y&&Q.uncompressedSize===0||P.dir||!Q||Q.length===0)&&(P.base64=!1,P.binary=!0,Q="",P.compression="STORE",w="string");var v=null;v=Q instanceof y||Q instanceof p?Q:D.isNode&&D.isStream(Q)?new b(B,Q):h.prepareContent(B,Q,P.binary,P.optimizedBinaryString,P.base64);var A=new M(B,v,P);this.files[B]=A}var s=o("./utf8"),h=o("./utils"),p=o("./stream/GenericWorker"),_=o("./stream/StreamHelper"),E=o("./defaults"),y=o("./compressedObject"),M=o("./zipObject"),k=o("./generate"),D=o("./nodejsUtils"),b=o("./nodejs/NodejsStreamInputAdapter"),S=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var Q=B.lastIndexOf("/");return 0<Q?B.substring(0,Q):""},z=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},T=function(B,Q){return Q=Q!==void 0?Q:E.createFolders,B=z(B),this.files[B]||n.call(this,B,null,{dir:!0,createFolders:Q}),this.files[B]};function H(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var $={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var Q,X,x;for(Q in this.files)x=this.files[Q],(X=Q.slice(this.root.length,Q.length))&&Q.slice(0,this.root.length)===this.root&&B(X,x)},filter:function(B){var Q=[];return this.forEach(function(X,x){B(X,x)&&Q.push(x)}),Q},file:function(B,Q,X){if(arguments.length!==1)return B=this.root+B,n.call(this,B,Q,X),this;if(H(B)){var x=B;return this.filter(function(P,R){return!R.dir&&x.test(P)})}var w=this.files[this.root+B];return w&&!w.dir?w:null},folder:function(B){if(!B)return this;if(H(B))return this.filter(function(w,P){return P.dir&&B.test(w)});var Q=this.root+B,X=T.call(this,Q),x=this.clone();return x.root=X.name,x},remove:function(B){B=this.root+B;var Q=this.files[B];if(Q||(B.slice(-1)!=="/"&&(B+="/"),Q=this.files[B]),Q&&!Q.dir)delete this.files[B];else for(var X=this.filter(function(w,P){return P.name.slice(0,B.length)===B}),x=0;x<X.length;x++)delete this.files[X[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var Q,X={};try{if((X=h.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring"&&(X.type="string"),!X.type)throw new Error("No output type specified.");h.checkSupport(X.type),X.platform!=="darwin"&&X.platform!=="freebsd"&&X.platform!=="linux"&&X.platform!=="sunos"||(X.platform="UNIX"),X.platform==="win32"&&(X.platform="DOS");var x=X.comment||this.comment||"";Q=k.generateWorker(this,X,x)}catch(w){(Q=new p("error")).error(w)}return new _(Q,X.type||"string",X.mimeType)},generateAsync:function(B,Q){return this.generateInternalStream(B).accumulate(Q)},generateNodeStream:function(B,Q){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(Q)}};f.exports=$},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,f,i){f.exports=o("stream")},{stream:void 0}],17:[function(o,f,i){var n=o("./DataReader");function s(h){n.call(this,h);for(var p=0;p<this.data.length;p++)h[p]=255&h[p]}o("../utils").inherits(s,n),s.prototype.byteAt=function(h){return this.data[this.zero+h]},s.prototype.lastIndexOfSignature=function(h){for(var p=h.charCodeAt(0),_=h.charCodeAt(1),E=h.charCodeAt(2),y=h.charCodeAt(3),M=this.length-4;0<=M;--M)if(this.data[M]===p&&this.data[M+1]===_&&this.data[M+2]===E&&this.data[M+3]===y)return M-this.zero;return-1},s.prototype.readAndCheckSignature=function(h){var p=h.charCodeAt(0),_=h.charCodeAt(1),E=h.charCodeAt(2),y=h.charCodeAt(3),M=this.readData(4);return p===M[0]&&_===M[1]&&E===M[2]&&y===M[3]},s.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},f.exports=s},{"../utils":32,"./DataReader":18}],18:[function(o,f,i){var n=o("../utils");function s(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var p,_=0;for(this.checkOffset(h),p=this.index+h-1;p>=this.index;p--)_=(_<<8)+this.byteAt(p);return this.index+=h,_},readString:function(h){return n.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},f.exports=s},{"../utils":32}],19:[function(o,f,i){var n=o("./Uint8ArrayReader");function s(h){n.call(this,h)}o("../utils").inherits(s,n),s.prototype.readData=function(h){this.checkOffset(h);var p=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},f.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,f,i){var n=o("./DataReader");function s(h){n.call(this,h)}o("../utils").inherits(s,n),s.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},s.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},s.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},s.prototype.readData=function(h){this.checkOffset(h);var p=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},f.exports=s},{"../utils":32,"./DataReader":18}],21:[function(o,f,i){var n=o("./ArrayReader");function s(h){n.call(this,h)}o("../utils").inherits(s,n),s.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},f.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(o,f,i){var n=o("../utils"),s=o("../support"),h=o("./ArrayReader"),p=o("./StringReader"),_=o("./NodeBufferReader"),E=o("./Uint8ArrayReader");f.exports=function(y){var M=n.getTypeOf(y);return n.checkSupport(M),M!=="string"||s.uint8array?M==="nodebuffer"?new _(y):s.uint8array?new E(n.transformTo("uint8array",y)):new h(n.transformTo("array",y)):new p(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,f,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,f,i){var n=o("./GenericWorker"),s=o("../utils");function h(p){n.call(this,"ConvertWorker to "+p),this.destType=p}s.inherits(h,n),h.prototype.processChunk=function(p){this.push({data:s.transformTo(this.destType,p.data),meta:p.meta})},f.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(o,f,i){var n=o("./GenericWorker"),s=o("../crc32");function h(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(h,n),h.prototype.processChunk=function(p){this.streamInfo.crc32=s(p.data,this.streamInfo.crc32||0),this.push(p)},f.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,f,i){var n=o("../utils"),s=o("./GenericWorker");function h(p){s.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}n.inherits(h,s),h.prototype.processChunk=function(p){if(p){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+p.data.length}s.prototype.processChunk.call(this,p)},f.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(o,f,i){var n=o("../utils"),s=o("./GenericWorker");function h(p){s.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(E){_.dataIsReady=!0,_.data=E,_.max=E&&E.length||0,_.type=n.getTypeOf(E),_.isPaused||_._tickAndRepeat()},function(E){_.error(E)})}n.inherits(h,s),h.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,_);break;case"uint8array":p=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":p=this.data.slice(this.index,_)}return this.index=_,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},f.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(o,f,i){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,h){return this._listeners[s].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,h){if(this._listeners[s])for(var p=0;p<this._listeners[s].length;p++)this._listeners[s][p].call(this,h)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var h=this;return s.on("data",function(p){h.processChunk(p)}),s.on("end",function(){h.end()}),s.on("error",function(p){h.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,h){return this.extraStreamInfo[s]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},f.exports=n},{}],29:[function(o,f,i){var n=o("../utils"),s=o("./ConvertWorker"),h=o("./GenericWorker"),p=o("../base64"),_=o("../support"),E=o("../external"),y=null;if(_.nodestream)try{y=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function M(D,b){return new E.Promise(function(S,z){var T=[],H=D._internalType,$=D._outputType,B=D._mimeType;D.on("data",function(Q,X){T.push(Q),b&&b(X)}).on("error",function(Q){T=[],z(Q)}).on("end",function(){try{var Q=function(X,x,w){switch(X){case"blob":return n.newBlob(n.transformTo("arraybuffer",x),w);case"base64":return p.encode(x);default:return n.transformTo(X,x)}}($,function(X,x){var w,P=0,R=null,v=0;for(w=0;w<x.length;w++)v+=x[w].length;switch(X){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(R=new Uint8Array(v),w=0;w<x.length;w++)R.set(x[w],P),P+=x[w].length;return R;case"nodebuffer":return Buffer.concat(x);default:throw new Error("concat : unsupported type '"+X+"'")}}(H,T),B);S(Q)}catch(X){z(X)}T=[]}).resume()})}function k(D,b,S){var z=b;switch(b){case"blob":case"arraybuffer":z="uint8array";break;case"base64":z="string"}try{this._internalType=z,this._outputType=b,this._mimeType=S,n.checkSupport(z),this._worker=D.pipe(new s(z)),D.lock()}catch(T){this._worker=new h("error"),this._worker.error(T)}}k.prototype={accumulate:function(D){return M(this,D)},on:function(D,b){var S=this;return D==="data"?this._worker.on(D,function(z){b.call(S,z.data,z.meta)}):this._worker.on(D,function(){n.delay(b,arguments,S)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},D)}},f.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,f,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(n),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!o("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(o,f,i){for(var n=o("./utils"),s=o("./support"),h=o("./nodejsUtils"),p=o("./stream/GenericWorker"),_=new Array(256),E=0;E<256;E++)_[E]=252<=E?6:248<=E?5:240<=E?4:224<=E?3:192<=E?2:1;_[254]=_[254]=1;function y(){p.call(this,"utf-8 decode"),this.leftOver=null}function M(){p.call(this,"utf-8 encode")}i.utf8encode=function(k){return s.nodebuffer?h.newBufferFrom(k,"utf-8"):function(D){var b,S,z,T,H,$=D.length,B=0;for(T=0;T<$;T++)(64512&(S=D.charCodeAt(T)))==55296&&T+1<$&&(64512&(z=D.charCodeAt(T+1)))==56320&&(S=65536+(S-55296<<10)+(z-56320),T++),B+=S<128?1:S<2048?2:S<65536?3:4;for(b=s.uint8array?new Uint8Array(B):new Array(B),T=H=0;H<B;T++)(64512&(S=D.charCodeAt(T)))==55296&&T+1<$&&(64512&(z=D.charCodeAt(T+1)))==56320&&(S=65536+(S-55296<<10)+(z-56320),T++),S<128?b[H++]=S:(S<2048?b[H++]=192|S>>>6:(S<65536?b[H++]=224|S>>>12:(b[H++]=240|S>>>18,b[H++]=128|S>>>12&63),b[H++]=128|S>>>6&63),b[H++]=128|63&S);return b}(k)},i.utf8decode=function(k){return s.nodebuffer?n.transformTo("nodebuffer",k).toString("utf-8"):function(D){var b,S,z,T,H=D.length,$=new Array(2*H);for(b=S=0;b<H;)if((z=D[b++])<128)$[S++]=z;else if(4<(T=_[z]))$[S++]=65533,b+=T-1;else{for(z&=T===2?31:T===3?15:7;1<T&&b<H;)z=z<<6|63&D[b++],T--;1<T?$[S++]=65533:z<65536?$[S++]=z:(z-=65536,$[S++]=55296|z>>10&1023,$[S++]=56320|1023&z)}return $.length!==S&&($.subarray?$=$.subarray(0,S):$.length=S),n.applyFromCharCode($)}(k=n.transformTo(s.uint8array?"uint8array":"array",k))},n.inherits(y,p),y.prototype.processChunk=function(k){var D=n.transformTo(s.uint8array?"uint8array":"array",k.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=D;(D=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),D.set(b,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var S=function(T,H){var $;for((H=H||T.length)>T.length&&(H=T.length),$=H-1;0<=$&&(192&T[$])==128;)$--;return $<0||$===0?H:$+_[T[$]]>H?$:H}(D),z=D;S!==D.length&&(s.uint8array?(z=D.subarray(0,S),this.leftOver=D.subarray(S,D.length)):(z=D.slice(0,S),this.leftOver=D.slice(S,D.length))),this.push({data:i.utf8decode(z),meta:k.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=y,n.inherits(M,p),M.prototype.processChunk=function(k){this.push({data:i.utf8encode(k.data),meta:k.meta})},i.Utf8EncodeWorker=M},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,f,i){var n=o("./support"),s=o("./base64"),h=o("./nodejsUtils"),p=o("./external");function _(b){return b}function E(b,S){for(var z=0;z<b.length;++z)S[z]=255&b.charCodeAt(z);return S}o("setimmediate"),i.newBlob=function(b,S){i.checkSupport("blob");try{return new Blob([b],{type:S})}catch{try{var z=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return z.append(b),z.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(b,S,z){var T=[],H=0,$=b.length;if($<=z)return String.fromCharCode.apply(null,b);for(;H<$;)S==="array"||S==="nodebuffer"?T.push(String.fromCharCode.apply(null,b.slice(H,Math.min(H+z,$)))):T.push(String.fromCharCode.apply(null,b.subarray(H,Math.min(H+z,$)))),H+=z;return T.join("")},stringifyByChar:function(b){for(var S="",z=0;z<b.length;z++)S+=String.fromCharCode(b[z]);return S},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function M(b){var S=65536,z=i.getTypeOf(b),T=!0;if(z==="uint8array"?T=y.applyCanBeUsed.uint8array:z==="nodebuffer"&&(T=y.applyCanBeUsed.nodebuffer),T)for(;1<S;)try{return y.stringifyByChunk(b,z,S)}catch{S=Math.floor(S/2)}return y.stringifyByChar(b)}function k(b,S){for(var z=0;z<b.length;z++)S[z]=b[z];return S}i.applyFromCharCode=M;var D={};D.string={string:_,array:function(b){return E(b,new Array(b.length))},arraybuffer:function(b){return D.string.uint8array(b).buffer},uint8array:function(b){return E(b,new Uint8Array(b.length))},nodebuffer:function(b){return E(b,h.allocBuffer(b.length))}},D.array={string:M,array:_,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return h.newBufferFrom(b)}},D.arraybuffer={string:function(b){return M(new Uint8Array(b))},array:function(b){return k(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:_,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return h.newBufferFrom(new Uint8Array(b))}},D.uint8array={string:M,array:function(b){return k(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:_,nodebuffer:function(b){return h.newBufferFrom(b)}},D.nodebuffer={string:M,array:function(b){return k(b,new Array(b.length))},arraybuffer:function(b){return D.nodebuffer.uint8array(b).buffer},uint8array:function(b){return k(b,new Uint8Array(b.length))},nodebuffer:_},i.transformTo=function(b,S){if(S=S||"",!b)return S;i.checkSupport(b);var z=i.getTypeOf(S);return D[z][b](S)},i.resolve=function(b){for(var S=b.split("/"),z=[],T=0;T<S.length;T++){var H=S[T];H==="."||H===""&&T!==0&&T!==S.length-1||(H===".."?z.pop():z.push(H))}return z.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":n.nodebuffer&&h.isBuffer(b)?"nodebuffer":n.uint8array&&b instanceof Uint8Array?"uint8array":n.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!n[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var S,z,T="";for(z=0;z<(b||"").length;z++)T+="\\x"+((S=b.charCodeAt(z))<16?"0":"")+S.toString(16).toUpperCase();return T},i.delay=function(b,S,z){setImmediate(function(){b.apply(z||null,S||[])})},i.inherits=function(b,S){function z(){}z.prototype=S.prototype,b.prototype=new z},i.extend=function(){var b,S,z={};for(b=0;b<arguments.length;b++)for(S in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],S)&&z[S]===void 0&&(z[S]=arguments[b][S]);return z},i.prepareContent=function(b,S,z,T,H){return p.Promise.resolve(S).then(function($){return n.blob&&($ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call($))!==-1)&&typeof FileReader<"u"?new p.Promise(function(B,Q){var X=new FileReader;X.onload=function(x){B(x.target.result)},X.onerror=function(x){Q(x.target.error)},X.readAsArrayBuffer($)}):$}).then(function($){var B=i.getTypeOf($);return B?(B==="arraybuffer"?$=i.transformTo("uint8array",$):B==="string"&&(H?$=s.decode($):z&&T!==!0&&($=function(Q){return E(Q,n.uint8array?new Uint8Array(Q.length):new Array(Q.length))}($))),$):p.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,f,i){var n=o("./reader/readerFor"),s=o("./utils"),h=o("./signature"),p=o("./zipEntry"),_=o("./support");function E(y){this.files=[],this.loadOptions=y}E.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var M=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(M)+", expected "+s.pretty(y)+")")}},isSignature:function(y,M){var k=this.reader.index;this.reader.setIndex(y);var D=this.reader.readString(4)===M;return this.reader.setIndex(k),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),M=_.uint8array?"uint8array":"array",k=s.transformTo(M,y);this.zipComment=this.loadOptions.decodeFileName(k)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,M,k,D=this.zip64EndOfCentralSize-44;0<D;)y=this.reader.readInt(2),M=this.reader.readInt(4),k=this.reader.readData(M),this.zip64ExtensibleData[y]={id:y,length:M,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,M;for(y=0;y<this.files.length;y++)M=this.files[y],this.reader.setIndex(M.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),M.readLocalPart(this.reader),M.handleUTF8(),M.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(y=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var M=y;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;this.zip64&&(k+=20,k+=12+this.zip64EndOfCentralSize);var D=M-k;if(0<D)this.isSignature(M,h.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(y){this.reader=n(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},f.exports=E},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,f,i){var n=o("./reader/readerFor"),s=o("./utils"),h=o("./compressedObject"),p=o("./crc32"),_=o("./utf8"),E=o("./compressions"),y=o("./support");function M(k,D){this.options=k,this.loadOptions=D}M.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(k){var D,b;if(k.skip(22),this.fileNameLength=k.readInt(2),b=k.readInt(2),this.fileName=k.readData(this.fileNameLength),k.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=function(S){for(var z in E)if(Object.prototype.hasOwnProperty.call(E,z)&&E[z].magic===S)return E[z];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,D,k.readData(this.compressedSize))},readCentralPart:function(k){this.versionMadeBy=k.readInt(2),k.skip(2),this.bitFlag=k.readInt(2),this.compressionMethod=k.readString(2),this.date=k.readDate(),this.crc32=k.readInt(4),this.compressedSize=k.readInt(4),this.uncompressedSize=k.readInt(4);var D=k.readInt(2);if(this.extraFieldsLength=k.readInt(2),this.fileCommentLength=k.readInt(2),this.diskNumberStart=k.readInt(2),this.internalFileAttributes=k.readInt(2),this.externalFileAttributes=k.readInt(4),this.localHeaderOffset=k.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");k.skip(D),this.readExtraFields(k),this.parseZIP64ExtraField(k),this.fileComment=k.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var k=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),k==0&&(this.dosPermissions=63&this.externalFileAttributes),k==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var k=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=k.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=k.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=k.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=k.readInt(4))}},readExtraFields:function(k){var D,b,S,z=k.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});k.index+4<z;)D=k.readInt(2),b=k.readInt(2),S=k.readData(b),this.extraFields[D]={id:D,length:b,value:S};k.setIndex(z)},handleUTF8:function(){var k=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var b=s.transformTo(k,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var z=s.transformTo(k,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(z)}}},findExtraFieldUnicodePath:function(){var k=this.extraFields[28789];if(k){var D=n(k.value);return D.readInt(1)!==1||p(this.fileName)!==D.readInt(4)?null:_.utf8decode(D.readData(k.length-5))}return null},findExtraFieldUnicodeComment:function(){var k=this.extraFields[25461];if(k){var D=n(k.value);return D.readInt(1)!==1||p(this.fileComment)!==D.readInt(4)?null:_.utf8decode(D.readData(k.length-5))}return null}},f.exports=M},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,f,i){function n(D,b,S){this.name=D,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=b,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var s=o("./stream/StreamHelper"),h=o("./stream/DataWorker"),p=o("./utf8"),_=o("./compressedObject"),E=o("./stream/GenericWorker");n.prototype={internalStream:function(D){var b=null,S="string";try{if(!D)throw new Error("No output type specified.");var z=(S=D.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),b=this._decompressWorker();var T=!this._dataBinary;T&&!z&&(b=b.pipe(new p.Utf8EncodeWorker)),!T&&z&&(b=b.pipe(new p.Utf8DecodeWorker))}catch(H){(b=new E("error")).error(H)}return new s(b,S,"")},async:function(D,b){return this.internalStream(D).accumulate(b)},nodeStream:function(D,b){return this.internalStream(D||"nodebuffer").toNodejsStream(b)},_compressWorker:function(D,b){if(this._data instanceof _&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new p.Utf8EncodeWorker)),_.createWorkerFrom(S,D,b)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof E?this._data:new h(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<y.length;k++)n.prototype[y[k]]=M;f.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,f,i){(function(n){var s,h,p=n.MutationObserver||n.WebKitMutationObserver;if(p){var _=0,E=new p(D),y=n.document.createTextNode("");E.observe(y,{characterData:!0}),s=function(){y.data=_=++_%2}}else if(n.setImmediate||n.MessageChannel===void 0)s="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var b=n.document.createElement("script");b.onreadystatechange=function(){D(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},n.document.documentElement.appendChild(b)}:function(){setTimeout(D,0)};else{var M=new n.MessageChannel;M.port1.onmessage=D,s=function(){M.port2.postMessage(0)}}var k=[];function D(){var b,S;h=!0;for(var z=k.length;z;){for(S=k,k=[],b=-1;++b<z;)S[b]();z=k.length}h=!1}f.exports=function(b){k.push(b)!==1||h||s()}}).call(this,typeof Vi<"u"?Vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,f,i){var n=o("immediate");function s(){}var h={},p=["REJECTED"],_=["FULFILLED"],E=["PENDING"];function y(z){if(typeof z!="function")throw new TypeError("resolver must be a function");this.state=E,this.queue=[],this.outcome=void 0,z!==s&&b(this,z)}function M(z,T,H){this.promise=z,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof H=="function"&&(this.onRejected=H,this.callRejected=this.otherCallRejected)}function k(z,T,H){n(function(){var $;try{$=T(H)}catch(B){return h.reject(z,B)}$===z?h.reject(z,new TypeError("Cannot resolve promise with itself")):h.resolve(z,$)})}function D(z){var T=z&&z.then;if(z&&(typeof z=="object"||typeof z=="function")&&typeof T=="function")return function(){T.apply(z,arguments)}}function b(z,T){var H=!1;function $(X){H||(H=!0,h.reject(z,X))}function B(X){H||(H=!0,h.resolve(z,X))}var Q=S(function(){T(B,$)});Q.status==="error"&&$(Q.value)}function S(z,T){var H={};try{H.value=z(T),H.status="success"}catch($){H.status="error",H.value=$}return H}(f.exports=y).prototype.finally=function(z){if(typeof z!="function")return this;var T=this.constructor;return this.then(function(H){return T.resolve(z()).then(function(){return H})},function(H){return T.resolve(z()).then(function(){throw H})})},y.prototype.catch=function(z){return this.then(null,z)},y.prototype.then=function(z,T){if(typeof z!="function"&&this.state===_||typeof T!="function"&&this.state===p)return this;var H=new this.constructor(s);return this.state!==E?k(H,this.state===_?z:T,this.outcome):this.queue.push(new M(H,z,T)),H},M.prototype.callFulfilled=function(z){h.resolve(this.promise,z)},M.prototype.otherCallFulfilled=function(z){k(this.promise,this.onFulfilled,z)},M.prototype.callRejected=function(z){h.reject(this.promise,z)},M.prototype.otherCallRejected=function(z){k(this.promise,this.onRejected,z)},h.resolve=function(z,T){var H=S(D,T);if(H.status==="error")return h.reject(z,H.value);var $=H.value;if($)b(z,$);else{z.state=_,z.outcome=T;for(var B=-1,Q=z.queue.length;++B<Q;)z.queue[B].callFulfilled(T)}return z},h.reject=function(z,T){z.state=p,z.outcome=T;for(var H=-1,$=z.queue.length;++H<$;)z.queue[H].callRejected(T);return z},y.resolve=function(z){return z instanceof this?z:h.resolve(new this(s),z)},y.reject=function(z){var T=new this(s);return h.reject(T,z)},y.all=function(z){var T=this;if(Object.prototype.toString.call(z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var H=z.length,$=!1;if(!H)return this.resolve([]);for(var B=new Array(H),Q=0,X=-1,x=new this(s);++X<H;)w(z[X],X);return x;function w(P,R){T.resolve(P).then(function(v){B[R]=v,++Q!==H||$||($=!0,h.resolve(x,B))},function(v){$||($=!0,h.reject(x,v))})}},y.race=function(z){var T=this;if(Object.prototype.toString.call(z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var H=z.length,$=!1;if(!H)return this.resolve([]);for(var B=-1,Q=new this(s);++B<H;)X=z[B],T.resolve(X).then(function(x){$||($=!0,h.resolve(Q,x))},function(x){$||($=!0,h.reject(Q,x))});var X;return Q}},{immediate:36}],38:[function(o,f,i){var n={};(0,o("./lib/utils/common").assign)(n,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),f.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,f,i){var n=o("./zlib/deflate"),s=o("./utils/common"),h=o("./utils/strings"),p=o("./zlib/messages"),_=o("./zlib/zstream"),E=Object.prototype.toString,y=0,M=-1,k=0,D=8;function b(z){if(!(this instanceof b))return new b(z);this.options=s.assign({level:M,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:k,to:""},z||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var H=n.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(H!==y)throw new Error(p[H]);if(T.header&&n.deflateSetHeader(this.strm,T.header),T.dictionary){var $;if($=typeof T.dictionary=="string"?h.string2buf(T.dictionary):E.call(T.dictionary)==="[object ArrayBuffer]"?new Uint8Array(T.dictionary):T.dictionary,(H=n.deflateSetDictionary(this.strm,$))!==y)throw new Error(p[H]);this._dict_set=!0}}function S(z,T){var H=new b(T);if(H.push(z,!0),H.err)throw H.msg||p[H.err];return H.result}b.prototype.push=function(z,T){var H,$,B=this.strm,Q=this.options.chunkSize;if(this.ended)return!1;$=T===~~T?T:T===!0?4:0,typeof z=="string"?B.input=h.string2buf(z):E.call(z)==="[object ArrayBuffer]"?B.input=new Uint8Array(z):B.input=z,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8(Q),B.next_out=0,B.avail_out=Q),(H=n.deflate(B,$))!==1&&H!==y)return this.onEnd(H),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||$!==4&&$!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(s.shrinkBuf(B.output,B.next_out))):this.onData(s.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&H!==1);return $===4?(H=n.deflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===y):$!==2||(this.onEnd(y),!(B.avail_out=0))},b.prototype.onData=function(z){this.chunks.push(z)},b.prototype.onEnd=function(z){z===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},i.Deflate=b,i.deflate=S,i.deflateRaw=function(z,T){return(T=T||{}).raw=!0,S(z,T)},i.gzip=function(z,T){return(T=T||{}).gzip=!0,S(z,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,f,i){var n=o("./zlib/inflate"),s=o("./utils/common"),h=o("./utils/strings"),p=o("./zlib/constants"),_=o("./zlib/messages"),E=o("./zlib/zstream"),y=o("./zlib/gzheader"),M=Object.prototype.toString;function k(b){if(!(this instanceof k))return new k(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||b&&b.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&!(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var z=n.inflateInit2(this.strm,S.windowBits);if(z!==p.Z_OK)throw new Error(_[z]);this.header=new y,n.inflateGetHeader(this.strm,this.header)}function D(b,S){var z=new k(S);if(z.push(b,!0),z.err)throw z.msg||_[z.err];return z.result}k.prototype.push=function(b,S){var z,T,H,$,B,Q,X=this.strm,x=this.options.chunkSize,w=this.options.dictionary,P=!1;if(this.ended)return!1;T=S===~~S?S:S===!0?p.Z_FINISH:p.Z_NO_FLUSH,typeof b=="string"?X.input=h.binstring2buf(b):M.call(b)==="[object ArrayBuffer]"?X.input=new Uint8Array(b):X.input=b,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new s.Buf8(x),X.next_out=0,X.avail_out=x),(z=n.inflate(X,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&w&&(Q=typeof w=="string"?h.string2buf(w):M.call(w)==="[object ArrayBuffer]"?new Uint8Array(w):w,z=n.inflateSetDictionary(this.strm,Q)),z===p.Z_BUF_ERROR&&P===!0&&(z=p.Z_OK,P=!1),z!==p.Z_STREAM_END&&z!==p.Z_OK)return this.onEnd(z),!(this.ended=!0);X.next_out&&(X.avail_out!==0&&z!==p.Z_STREAM_END&&(X.avail_in!==0||T!==p.Z_FINISH&&T!==p.Z_SYNC_FLUSH)||(this.options.to==="string"?(H=h.utf8border(X.output,X.next_out),$=X.next_out-H,B=h.buf2string(X.output,H),X.next_out=$,X.avail_out=x-$,$&&s.arraySet(X.output,X.output,H,$,0),this.onData(B)):this.onData(s.shrinkBuf(X.output,X.next_out)))),X.avail_in===0&&X.avail_out===0&&(P=!0)}while((0<X.avail_in||X.avail_out===0)&&z!==p.Z_STREAM_END);return z===p.Z_STREAM_END&&(T=p.Z_FINISH),T===p.Z_FINISH?(z=n.inflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===p.Z_OK):T!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(X.avail_out=0))},k.prototype.onData=function(b){this.chunks.push(b)},k.prototype.onEnd=function(b){b===p.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=k,i.inflate=D,i.inflateRaw=function(b,S){return(S=S||{}).raw=!0,D(b,S)},i.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,f,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(p){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var E=_.shift();if(E){if(typeof E!="object")throw new TypeError(E+"must be non-object");for(var y in E)E.hasOwnProperty(y)&&(p[y]=E[y])}}return p},i.shrinkBuf=function(p,_){return p.length===_?p:p.subarray?p.subarray(0,_):(p.length=_,p)};var s={arraySet:function(p,_,E,y,M){if(_.subarray&&p.subarray)p.set(_.subarray(E,E+y),M);else for(var k=0;k<y;k++)p[M+k]=_[E+k]},flattenChunks:function(p){var _,E,y,M,k,D;for(_=y=0,E=p.length;_<E;_++)y+=p[_].length;for(D=new Uint8Array(y),_=M=0,E=p.length;_<E;_++)k=p[_],D.set(k,M),M+=k.length;return D}},h={arraySet:function(p,_,E,y,M){for(var k=0;k<y;k++)p[M+k]=_[E+k]},flattenChunks:function(p){return[].concat.apply([],p)}};i.setTyped=function(p){p?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,h))},i.setTyped(n)},{}],42:[function(o,f,i){var n=o("./common"),s=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var p=new n.Buf8(256),_=0;_<256;_++)p[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function E(y,M){if(M<65537&&(y.subarray&&h||!y.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(y,M));for(var k="",D=0;D<M;D++)k+=String.fromCharCode(y[D]);return k}p[254]=p[254]=1,i.string2buf=function(y){var M,k,D,b,S,z=y.length,T=0;for(b=0;b<z;b++)(64512&(k=y.charCodeAt(b)))==55296&&b+1<z&&(64512&(D=y.charCodeAt(b+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),b++),T+=k<128?1:k<2048?2:k<65536?3:4;for(M=new n.Buf8(T),b=S=0;S<T;b++)(64512&(k=y.charCodeAt(b)))==55296&&b+1<z&&(64512&(D=y.charCodeAt(b+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),b++),k<128?M[S++]=k:(k<2048?M[S++]=192|k>>>6:(k<65536?M[S++]=224|k>>>12:(M[S++]=240|k>>>18,M[S++]=128|k>>>12&63),M[S++]=128|k>>>6&63),M[S++]=128|63&k);return M},i.buf2binstring=function(y){return E(y,y.length)},i.binstring2buf=function(y){for(var M=new n.Buf8(y.length),k=0,D=M.length;k<D;k++)M[k]=y.charCodeAt(k);return M},i.buf2string=function(y,M){var k,D,b,S,z=M||y.length,T=new Array(2*z);for(k=D=0;k<z;)if((b=y[k++])<128)T[D++]=b;else if(4<(S=p[b]))T[D++]=65533,k+=S-1;else{for(b&=S===2?31:S===3?15:7;1<S&&k<z;)b=b<<6|63&y[k++],S--;1<S?T[D++]=65533:b<65536?T[D++]=b:(b-=65536,T[D++]=55296|b>>10&1023,T[D++]=56320|1023&b)}return E(T,D)},i.utf8border=function(y,M){var k;for((M=M||y.length)>y.length&&(M=y.length),k=M-1;0<=k&&(192&y[k])==128;)k--;return k<0||k===0?M:k+p[y[k]]>M?k:M}},{"./common":41}],43:[function(o,f,i){f.exports=function(n,s,h,p){for(var _=65535&n|0,E=n>>>16&65535|0,y=0;h!==0;){for(h-=y=2e3<h?2e3:h;E=E+(_=_+s[p++]|0)|0,--y;);_%=65521,E%=65521}return _|E<<16|0}},{}],44:[function(o,f,i){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,f,i){var n=function(){for(var s,h=[],p=0;p<256;p++){s=p;for(var _=0;_<8;_++)s=1&s?3988292384^s>>>1:s>>>1;h[p]=s}return h}();f.exports=function(s,h,p,_){var E=n,y=_+p;s^=-1;for(var M=_;M<y;M++)s=s>>>8^E[255&(s^h[M])];return-1^s}},{}],46:[function(o,f,i){var n,s=o("../utils/common"),h=o("./trees"),p=o("./adler32"),_=o("./crc32"),E=o("./messages"),y=0,M=4,k=0,D=-2,b=-1,S=4,z=2,T=8,H=9,$=286,B=30,Q=19,X=2*$+1,x=15,w=3,P=258,R=P+w+1,v=42,A=113,c=1,O=2,G=3,Z=4;function F(g,tt){return g.msg=E[tt],tt}function j(g){return(g<<1)-(4<g?9:0)}function J(g){for(var tt=g.length;0<=--tt;)g[tt]=0}function q(g){var tt=g.state,et=tt.pending;et>g.avail_out&&(et=g.avail_out),et!==0&&(s.arraySet(g.output,tt.pending_buf,tt.pending_out,et,g.next_out),g.next_out+=et,tt.pending_out+=et,g.total_out+=et,g.avail_out-=et,tt.pending-=et,tt.pending===0&&(tt.pending_out=0))}function Y(g,tt){h._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,tt),g.block_start=g.strstart,q(g.strm)}function ct(g,tt){g.pending_buf[g.pending++]=tt}function lt(g,tt){g.pending_buf[g.pending++]=tt>>>8&255,g.pending_buf[g.pending++]=255&tt}function rt(g,tt){var et,U,N=g.max_chain_length,K=g.strstart,at=g.prev_length,ht=g.nice_match,nt=g.strstart>g.w_size-R?g.strstart-(g.w_size-R):0,dt=g.window,vt=g.w_mask,pt=g.prev,xt=g.strstart+P,Ht=dt[K+at-1],Et=dt[K+at];g.prev_length>=g.good_match&&(N>>=2),ht>g.lookahead&&(ht=g.lookahead);do if(dt[(et=tt)+at]===Et&&dt[et+at-1]===Ht&&dt[et]===dt[K]&&dt[++et]===dt[K+1]){K+=2,et++;do;while(dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&dt[++K]===dt[++et]&&K<xt);if(U=P-(xt-K),K=xt-P,at<U){if(g.match_start=tt,ht<=(at=U))break;Ht=dt[K+at-1],Et=dt[K+at]}}while((tt=pt[tt&vt])>nt&&--N!=0);return at<=g.lookahead?at:g.lookahead}function ft(g){var tt,et,U,N,K,at,ht,nt,dt,vt,pt=g.w_size;do{if(N=g.window_size-g.lookahead-g.strstart,g.strstart>=pt+(pt-R)){for(s.arraySet(g.window,g.window,pt,pt,0),g.match_start-=pt,g.strstart-=pt,g.block_start-=pt,tt=et=g.hash_size;U=g.head[--tt],g.head[tt]=pt<=U?U-pt:0,--et;);for(tt=et=pt;U=g.prev[--tt],g.prev[tt]=pt<=U?U-pt:0,--et;);N+=pt}if(g.strm.avail_in===0)break;if(at=g.strm,ht=g.window,nt=g.strstart+g.lookahead,dt=N,vt=void 0,vt=at.avail_in,dt<vt&&(vt=dt),et=vt===0?0:(at.avail_in-=vt,s.arraySet(ht,at.input,at.next_in,vt,nt),at.state.wrap===1?at.adler=p(at.adler,ht,vt,nt):at.state.wrap===2&&(at.adler=_(at.adler,ht,vt,nt)),at.next_in+=vt,at.total_in+=vt,vt),g.lookahead+=et,g.lookahead+g.insert>=w)for(K=g.strstart-g.insert,g.ins_h=g.window[K],g.ins_h=(g.ins_h<<g.hash_shift^g.window[K+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[K+w-1])&g.hash_mask,g.prev[K&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=K,K++,g.insert--,!(g.lookahead+g.insert<w)););}while(g.lookahead<R&&g.strm.avail_in!==0)}function Ot(g,tt){for(var et,U;;){if(g.lookahead<R){if(ft(g),g.lookahead<R&&tt===y)return c;if(g.lookahead===0)break}if(et=0,g.lookahead>=w&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+w-1])&g.hash_mask,et=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),et!==0&&g.strstart-et<=g.w_size-R&&(g.match_length=rt(g,et)),g.match_length>=w)if(U=h._tr_tally(g,g.strstart-g.match_start,g.match_length-w),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=w){for(g.match_length--;g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+w-1])&g.hash_mask,et=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart,--g.match_length!=0;);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else U=h._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(U&&(Y(g,!1),g.strm.avail_out===0))return c}return g.insert=g.strstart<w-1?g.strstart:w-1,tt===M?(Y(g,!0),g.strm.avail_out===0?G:Z):g.last_lit&&(Y(g,!1),g.strm.avail_out===0)?c:O}function Mt(g,tt){for(var et,U,N;;){if(g.lookahead<R){if(ft(g),g.lookahead<R&&tt===y)return c;if(g.lookahead===0)break}if(et=0,g.lookahead>=w&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+w-1])&g.hash_mask,et=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=w-1,et!==0&&g.prev_length<g.max_lazy_match&&g.strstart-et<=g.w_size-R&&(g.match_length=rt(g,et),g.match_length<=5&&(g.strategy===1||g.match_length===w&&4096<g.strstart-g.match_start)&&(g.match_length=w-1)),g.prev_length>=w&&g.match_length<=g.prev_length){for(N=g.strstart+g.lookahead-w,U=h._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-w),g.lookahead-=g.prev_length-1,g.prev_length-=2;++g.strstart<=N&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+w-1])&g.hash_mask,et=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),--g.prev_length!=0;);if(g.match_available=0,g.match_length=w-1,g.strstart++,U&&(Y(g,!1),g.strm.avail_out===0))return c}else if(g.match_available){if((U=h._tr_tally(g,0,g.window[g.strstart-1]))&&Y(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return c}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(U=h._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<w-1?g.strstart:w-1,tt===M?(Y(g,!0),g.strm.avail_out===0?G:Z):g.last_lit&&(Y(g,!1),g.strm.avail_out===0)?c:O}function Rt(g,tt,et,U,N){this.good_length=g,this.max_lazy=tt,this.nice_length=et,this.max_chain=U,this.func=N}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*X),this.dyn_dtree=new s.Buf16(2*(2*B+1)),this.bl_tree=new s.Buf16(2*(2*Q+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(x+1),this.heap=new s.Buf16(2*$+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*$+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(g){var tt;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=z,(tt=g.state).pending=0,tt.pending_out=0,tt.wrap<0&&(tt.wrap=-tt.wrap),tt.status=tt.wrap?v:A,g.adler=tt.wrap===2?0:1,tt.last_flush=y,h._tr_init(tt),k):F(g,D)}function Lt(g){var tt=gt(g);return tt===k&&function(et){et.window_size=2*et.w_size,J(et.head),et.max_lazy_match=n[et.level].max_lazy,et.good_match=n[et.level].good_length,et.nice_match=n[et.level].nice_length,et.max_chain_length=n[et.level].max_chain,et.strstart=0,et.block_start=0,et.lookahead=0,et.insert=0,et.match_length=et.prev_length=w-1,et.match_available=0,et.ins_h=0}(g.state),tt}function St(g,tt,et,U,N,K){if(!g)return D;var at=1;if(tt===b&&(tt=6),U<0?(at=0,U=-U):15<U&&(at=2,U-=16),N<1||H<N||et!==T||U<8||15<U||tt<0||9<tt||K<0||S<K)return F(g,D);U===8&&(U=9);var ht=new yt;return(g.state=ht).strm=g,ht.wrap=at,ht.gzhead=null,ht.w_bits=U,ht.w_size=1<<ht.w_bits,ht.w_mask=ht.w_size-1,ht.hash_bits=N+7,ht.hash_size=1<<ht.hash_bits,ht.hash_mask=ht.hash_size-1,ht.hash_shift=~~((ht.hash_bits+w-1)/w),ht.window=new s.Buf8(2*ht.w_size),ht.head=new s.Buf16(ht.hash_size),ht.prev=new s.Buf16(ht.w_size),ht.lit_bufsize=1<<N+6,ht.pending_buf_size=4*ht.lit_bufsize,ht.pending_buf=new s.Buf8(ht.pending_buf_size),ht.d_buf=1*ht.lit_bufsize,ht.l_buf=3*ht.lit_bufsize,ht.level=tt,ht.strategy=K,ht.method=et,Lt(g)}n=[new Rt(0,0,0,0,function(g,tt){var et=65535;for(et>g.pending_buf_size-5&&(et=g.pending_buf_size-5);;){if(g.lookahead<=1){if(ft(g),g.lookahead===0&&tt===y)return c;if(g.lookahead===0)break}g.strstart+=g.lookahead,g.lookahead=0;var U=g.block_start+et;if((g.strstart===0||g.strstart>=U)&&(g.lookahead=g.strstart-U,g.strstart=U,Y(g,!1),g.strm.avail_out===0)||g.strstart-g.block_start>=g.w_size-R&&(Y(g,!1),g.strm.avail_out===0))return c}return g.insert=0,tt===M?(Y(g,!0),g.strm.avail_out===0?G:Z):(g.strstart>g.block_start&&(Y(g,!1),g.strm.avail_out),c)}),new Rt(4,4,8,4,Ot),new Rt(4,5,16,8,Ot),new Rt(4,6,32,32,Ot),new Rt(4,4,16,16,Mt),new Rt(8,16,32,32,Mt),new Rt(8,16,128,128,Mt),new Rt(8,32,128,256,Mt),new Rt(32,128,258,1024,Mt),new Rt(32,258,258,4096,Mt)],i.deflateInit=function(g,tt){return St(g,tt,T,15,8,0)},i.deflateInit2=St,i.deflateReset=Lt,i.deflateResetKeep=gt,i.deflateSetHeader=function(g,tt){return g&&g.state?g.state.wrap!==2?D:(g.state.gzhead=tt,k):D},i.deflate=function(g,tt){var et,U,N,K;if(!g||!g.state||5<tt||tt<0)return g?F(g,D):D;if(U=g.state,!g.output||!g.input&&g.avail_in!==0||U.status===666&&tt!==M)return F(g,g.avail_out===0?-5:D);if(U.strm=g,et=U.last_flush,U.last_flush=tt,U.status===v)if(U.wrap===2)g.adler=0,ct(U,31),ct(U,139),ct(U,8),U.gzhead?(ct(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),ct(U,255&U.gzhead.time),ct(U,U.gzhead.time>>8&255),ct(U,U.gzhead.time>>16&255),ct(U,U.gzhead.time>>24&255),ct(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),ct(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(ct(U,255&U.gzhead.extra.length),ct(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(g.adler=_(g.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(ct(U,0),ct(U,0),ct(U,0),ct(U,0),ct(U,0),ct(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),ct(U,3),U.status=A);else{var at=T+(U.w_bits-8<<4)<<8;at|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(at|=32),at+=31-at%31,U.status=A,lt(U,at),U.strstart!==0&&(lt(U,g.adler>>>16),lt(U,65535&g.adler)),g.adler=1}if(U.status===69)if(U.gzhead.extra){for(N=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>N&&(g.adler=_(g.adler,U.pending_buf,U.pending-N,N)),q(g),N=U.pending,U.pending!==U.pending_buf_size));)ct(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>N&&(g.adler=_(g.adler,U.pending_buf,U.pending-N,N)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){N=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>N&&(g.adler=_(g.adler,U.pending_buf,U.pending-N,N)),q(g),N=U.pending,U.pending===U.pending_buf_size)){K=1;break}K=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,ct(U,K)}while(K!==0);U.gzhead.hcrc&&U.pending>N&&(g.adler=_(g.adler,U.pending_buf,U.pending-N,N)),K===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){N=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>N&&(g.adler=_(g.adler,U.pending_buf,U.pending-N,N)),q(g),N=U.pending,U.pending===U.pending_buf_size)){K=1;break}K=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,ct(U,K)}while(K!==0);U.gzhead.hcrc&&U.pending>N&&(g.adler=_(g.adler,U.pending_buf,U.pending-N,N)),K===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&q(g),U.pending+2<=U.pending_buf_size&&(ct(U,255&g.adler),ct(U,g.adler>>8&255),g.adler=0,U.status=A)):U.status=A),U.pending!==0){if(q(g),g.avail_out===0)return U.last_flush=-1,k}else if(g.avail_in===0&&j(tt)<=j(et)&&tt!==M)return F(g,-5);if(U.status===666&&g.avail_in!==0)return F(g,-5);if(g.avail_in!==0||U.lookahead!==0||tt!==y&&U.status!==666){var ht=U.strategy===2?function(nt,dt){for(var vt;;){if(nt.lookahead===0&&(ft(nt),nt.lookahead===0)){if(dt===y)return c;break}if(nt.match_length=0,vt=h._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++,vt&&(Y(nt,!1),nt.strm.avail_out===0))return c}return nt.insert=0,dt===M?(Y(nt,!0),nt.strm.avail_out===0?G:Z):nt.last_lit&&(Y(nt,!1),nt.strm.avail_out===0)?c:O}(U,tt):U.strategy===3?function(nt,dt){for(var vt,pt,xt,Ht,Et=nt.window;;){if(nt.lookahead<=P){if(ft(nt),nt.lookahead<=P&&dt===y)return c;if(nt.lookahead===0)break}if(nt.match_length=0,nt.lookahead>=w&&0<nt.strstart&&(pt=Et[xt=nt.strstart-1])===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]){Ht=nt.strstart+P;do;while(pt===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]&&pt===Et[++xt]&&xt<Ht);nt.match_length=P-(Ht-xt),nt.match_length>nt.lookahead&&(nt.match_length=nt.lookahead)}if(nt.match_length>=w?(vt=h._tr_tally(nt,1,nt.match_length-w),nt.lookahead-=nt.match_length,nt.strstart+=nt.match_length,nt.match_length=0):(vt=h._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++),vt&&(Y(nt,!1),nt.strm.avail_out===0))return c}return nt.insert=0,dt===M?(Y(nt,!0),nt.strm.avail_out===0?G:Z):nt.last_lit&&(Y(nt,!1),nt.strm.avail_out===0)?c:O}(U,tt):n[U.level].func(U,tt);if(ht!==G&&ht!==Z||(U.status=666),ht===c||ht===G)return g.avail_out===0&&(U.last_flush=-1),k;if(ht===O&&(tt===1?h._tr_align(U):tt!==5&&(h._tr_stored_block(U,0,0,!1),tt===3&&(J(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),q(g),g.avail_out===0))return U.last_flush=-1,k}return tt!==M?k:U.wrap<=0?1:(U.wrap===2?(ct(U,255&g.adler),ct(U,g.adler>>8&255),ct(U,g.adler>>16&255),ct(U,g.adler>>24&255),ct(U,255&g.total_in),ct(U,g.total_in>>8&255),ct(U,g.total_in>>16&255),ct(U,g.total_in>>24&255)):(lt(U,g.adler>>>16),lt(U,65535&g.adler)),q(g),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?k:1)},i.deflateEnd=function(g){var tt;return g&&g.state?(tt=g.state.status)!==v&&tt!==69&&tt!==73&&tt!==91&&tt!==103&&tt!==A&&tt!==666?F(g,D):(g.state=null,tt===A?F(g,-3):k):D},i.deflateSetDictionary=function(g,tt){var et,U,N,K,at,ht,nt,dt,vt=tt.length;if(!g||!g.state||(K=(et=g.state).wrap)===2||K===1&&et.status!==v||et.lookahead)return D;for(K===1&&(g.adler=p(g.adler,tt,vt,0)),et.wrap=0,vt>=et.w_size&&(K===0&&(J(et.head),et.strstart=0,et.block_start=0,et.insert=0),dt=new s.Buf8(et.w_size),s.arraySet(dt,tt,vt-et.w_size,et.w_size,0),tt=dt,vt=et.w_size),at=g.avail_in,ht=g.next_in,nt=g.input,g.avail_in=vt,g.next_in=0,g.input=tt,ft(et);et.lookahead>=w;){for(U=et.strstart,N=et.lookahead-(w-1);et.ins_h=(et.ins_h<<et.hash_shift^et.window[U+w-1])&et.hash_mask,et.prev[U&et.w_mask]=et.head[et.ins_h],et.head[et.ins_h]=U,U++,--N;);et.strstart=U,et.lookahead=w-1,ft(et)}return et.strstart+=et.lookahead,et.block_start=et.strstart,et.insert=et.lookahead,et.lookahead=0,et.match_length=et.prev_length=w-1,et.match_available=0,g.next_in=ht,g.input=nt,g.avail_in=at,et.wrap=K,k},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,f,i){f.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,f,i){f.exports=function(n,s){var h,p,_,E,y,M,k,D,b,S,z,T,H,$,B,Q,X,x,w,P,R,v,A,c,O;h=n.state,p=n.next_in,c=n.input,_=p+(n.avail_in-5),E=n.next_out,O=n.output,y=E-(s-n.avail_out),M=E+(n.avail_out-257),k=h.dmax,D=h.wsize,b=h.whave,S=h.wnext,z=h.window,T=h.hold,H=h.bits,$=h.lencode,B=h.distcode,Q=(1<<h.lenbits)-1,X=(1<<h.distbits)-1;t:do{H<15&&(T+=c[p++]<<H,H+=8,T+=c[p++]<<H,H+=8),x=$[T&Q];e:for(;;){if(T>>>=w=x>>>24,H-=w,(w=x>>>16&255)===0)O[E++]=65535&x;else{if(!(16&w)){if(!(64&w)){x=$[(65535&x)+(T&(1<<w)-1)];continue e}if(32&w){h.mode=12;break t}n.msg="invalid literal/length code",h.mode=30;break t}P=65535&x,(w&=15)&&(H<w&&(T+=c[p++]<<H,H+=8),P+=T&(1<<w)-1,T>>>=w,H-=w),H<15&&(T+=c[p++]<<H,H+=8,T+=c[p++]<<H,H+=8),x=B[T&X];i:for(;;){if(T>>>=w=x>>>24,H-=w,!(16&(w=x>>>16&255))){if(!(64&w)){x=B[(65535&x)+(T&(1<<w)-1)];continue i}n.msg="invalid distance code",h.mode=30;break t}if(R=65535&x,H<(w&=15)&&(T+=c[p++]<<H,(H+=8)<w&&(T+=c[p++]<<H,H+=8)),k<(R+=T&(1<<w)-1)){n.msg="invalid distance too far back",h.mode=30;break t}if(T>>>=w,H-=w,(w=E-y)<R){if(b<(w=R-w)&&h.sane){n.msg="invalid distance too far back",h.mode=30;break t}if(A=z,(v=0)===S){if(v+=D-w,w<P){for(P-=w;O[E++]=z[v++],--w;);v=E-R,A=O}}else if(S<w){if(v+=D+S-w,(w-=S)<P){for(P-=w;O[E++]=z[v++],--w;);if(v=0,S<P){for(P-=w=S;O[E++]=z[v++],--w;);v=E-R,A=O}}}else if(v+=S-w,w<P){for(P-=w;O[E++]=z[v++],--w;);v=E-R,A=O}for(;2<P;)O[E++]=A[v++],O[E++]=A[v++],O[E++]=A[v++],P-=3;P&&(O[E++]=A[v++],1<P&&(O[E++]=A[v++]))}else{for(v=E-R;O[E++]=O[v++],O[E++]=O[v++],O[E++]=O[v++],2<(P-=3););P&&(O[E++]=O[v++],1<P&&(O[E++]=O[v++]))}break}}break}}while(p<_&&E<M);p-=P=H>>3,T&=(1<<(H-=P<<3))-1,n.next_in=p,n.next_out=E,n.avail_in=p<_?_-p+5:5-(p-_),n.avail_out=E<M?M-E+257:257-(E-M),h.hold=T,h.bits=H}},{}],49:[function(o,f,i){var n=o("../utils/common"),s=o("./adler32"),h=o("./crc32"),p=o("./inffast"),_=o("./inftrees"),E=1,y=2,M=0,k=-2,D=1,b=852,S=592;function z(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function H(v){var A;return v&&v.state?(A=v.state,v.total_in=v.total_out=A.total=0,v.msg="",A.wrap&&(v.adler=1&A.wrap),A.mode=D,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new n.Buf32(b),A.distcode=A.distdyn=new n.Buf32(S),A.sane=1,A.back=-1,M):k}function $(v){var A;return v&&v.state?((A=v.state).wsize=0,A.whave=0,A.wnext=0,H(v)):k}function B(v,A){var c,O;return v&&v.state?(O=v.state,A<0?(c=0,A=-A):(c=1+(A>>4),A<48&&(A&=15)),A&&(A<8||15<A)?k:(O.window!==null&&O.wbits!==A&&(O.window=null),O.wrap=c,O.wbits=A,$(v))):k}function Q(v,A){var c,O;return v?(O=new T,(v.state=O).window=null,(c=B(v,A))!==M&&(v.state=null),c):k}var X,x,w=!0;function P(v){if(w){var A;for(X=new n.Buf32(512),x=new n.Buf32(32),A=0;A<144;)v.lens[A++]=8;for(;A<256;)v.lens[A++]=9;for(;A<280;)v.lens[A++]=7;for(;A<288;)v.lens[A++]=8;for(_(E,v.lens,0,288,X,0,v.work,{bits:9}),A=0;A<32;)v.lens[A++]=5;_(y,v.lens,0,32,x,0,v.work,{bits:5}),w=!1}v.lencode=X,v.lenbits=9,v.distcode=x,v.distbits=5}function R(v,A,c,O){var G,Z=v.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new n.Buf8(Z.wsize)),O>=Z.wsize?(n.arraySet(Z.window,A,c-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(O<(G=Z.wsize-Z.wnext)&&(G=O),n.arraySet(Z.window,A,c-O,G,Z.wnext),(O-=G)?(n.arraySet(Z.window,A,c-O,O,0),Z.wnext=O,Z.whave=Z.wsize):(Z.wnext+=G,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=G))),0}i.inflateReset=$,i.inflateReset2=B,i.inflateResetKeep=H,i.inflateInit=function(v){return Q(v,15)},i.inflateInit2=Q,i.inflate=function(v,A){var c,O,G,Z,F,j,J,q,Y,ct,lt,rt,ft,Ot,Mt,Rt,yt,gt,Lt,St,g,tt,et,U,N=0,K=new n.Buf8(4),at=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return k;(c=v.state).mode===12&&(c.mode=13),F=v.next_out,G=v.output,J=v.avail_out,Z=v.next_in,O=v.input,j=v.avail_in,q=c.hold,Y=c.bits,ct=j,lt=J,tt=M;t:for(;;)switch(c.mode){case D:if(c.wrap===0){c.mode=13;break}for(;Y<16;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(2&c.wrap&&q===35615){K[c.check=0]=255&q,K[1]=q>>>8&255,c.check=h(c.check,K,2,0),Y=q=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&q)<<8)+(q>>8))%31){v.msg="incorrect header check",c.mode=30;break}if((15&q)!=8){v.msg="unknown compression method",c.mode=30;break}if(Y-=4,g=8+(15&(q>>>=4)),c.wbits===0)c.wbits=g;else if(g>c.wbits){v.msg="invalid window size",c.mode=30;break}c.dmax=1<<g,v.adler=c.check=1,c.mode=512&q?10:12,Y=q=0;break;case 2:for(;Y<16;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(c.flags=q,(255&c.flags)!=8){v.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){v.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=q>>8&1),512&c.flags&&(K[0]=255&q,K[1]=q>>>8&255,c.check=h(c.check,K,2,0)),Y=q=0,c.mode=3;case 3:for(;Y<32;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}c.head&&(c.head.time=q),512&c.flags&&(K[0]=255&q,K[1]=q>>>8&255,K[2]=q>>>16&255,K[3]=q>>>24&255,c.check=h(c.check,K,4,0)),Y=q=0,c.mode=4;case 4:for(;Y<16;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}c.head&&(c.head.xflags=255&q,c.head.os=q>>8),512&c.flags&&(K[0]=255&q,K[1]=q>>>8&255,c.check=h(c.check,K,2,0)),Y=q=0,c.mode=5;case 5:if(1024&c.flags){for(;Y<16;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}c.length=q,c.head&&(c.head.extra_len=q),512&c.flags&&(K[0]=255&q,K[1]=q>>>8&255,c.check=h(c.check,K,2,0)),Y=q=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(j<(rt=c.length)&&(rt=j),rt&&(c.head&&(g=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),n.arraySet(c.head.extra,O,Z,rt,g)),512&c.flags&&(c.check=h(c.check,O,rt,Z)),j-=rt,Z+=rt,c.length-=rt),c.length))break t;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(j===0)break t;for(rt=0;g=O[Z+rt++],c.head&&g&&c.length<65536&&(c.head.name+=String.fromCharCode(g)),g&&rt<j;);if(512&c.flags&&(c.check=h(c.check,O,rt,Z)),j-=rt,Z+=rt,g)break t}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(j===0)break t;for(rt=0;g=O[Z+rt++],c.head&&g&&c.length<65536&&(c.head.comment+=String.fromCharCode(g)),g&&rt<j;);if(512&c.flags&&(c.check=h(c.check,O,rt,Z)),j-=rt,Z+=rt,g)break t}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;Y<16;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(q!==(65535&c.check)){v.msg="header crc mismatch",c.mode=30;break}Y=q=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),v.adler=c.check=0,c.mode=12;break;case 10:for(;Y<32;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}v.adler=c.check=z(q),Y=q=0,c.mode=11;case 11:if(c.havedict===0)return v.next_out=F,v.avail_out=J,v.next_in=Z,v.avail_in=j,c.hold=q,c.bits=Y,2;v.adler=c.check=1,c.mode=12;case 12:if(A===5||A===6)break t;case 13:if(c.last){q>>>=7&Y,Y-=7&Y,c.mode=27;break}for(;Y<3;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}switch(c.last=1&q,Y-=1,3&(q>>>=1)){case 0:c.mode=14;break;case 1:if(P(c),c.mode=20,A!==6)break;q>>>=2,Y-=2;break t;case 2:c.mode=17;break;case 3:v.msg="invalid block type",c.mode=30}q>>>=2,Y-=2;break;case 14:for(q>>>=7&Y,Y-=7&Y;Y<32;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if((65535&q)!=(q>>>16^65535)){v.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&q,Y=q=0,c.mode=15,A===6)break t;case 15:c.mode=16;case 16:if(rt=c.length){if(j<rt&&(rt=j),J<rt&&(rt=J),rt===0)break t;n.arraySet(G,O,Z,rt,F),j-=rt,Z+=rt,J-=rt,F+=rt,c.length-=rt;break}c.mode=12;break;case 17:for(;Y<14;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(c.nlen=257+(31&q),q>>>=5,Y-=5,c.ndist=1+(31&q),q>>>=5,Y-=5,c.ncode=4+(15&q),q>>>=4,Y-=4,286<c.nlen||30<c.ndist){v.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;Y<3;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}c.lens[at[c.have++]]=7&q,q>>>=3,Y-=3}for(;c.have<19;)c.lens[at[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,et={bits:c.lenbits},tt=_(0,c.lens,0,19,c.lencode,0,c.work,et),c.lenbits=et.bits,tt){v.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;Rt=(N=c.lencode[q&(1<<c.lenbits)-1])>>>16&255,yt=65535&N,!((Mt=N>>>24)<=Y);){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(yt<16)q>>>=Mt,Y-=Mt,c.lens[c.have++]=yt;else{if(yt===16){for(U=Mt+2;Y<U;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(q>>>=Mt,Y-=Mt,c.have===0){v.msg="invalid bit length repeat",c.mode=30;break}g=c.lens[c.have-1],rt=3+(3&q),q>>>=2,Y-=2}else if(yt===17){for(U=Mt+3;Y<U;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}Y-=Mt,g=0,rt=3+(7&(q>>>=Mt)),q>>>=3,Y-=3}else{for(U=Mt+7;Y<U;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}Y-=Mt,g=0,rt=11+(127&(q>>>=Mt)),q>>>=7,Y-=7}if(c.have+rt>c.nlen+c.ndist){v.msg="invalid bit length repeat",c.mode=30;break}for(;rt--;)c.lens[c.have++]=g}}if(c.mode===30)break;if(c.lens[256]===0){v.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,et={bits:c.lenbits},tt=_(E,c.lens,0,c.nlen,c.lencode,0,c.work,et),c.lenbits=et.bits,tt){v.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,et={bits:c.distbits},tt=_(y,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,et),c.distbits=et.bits,tt){v.msg="invalid distances set",c.mode=30;break}if(c.mode=20,A===6)break t;case 20:c.mode=21;case 21:if(6<=j&&258<=J){v.next_out=F,v.avail_out=J,v.next_in=Z,v.avail_in=j,c.hold=q,c.bits=Y,p(v,lt),F=v.next_out,G=v.output,J=v.avail_out,Z=v.next_in,O=v.input,j=v.avail_in,q=c.hold,Y=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;Rt=(N=c.lencode[q&(1<<c.lenbits)-1])>>>16&255,yt=65535&N,!((Mt=N>>>24)<=Y);){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(Rt&&!(240&Rt)){for(gt=Mt,Lt=Rt,St=yt;Rt=(N=c.lencode[St+((q&(1<<gt+Lt)-1)>>gt)])>>>16&255,yt=65535&N,!(gt+(Mt=N>>>24)<=Y);){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}q>>>=gt,Y-=gt,c.back+=gt}if(q>>>=Mt,Y-=Mt,c.back+=Mt,c.length=yt,Rt===0){c.mode=26;break}if(32&Rt){c.back=-1,c.mode=12;break}if(64&Rt){v.msg="invalid literal/length code",c.mode=30;break}c.extra=15&Rt,c.mode=22;case 22:if(c.extra){for(U=c.extra;Y<U;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}c.length+=q&(1<<c.extra)-1,q>>>=c.extra,Y-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;Rt=(N=c.distcode[q&(1<<c.distbits)-1])>>>16&255,yt=65535&N,!((Mt=N>>>24)<=Y);){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(!(240&Rt)){for(gt=Mt,Lt=Rt,St=yt;Rt=(N=c.distcode[St+((q&(1<<gt+Lt)-1)>>gt)])>>>16&255,yt=65535&N,!(gt+(Mt=N>>>24)<=Y);){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}q>>>=gt,Y-=gt,c.back+=gt}if(q>>>=Mt,Y-=Mt,c.back+=Mt,64&Rt){v.msg="invalid distance code",c.mode=30;break}c.offset=yt,c.extra=15&Rt,c.mode=24;case 24:if(c.extra){for(U=c.extra;Y<U;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}c.offset+=q&(1<<c.extra)-1,q>>>=c.extra,Y-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){v.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(J===0)break t;if(rt=lt-J,c.offset>rt){if((rt=c.offset-rt)>c.whave&&c.sane){v.msg="invalid distance too far back",c.mode=30;break}ft=rt>c.wnext?(rt-=c.wnext,c.wsize-rt):c.wnext-rt,rt>c.length&&(rt=c.length),Ot=c.window}else Ot=G,ft=F-c.offset,rt=c.length;for(J<rt&&(rt=J),J-=rt,c.length-=rt;G[F++]=Ot[ft++],--rt;);c.length===0&&(c.mode=21);break;case 26:if(J===0)break t;G[F++]=c.length,J--,c.mode=21;break;case 27:if(c.wrap){for(;Y<32;){if(j===0)break t;j--,q|=O[Z++]<<Y,Y+=8}if(lt-=J,v.total_out+=lt,c.total+=lt,lt&&(v.adler=c.check=c.flags?h(c.check,G,lt,F-lt):s(c.check,G,lt,F-lt)),lt=J,(c.flags?q:z(q))!==c.check){v.msg="incorrect data check",c.mode=30;break}Y=q=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;Y<32;){if(j===0)break t;j--,q+=O[Z++]<<Y,Y+=8}if(q!==(4294967295&c.total)){v.msg="incorrect length check",c.mode=30;break}Y=q=0}c.mode=29;case 29:tt=1;break t;case 30:tt=-3;break t;case 31:return-4;case 32:default:return k}return v.next_out=F,v.avail_out=J,v.next_in=Z,v.avail_in=j,c.hold=q,c.bits=Y,(c.wsize||lt!==v.avail_out&&c.mode<30&&(c.mode<27||A!==4))&&R(v,v.output,v.next_out,lt-v.avail_out)?(c.mode=31,-4):(ct-=v.avail_in,lt-=v.avail_out,v.total_in+=ct,v.total_out+=lt,c.total+=lt,c.wrap&&lt&&(v.adler=c.check=c.flags?h(c.check,G,lt,v.next_out-lt):s(c.check,G,lt,v.next_out-lt)),v.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(ct==0&&lt===0||A===4)&&tt===M&&(tt=-5),tt)},i.inflateEnd=function(v){if(!v||!v.state)return k;var A=v.state;return A.window&&(A.window=null),v.state=null,M},i.inflateGetHeader=function(v,A){var c;return v&&v.state&&2&(c=v.state).wrap?((c.head=A).done=!1,M):k},i.inflateSetDictionary=function(v,A){var c,O=A.length;return v&&v.state?(c=v.state).wrap!==0&&c.mode!==11?k:c.mode===11&&s(1,A,O,0)!==c.check?-3:R(v,A,O,O)?(c.mode=31,-4):(c.havedict=1,M):k},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,f,i){var n=o("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(E,y,M,k,D,b,S,z){var T,H,$,B,Q,X,x,w,P,R=z.bits,v=0,A=0,c=0,O=0,G=0,Z=0,F=0,j=0,J=0,q=0,Y=null,ct=0,lt=new n.Buf16(16),rt=new n.Buf16(16),ft=null,Ot=0;for(v=0;v<=15;v++)lt[v]=0;for(A=0;A<k;A++)lt[y[M+A]]++;for(G=R,O=15;1<=O&&lt[O]===0;O--);if(O<G&&(G=O),O===0)return D[b++]=20971520,D[b++]=20971520,z.bits=1,0;for(c=1;c<O&&lt[c]===0;c++);for(G<c&&(G=c),v=j=1;v<=15;v++)if(j<<=1,(j-=lt[v])<0)return-1;if(0<j&&(E===0||O!==1))return-1;for(rt[1]=0,v=1;v<15;v++)rt[v+1]=rt[v]+lt[v];for(A=0;A<k;A++)y[M+A]!==0&&(S[rt[y[M+A]]++]=A);if(X=E===0?(Y=ft=S,19):E===1?(Y=s,ct-=257,ft=h,Ot-=257,256):(Y=p,ft=_,-1),v=c,Q=b,F=A=q=0,$=-1,B=(J=1<<(Z=G))-1,E===1&&852<J||E===2&&592<J)return 1;for(;;){for(x=v-F,P=S[A]<X?(w=0,S[A]):S[A]>X?(w=ft[Ot+S[A]],Y[ct+S[A]]):(w=96,0),T=1<<v-F,c=H=1<<Z;D[Q+(q>>F)+(H-=T)]=x<<24|w<<16|P|0,H!==0;);for(T=1<<v-1;q&T;)T>>=1;if(T!==0?(q&=T-1,q+=T):q=0,A++,--lt[v]==0){if(v===O)break;v=y[M+S[A]]}if(G<v&&(q&B)!==$){for(F===0&&(F=G),Q+=c,j=1<<(Z=v-F);Z+F<O&&!((j-=lt[Z+F])<=0);)Z++,j<<=1;if(J+=1<<Z,E===1&&852<J||E===2&&592<J)return 1;D[$=q&B]=G<<24|Z<<16|Q-b|0}}return q!==0&&(D[Q+q]=v-F<<24|64<<16|0),z.bits=G,0}},{"../utils/common":41}],51:[function(o,f,i){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,f,i){var n=o("../utils/common"),s=0,h=1;function p(N){for(var K=N.length;0<=--K;)N[K]=0}var _=0,E=29,y=256,M=y+1+E,k=30,D=19,b=2*M+1,S=15,z=16,T=7,H=256,$=16,B=17,Q=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(2*(M+2));p(R);var v=new Array(2*k);p(v);var A=new Array(512);p(A);var c=new Array(256);p(c);var O=new Array(E);p(O);var G,Z,F,j=new Array(k);function J(N,K,at,ht,nt){this.static_tree=N,this.extra_bits=K,this.extra_base=at,this.elems=ht,this.max_length=nt,this.has_stree=N&&N.length}function q(N,K){this.dyn_tree=N,this.max_code=0,this.stat_desc=K}function Y(N){return N<256?A[N]:A[256+(N>>>7)]}function ct(N,K){N.pending_buf[N.pending++]=255&K,N.pending_buf[N.pending++]=K>>>8&255}function lt(N,K,at){N.bi_valid>z-at?(N.bi_buf|=K<<N.bi_valid&65535,ct(N,N.bi_buf),N.bi_buf=K>>z-N.bi_valid,N.bi_valid+=at-z):(N.bi_buf|=K<<N.bi_valid&65535,N.bi_valid+=at)}function rt(N,K,at){lt(N,at[2*K],at[2*K+1])}function ft(N,K){for(var at=0;at|=1&N,N>>>=1,at<<=1,0<--K;);return at>>>1}function Ot(N,K,at){var ht,nt,dt=new Array(S+1),vt=0;for(ht=1;ht<=S;ht++)dt[ht]=vt=vt+at[ht-1]<<1;for(nt=0;nt<=K;nt++){var pt=N[2*nt+1];pt!==0&&(N[2*nt]=ft(dt[pt]++,pt))}}function Mt(N){var K;for(K=0;K<M;K++)N.dyn_ltree[2*K]=0;for(K=0;K<k;K++)N.dyn_dtree[2*K]=0;for(K=0;K<D;K++)N.bl_tree[2*K]=0;N.dyn_ltree[2*H]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function Rt(N){8<N.bi_valid?ct(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function yt(N,K,at,ht){var nt=2*K,dt=2*at;return N[nt]<N[dt]||N[nt]===N[dt]&&ht[K]<=ht[at]}function gt(N,K,at){for(var ht=N.heap[at],nt=at<<1;nt<=N.heap_len&&(nt<N.heap_len&&yt(K,N.heap[nt+1],N.heap[nt],N.depth)&&nt++,!yt(K,ht,N.heap[nt],N.depth));)N.heap[at]=N.heap[nt],at=nt,nt<<=1;N.heap[at]=ht}function Lt(N,K,at){var ht,nt,dt,vt,pt=0;if(N.last_lit!==0)for(;ht=N.pending_buf[N.d_buf+2*pt]<<8|N.pending_buf[N.d_buf+2*pt+1],nt=N.pending_buf[N.l_buf+pt],pt++,ht===0?rt(N,nt,K):(rt(N,(dt=c[nt])+y+1,K),(vt=X[dt])!==0&&lt(N,nt-=O[dt],vt),rt(N,dt=Y(--ht),at),(vt=x[dt])!==0&&lt(N,ht-=j[dt],vt)),pt<N.last_lit;);rt(N,H,K)}function St(N,K){var at,ht,nt,dt=K.dyn_tree,vt=K.stat_desc.static_tree,pt=K.stat_desc.has_stree,xt=K.stat_desc.elems,Ht=-1;for(N.heap_len=0,N.heap_max=b,at=0;at<xt;at++)dt[2*at]!==0?(N.heap[++N.heap_len]=Ht=at,N.depth[at]=0):dt[2*at+1]=0;for(;N.heap_len<2;)dt[2*(nt=N.heap[++N.heap_len]=Ht<2?++Ht:0)]=1,N.depth[nt]=0,N.opt_len--,pt&&(N.static_len-=vt[2*nt+1]);for(K.max_code=Ht,at=N.heap_len>>1;1<=at;at--)gt(N,dt,at);for(nt=xt;at=N.heap[1],N.heap[1]=N.heap[N.heap_len--],gt(N,dt,1),ht=N.heap[1],N.heap[--N.heap_max]=at,N.heap[--N.heap_max]=ht,dt[2*nt]=dt[2*at]+dt[2*ht],N.depth[nt]=(N.depth[at]>=N.depth[ht]?N.depth[at]:N.depth[ht])+1,dt[2*at+1]=dt[2*ht+1]=nt,N.heap[1]=nt++,gt(N,dt,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(Et,Jt){var me,se,ue,qt,ce,ee,fe=Jt.dyn_tree,Pe=Jt.max_code,Ze=Jt.stat_desc.static_tree,Fe=Jt.stat_desc.has_stree,Qe=Jt.stat_desc.extra_bits,De=Jt.stat_desc.extra_base,Xt=Jt.stat_desc.max_length,hi=0;for(qt=0;qt<=S;qt++)Et.bl_count[qt]=0;for(fe[2*Et.heap[Et.heap_max]+1]=0,me=Et.heap_max+1;me<b;me++)Xt<(qt=fe[2*fe[2*(se=Et.heap[me])+1]+1]+1)&&(qt=Xt,hi++),fe[2*se+1]=qt,Pe<se||(Et.bl_count[qt]++,ce=0,De<=se&&(ce=Qe[se-De]),ee=fe[2*se],Et.opt_len+=ee*(qt+ce),Fe&&(Et.static_len+=ee*(Ze[2*se+1]+ce)));if(hi!==0){do{for(qt=Xt-1;Et.bl_count[qt]===0;)qt--;Et.bl_count[qt]--,Et.bl_count[qt+1]+=2,Et.bl_count[Xt]--,hi-=2}while(0<hi);for(qt=Xt;qt!==0;qt--)for(se=Et.bl_count[qt];se!==0;)Pe<(ue=Et.heap[--me])||(fe[2*ue+1]!==qt&&(Et.opt_len+=(qt-fe[2*ue+1])*fe[2*ue],fe[2*ue+1]=qt),se--)}}(N,K),Ot(dt,Ht,N.bl_count)}function g(N,K,at){var ht,nt,dt=-1,vt=K[1],pt=0,xt=7,Ht=4;for(vt===0&&(xt=138,Ht=3),K[2*(at+1)+1]=65535,ht=0;ht<=at;ht++)nt=vt,vt=K[2*(ht+1)+1],++pt<xt&&nt===vt||(pt<Ht?N.bl_tree[2*nt]+=pt:nt!==0?(nt!==dt&&N.bl_tree[2*nt]++,N.bl_tree[2*$]++):pt<=10?N.bl_tree[2*B]++:N.bl_tree[2*Q]++,dt=nt,Ht=(pt=0)===vt?(xt=138,3):nt===vt?(xt=6,3):(xt=7,4))}function tt(N,K,at){var ht,nt,dt=-1,vt=K[1],pt=0,xt=7,Ht=4;for(vt===0&&(xt=138,Ht=3),ht=0;ht<=at;ht++)if(nt=vt,vt=K[2*(ht+1)+1],!(++pt<xt&&nt===vt)){if(pt<Ht)for(;rt(N,nt,N.bl_tree),--pt!=0;);else nt!==0?(nt!==dt&&(rt(N,nt,N.bl_tree),pt--),rt(N,$,N.bl_tree),lt(N,pt-3,2)):pt<=10?(rt(N,B,N.bl_tree),lt(N,pt-3,3)):(rt(N,Q,N.bl_tree),lt(N,pt-11,7));dt=nt,Ht=(pt=0)===vt?(xt=138,3):nt===vt?(xt=6,3):(xt=7,4)}}p(j);var et=!1;function U(N,K,at,ht){lt(N,(_<<1)+(ht?1:0),3),function(nt,dt,vt,pt){Rt(nt),ct(nt,vt),ct(nt,~vt),n.arraySet(nt.pending_buf,nt.window,dt,vt,nt.pending),nt.pending+=vt}(N,K,at)}i._tr_init=function(N){et||(function(){var K,at,ht,nt,dt,vt=new Array(S+1);for(nt=ht=0;nt<E-1;nt++)for(O[nt]=ht,K=0;K<1<<X[nt];K++)c[ht++]=nt;for(c[ht-1]=nt,nt=dt=0;nt<16;nt++)for(j[nt]=dt,K=0;K<1<<x[nt];K++)A[dt++]=nt;for(dt>>=7;nt<k;nt++)for(j[nt]=dt<<7,K=0;K<1<<x[nt]-7;K++)A[256+dt++]=nt;for(at=0;at<=S;at++)vt[at]=0;for(K=0;K<=143;)R[2*K+1]=8,K++,vt[8]++;for(;K<=255;)R[2*K+1]=9,K++,vt[9]++;for(;K<=279;)R[2*K+1]=7,K++,vt[7]++;for(;K<=287;)R[2*K+1]=8,K++,vt[8]++;for(Ot(R,M+1,vt),K=0;K<k;K++)v[2*K+1]=5,v[2*K]=ft(K,5);G=new J(R,X,y+1,M,S),Z=new J(v,x,0,k,S),F=new J(new Array(0),w,0,D,T)}(),et=!0),N.l_desc=new q(N.dyn_ltree,G),N.d_desc=new q(N.dyn_dtree,Z),N.bl_desc=new q(N.bl_tree,F),N.bi_buf=0,N.bi_valid=0,Mt(N)},i._tr_stored_block=U,i._tr_flush_block=function(N,K,at,ht){var nt,dt,vt=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(pt){var xt,Ht=4093624447;for(xt=0;xt<=31;xt++,Ht>>>=1)if(1&Ht&&pt.dyn_ltree[2*xt]!==0)return s;if(pt.dyn_ltree[18]!==0||pt.dyn_ltree[20]!==0||pt.dyn_ltree[26]!==0)return h;for(xt=32;xt<y;xt++)if(pt.dyn_ltree[2*xt]!==0)return h;return s}(N)),St(N,N.l_desc),St(N,N.d_desc),vt=function(pt){var xt;for(g(pt,pt.dyn_ltree,pt.l_desc.max_code),g(pt,pt.dyn_dtree,pt.d_desc.max_code),St(pt,pt.bl_desc),xt=D-1;3<=xt&&pt.bl_tree[2*P[xt]+1]===0;xt--);return pt.opt_len+=3*(xt+1)+5+5+4,xt}(N),nt=N.opt_len+3+7>>>3,(dt=N.static_len+3+7>>>3)<=nt&&(nt=dt)):nt=dt=at+5,at+4<=nt&&K!==-1?U(N,K,at,ht):N.strategy===4||dt===nt?(lt(N,2+(ht?1:0),3),Lt(N,R,v)):(lt(N,4+(ht?1:0),3),function(pt,xt,Ht,Et){var Jt;for(lt(pt,xt-257,5),lt(pt,Ht-1,5),lt(pt,Et-4,4),Jt=0;Jt<Et;Jt++)lt(pt,pt.bl_tree[2*P[Jt]+1],3);tt(pt,pt.dyn_ltree,xt-1),tt(pt,pt.dyn_dtree,Ht-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,vt+1),Lt(N,N.dyn_ltree,N.dyn_dtree)),Mt(N),ht&&Rt(N)},i._tr_tally=function(N,K,at){return N.pending_buf[N.d_buf+2*N.last_lit]=K>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&K,N.pending_buf[N.l_buf+N.last_lit]=255&at,N.last_lit++,K===0?N.dyn_ltree[2*at]++:(N.matches++,K--,N.dyn_ltree[2*(c[at]+y+1)]++,N.dyn_dtree[2*Y(K)]++),N.last_lit===N.lit_bufsize-1},i._tr_align=function(N){lt(N,2,3),rt(N,H,R),function(K){K.bi_valid===16?(ct(K,K.bi_buf),K.bi_buf=0,K.bi_valid=0):8<=K.bi_valid&&(K.pending_buf[K.pending++]=255&K.bi_buf,K.bi_buf>>=8,K.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(o,f,i){f.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,f,i){(function(n){(function(s,h){if(!s.setImmediate){var p,_,E,y,M=1,k={},D=!1,b=s.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(s);S=S&&S.setTimeout?S:s,p={}.toString.call(s.process)==="[object process]"?function($){process.nextTick(function(){T($)})}:function(){if(s.postMessage&&!s.importScripts){var $=!0,B=s.onmessage;return s.onmessage=function(){$=!1},s.postMessage("","*"),s.onmessage=B,$}}()?(y="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",H,!1):s.attachEvent("onmessage",H),function($){s.postMessage(y+$,"*")}):s.MessageChannel?((E=new MessageChannel).port1.onmessage=function($){T($.data)},function($){E.port2.postMessage($)}):b&&"onreadystatechange"in b.createElement("script")?(_=b.documentElement,function($){var B=b.createElement("script");B.onreadystatechange=function(){T($),B.onreadystatechange=null,_.removeChild(B),B=null},_.appendChild(B)}):function($){setTimeout(T,0,$)},S.setImmediate=function($){typeof $!="function"&&($=new Function(""+$));for(var B=new Array(arguments.length-1),Q=0;Q<B.length;Q++)B[Q]=arguments[Q+1];var X={callback:$,args:B};return k[M]=X,p(M),M++},S.clearImmediate=z}function z($){delete k[$]}function T($){if(D)setTimeout(T,0,$);else{var B=k[$];if(B){D=!0;try{(function(Q){var X=Q.callback,x=Q.args;switch(x.length){case 0:X();break;case 1:X(x[0]);break;case 2:X(x[0],x[1]);break;case 3:X(x[0],x[1],x[2]);break;default:X.apply(h,x)}})(B)}finally{z($),D=!1}}}}function H($){$.source===s&&typeof $.data=="string"&&$.data.indexOf(y)===0&&T(+$.data.slice(y.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Vi<"u"?Vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(us)),us.exports}var uu=hu();const cu=Us(uu);var Lr={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fu=Lr.exports,ma;function du(){return ma||(ma=1,function(a,u){(function(){var o,f="4.15.0",i=200,n="Expected a function",s="__lodash_hash_undefined__",h=1,p=2,_=9007199254740991,E="[object Arguments]",y="[object Array]",M="[object Boolean]",k="[object Date]",D="[object Error]",b="[object Function]",S="[object GeneratorFunction]",z="[object Map]",T="[object Number]",H="[object Object]",$="[object Promise]",B="[object RegExp]",Q="[object Set]",X="[object String]",x="[object Symbol]",w="[object WeakMap]",P="[object ArrayBuffer]",R="[object DataView]",v="[object Float32Array]",A="[object Float64Array]",c="[object Int8Array]",O="[object Int16Array]",G="[object Int32Array]",Z="[object Uint8Array]",F="[object Uint8ClampedArray]",j="[object Uint16Array]",J="[object Uint32Array]",q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,ct=/^\./,lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,ft=/\\(\\)?/g,Ot=/\w*$/,Mt=/^\[object .+?Constructor\]$/,Rt=/^(?:0|[1-9]\d*)$/,yt={};yt[v]=yt[A]=yt[c]=yt[O]=yt[G]=yt[Z]=yt[F]=yt[j]=yt[J]=!0,yt[E]=yt[y]=yt[P]=yt[M]=yt[R]=yt[k]=yt[D]=yt[b]=yt[z]=yt[T]=yt[H]=yt[B]=yt[Q]=yt[X]=yt[w]=!1;var gt={};gt[E]=gt[y]=gt[P]=gt[R]=gt[M]=gt[k]=gt[v]=gt[A]=gt[c]=gt[O]=gt[G]=gt[z]=gt[T]=gt[H]=gt[B]=gt[Q]=gt[X]=gt[x]=gt[Z]=gt[F]=gt[j]=gt[J]=!0,gt[D]=gt[b]=gt[w]=!1;var Lt=typeof Vi=="object"&&Vi&&Vi.Object===Object&&Vi,St=typeof self=="object"&&self&&self.Object===Object&&self,g=Lt||St||Function("return this")(),tt=u&&!u.nodeType&&u,et=tt&&!0&&a&&!a.nodeType&&a,U=et&&et.exports===tt,N=U&&Lt.process,K=function(){try{return N&&N.binding("util")}catch{}}(),at=K&&K.isTypedArray;function ht(d,I){return d.set(I[0],I[1]),d}function nt(d,I){return d.add(I),d}function dt(d,I,W){switch(W.length){case 0:return d.call(I);case 1:return d.call(I,W[0]);case 2:return d.call(I,W[0],W[1]);case 3:return d.call(I,W[0],W[1],W[2])}return d.apply(I,W)}function vt(d,I){for(var W=-1,st=d?d.length:0;++W<st&&I(d[W],W,d)!==!1;);return d}function pt(d,I){for(var W=-1,st=I.length,mt=d.length;++W<st;)d[mt+W]=I[W];return d}function xt(d,I,W,st){for(var mt=-1,_t=d?d.length:0;++mt<_t;)W=I(W,d[mt],mt,d);return W}function Ht(d,I){for(var W=-1,st=d?d.length:0;++W<st;)if(I(d[W],W,d))return!0;return!1}function Et(d){return function(I){return I==null?o:I[d]}}function Jt(d,I){for(var W=-1,st=Array(d);++W<d;)st[W]=I(W);return st}function me(d){return function(I){return d(I)}}function se(d,I){return d==null?o:d[I]}function ue(d){var I=!1;if(d!=null&&typeof d.toString!="function")try{I=!!(d+"")}catch{}return I}function qt(d){var I=-1,W=Array(d.size);return d.forEach(function(st,mt){W[++I]=[mt,st]}),W}function ce(d,I){return function(W){return d(I(W))}}function ee(d){var I=-1,W=Array(d.size);return d.forEach(function(st){W[++I]=st}),W}var fe=Array.prototype,Pe=Function.prototype,Ze=Object.prototype,Fe=g["__core-js_shared__"],Qe=function(){var d=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),De=Pe.toString,Xt=Ze.hasOwnProperty,hi=De.call(Object),Ue=Ze.toString,Yn=RegExp("^"+De.call(Xt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ir=U?g.Buffer:o,Dr=g.Symbol,yn=g.Uint8Array,wn=ce(Object.getPrototypeOf,Object),qo=Object.create,zr=Ze.propertyIsEnumerable,Vo=fe.splice,Rr=Object.getOwnPropertySymbols,Ge=Ir?Ir.isBuffer:o,kt=ce(Object.keys,Object),Kn=Math.max,bn=xi(g,"DataView"),Di=xi(g,"Map"),Ln=xi(g,"Promise"),Qi=xi(g,"Set"),xn=xi(g,"WeakMap"),He=xi(Object,"create"),Br=!zr.call({valueOf:1},"valueOf"),jo=ki(bn),Yo=ki(Di),Ko=ki(Ln),Xo=ki(Qi),Nr=ki(xn),En=Dr?Dr.prototype:o,ui=En?En.valueOf:o,Zr=En?En.toString:o;function Zt(){}function yi(d){var I=-1,W=d?d.length:0;for(this.clear();++I<W;){var st=d[I];this.set(st[0],st[1])}}function $o(){this.__data__=He?He(null):{}}function Jo(d){return this.has(d)&&delete this.__data__[d]}function Xn(d){var I=this.__data__;if(He){var W=I[d];return W===s?o:W}return Xt.call(I,d)?I[d]:o}function tn(d){var I=this.__data__;return He?I[d]!==o:Xt.call(I,d)}function Fr(d,I){var W=this.__data__;return W[d]=He&&I===o?s:I,this}yi.prototype.clear=$o,yi.prototype.delete=Jo,yi.prototype.get=Xn,yi.prototype.has=tn,yi.prototype.set=Fr;function We(d){var I=-1,W=d?d.length:0;for(this.clear();++I<W;){var st=d[I];this.set(st[0],st[1])}}function en(){this.__data__=[]}function Wt(d){var I=this.__data__,W=bi(I,d);if(W<0)return!1;var st=I.length-1;return W==st?I.pop():Vo.call(I,W,1),!0}function Qt(d){var I=this.__data__,W=bi(I,d);return W<0?o:I[W][1]}function kn(d){return bi(this.__data__,d)>-1}function zi(d,I){var W=this.__data__,st=bi(W,d);return st<0?W.push([d,I]):W[st][1]=I,this}We.prototype.clear=en,We.prototype.delete=Wt,We.prototype.get=Qt,We.prototype.has=kn,We.prototype.set=zi;function be(d){var I=-1,W=d?d.length:0;for(this.clear();++I<W;){var st=d[I];this.set(st[0],st[1])}}function $n(){this.__data__={hash:new yi,map:new(Di||We),string:new yi}}function Bt(d){return Cn(this,d).delete(d)}function ie(d){return Cn(this,d).get(d)}function Jn(d){return Cn(this,d).has(d)}function Tn(d,I){return Cn(this,d).set(d,I),this}be.prototype.clear=$n,be.prototype.delete=Bt,be.prototype.get=ie,be.prototype.has=Jn,be.prototype.set=Tn;function ye(d){var I=-1,W=d?d.length:0;for(this.__data__=new be;++I<W;)this.add(d[I])}function Qo(d){return this.__data__.set(d,s),this}function Pn(d){return this.__data__.has(d)}ye.prototype.add=ye.prototype.push=Qo,ye.prototype.has=Pn;function de(d){this.__data__=new We(d)}function re(){this.__data__=new We}function wi(d){return this.__data__.delete(d)}function nn(d){return this.__data__.get(d)}function rn(d){return this.__data__.has(d)}function Qn(d,I){var W=this.__data__;if(W instanceof We){var st=W.__data__;if(!Di||st.length<i-1)return st.push([d,I]),this;W=this.__data__=new be(st)}return W.set(d,I),this}de.prototype.clear=re,de.prototype.delete=wi,de.prototype.get=nn,de.prototype.has=rn,de.prototype.set=Qn;function Ri(d,I){var W=we(d)||xe(d)?Jt(d.length,String):[],st=W.length,mt=!!st;for(var _t in d)(I||Xt.call(d,_t))&&!(mt&&(_t=="length"||Ni(_t,st)))&&W.push(_t);return W}function on(d,I,W){(W!==o&&!Fi(d[I],W)||typeof I=="number"&&W===o&&!(I in d))&&(d[I]=W)}function Sn(d,I,W){var st=d[I];(!(Xt.call(d,I)&&Fi(st,W))||W===o&&!(I in d))&&(d[I]=W)}function bi(d,I){for(var W=d.length;W--;)if(Fi(d[W][0],I))return W;return-1}function tr(d,I){return d&&ar(I,ge(I),d)}function ci(d,I,W,st,mt,_t,wt){var Tt;if(st&&(Tt=_t?st(d,mt,_t,wt):st(d)),Tt!==o)return Tt;if(!ae(d))return d;var Dt=we(d);if(Dt){if(Tt=as(d),!I)return Xr(d,Tt)}else{var jt=je(d),Nt=jt==b||jt==S;if(Ti(d))return is(d,I);if(jt==H||jt==E||Nt&&!_t){if(ue(d))return _t?d:{};if(Tt=eo(Nt?{}:d),!I)return lr(d,tr(Tt,d))}else{if(!gt[jt])return _t?d:{};Tt=io(d,jt,ci,I)}}wt||(wt=new de);var Yt=wt.get(d);if(Yt)return Yt;if(wt.set(d,Tt),!Dt)var le=W?Jr(d):ge(d);return vt(le||d,function(oe,_e){le&&(_e=oe,oe=d[_e]),Sn(Tt,_e,ci(oe,I,W,st,_e,d,wt))}),Tt}function Mn(d){return ae(d)?qo(d):{}}var Ur=Ve(ts),er=ss();function ts(d,I){return d&&er(d,I,ge)}function It(d,I){I=On(I,d)?[I]:Ut(I);for(var W=0,st=I.length;d!=null&&W<st;)d=d[An(I[W++])];return W&&W==st?d:o}function qe(d,I,W){var st=I(d);return we(d)?st:pt(st,W(d))}function Vt(d){return Ue.call(d)}function Gr(d,I){return d!=null&&I in Object(d)}function sn(d,I,W,st,mt){return d===I?!0:d==null||I==null||!ae(d)&&!ti(I)?d!==d&&I!==I:ir(d,I,sn,W,st,mt)}function ir(d,I,W,st,mt,_t){var wt=we(d),Tt=we(I),Dt=y,jt=y;wt||(Dt=je(d),Dt=Dt==E?H:Dt),Tt||(jt=je(I),jt=jt==E?H:jt);var Nt=Dt==H&&!ue(d),Yt=jt==H&&!ue(I),le=Dt==jt;if(le&&!Nt)return _t||(_t=new de),wt||Dn(d)?hr(d,I,W,st,mt,_t):di(d,I,Dt,W,st,mt,_t);if(!(mt&p)){var oe=Nt&&Xt.call(d,"__wrapped__"),_e=Yt&&Xt.call(I,"__wrapped__");if(oe||_e){var ei=oe?d.value():d,ii=_e?I.value():I;return _t||(_t=new de),W(ei,ii,st,mt,_t)}}return le?(_t||(_t=new de),$r(d,I,W,st,mt,_t)):!1}function nr(d,I,W,st){var mt=W.length,_t=mt;if(d==null)return!_t;for(d=Object(d);mt--;){var wt=W[mt];if(wt[2]?wt[1]!==d[wt[0]]:!(wt[0]in d))return!1}for(;++mt<_t;){wt=W[mt];var Tt=wt[0],Dt=d[Tt],jt=wt[1];if(wt[2]){if(Dt===o&&!(Tt in d))return!1}else{var Nt=new de,Yt;if(!(Yt===o?sn(jt,Dt,st,h|p,Nt):Yt))return!1}}return!0}function Li(d){if(!ae(d)||Se(d))return!1;var I=Pi(d)||ue(d)?Yn:Mt;return I.test(ki(d))}function rr(d){return ti(d)&&In(d.length)&&!!yt[Ue.call(d)]}function Bi(d){return typeof d=="function"?d:d==null?zn:typeof d=="object"?we(d)?Wr(d[0],d[1]):Hr(d):Rn(d)}function pe(d){if(!hn(d))return kt(d);var I=[];for(var W in Object(d))Xt.call(d,W)&&W!="constructor"&&I.push(W);return I}function fi(d){if(!ae(d))return dr(d);var I=hn(d),W=[];for(var st in d)st=="constructor"&&(I||!Xt.call(d,st))||W.push(st);return W}function Hr(d){var I=Qr(d);return I.length==1&&I[0][2]?no(I[0][0],I[0][1]):function(W){return W===d||nr(W,d,I)}}function Wr(d,I){return On(d)&&fr(I)?no(An(d),I):function(W){var st=Si(W,d);return st===o&&st===I?ho(W,d):sn(I,st,o,h|p)}}function qr(d,I,W,st,mt){if(d!==I){if(!(we(I)||Dn(I)))var _t=fi(I);vt(_t||I,function(wt,Tt){if(_t&&(Tt=wt,wt=I[Tt]),ae(wt))mt||(mt=new de),Vr(d,I,Tt,W,qr,st,mt);else{var Dt=st?st(d[Tt],wt,Tt+"",d,I,mt):o;Dt===o&&(Dt=wt),on(d,Tt,Dt)}})}}function Vr(d,I,W,st,mt,_t,wt){var Tt=d[W],Dt=I[W],jt=wt.get(Dt);if(jt){on(d,W,jt);return}var Nt=_t?_t(Tt,Dt,W+"",d,I,wt):o,Yt=Nt===o;Yt&&(Nt=Dt,we(Dt)||Dn(Dt)?we(Tt)?Nt=Tt:_r(Tt)?Nt=Xr(Tt):(Yt=!1,Nt=ci(Dt,!0)):ao(Dt)||xe(Dt)?xe(Tt)?Nt=Ye(Tt):!ae(Tt)||st&&Pi(Tt)?(Yt=!1,Nt=ci(Dt,!0)):Nt=Tt:Yt=!1),Yt&&(wt.set(Dt,Nt),mt(Nt,Dt,st,_t,wt),wt.delete(Dt)),on(d,W,Nt)}function or(d){return function(I){return It(I,d)}}function es(d,I){return I=Kn(I===o?d.length-1:I,0),function(){for(var W=arguments,st=-1,mt=Kn(W.length-I,0),_t=Array(mt);++st<mt;)_t[st]=W[I+st];st=-1;for(var wt=Array(I+1);++st<I;)wt[st]=W[st];return wt[I]=_t,dt(d,this,wt)}}function jr(d){if(typeof d=="string")return d;if(Ui(d))return Zr?Zr.call(d):"";var I=d+"";return I=="0"&&1/d==-1/0?"-0":I}function Ut(d){return we(d)?d:pr(d)}function is(d,I){if(I)return d.slice();var W=new d.constructor(d.length);return d.copy(W),W}function ke(d){var I=new d.constructor(d.byteLength);return new yn(I).set(new yn(d)),I}function an(d,I){var W=I?ke(d.buffer):d.buffer;return new d.constructor(W,d.byteOffset,d.byteLength)}function Yr(d,I,W){var st=I?W(qt(d),!0):qt(d);return xt(st,ht,new d.constructor)}function ns(d){var I=new d.constructor(d.source,Ot.exec(d));return I.lastIndex=d.lastIndex,I}function sr(d,I,W){var st=I?W(ee(d),!0):ee(d);return xt(st,nt,new d.constructor)}function rs(d){return ui?Object(ui.call(d)):{}}function Kr(d,I){var W=I?ke(d.buffer):d.buffer;return new d.constructor(W,d.byteOffset,d.length)}function Xr(d,I){var W=-1,st=d.length;for(I||(I=Array(st));++W<st;)I[W]=d[W];return I}function ar(d,I,W,st){W||(W={});for(var mt=-1,_t=I.length;++mt<_t;){var wt=I[mt],Tt=o;Sn(W,wt,Tt===o?d[wt]:Tt)}return W}function lr(d,I){return ar(d,to(d),I)}function os(d){return es(function(I,W){var st=-1,mt=W.length,_t=mt>1?W[mt-1]:o,wt=mt>2?W[2]:o;for(_t=d.length>3&&typeof _t=="function"?(mt--,_t):o,wt&&Ei(W[0],W[1],wt)&&(_t=mt<3?o:_t,mt=1),I=Object(I);++st<mt;){var Tt=W[st];Tt&&d(I,Tt,st,_t)}return I})}function Ve(d,I){return function(W,st){if(W==null)return W;if(!Me(W))return d(W,st);for(var mt=W.length,_t=-1,wt=Object(W);++_t<mt&&st(wt[_t],_t,wt)!==!1;);return W}}function ss(d){return function(I,W,st){for(var mt=-1,_t=Object(I),wt=st(I),Tt=wt.length;Tt--;){var Dt=wt[++mt];if(W(_t[Dt],Dt,_t)===!1)break}return I}}function hr(d,I,W,st,mt,_t){var wt=mt&p,Tt=d.length,Dt=I.length;if(Tt!=Dt&&!(wt&&Dt>Tt))return!1;var jt=_t.get(d);if(jt&&_t.get(I))return jt==I;var Nt=-1,Yt=!0,le=mt&h?new ye:o;for(_t.set(d,I),_t.set(I,d);++Nt<Tt;){var oe=d[Nt],_e=I[Nt];if(st)var ei=wt?st(_e,oe,Nt,I,d,_t):st(oe,_e,Nt,d,I,_t);if(ei!==o){if(ei)continue;Yt=!1;break}if(le){if(!Ht(I,function(ii,ze){if(!le.has(ze)&&(oe===ii||W(oe,ii,st,mt,_t)))return le.add(ze)})){Yt=!1;break}}else if(!(oe===_e||W(oe,_e,st,mt,_t))){Yt=!1;break}}return _t.delete(d),_t.delete(I),Yt}function di(d,I,W,st,mt,_t,wt){switch(W){case R:if(d.byteLength!=I.byteLength||d.byteOffset!=I.byteOffset)return!1;d=d.buffer,I=I.buffer;case P:return!(d.byteLength!=I.byteLength||!st(new yn(d),new yn(I)));case M:case k:case T:return Fi(+d,+I);case D:return d.name==I.name&&d.message==I.message;case B:case X:return d==I+"";case z:var Tt=qt;case Q:var Dt=_t&p;if(Tt||(Tt=ee),d.size!=I.size&&!Dt)return!1;var jt=wt.get(d);if(jt)return jt==I;_t|=h,wt.set(d,I);var Nt=hr(Tt(d),Tt(I),st,mt,_t,wt);return wt.delete(d),Nt;case x:if(ui)return ui.call(d)==ui.call(I)}return!1}function $r(d,I,W,st,mt,_t){var wt=mt&p,Tt=ge(d),Dt=Tt.length,jt=ge(I),Nt=jt.length;if(Dt!=Nt&&!wt)return!1;for(var Yt=Dt;Yt--;){var le=Tt[Yt];if(!(wt?le in I:Xt.call(I,le)))return!1}var oe=_t.get(d);if(oe&&_t.get(I))return oe==I;var _e=!0;_t.set(d,I),_t.set(I,d);for(var ei=wt;++Yt<Dt;){le=Tt[Yt];var ii=d[le],ze=I[le];if(st)var co=wt?st(ze,ii,le,I,d,_t):st(ii,ze,le,d,I,_t);if(!(co===o?ii===ze||W(ii,ze,st,mt,_t):co)){_e=!1;break}ei||(ei=le=="constructor")}if(_e&&!ei){var ni=d.constructor,fn=I.constructor;ni!=fn&&"constructor"in d&&"constructor"in I&&!(typeof ni=="function"&&ni instanceof ni&&typeof fn=="function"&&fn instanceof fn)&&(_e=!1)}return _t.delete(d),_t.delete(I),_e}function Jr(d){return qe(d,ge,to)}function ur(){var d=Zt.iteratee||Gi;return d=d===Gi?Bi:d,arguments.length?d(arguments[0],arguments[1]):d}function Cn(d,I){var W=d.__data__;return ln(I)?W[typeof I=="string"?"string":"hash"]:W.map}function Qr(d){for(var I=ge(d),W=I.length;W--;){var st=I[W],mt=d[st];I[W]=[st,mt,fr(mt)]}return I}function xi(d,I){var W=se(d,I);return Li(W)?W:o}var to=Rr?ce(Rr,Object):cn,je=Vt;(bn&&je(new bn(new ArrayBuffer(1)))!=R||Di&&je(new Di)!=z||Ln&&je(Ln.resolve())!=$||Qi&&je(new Qi)!=Q||xn&&je(new xn)!=w)&&(je=function(d){var I=Ue.call(d),W=I==H?d.constructor:o,st=W?ki(W):o;if(st)switch(st){case jo:return R;case Yo:return z;case Ko:return $;case Xo:return Q;case Nr:return w}return I});function cr(d,I,W){I=On(I,d)?[I]:Ut(I);for(var st,mt=-1,wt=I.length;++mt<wt;){var _t=An(I[mt]);if(!(st=d!=null&&W(d,_t)))break;d=d[_t]}if(st)return st;var wt=d?d.length:0;return!!wt&&In(wt)&&Ni(_t,wt)&&(we(d)||xe(d))}function as(d){var I=d.length,W=d.constructor(I);return I&&typeof d[0]=="string"&&Xt.call(d,"index")&&(W.index=d.index,W.input=d.input),W}function eo(d){return typeof d.constructor=="function"&&!hn(d)?Mn(wn(d)):{}}function io(d,I,W,st){var mt=d.constructor;switch(I){case P:return ke(d);case M:case k:return new mt(+d);case R:return an(d,st);case v:case A:case c:case O:case G:case Z:case F:case j:case J:return Kr(d,st);case z:return Yr(d,st,W);case T:case X:return new mt(d);case B:return ns(d);case Q:return sr(d,st,W);case x:return rs(d)}}function Ni(d,I){return I=I??_,!!I&&(typeof d=="number"||Rt.test(d))&&d>-1&&d%1==0&&d<I}function Ei(d,I,W){if(!ae(W))return!1;var st=typeof I;return(st=="number"?Me(W)&&Ni(I,W.length):st=="string"&&I in W)?Fi(W[I],d):!1}function On(d,I){if(we(d))return!1;var W=typeof d;return W=="number"||W=="symbol"||W=="boolean"||d==null||Ui(d)?!0:Y.test(d)||!q.test(d)||I!=null&&d in Object(I)}function ln(d){var I=typeof d;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?d!=="__proto__":d===null}function Se(d){return!!Qe&&Qe in d}function hn(d){var I=d&&d.constructor,W=typeof I=="function"&&I.prototype||Ze;return d===W}function fr(d){return d===d&&!ae(d)}function no(d,I){return function(W){return W==null?!1:W[d]===I&&(I!==o||d in Object(W))}}function dr(d){var I=[];if(d!=null)for(var W in Object(d))I.push(W);return I}var pr=Le(function(d){d=lo(d);var I=[];return ct.test(d)&&I.push(""),d.replace(lt,function(W,st,mt,_t){I.push(mt?_t.replace(ft,"$1"):st||W)}),I});function An(d){if(typeof d=="string"||Ui(d))return d;var I=d+"";return I=="0"&&1/d==-1/0?"-0":I}function ki(d){if(d!=null){try{return De.call(d)}catch{}try{return d+""}catch{}}return""}function ro(d){for(var I=-1,W=d?d.length:0,st=0,mt=[];++I<W;){var _t=d[I];_t&&(mt[st++]=_t)}return mt}function oo(d,I){var W=we(d)?vt:Ur;return W(d,ur(I,3))}function Le(d,I){if(typeof d!="function"||I&&typeof I!="function")throw new TypeError(n);var W=function(){var st=arguments,mt=I?I.apply(this,st):st[0],_t=W.cache;if(_t.has(mt))return _t.get(mt);var wt=d.apply(this,st);return W.cache=_t.set(mt,wt),wt};return W.cache=new(Le.Cache||be),W}Le.Cache=be;function Zi(d){return ci(d,!1,!0)}function Fi(d,I){return d===I||d!==d&&I!==I}function xe(d){return _r(d)&&Xt.call(d,"callee")&&(!zr.call(d,"callee")||Ue.call(d)==E)}var we=Array.isArray;function Me(d){return d!=null&&In(d.length)&&!Pi(d)}function _r(d){return ti(d)&&Me(d)}var Ti=Ge||Mi;function so(d){if(Me(d)&&(we(d)||typeof d=="string"||typeof d.splice=="function"||Ti(d)||xe(d)))return!d.length;var I=je(d);if(I==z||I==Q)return!d.size;if(Br||hn(d))return!kt(d).length;for(var W in d)if(Xt.call(d,W))return!1;return!0}function Pi(d){var I=ae(d)?Ue.call(d):"";return I==b||I==S}function In(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=_}function ae(d){var I=typeof d;return!!d&&(I=="object"||I=="function")}function ti(d){return!!d&&typeof d=="object"}function ao(d){if(!ti(d)||Ue.call(d)!=H||ue(d))return!1;var I=wn(d);if(I===null)return!0;var W=Xt.call(I,"constructor")&&I.constructor;return typeof W=="function"&&W instanceof W&&De.call(W)==hi}function Ui(d){return typeof d=="symbol"||ti(d)&&Ue.call(d)==x}var Dn=at?me(at):rr;function Ye(d){return ar(d,un(d))}function lo(d){return d==null?"":jr(d)}function Si(d,I,W){var st=d==null?o:It(d,I);return st===o?W:st}function ho(d,I){return d!=null&&cr(d,I,Gr)}function ge(d){return Me(d)?Ri(d):pe(d)}function un(d){return Me(d)?Ri(d,!0):fi(d)}var uo=os(function(d,I,W){qr(d,I,W)});function zn(d){return d}function Gi(d){return Bi(typeof d=="function"?d:ci(d,!0))}function Rn(d){return On(d)?Et(An(d)):or(d)}function cn(){return[]}function Mi(){return!1}Zt.compact=ro,Zt.iteratee=Gi,Zt.keys=ge,Zt.keysIn=un,Zt.memoize=Le,Zt.merge=uo,Zt.property=Rn,Zt.toPlainObject=Ye,Zt.clone=Zi,Zt.eq=Fi,Zt.forEach=oo,Zt.get=Si,Zt.hasIn=ho,Zt.identity=zn,Zt.isArguments=xe,Zt.isArray=we,Zt.isArrayLike=Me,Zt.isArrayLikeObject=_r,Zt.isBuffer=Ti,Zt.isEmpty=so,Zt.isFunction=Pi,Zt.isLength=In,Zt.isObject=ae,Zt.isObjectLike=ti,Zt.isPlainObject=ao,Zt.isSymbol=Ui,Zt.isTypedArray=Dn,Zt.stubArray=cn,Zt.stubFalse=Mi,Zt.toString=lo,Zt.each=oo,Zt.VERSION=f,et&&((et.exports=Zt)._=Zt,tt._=Zt)}).call(fu)}(Lr,Lr.exports)),Lr.exports}var cs,ga;function pu(){if(ga)return cs;ga=1,cs=a;function a(f,i){var n=f&&f.type,s;if(n==="FeatureCollection")for(s=0;s<f.features.length;s++)a(f.features[s],i);else if(n==="GeometryCollection")for(s=0;s<f.geometries.length;s++)a(f.geometries[s],i);else if(n==="Feature")a(f.geometry,i);else if(n==="Polygon")u(f.coordinates,i);else if(n==="MultiPolygon")for(s=0;s<f.coordinates.length;s++)u(f.coordinates[s],i);return f}function u(f,i){if(f.length!==0){o(f[0],i);for(var n=1;n<f.length;n++)o(f[n],!i)}}function o(f,i){for(var n=0,s=0,h=0,p=f.length,_=p-1;h<p;_=h++){var E=(f[h][0]-f[_][0])*(f[_][1]+f[h][1]),y=n+E;s+=Math.abs(n)>=Math.abs(E)?n-y+E:E-y+n,n=y}n+s>=0!=!!i&&f.reverse()}return cs}const _u=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var fs,va;function mu(){return va||(va=1,fs=_u),fs}var ds,ya;function gu(){if(ya)return ds;ya=1;var a=du(),u=pu(),o={};mu().forEach(function(s){if(s.polygon==="all")o[s.key]=!0;else{var h=s.polygon==="whitelist"?"included_values":"excluded_values",p={};s.values.forEach(function(_){p[_]=!0}),o[s.key]={},o[s.key][h]=p}});function f(s,h){return(s.version||h.version)&&s.version!==h.version?(+s.version||0)>(+h.version||0)?s:h:a.merge(s,h)}var i={};i=function(s,h,p){h=a.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:o,deduplicator:f},h);var _;return typeof XMLDocument<"u"&&s instanceof XMLDocument||typeof XMLDocument>"u"&&s.childNodes?_=y(s):_=E(s),_;function E(D){var b=new Array,S=new Array,z=new Array;function T(R){var v=a.clone(R);v.lat=R.center.lat,v.lon=R.center.lon,v.__is_center_placeholder=!0,b.push(v)}function H(R){var v=a.clone(R);v.nodes=[];function A(c,O,G){var Z={type:"node",id:"_"+v.type+"/"+v.id+"bounds"+G,lat:c,lon:O};v.nodes.push(Z.id),b.push(Z)}A(v.bounds.minlat,v.bounds.minlon,1),A(v.bounds.maxlat,v.bounds.minlon,2),A(v.bounds.maxlat,v.bounds.maxlon,3),A(v.bounds.minlat,v.bounds.maxlon,4),v.nodes.push(v.nodes[0]),v.__is_bounds_placeholder=!0,S.push(v)}function $(R){function v(A,c,O){var G={type:"node",id:O,lat:A,lon:c};b.push(G)}a.isArray(R.nodes)||(R.nodes=R.geometry.map(function(A){return A!==null?"_anonymous@"+A.lat+"/"+A.lon:"_anonymous@unknown_location"})),R.geometry.forEach(function(A,c){A&&v(A.lat,A.lon,R.nodes[c])})}function B(R){function v(c,O,G){var Z={type:"node",id:G,lat:c,lon:O};b.push(Z)}function A(c,O){if(S.some(function(F){return F.type=="way"&&F.id==O}))return;var G={type:"way",id:O,nodes:[]};function Z(F,j){var J={type:"node",id:"_anonymous@"+F+"/"+j,lat:F,lon:j};G.nodes.push(J.id),b.push(J)}c.forEach(function(F){F?Z(F.lat,F.lon):G.nodes.push(void 0)}),S.push(G)}R.members.forEach(function(c,O){c.type=="node"?c.lat&&v(c.lat,c.lon,c.ref):c.type=="way"&&c.geometry&&(c.ref="_fullGeom"+c.ref,A(c.geometry,c.ref))})}for(var Q=0;Q<D.elements.length;Q++)switch(D.elements[Q].type){case"node":var X=D.elements[Q];b.push(X);break;case"way":var x=a.clone(D.elements[Q]);x.nodes=a.clone(x.nodes),S.push(x),x.center&&T(x),x.geometry?$(x):x.bounds&&H(x);break;case"relation":var w=a.clone(D.elements[Q]);w.members=a.clone(w.members),z.push(w);var P=w.members&&w.members.some(function(R){return R.type=="node"&&R.lat||R.type=="way"&&R.geometry&&R.geometry.length>0});w.center&&T(w),P?B(w):w.bounds&&H(w);break}return M(b,S,z)}function y(D){var b=new Array,S=new Array,z=new Array;function T(w,P,R){w.hasAttribute(R)&&(P[R]=w.getAttribute(R))}function H(w,P){var R=a.clone(w);T(P,R,"lat"),T(P,R,"lon"),R.__is_center_placeholder=!0,b.push(R)}function $(w,P){var R=a.clone(w);R.nodes=[];function v(A,c,O){var G={type:"node",id:"_"+R.type+"/"+R.id+"bounds"+O,lat:A,lon:c};R.nodes.push(G.id),b.push(G)}v(P.getAttribute("minlat"),P.getAttribute("minlon"),1),v(P.getAttribute("maxlat"),P.getAttribute("minlon"),2),v(P.getAttribute("maxlat"),P.getAttribute("maxlon"),3),v(P.getAttribute("minlat"),P.getAttribute("maxlon"),4),R.nodes.push(R.nodes[0]),R.__is_bounds_placeholder=!0,S.push(R)}function B(w,P){function R(v,A,c){var O={type:"node",id:c,lat:v,lon:A};return b.push(O),O.id}a.isArray(w.nodes)||(w.nodes=[],a.each(P,function(v,A){w.nodes.push("_anonymous@"+v.getAttribute("lat")+"/"+v.getAttribute("lon"))})),a.each(P,function(v,A){v.getAttribute("lat")&&R(v.getAttribute("lat"),v.getAttribute("lon"),w.nodes[A])})}function Q(w,P){function R(A,c,O){var G={type:"node",id:O,lat:A,lon:c};b.push(G)}function v(A,c){if(S.some(function(Z){return Z.type=="way"&&Z.id==c}))return;var O={type:"way",id:c,nodes:[]};function G(Z,F){var j={type:"node",id:"_anonymous@"+Z+"/"+F,lat:Z,lon:F};O.nodes.push(j.id),b.push(j)}a.each(A,function(Z){Z.getAttribute("lat")?G(Z.getAttribute("lat"),Z.getAttribute("lon")):O.nodes.push(void 0)}),S.push(O)}a.each(P,function(A,c){w.members[c].type=="node"?A.getAttribute("lat")&&R(A.getAttribute("lat"),A.getAttribute("lon"),w.members[c].ref):w.members[c].type=="way"&&A.getElementsByTagName("nd").length>0&&(w.members[c].ref="_fullGeom"+w.members[c].ref,v(A.getElementsByTagName("nd"),w.members[c].ref))})}a.each(D.getElementsByTagName("node"),function(w,P){var R={};a.each(w.getElementsByTagName("tag"),function(A){R[A.getAttribute("k")]=A.getAttribute("v")});var v={type:"node"};T(w,v,"id"),T(w,v,"lat"),T(w,v,"lon"),T(w,v,"version"),T(w,v,"timestamp"),T(w,v,"changeset"),T(w,v,"uid"),T(w,v,"user"),a.isEmpty(R)||(v.tags=R),b.push(v)});var X,x;return a.each(D.getElementsByTagName("way"),function(w,P){var R={},v=[];a.each(w.getElementsByTagName("tag"),function(O){R[O.getAttribute("k")]=O.getAttribute("v")});var A=!1;a.each(w.getElementsByTagName("nd"),function(O,G){var Z;(Z=O.getAttribute("ref"))&&(v[G]=Z),!A&&O.getAttribute("lat")&&(A=!0)});var c={type:"way"};T(w,c,"id"),T(w,c,"version"),T(w,c,"timestamp"),T(w,c,"changeset"),T(w,c,"uid"),T(w,c,"user"),v.length>0&&(c.nodes=v),a.isEmpty(R)||(c.tags=R),(X=w.getElementsByTagName("center")[0])&&H(c,X),A?B(c,w.getElementsByTagName("nd")):(x=w.getElementsByTagName("bounds")[0])&&$(c,x),S.push(c)}),a.each(D.getElementsByTagName("relation"),function(w,P){var R={},v=[];a.each(w.getElementsByTagName("tag"),function(O){R[O.getAttribute("k")]=O.getAttribute("v")});var A=!1;a.each(w.getElementsByTagName("member"),function(O,G){v[G]={},T(O,v[G],"ref"),T(O,v[G],"role"),T(O,v[G],"type"),(!A&&v[G].type=="node"&&O.getAttribute("lat")||v[G].type=="way"&&O.getElementsByTagName("nd").length>0)&&(A=!0)});var c={type:"relation"};T(w,c,"id"),T(w,c,"version"),T(w,c,"timestamp"),T(w,c,"changeset"),T(w,c,"uid"),T(w,c,"user"),v.length>0&&(c.members=v),a.isEmpty(R)||(c.tags=R),(X=w.getElementsByTagName("center")[0])&&H(c,X),A?Q(c,w.getElementsByTagName("member")):(x=w.getElementsByTagName("bounds")[0])&&$(c,x),z.push(c)}),M(b,S,z)}function M(D,b,S){function z(yt,gt){if(typeof gt!="object"&&(gt={}),typeof h.uninterestingTags=="function")return!h.uninterestingTags(yt,gt);for(var Lt in yt)if(h.uninterestingTags[Lt]!==!0&&!(gt[Lt]===!0||gt[Lt]===yt[Lt]))return!0;return!1}function T(yt){var gt={timestamp:yt.timestamp,version:yt.version,changeset:yt.changeset,user:yt.user,uid:yt.uid};for(var Lt in gt)gt[Lt]===void 0&&delete gt[Lt];return gt}for(var H=new Object,$=new Object,B=0;B<D.length;B++){var Q=D[B];H[Q.id]!==void 0&&(Q=h.deduplicator(Q,H[Q.id])),H[Q.id]=Q,typeof Q.tags<"u"&&z(Q.tags)&&($[Q.id]=!0)}for(var B=0;B<S.length;B++)if(a.isArray(S[B].members))for(var X=0;X<S[B].members.length;X++)S[B].members[X].type=="node"&&($[S[B].members[X].ref]=!0);for(var x=new Object,w=new Object,B=0;B<b.length;B++){var P=b[B];if(x[P.id]&&(P=h.deduplicator(P,x[P.id])),x[P.id]=P,a.isArray(P.nodes))for(var X=0;X<P.nodes.length;X++)typeof P.nodes[X]!="object"&&(w[P.nodes[X]]=!0,P.nodes[X]=H[P.nodes[X]])}var R=new Array;for(var v in H){var Q=H[v];(!w[v]||$[v])&&R.push(Q)}for(var A=new Array,B=0;B<S.length;B++){var c=S[B];A[c.id]&&(c=h.deduplicator(c,A[c.id])),A[c.id]=c}var O={node:{},way:{},relation:{}};for(var v in A){var c=A[v];if(!a.isArray(c.members)){h.verbose&&console.warn("Relation",c.type+"/"+c.id,"ignored because it has no members");continue}for(var X=0;X<c.members.length;X++){var G=c.members[X].type,Z=c.members[X].ref;if(typeof Z!="number"&&(Z=Z.replace("_fullGeom","")),!O[G]){h.verbose&&console.warn("Relation",c.type+"/"+c.id,"member",G+"/"+Z,"ignored because it has an invalid type");continue}typeof O[G][Z]>"u"&&(O[G][Z]=[]),O[G][Z].push({role:c.members[X].role,rel:c.id,reltags:c.tags})}}var F,j=[];for(B=0;B<R.length;B++){if(typeof R[B].lon>"u"||typeof R[B].lat>"u"){h.verbose&&console.warn("POI",R[B].type+"/"+R[B].id,"ignored because it lacks coordinates");continue}var J={type:"Feature",id:R[B].type+"/"+R[B].id,properties:{type:R[B].type,id:R[B].id,tags:R[B].tags||{},relations:O.node[R[B].id]||[],meta:T(R[B])},geometry:{type:"Point",coordinates:[+R[B].lon,+R[B].lat]}};R[B].__is_center_placeholder&&(J.properties.geometry="center"),p?p(J):j.push(J)}for(var q=[],Y=[],B=0;B<S.length;B++)if(A[S[B].id]===S[B]){if(typeof S[B].tags<"u"&&(S[B].tags.type=="route"||S[B].tags.type=="waterway")){let gt=function(Lt){var St=!1,g;g=Lt.members.filter(function(N){return N.type==="way"}),g=g.map(function(N){var K=x[N.ref];if(K===void 0||K.nodes===void 0){h.verbose&&console.warn("Route "+Lt.type+"/"+Lt.id,"tainted by a missing or incomplete  way",N.type+"/"+N.ref),St=!0;return}return{id:N.ref,role:N.role,way:K,nodes:K.nodes.filter(function(at){return at!==void 0?!0:(St=!0,h.verbose&&console.warn("Route",Lt.type+"/"+Lt.id,"tainted by a way",N.type+"/"+N.ref,"with a missing node"),!1)})}}),g=a.compact(g);var tt;tt=n(g);var et=[];if(et=a.compact(tt.map(function(N){return a.compact(N.map(function(K){return[+K.lon,+K.lat]}))})),et.length==0)return h.verbose&&console.warn("Route",Lt.type+"/"+Lt.id,"contains no coordinates"),!1;var U={type:"Feature",id:Lt.type+"/"+Lt.id,properties:{type:Lt.type,id:Lt.id,tags:Lt.tags||{},relations:O[Lt.type][Lt.id]||[],meta:T(Lt)},geometry:{type:et.length===1?"LineString":"MultiLineString",coordinates:et.length===1?et[0]:et}};return St&&(h.verbose&&console.warn("Route",Lt.type+"/"+Lt.id,"is tainted"),U.properties.tainted=!0),U};var Mt=gt;if(!a.isArray(S[B].members)){h.verbose&&console.warn("Route",S[B].type+"/"+S[B].id,"ignored because it has no members");continue}if(S[B].members.forEach(function(Lt){x[Lt.ref]&&!z(x[Lt.ref].tags)&&(x[Lt.ref].is_skippablerelationmember=!0)}),J=gt(S[B]),J===!1){h.verbose&&console.warn("Route relation",S[B].type+"/"+S[B].id,"ignored because it has invalid geometry");continue}p?p(u(J)):Y.push(J)}if(typeof S[B].tags<"u"&&(S[B].tags.type=="multipolygon"||S[B].tags.type=="boundary")){let Lt=function(St,g){var tt=!1,et=lt?"way":"relation",U=typeof St.id=="number"?St.id:+St.id.replace("_fullGeom",""),N;N=g.members.filter(function(Et){return Et.type==="way"}),N=N.map(function(Et){var Jt=x[Et.ref];if(Jt===void 0||Jt.nodes===void 0){h.verbose&&console.warn("Multipolygon",et+"/"+U,"tainted by a missing or incomplete way",Et.type+"/"+Et.ref),tt=!0;return}return{id:Et.ref,role:Et.role||"outer",way:Jt,nodes:Jt.nodes.filter(function(me){return me!==void 0?!0:(tt=!0,h.verbose&&console.warn("Multipolygon",et+"/"+U,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),N=a.compact(N);var K,at;K=n(N.filter(function(Et){return Et.role==="outer"})),at=n(N.filter(function(Et){return Et.role==="inner"}));var ht;function nt(Et){var Jt=function(ce,ee){for(var fe=0;fe<ee.length;fe++)if(se(ee[fe],ce))return!0;return!1},me=function(ce){return ce.map(function(ee){return[+ee.lat,+ee.lon]})},se=function(ce,ee){for(var fe=ce[0],Pe=ce[1],Ze=!1,Fe=0,Qe=ee.length-1;Fe<ee.length;Qe=Fe++){var De=ee[Fe][0],Xt=ee[Fe][1],hi=ee[Qe][0],Ue=ee[Qe][1],Yn=Xt>Pe!=Ue>Pe&&fe<(hi-De)*(Pe-Xt)/(Ue-Xt)+De;Yn&&(Ze=!Ze)}return Ze},ue,qt;for(Et=me(Et),ue=0;ue<K.length;ue++)if(qt=me(K[ue]),Jt(qt,Et))return ue}ht=K.map(function(Et){return[Et]});for(var dt=0;dt<at.length;dt++){var vt=nt(at[dt]);vt!==void 0?ht[vt].push(at[dt]):h.verbose&&console.warn("Multipolygon",et+"/"+U,"contains an inner ring with no containing outer")}var pt=[];if(pt=a.compact(ht.map(function(Et){var Jt=a.compact(Et.map(function(me){if(me.length<4){h.verbose&&console.warn("Multipolygon",et+"/"+U,"contains a ring with less than four nodes");return}return a.compact(me.map(function(se){return[+se.lon,+se.lat]}))}));if(Jt.length==0){h.verbose&&console.warn("Multipolygon",et+"/"+U,"contains an empty ring cluster");return}return Jt})),pt.length==0)return h.verbose&&console.warn("Multipolygon",et+"/"+U,"contains no coordinates"),!1;var xt="MultiPolygon";pt.length===1&&(xt="Polygon",pt=pt[0]);var Ht={type:"Feature",id:St.type+"/"+U,properties:{type:St.type,id:U,tags:St.tags||{},relations:O[St.type][St.id]||[],meta:T(St)},geometry:{type:xt,coordinates:pt}};return tt&&(h.verbose&&console.warn("Multipolygon",et+"/"+U,"is tainted"),Ht.properties.tainted=!0),Ht};var Rt=Lt;if(!a.isArray(S[B].members)){h.verbose&&console.warn("Multipolygon",S[B].type+"/"+S[B].id,"ignored because it has no members");continue}for(var ct=0,X=0;X<S[B].members.length;X++)S[B].members[X].role=="outer"?ct++:h.verbose&&S[B].members[X].role!="inner"&&console.warn("Multipolygon",S[B].type+"/"+S[B].id,"member",S[B].members[X].type+"/"+S[B].members[X].ref,'ignored because it has an invalid role: "'+S[B].members[X].role+'"');if(S[B].members.forEach(function(St){x[St.ref]&&(St.role==="outer"&&!z(x[St.ref].tags,S[B].tags)&&(x[St.ref].is_skippablerelationmember=!0),St.role==="inner"&&!z(x[St.ref].tags)&&(x[St.ref].is_skippablerelationmember=!0))}),ct==0){h.verbose&&console.warn("Multipolygon relation",S[B].type+"/"+S[B].id,"ignored because it has no outer ways");continue}var lt=!1;ct==1&&!z(S[B].tags,{type:!0})&&(lt=!0);var J=null;if(!lt)J=Lt(S[B],S[B]);else{var rt=S[B].members.filter(function(St){return St.role==="outer"})[0];if(rt=x[rt.ref],rt===void 0){h.verbose&&console.warn("Multipolygon relation",S[B].type+"/"+S[B].id,"ignored because outer way",rt.type+"/"+rt.ref,"is missing");continue}rt.is_skippablerelationmember=!0,J=Lt(rt,S[B])}if(J===!1){h.verbose&&console.warn("Multipolygon relation",S[B].type+"/"+S[B].id,"ignored because it has invalid geometry");continue}p?p(u(J)):Y.push(J)}}for(var B=0;B<b.length;B++)if(x[b[B].id]===b[B]){if(!a.isArray(b[B].nodes)){h.verbose&&console.warn("Way",b[B].type+"/"+b[B].id,"ignored because it has no nodes");continue}if(!b[B].is_skippablerelationmember){typeof b[B].id!="number"&&(b[B].id=+b[B].id.replace("_fullGeom","")),b[B].tainted=!1,b[B].hidden=!1;var ft=new Array;for(X=0;X<b[B].nodes.length;X++)typeof b[B].nodes[X]=="object"?ft.push([+b[B].nodes[X].lon,+b[B].nodes[X].lat]):(h.verbose&&console.warn("Way",b[B].type+"/"+b[B].id,"is tainted by an invalid node"),b[B].tainted=!0);if(ft.length<=1){h.verbose&&console.warn("Way",b[B].type+"/"+b[B].id,"ignored because it contains too few nodes");continue}var Ot="LineString";typeof b[B].nodes[0]<"u"&&typeof b[B].nodes[b[B].nodes.length-1]<"u"&&b[B].nodes[0].id===b[B].nodes[b[B].nodes.length-1].id&&(typeof b[B].tags<"u"&&k(b[B].tags)||b[B].__is_bounds_placeholder)&&(Ot="Polygon",ft=[ft]);var J={type:"Feature",id:b[B].type+"/"+b[B].id,properties:{type:b[B].type,id:b[B].id,tags:b[B].tags||{},relations:O.way[b[B].id]||[],meta:T(b[B])},geometry:{type:Ot,coordinates:ft}};b[B].tainted&&(h.verbose&&console.warn("Way",b[B].type+"/"+b[B].id,"is tainted"),J.properties.tainted=!0),b[B].__is_bounds_placeholder&&(J.properties.geometry="bounds"),p?p(u(J)):Ot=="LineString"?q.push(J):Y.push(J)}}return p?!0:(F={type:"FeatureCollection",features:[]},F.features=F.features.concat(Y),F.features=F.features.concat(q),F.features=F.features.concat(j),h.flatProperties&&F.features.forEach(function(yt){yt.properties=a.merge(yt.properties.meta,yt.properties.tags,{id:yt.properties.type+"/"+yt.properties.id})}),F=u(F),F)}function k(D){var b=h.polygonFeatures;if(typeof b=="function")return b(D);if(D.area==="no")return!1;for(var S in D){var z=D[S],T=b[S];if(!(typeof T>"u")&&z!=="no"&&(T===!0||T.included_values&&T.included_values[z]===!0||T.excluded_values&&T.excluded_values[z]!==!0))return!0}return!1}};function n(s){for(var h=function(z){return z[0]},p=function(z){return z[z.length-1]},_=function(z,T){return z!==void 0&&T!==void 0&&z.id===T.id},E=[],y,M,k,D,b,S;s.length;)for(y=s.pop().nodes.slice(),E.push(y);s.length&&!_(h(y),p(y));){for(M=h(y),k=p(y),D=0;D<s.length;D++)if(S=s[D].nodes,_(k,h(S))){b=y.push,S=S.slice(1);break}else if(_(k,p(S))){b=y.push,S=S.slice(0,-1).reverse();break}else if(_(M,p(S))){b=y.unshift,S=S.slice(0,-1);break}else if(_(M,h(S))){b=y.unshift,S=S.slice(1).reverse();break}else S=b=null;if(!S)break;s.splice(D,1),b.apply(y,S)}return E}return i.toGeojson=i,ds=i,ds}var vu=gu();const yu=Us(vu);function $i(a,u,o={}){const f={type:"Feature"};return(o.id===0||o.id)&&(f.id=o.id),o.bbox&&(f.bbox=o.bbox),f.properties=u||{},f.geometry=a,f}function wu(a,u,o={}){switch(a){case"Point":return bu(u).geometry;case"LineString":return Lu(u).geometry;case"Polygon":return Do(u).geometry;case"MultiPoint":return ku(u).geometry;case"MultiLineString":return Eu(u).geometry;case"MultiPolygon":return hl(u).geometry;default:throw new Error(a+" is invalid")}}function bu(a,u,o={}){if(!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wa(a[0])||!wa(a[1]))throw new Error("coordinates must contain numbers");return $i({type:"Point",coordinates:a},u,o)}function Do(a,u,o={}){for(const i of a){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let n=0;n<i[i.length-1].length;n++)if(i[i.length-1][n]!==i[0][n])throw new Error("First and last Position are not equivalent.")}return $i({type:"Polygon",coordinates:a},u,o)}function Lu(a,u,o={}){if(a.length<2)throw new Error("coordinates must be an array of two or more positions");return $i({type:"LineString",coordinates:a},u,o)}function xu(a,u={}){const o={type:"FeatureCollection"};return u.id&&(o.id=u.id),u.bbox&&(o.bbox=u.bbox),o.features=a,o}function Eu(a,u,o={}){return $i({type:"MultiLineString",coordinates:a},u,o)}function ku(a,u,o={}){return $i({type:"MultiPoint",coordinates:a},u,o)}function hl(a,u,o={}){return $i({type:"MultiPolygon",coordinates:a},u,o)}function wa(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Tu(a,u){var o,f,i,n,s,h,p,_,E,y,M=0,k=a.type==="FeatureCollection",D=a.type==="Feature",b=k?a.features.length:1;for(o=0;o<b;o++){for(h=k?a.features[o].geometry:D?a.geometry:a,_=k?a.features[o].properties:D?a.properties:{},E=k?a.features[o].bbox:D?a.bbox:void 0,y=k?a.features[o].id:D?a.id:void 0,p=h?h.type==="GeometryCollection":!1,s=p?h.geometries.length:1,i=0;i<s;i++){if(n=p?h.geometries[i]:h,n===null){if(u(null,M,_,E,y)===!1)return!1;continue}switch(n.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(n,M,_,E,y)===!1)return!1;break}case"GeometryCollection":{for(f=0;f<n.geometries.length;f++)if(u(n.geometries[f],M,_,E,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}var Pu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ps=Math.ceil,$e=Math.floor,Ae="[BigNumber Error] ",ba=Ae+"Number primitive has more than 15 significant digits: ",oi=1e14,zt=14,La=9007199254740991,_s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Hi=1e7,Re=1e9;function ul(a){var u,o,f,i=T.prototype={constructor:T,toString:null,valueOf:null},n=new T(1),s=20,h=4,p=-7,_=21,E=-1e7,y=1e7,M=!1,k=1,D=0,b={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz",z=!0;function T(x,w){var P,R,v,A,c,O,G,Z,F=this;if(!(F instanceof T))return new T(x,w);if(w==null){if(x&&x._isBigNumber===!0){F.s=x.s,!x.c||x.e>y?F.c=F.e=null:x.e<E?F.c=[F.e=0]:(F.e=x.e,F.c=x.c.slice());return}if((O=typeof x=="number")&&x*0==0){if(F.s=1/x<0?(x=-x,-1):1,x===~~x){for(A=0,c=x;c>=10;c/=10,A++);A>y?F.c=F.e=null:(F.e=A,F.c=[x]);return}Z=String(x)}else{if(!Pu.test(Z=String(x)))return f(F,Z,O);F.s=Z.charCodeAt(0)==45?(Z=Z.slice(1),-1):1}(A=Z.indexOf("."))>-1&&(Z=Z.replace(".","")),(c=Z.search(/e/i))>0?(A<0&&(A=c),A+=+Z.slice(c+1),Z=Z.substring(0,c)):A<0&&(A=Z.length)}else{if(ne(w,2,S.length,"Base"),w==10&&z)return F=new T(x),Q(F,s+F.e+1,h);if(Z=String(x),O=typeof x=="number"){if(x*0!=0)return f(F,Z,O,w);if(F.s=1/x<0?(Z=Z.slice(1),-1):1,T.DEBUG&&Z.replace(/^0\.0*|\./,"").length>15)throw Error(ba+x)}else F.s=Z.charCodeAt(0)===45?(Z=Z.slice(1),-1):1;for(P=S.slice(0,w),A=c=0,G=Z.length;c<G;c++)if(P.indexOf(R=Z.charAt(c))<0){if(R=="."){if(c>A){A=G;continue}}else if(!v&&(Z==Z.toUpperCase()&&(Z=Z.toLowerCase())||Z==Z.toLowerCase()&&(Z=Z.toUpperCase()))){v=!0,c=-1,A=0;continue}return f(F,String(x),O,w)}O=!1,Z=o(Z,w,10,F.s),(A=Z.indexOf("."))>-1?Z=Z.replace(".",""):A=Z.length}for(c=0;Z.charCodeAt(c)===48;c++);for(G=Z.length;Z.charCodeAt(--G)===48;);if(Z=Z.slice(c,++G)){if(G-=c,O&&T.DEBUG&&G>15&&(x>La||x!==$e(x)))throw Error(ba+F.s*x);if((A=A-c-1)>y)F.c=F.e=null;else if(A<E)F.c=[F.e=0];else{if(F.e=A,F.c=[],c=(A+1)%zt,A<0&&(c+=zt),c<G){for(c&&F.c.push(+Z.slice(0,c)),G-=zt;c<G;)F.c.push(+Z.slice(c,c+=zt));c=zt-(Z=Z.slice(c)).length}else c-=G;for(;c--;Z+="0");F.c.push(+Z)}}else F.c=[F.e=0]}T.clone=ul,T.ROUND_UP=0,T.ROUND_DOWN=1,T.ROUND_CEIL=2,T.ROUND_FLOOR=3,T.ROUND_HALF_UP=4,T.ROUND_HALF_DOWN=5,T.ROUND_HALF_EVEN=6,T.ROUND_HALF_CEIL=7,T.ROUND_HALF_FLOOR=8,T.EUCLID=9,T.config=T.set=function(x){var w,P;if(x!=null)if(typeof x=="object"){if(x.hasOwnProperty(w="DECIMAL_PLACES")&&(P=x[w],ne(P,0,Re,w),s=P),x.hasOwnProperty(w="ROUNDING_MODE")&&(P=x[w],ne(P,0,8,w),h=P),x.hasOwnProperty(w="EXPONENTIAL_AT")&&(P=x[w],P&&P.pop?(ne(P[0],-1e9,0,w),ne(P[1],0,Re,w),p=P[0],_=P[1]):(ne(P,-1e9,Re,w),p=-(_=P<0?-P:P))),x.hasOwnProperty(w="RANGE"))if(P=x[w],P&&P.pop)ne(P[0],-1e9,-1,w),ne(P[1],1,Re,w),E=P[0],y=P[1];else if(ne(P,-1e9,Re,w),P)E=-(y=P<0?-P:P);else throw Error(Ae+w+" cannot be zero: "+P);if(x.hasOwnProperty(w="CRYPTO"))if(P=x[w],P===!!P)if(P)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))M=P;else throw M=!P,Error(Ae+"crypto unavailable");else M=P;else throw Error(Ae+w+" not true or false: "+P);if(x.hasOwnProperty(w="MODULO_MODE")&&(P=x[w],ne(P,0,9,w),k=P),x.hasOwnProperty(w="POW_PRECISION")&&(P=x[w],ne(P,0,Re,w),D=P),x.hasOwnProperty(w="FORMAT"))if(P=x[w],typeof P=="object")b=P;else throw Error(Ae+w+" not an object: "+P);if(x.hasOwnProperty(w="ALPHABET"))if(P=x[w],typeof P=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(P))z=P.slice(0,10)=="0123456789",S=P;else throw Error(Ae+w+" invalid: "+P)}else throw Error(Ae+"Object expected: "+x);return{DECIMAL_PLACES:s,ROUNDING_MODE:h,EXPONENTIAL_AT:[p,_],RANGE:[E,y],CRYPTO:M,MODULO_MODE:k,POW_PRECISION:D,FORMAT:b,ALPHABET:S}},T.isBigNumber=function(x){if(!x||x._isBigNumber!==!0)return!1;if(!T.DEBUG)return!0;var w,P,R=x.c,v=x.e,A=x.s;t:if({}.toString.call(R)=="[object Array]"){if((A===1||A===-1)&&v>=-1e9&&v<=Re&&v===$e(v)){if(R[0]===0){if(v===0&&R.length===1)return!0;break t}if(w=(v+1)%zt,w<1&&(w+=zt),String(R[0]).length==w){for(w=0;w<R.length;w++)if(P=R[w],P<0||P>=oi||P!==$e(P))break t;if(P!==0)return!0}}}else if(R===null&&v===null&&(A===null||A===1||A===-1))return!0;throw Error(Ae+"Invalid BigNumber: "+x)},T.maximum=T.max=function(){return $(arguments,-1)},T.minimum=T.min=function(){return $(arguments,1)},T.random=function(){var x=9007199254740992,w=Math.random()*x&2097151?function(){return $e(Math.random()*x)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(P){var R,v,A,c,O,G=0,Z=[],F=new T(n);if(P==null?P=s:ne(P,0,Re),c=ps(P/zt),M)if(crypto.getRandomValues){for(R=crypto.getRandomValues(new Uint32Array(c*=2));G<c;)O=R[G]*131072+(R[G+1]>>>11),O>=9e15?(v=crypto.getRandomValues(new Uint32Array(2)),R[G]=v[0],R[G+1]=v[1]):(Z.push(O%1e14),G+=2);G=c/2}else if(crypto.randomBytes){for(R=crypto.randomBytes(c*=7);G<c;)O=(R[G]&31)*281474976710656+R[G+1]*1099511627776+R[G+2]*4294967296+R[G+3]*16777216+(R[G+4]<<16)+(R[G+5]<<8)+R[G+6],O>=9e15?crypto.randomBytes(7).copy(R,G):(Z.push(O%1e14),G+=7);G=c/7}else throw M=!1,Error(Ae+"crypto unavailable");if(!M)for(;G<c;)O=w(),O<9e15&&(Z[G++]=O%1e14);for(c=Z[--G],P%=zt,c&&P&&(O=_s[zt-P],Z[G]=$e(c/O)*O);Z[G]===0;Z.pop(),G--);if(G<0)Z=[A=0];else{for(A=-1;Z[0]===0;Z.splice(0,1),A-=zt);for(G=1,O=Z[0];O>=10;O/=10,G++);G<zt&&(A-=zt-G)}return F.e=A,F.c=Z,F}}(),T.sum=function(){for(var x=1,w=arguments,P=new T(w[0]);x<w.length;)P=P.plus(w[x++]);return P},o=function(){var x="0123456789";function w(P,R,v,A){for(var c,O=[0],G,Z=0,F=P.length;Z<F;){for(G=O.length;G--;O[G]*=R);for(O[0]+=A.indexOf(P.charAt(Z++)),c=0;c<O.length;c++)O[c]>v-1&&(O[c+1]==null&&(O[c+1]=0),O[c+1]+=O[c]/v|0,O[c]%=v)}return O.reverse()}return function(P,R,v,A,c){var O,G,Z,F,j,J,q,Y,ct=P.indexOf("."),lt=s,rt=h;for(ct>=0&&(F=D,D=0,P=P.replace(".",""),Y=new T(R),J=Y.pow(P.length-ct),D=F,Y.c=w(Oi(Xe(J.c),J.e,"0"),10,v,x),Y.e=Y.c.length),q=w(P,R,v,c?(O=S,x):(O=x,S)),Z=F=q.length;q[--F]==0;q.pop());if(!q[0])return O.charAt(0);if(ct<0?--Z:(J.c=q,J.e=Z,J.s=A,J=u(J,Y,lt,rt,v),q=J.c,j=J.r,Z=J.e),G=Z+lt+1,ct=q[G],F=v/2,j=j||G<0||q[G+1]!=null,j=rt<4?(ct!=null||j)&&(rt==0||rt==(J.s<0?3:2)):ct>F||ct==F&&(rt==4||j||rt==6&&q[G-1]&1||rt==(J.s<0?8:7)),G<1||!q[0])P=j?Oi(O.charAt(1),-lt,O.charAt(0)):O.charAt(0);else{if(q.length=G,j)for(--v;++q[--G]>v;)q[G]=0,G||(++Z,q=[1].concat(q));for(F=q.length;!q[--F];);for(ct=0,P="";ct<=F;P+=O.charAt(q[ct++]));P=Oi(P,Z,O.charAt(0))}return P}}(),u=function(){function x(R,v,A){var c,O,G,Z,F=0,j=R.length,J=v%Hi,q=v/Hi|0;for(R=R.slice();j--;)G=R[j]%Hi,Z=R[j]/Hi|0,c=q*G+Z*J,O=J*G+c%Hi*Hi+F,F=(O/A|0)+(c/Hi|0)+q*Z,R[j]=O%A;return F&&(R=[F].concat(R)),R}function w(R,v,A,c){var O,G;if(A!=c)G=A>c?1:-1;else for(O=G=0;O<A;O++)if(R[O]!=v[O]){G=R[O]>v[O]?1:-1;break}return G}function P(R,v,A,c){for(var O=0;A--;)R[A]-=O,O=R[A]<v[A]?1:0,R[A]=O*c+R[A]-v[A];for(;!R[0]&&R.length>1;R.splice(0,1));}return function(R,v,A,c,O){var G,Z,F,j,J,q,Y,ct,lt,rt,ft,Ot,Mt,Rt,yt,gt,Lt,St=R.s==v.s?1:-1,g=R.c,tt=v.c;if(!g||!g[0]||!tt||!tt[0])return new T(!R.s||!v.s||(g?tt&&g[0]==tt[0]:!tt)?NaN:g&&g[0]==0||!tt?St*0:St/0);for(ct=new T(St),lt=ct.c=[],Z=R.e-v.e,St=A+Z+1,O||(O=oi,Z=Je(R.e/zt)-Je(v.e/zt),St=St/zt|0),F=0;tt[F]==(g[F]||0);F++);if(tt[F]>(g[F]||0)&&Z--,St<0)lt.push(1),j=!0;else{for(Rt=g.length,gt=tt.length,F=0,St+=2,J=$e(O/(tt[0]+1)),J>1&&(tt=x(tt,J,O),g=x(g,J,O),gt=tt.length,Rt=g.length),Mt=gt,rt=g.slice(0,gt),ft=rt.length;ft<gt;rt[ft++]=0);Lt=tt.slice(),Lt=[0].concat(Lt),yt=tt[0],tt[1]>=O/2&&yt++;do{if(J=0,G=w(tt,rt,gt,ft),G<0){if(Ot=rt[0],gt!=ft&&(Ot=Ot*O+(rt[1]||0)),J=$e(Ot/yt),J>1)for(J>=O&&(J=O-1),q=x(tt,J,O),Y=q.length,ft=rt.length;w(q,rt,Y,ft)==1;)J--,P(q,gt<Y?Lt:tt,Y,O),Y=q.length,G=1;else J==0&&(G=J=1),q=tt.slice(),Y=q.length;if(Y<ft&&(q=[0].concat(q)),P(rt,q,ft,O),ft=rt.length,G==-1)for(;w(tt,rt,gt,ft)<1;)J++,P(rt,gt<ft?Lt:tt,ft,O),ft=rt.length}else G===0&&(J++,rt=[0]);lt[F++]=J,rt[0]?rt[ft++]=g[Mt]||0:(rt=[g[Mt]],ft=1)}while((Mt++<Rt||rt[0]!=null)&&St--);j=rt[0]!=null,lt[0]||lt.splice(0,1)}if(O==oi){for(F=1,St=lt[0];St>=10;St/=10,F++);Q(ct,A+(ct.e=F+Z*zt-1)+1,c,j)}else ct.e=Z,ct.r=+j;return ct}}();function H(x,w,P,R){var v,A,c,O,G;if(P==null?P=h:ne(P,0,8),!x.c)return x.toString();if(v=x.c[0],c=x.e,w==null)G=Xe(x.c),G=R==1||R==2&&(c<=p||c>=_)?vo(G,c):Oi(G,c,"0");else if(x=Q(new T(x),w,P),A=x.e,G=Xe(x.c),O=G.length,R==1||R==2&&(w<=A||A<=p)){for(;O<w;G+="0",O++);G=vo(G,A)}else if(w-=c,G=Oi(G,A,"0"),A+1>O){if(--w>0)for(G+=".";w--;G+="0");}else if(w+=A-O,w>0)for(A+1==O&&(G+=".");w--;G+="0");return x.s<0&&v?"-"+G:G}function $(x,w){for(var P,R,v=1,A=new T(x[0]);v<x.length;v++)R=new T(x[v]),(!R.s||(P=dn(A,R))===w||P===0&&A.s===w)&&(A=R);return A}function B(x,w,P){for(var R=1,v=w.length;!w[--v];w.pop());for(v=w[0];v>=10;v/=10,R++);return(P=R+P*zt-1)>y?x.c=x.e=null:P<E?x.c=[x.e=0]:(x.e=P,x.c=w),x}f=function(){var x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,P=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(A,c,O,G){var Z,F=O?c:c.replace(v,"");if(R.test(F))A.s=isNaN(F)?null:F<0?-1:1;else{if(!O&&(F=F.replace(x,function(j,J,q){return Z=(q=q.toLowerCase())=="x"?16:q=="b"?2:8,!G||G==Z?J:j}),G&&(Z=G,F=F.replace(w,"$1").replace(P,"0.$1")),c!=F))return new T(F,Z);if(T.DEBUG)throw Error(Ae+"Not a"+(G?" base "+G:"")+" number: "+c);A.s=null}A.c=A.e=null}}();function Q(x,w,P,R){var v,A,c,O,G,Z,F,j=x.c,J=_s;if(j){t:{for(v=1,O=j[0];O>=10;O/=10,v++);if(A=w-v,A<0)A+=zt,c=w,G=j[Z=0],F=$e(G/J[v-c-1]%10);else if(Z=ps((A+1)/zt),Z>=j.length)if(R){for(;j.length<=Z;j.push(0));G=F=0,v=1,A%=zt,c=A-zt+1}else break t;else{for(G=O=j[Z],v=1;O>=10;O/=10,v++);A%=zt,c=A-zt+v,F=c<0?0:$e(G/J[v-c-1]%10)}if(R=R||w<0||j[Z+1]!=null||(c<0?G:G%J[v-c-1]),R=P<4?(F||R)&&(P==0||P==(x.s<0?3:2)):F>5||F==5&&(P==4||R||P==6&&(A>0?c>0?G/J[v-c]:0:j[Z-1])%10&1||P==(x.s<0?8:7)),w<1||!j[0])return j.length=0,R?(w-=x.e+1,j[0]=J[(zt-w%zt)%zt],x.e=-w||0):j[0]=x.e=0,x;if(A==0?(j.length=Z,O=1,Z--):(j.length=Z+1,O=J[zt-A],j[Z]=c>0?$e(G/J[v-c]%J[c])*O:0),R)for(;;)if(Z==0){for(A=1,c=j[0];c>=10;c/=10,A++);for(c=j[0]+=O,O=1;c>=10;c/=10,O++);A!=O&&(x.e++,j[0]==oi&&(j[0]=1));break}else{if(j[Z]+=O,j[Z]!=oi)break;j[Z--]=0,O=1}for(A=j.length;j[--A]===0;j.pop());}x.e>y?x.c=x.e=null:x.e<E&&(x.c=[x.e=0])}return x}function X(x){var w,P=x.e;return P===null?x.toString():(w=Xe(x.c),w=P<=p||P>=_?vo(w,P):Oi(w,P,"0"),x.s<0?"-"+w:w)}return i.absoluteValue=i.abs=function(){var x=new T(this);return x.s<0&&(x.s=1),x},i.comparedTo=function(x,w){return dn(this,new T(x,w))},i.decimalPlaces=i.dp=function(x,w){var P,R,v,A=this;if(x!=null)return ne(x,0,Re),w==null?w=h:ne(w,0,8),Q(new T(A),x+A.e+1,w);if(!(P=A.c))return null;if(R=((v=P.length-1)-Je(this.e/zt))*zt,v=P[v])for(;v%10==0;v/=10,R--);return R<0&&(R=0),R},i.dividedBy=i.div=function(x,w){return u(this,new T(x,w),s,h)},i.dividedToIntegerBy=i.idiv=function(x,w){return u(this,new T(x,w),0,1)},i.exponentiatedBy=i.pow=function(x,w){var P,R,v,A,c,O,G,Z,F,j=this;if(x=new T(x),x.c&&!x.isInteger())throw Error(Ae+"Exponent not an integer: "+X(x));if(w!=null&&(w=new T(w)),O=x.e>14,!j.c||!j.c[0]||j.c[0]==1&&!j.e&&j.c.length==1||!x.c||!x.c[0])return F=new T(Math.pow(+X(j),O?x.s*(2-go(x)):+X(x))),w?F.mod(w):F;if(G=x.s<0,w){if(w.c?!w.c[0]:!w.s)return new T(NaN);R=!G&&j.isInteger()&&w.isInteger(),R&&(j=j.mod(w))}else{if(x.e>9&&(j.e>0||j.e<-1||(j.e==0?j.c[0]>1||O&&j.c[1]>=24e7:j.c[0]<8e13||O&&j.c[0]<=9999975e7)))return A=j.s<0&&go(x)?-0:0,j.e>-1&&(A=1/A),new T(G?1/A:A);D&&(A=ps(D/zt+2))}for(O?(P=new T(.5),G&&(x.s=1),Z=go(x)):(v=Math.abs(+X(x)),Z=v%2),F=new T(n);;){if(Z){if(F=F.times(j),!F.c)break;A?F.c.length>A&&(F.c.length=A):R&&(F=F.mod(w))}if(v){if(v=$e(v/2),v===0)break;Z=v%2}else if(x=x.times(P),Q(x,x.e+1,1),x.e>14)Z=go(x);else{if(v=+X(x),v===0)break;Z=v%2}j=j.times(j),A?j.c&&j.c.length>A&&(j.c.length=A):R&&(j=j.mod(w))}return R?F:(G&&(F=n.div(F)),w?F.mod(w):A?Q(F,D,h,c):F)},i.integerValue=function(x){var w=new T(this);return x==null?x=h:ne(x,0,8),Q(w,w.e+1,x)},i.isEqualTo=i.eq=function(x,w){return dn(this,new T(x,w))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(x,w){return dn(this,new T(x,w))>0},i.isGreaterThanOrEqualTo=i.gte=function(x,w){return(w=dn(this,new T(x,w)))===1||w===0},i.isInteger=function(){return!!this.c&&Je(this.e/zt)>this.c.length-2},i.isLessThan=i.lt=function(x,w){return dn(this,new T(x,w))<0},i.isLessThanOrEqualTo=i.lte=function(x,w){return(w=dn(this,new T(x,w)))===-1||w===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(x,w){var P,R,v,A,c=this,O=c.s;if(x=new T(x,w),w=x.s,!O||!w)return new T(NaN);if(O!=w)return x.s=-w,c.plus(x);var G=c.e/zt,Z=x.e/zt,F=c.c,j=x.c;if(!G||!Z){if(!F||!j)return F?(x.s=-w,x):new T(j?c:NaN);if(!F[0]||!j[0])return j[0]?(x.s=-w,x):new T(F[0]?c:h==3?-0:0)}if(G=Je(G),Z=Je(Z),F=F.slice(),O=G-Z){for((A=O<0)?(O=-O,v=F):(Z=G,v=j),v.reverse(),w=O;w--;v.push(0));v.reverse()}else for(R=(A=(O=F.length)<(w=j.length))?O:w,O=w=0;w<R;w++)if(F[w]!=j[w]){A=F[w]<j[w];break}if(A&&(v=F,F=j,j=v,x.s=-x.s),w=(R=j.length)-(P=F.length),w>0)for(;w--;F[P++]=0);for(w=oi-1;R>O;){if(F[--R]<j[R]){for(P=R;P&&!F[--P];F[P]=w);--F[P],F[R]+=oi}F[R]-=j[R]}for(;F[0]==0;F.splice(0,1),--Z);return F[0]?B(x,F,Z):(x.s=h==3?-1:1,x.c=[x.e=0],x)},i.modulo=i.mod=function(x,w){var P,R,v=this;return x=new T(x,w),!v.c||!x.s||x.c&&!x.c[0]?new T(NaN):!x.c||v.c&&!v.c[0]?new T(v):(k==9?(R=x.s,x.s=1,P=u(v,x,0,3),x.s=R,P.s*=R):P=u(v,x,0,k),x=v.minus(P.times(x)),!x.c[0]&&k==1&&(x.s=v.s),x)},i.multipliedBy=i.times=function(x,w){var P,R,v,A,c,O,G,Z,F,j,J,q,Y,ct,lt,rt=this,ft=rt.c,Ot=(x=new T(x,w)).c;if(!ft||!Ot||!ft[0]||!Ot[0])return!rt.s||!x.s||ft&&!ft[0]&&!Ot||Ot&&!Ot[0]&&!ft?x.c=x.e=x.s=null:(x.s*=rt.s,!ft||!Ot?x.c=x.e=null:(x.c=[0],x.e=0)),x;for(R=Je(rt.e/zt)+Je(x.e/zt),x.s*=rt.s,G=ft.length,j=Ot.length,G<j&&(Y=ft,ft=Ot,Ot=Y,v=G,G=j,j=v),v=G+j,Y=[];v--;Y.push(0));for(ct=oi,lt=Hi,v=j;--v>=0;){for(P=0,J=Ot[v]%lt,q=Ot[v]/lt|0,c=G,A=v+c;A>v;)Z=ft[--c]%lt,F=ft[c]/lt|0,O=q*Z+F*J,Z=J*Z+O%lt*lt+Y[A]+P,P=(Z/ct|0)+(O/lt|0)+q*F,Y[A--]=Z%ct;Y[A]=P}return P?++R:Y.splice(0,1),B(x,Y,R)},i.negated=function(){var x=new T(this);return x.s=-x.s||null,x},i.plus=function(x,w){var P,R=this,v=R.s;if(x=new T(x,w),w=x.s,!v||!w)return new T(NaN);if(v!=w)return x.s=-w,R.minus(x);var A=R.e/zt,c=x.e/zt,O=R.c,G=x.c;if(!A||!c){if(!O||!G)return new T(v/0);if(!O[0]||!G[0])return G[0]?x:new T(O[0]?R:v*0)}if(A=Je(A),c=Je(c),O=O.slice(),v=A-c){for(v>0?(c=A,P=G):(v=-v,P=O),P.reverse();v--;P.push(0));P.reverse()}for(v=O.length,w=G.length,v-w<0&&(P=G,G=O,O=P,w=v),v=0;w;)v=(O[--w]=O[w]+G[w]+v)/oi|0,O[w]=oi===O[w]?0:O[w]%oi;return v&&(O=[v].concat(O),++c),B(x,O,c)},i.precision=i.sd=function(x,w){var P,R,v,A=this;if(x!=null&&x!==!!x)return ne(x,1,Re),w==null?w=h:ne(w,0,8),Q(new T(A),x,w);if(!(P=A.c))return null;if(v=P.length-1,R=v*zt+1,v=P[v]){for(;v%10==0;v/=10,R--);for(v=P[0];v>=10;v/=10,R++);}return x&&A.e+1>R&&(R=A.e+1),R},i.shiftedBy=function(x){return ne(x,-9007199254740991,La),this.times("1e"+x)},i.squareRoot=i.sqrt=function(){var x,w,P,R,v,A=this,c=A.c,O=A.s,G=A.e,Z=s+4,F=new T("0.5");if(O!==1||!c||!c[0])return new T(!O||O<0&&(!c||c[0])?NaN:c?A:1/0);if(O=Math.sqrt(+X(A)),O==0||O==1/0?(w=Xe(c),(w.length+G)%2==0&&(w+="0"),O=Math.sqrt(+w),G=Je((G+1)/2)-(G<0||G%2),O==1/0?w="5e"+G:(w=O.toExponential(),w=w.slice(0,w.indexOf("e")+1)+G),P=new T(w)):P=new T(O+""),P.c[0]){for(G=P.e,O=G+Z,O<3&&(O=0);;)if(v=P,P=F.times(v.plus(u(A,v,Z,1))),Xe(v.c).slice(0,O)===(w=Xe(P.c)).slice(0,O))if(P.e<G&&--O,w=w.slice(O-3,O+1),w=="9999"||!R&&w=="4999"){if(!R&&(Q(v,v.e+s+2,0),v.times(v).eq(A))){P=v;break}Z+=4,O+=4,R=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(Q(P,P.e+s+2,1),x=!P.times(P).eq(A));break}}return Q(P,P.e+s+1,h,x)},i.toExponential=function(x,w){return x!=null&&(ne(x,0,Re),x++),H(this,x,w,1)},i.toFixed=function(x,w){return x!=null&&(ne(x,0,Re),x=x+this.e+1),H(this,x,w)},i.toFormat=function(x,w,P){var R,v=this;if(P==null)x!=null&&w&&typeof w=="object"?(P=w,w=null):x&&typeof x=="object"?(P=x,x=w=null):P=b;else if(typeof P!="object")throw Error(Ae+"Argument not an object: "+P);if(R=v.toFixed(x,w),v.c){var A,c=R.split("."),O=+P.groupSize,G=+P.secondaryGroupSize,Z=P.groupSeparator||"",F=c[0],j=c[1],J=v.s<0,q=J?F.slice(1):F,Y=q.length;if(G&&(A=O,O=G,G=A,Y-=A),O>0&&Y>0){for(A=Y%O||O,F=q.substr(0,A);A<Y;A+=O)F+=Z+q.substr(A,O);G>0&&(F+=Z+q.slice(A)),J&&(F="-"+F)}R=j?F+(P.decimalSeparator||"")+((G=+P.fractionGroupSize)?j.replace(new RegExp("\\d{"+G+"}\\B","g"),"$&"+(P.fractionGroupSeparator||"")):j):F}return(P.prefix||"")+R+(P.suffix||"")},i.toFraction=function(x){var w,P,R,v,A,c,O,G,Z,F,j,J,q=this,Y=q.c;if(x!=null&&(O=new T(x),!O.isInteger()&&(O.c||O.s!==1)||O.lt(n)))throw Error(Ae+"Argument "+(O.isInteger()?"out of range: ":"not an integer: ")+X(O));if(!Y)return new T(q);for(w=new T(n),Z=P=new T(n),R=G=new T(n),J=Xe(Y),A=w.e=J.length-q.e-1,w.c[0]=_s[(c=A%zt)<0?zt+c:c],x=!x||O.comparedTo(w)>0?A>0?w:Z:O,c=y,y=1/0,O=new T(J),G.c[0]=0;F=u(O,w,0,1),v=P.plus(F.times(R)),v.comparedTo(x)!=1;)P=R,R=v,Z=G.plus(F.times(v=Z)),G=v,w=O.minus(F.times(v=w)),O=v;return v=u(x.minus(P),R,0,1),G=G.plus(v.times(Z)),P=P.plus(v.times(R)),G.s=Z.s=q.s,A=A*2,j=u(Z,R,A,h).minus(q).abs().comparedTo(u(G,P,A,h).minus(q).abs())<1?[Z,R]:[G,P],y=c,j},i.toNumber=function(){return+X(this)},i.toPrecision=function(x,w){return x!=null&&ne(x,1,Re),H(this,x,w,2)},i.toString=function(x){var w,P=this,R=P.s,v=P.e;return v===null?R?(w="Infinity",R<0&&(w="-"+w)):w="NaN":(x==null?w=v<=p||v>=_?vo(Xe(P.c),v):Oi(Xe(P.c),v,"0"):x===10&&z?(P=Q(new T(P),s+v+1,h),w=Oi(Xe(P.c),P.e,"0")):(ne(x,2,S.length,"Base"),w=o(Oi(Xe(P.c),v,"0"),10,x,R,!0)),R<0&&P.c[0]&&(w="-"+w)),w},i.valueOf=i.toJSON=function(){return X(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,a!=null&&T.set(a),T}function Je(a){var u=a|0;return a>0||a===u?u:u-1}function Xe(a){for(var u,o,f=1,i=a.length,n=a[0]+"";f<i;){for(u=a[f++]+"",o=zt-u.length;o--;u="0"+u);n+=u}for(i=n.length;n.charCodeAt(--i)===48;);return n.slice(0,i+1||1)}function dn(a,u){var o,f,i=a.c,n=u.c,s=a.s,h=u.s,p=a.e,_=u.e;if(!s||!h)return null;if(o=i&&!i[0],f=n&&!n[0],o||f)return o?f?0:-h:s;if(s!=h)return s;if(o=s<0,f=p==_,!i||!n)return f?0:!i^o?1:-1;if(!f)return p>_^o?1:-1;for(h=(p=i.length)<(_=n.length)?p:_,s=0;s<h;s++)if(i[s]!=n[s])return i[s]>n[s]^o?1:-1;return p==_?0:p>_^o?1:-1}function ne(a,u,o,f){if(a<u||a>o||a!==$e(a))throw Error(Ae+(f||"Argument")+(typeof a=="number"?a<u||a>o?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function go(a){var u=a.c.length-1;return Je(a.e/zt)==u&&a.c[u]%2!=0}function vo(a,u){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(u<0?"e":"e+")+u}function Oi(a,u,o){var f,i;if(u<0){for(i=o+".";++u;i+=o);a=i+a}else if(f=a.length,++u>f){for(i=o,u-=f;--u;i+=o);a+=i}else u<f&&(a=a.slice(0,u)+"."+a.slice(u));return a}var _i=ul(),Su=class{constructor(a){Pt(this,"key");Pt(this,"left",null);Pt(this,"right",null);this.key=a}},vr=class extends Su{constructor(a){super(a)}},Mu=class{constructor(){Pt(this,"size",0);Pt(this,"modificationCount",0);Pt(this,"splayCount",0)}splay(a){const u=this.root;if(u==null)return this.compare(a,a),-1;let o=null,f=null,i=null,n=null,s=u;const h=this.compare;let p;for(;;)if(p=h(s.key,a),p>0){let _=s.left;if(_==null||(p=h(_.key,a),p>0&&(s.left=_.right,_.right=s,s=_,_=s.left,_==null)))break;o==null?f=s:o.left=s,o=s,s=_}else if(p<0){let _=s.right;if(_==null||(p=h(_.key,a),p<0&&(s.right=_.left,_.left=s,s=_,_=s.right,_==null)))break;i==null?n=s:i.right=s,i=s,s=_}else break;return i!=null&&(i.right=s.left,s.left=n),o!=null&&(o.left=s.right,s.right=f),this.root!==s&&(this.root=s,this.splayCount++),p}splayMin(a){let u=a,o=u.left;for(;o!=null;){const f=o;u.left=f.right,f.right=u,u=f,o=u.left}return u}splayMax(a){let u=a,o=u.right;for(;o!=null;){const f=o;u.right=f.left,f.left=u,u=f,o=u.right}return u}_delete(a){if(this.root==null||this.splay(a)!=0)return null;let o=this.root;const f=o,i=o.left;if(this.size--,i==null)this.root=o.right;else{const n=o.right;o=this.splayMax(i),o.right=n,this.root=o}return this.modificationCount++,f}addNewRoot(a,u){this.size++,this.modificationCount++;const o=this.root;if(o==null){this.root=a;return}u<0?(a.left=o,a.right=o.right,o.right=null):(a.right=o,a.left=o.left,o.left=null),this.root=a}_first(){const a=this.root;return a==null?null:(this.root=this.splayMin(a),this.root)}_last(){const a=this.root;return a==null?null:(this.root=this.splayMax(a),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(a){return this.validKey(a)&&this.splay(a)==0}defaultCompare(){return(a,u)=>a<u?-1:a>u?1:0}wrap(){return{getRoot:()=>this.root,setRoot:a=>{this.root=a},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:a=>{this.splayCount=a},splay:a=>this.splay(a),has:a=>this.has(a)}}},Sa,Ma,zo=class xr extends Mu{constructor(o,f){super();Pt(this,"root",null);Pt(this,"compare");Pt(this,"validKey");Pt(this,Sa,"[object Set]");this.compare=o??this.defaultCompare(),this.validKey=f??(i=>i!=null&&i!=null)}delete(o){return this.validKey(o)?this._delete(o)!=null:!1}deleteAll(o){for(const f of o)this.delete(f)}forEach(o){const f=this[Symbol.iterator]();let i;for(;i=f.next(),!i.done;)o(i.value,i.value,this)}add(o){const f=this.splay(o);return f!=0&&this.addNewRoot(new vr(o),f),this}addAndReturn(o){const f=this.splay(o);return f!=0&&this.addNewRoot(new vr(o),f),this.root.key}addAll(o){for(const f of o)this.add(f)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(o){if(o==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(o)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let n=i.right;for(;n!=null;)i=n,n=i.right;return i.key}firstAfter(o){if(o==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(o)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let n=i.left;for(;n!=null;)i=n,n=i.left;return i.key}retainAll(o){const f=new xr(this.compare,this.validKey),i=this.modificationCount;for(const n of o){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(n)&&this.splay(n)==0&&f.add(this.root.key)}f.size!=this.size&&(this.root=f.root,this.size=f.size,this.modificationCount++)}lookup(o){return!this.validKey(o)||this.splay(o)!=0?null:this.root.key}intersection(o){const f=new xr(this.compare,this.validKey);for(const i of this)o.has(i)&&f.add(i);return f}difference(o){const f=new xr(this.compare,this.validKey);for(const i of this)o.has(i)||f.add(i);return f}union(o){const f=this.clone();return f.addAll(o),f}clone(){const o=new xr(this.compare,this.validKey);return o.size=this.size,o.root=this.copyNode(this.root),o}copyNode(o){if(o==null)return null;function f(n,s){let h,p;do{if(h=n.left,p=n.right,h!=null){const _=new vr(h.key);s.left=_,f(h,_)}if(p!=null){const _=new vr(p.key);s.right=_,n=p,s=_}}while(p!=null)}const i=new vr(o.key);return f(o,i),i}toSet(){return this.clone()}entries(){return new Ou(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Ma=Symbol.iterator,Sa=Symbol.toStringTag,Ma)](){return new Cu(this.wrap())}},cl=class{constructor(a){Pt(this,"tree");Pt(this,"path",new Array);Pt(this,"modificationCount",null);Pt(this,"splayCount");this.tree=a,this.splayCount=a.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const a=this.path[this.path.length-1];return this.getValue(a)}rebuildPath(a){this.path.splice(0,this.path.length),this.tree.splay(a),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(a){for(;a!=null;)this.path.push(a),a=a.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let o=this.tree.getRoot();for(;o!=null;)this.path.push(o),o=o.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let a=this.path[this.path.length-1],u=a.right;if(u!=null){for(;u!=null;)this.path.push(u),u=u.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===a;)a=this.path.pop();return this.path.length>0}},Cu=class extends cl{getValue(a){return a.key}},Ou=class extends cl{getValue(a){return[a.key,a.key]}},fl=a=>()=>a,xs=a=>{const u=a?(o,f)=>f.minus(o).abs().isLessThanOrEqualTo(a):fl(!1);return(o,f)=>u(o,f)?0:o.comparedTo(f)};function Au(a){const u=a?(o,f,i,n,s)=>o.exponentiatedBy(2).isLessThanOrEqualTo(n.minus(f).exponentiatedBy(2).plus(s.minus(i).exponentiatedBy(2)).times(a)):fl(!1);return(o,f,i)=>{const n=o.x,s=o.y,h=i.x,p=i.y,_=s.minus(p).times(f.x.minus(h)).minus(n.minus(h).times(f.y.minus(p)));return u(_,n,s,h,p)?0:_.comparedTo(0)}}var Iu=a=>a,Du=a=>{if(a){const u=new zo(xs(a)),o=new zo(xs(a)),f=(n,s)=>s.addAndReturn(n),i=n=>({x:f(n.x,u),y:f(n.y,o)});return i({x:new _i(0),y:new _i(0)}),i}return Iu},Es=a=>({set:u=>{Ii=Es(u)},reset:()=>Es(a),compare:xs(a),snap:Du(a),orient:Au(a)}),Ii=Es(),yr=(a,u)=>a.ll.x.isLessThanOrEqualTo(u.x)&&u.x.isLessThanOrEqualTo(a.ur.x)&&a.ll.y.isLessThanOrEqualTo(u.y)&&u.y.isLessThanOrEqualTo(a.ur.y),ks=(a,u)=>{if(u.ur.x.isLessThan(a.ll.x)||a.ur.x.isLessThan(u.ll.x)||u.ur.y.isLessThan(a.ll.y)||a.ur.y.isLessThan(u.ll.y))return null;const o=a.ll.x.isLessThan(u.ll.x)?u.ll.x:a.ll.x,f=a.ur.x.isLessThan(u.ur.x)?a.ur.x:u.ur.x,i=a.ll.y.isLessThan(u.ll.y)?u.ll.y:a.ll.y,n=a.ur.y.isLessThan(u.ur.y)?a.ur.y:u.ur.y;return{ll:{x:o,y:i},ur:{x:f,y:n}}},xo=(a,u)=>a.x.times(u.y).minus(a.y.times(u.x)),dl=(a,u)=>a.x.times(u.x).plus(a.y.times(u.y)),Ro=a=>dl(a,a).sqrt(),zu=(a,u,o)=>{const f={x:u.x.minus(a.x),y:u.y.minus(a.y)},i={x:o.x.minus(a.x),y:o.y.minus(a.y)};return xo(i,f).div(Ro(i)).div(Ro(f))},Ru=(a,u,o)=>{const f={x:u.x.minus(a.x),y:u.y.minus(a.y)},i={x:o.x.minus(a.x),y:o.y.minus(a.y)};return dl(i,f).div(Ro(i)).div(Ro(f))},xa=(a,u,o)=>u.y.isZero()?null:{x:a.x.plus(u.x.div(u.y).times(o.minus(a.y))),y:o},Ea=(a,u,o)=>u.x.isZero()?null:{x:o,y:a.y.plus(u.y.div(u.x).times(o.minus(a.x)))},Bu=(a,u,o,f)=>{if(u.x.isZero())return Ea(o,f,a.x);if(f.x.isZero())return Ea(a,u,o.x);if(u.y.isZero())return xa(o,f,a.y);if(f.y.isZero())return xa(a,u,o.y);const i=xo(u,f);if(i.isZero())return null;const n={x:o.x.minus(a.x),y:o.y.minus(a.y)},s=xo(n,u).div(i),h=xo(n,f).div(i),p=a.x.plus(h.times(u.x)),_=o.x.plus(s.times(f.x)),E=a.y.plus(h.times(u.y)),y=o.y.plus(s.times(f.y)),M=p.plus(_).div(2),k=E.plus(y).div(2);return{x:M,y:k}},pi=class pl{constructor(u,o){Pt(this,"point");Pt(this,"isLeft");Pt(this,"segment");Pt(this,"otherSE");Pt(this,"consumedBy");u.events===void 0?u.events=[this]:u.events.push(this),this.point=u,this.isLeft=o}static compare(u,o){const f=pl.comparePoints(u.point,o.point);return f!==0?f:(u.point!==o.point&&u.link(o),u.isLeft!==o.isLeft?u.isLeft?1:-1:Bo.compare(u.segment,o.segment))}static comparePoints(u,o){return u.x.isLessThan(o.x)?-1:u.x.isGreaterThan(o.x)?1:u.y.isLessThan(o.y)?-1:u.y.isGreaterThan(o.y)?1:0}link(u){if(u.point===this.point)throw new Error("Tried to link already linked events");const o=u.point.events;for(let f=0,i=o.length;f<i;f++){const n=o[f];this.point.events.push(n),n.point=this.point}this.checkForConsuming()}checkForConsuming(){const u=this.point.events.length;for(let o=0;o<u;o++){const f=this.point.events[o];if(f.segment.consumedBy===void 0)for(let i=o+1;i<u;i++){const n=this.point.events[i];n.consumedBy===void 0&&f.otherSE.point.events===n.otherSE.point.events&&f.segment.consume(n.segment)}}}getAvailableLinkedEvents(){const u=[];for(let o=0,f=this.point.events.length;o<f;o++){const i=this.point.events[o];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&u.push(i)}return u}getLeftmostComparator(u){const o=new Map,f=i=>{const n=i.otherSE;o.set(i,{sine:zu(this.point,u.point,n.point),cosine:Ru(this.point,u.point,n.point)})};return(i,n)=>{o.has(i)||f(i),o.has(n)||f(n);const{sine:s,cosine:h}=o.get(i),{sine:p,cosine:_}=o.get(n);return s.isGreaterThanOrEqualTo(0)&&p.isGreaterThanOrEqualTo(0)?h.isLessThan(_)?1:h.isGreaterThan(_)?-1:0:s.isLessThan(0)&&p.isLessThan(0)?h.isLessThan(_)?-1:h.isGreaterThan(_)?1:0:p.isLessThan(s)?-1:p.isGreaterThan(s)?1:0}}},Nu=class Ts{constructor(u){Pt(this,"events");Pt(this,"poly");Pt(this,"_isExteriorRing");Pt(this,"_enclosingRing");this.events=u;for(let o=0,f=u.length;o<f;o++)u[o].segment.ringOut=this;this.poly=null}static factory(u){const o=[];for(let f=0,i=u.length;f<i;f++){const n=u[f];if(!n.isInResult()||n.ringOut)continue;let s=null,h=n.leftSE,p=n.rightSE;const _=[h],E=h.point,y=[];for(;s=h,h=p,_.push(h),h.point!==E;)for(;;){const M=h.getAvailableLinkedEvents();if(M.length===0){const b=_[0].point,S=_[_.length-1].point;throw new Error(`Unable to complete output ring starting at [${b.x}, ${b.y}]. Last matching segment found ends at [${S.x}, ${S.y}].`)}if(M.length===1){p=M[0].otherSE;break}let k=null;for(let b=0,S=y.length;b<S;b++)if(y[b].point===h.point){k=b;break}if(k!==null){const b=y.splice(k)[0],S=_.splice(b.index);S.unshift(S[0].otherSE),o.push(new Ts(S.reverse()));continue}y.push({index:_.length,point:h.point});const D=h.getLeftmostComparator(s);p=M.sort(D)[0].otherSE;break}o.push(new Ts(_))}return o}getGeom(){let u=this.events[0].point;const o=[u];for(let _=1,E=this.events.length-1;_<E;_++){const y=this.events[_].point,M=this.events[_+1].point;Ii.orient(y,u,M)!==0&&(o.push(y),u=y)}if(o.length===1)return null;const f=o[0],i=o[1];Ii.orient(f,u,i)===0&&o.shift(),o.push(o[0]);const n=this.isExteriorRing()?1:-1,s=this.isExteriorRing()?0:o.length-1,h=this.isExteriorRing()?o.length:-1,p=[];for(let _=s;_!=h;_+=n)p.push([o[_].x.toNumber(),o[_].y.toNumber()]);return p}isExteriorRing(){if(this._isExteriorRing===void 0){const u=this.enclosingRing();this._isExteriorRing=u?!u.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,n;let u=this.events[0];for(let s=1,h=this.events.length;s<h;s++){const p=this.events[s];pi.compare(u,p)>0&&(u=p)}let o=u.segment.prevInResult(),f=o?o.prevInResult():null;for(;;){if(!o)return null;if(!f)return o.ringOut;if(f.ringOut!==o.ringOut)return((i=f.ringOut)==null?void 0:i.enclosingRing())!==o.ringOut?o.ringOut:(n=o.ringOut)==null?void 0:n.enclosingRing();o=f.prevInResult(),f=o?o.prevInResult():null}}},ka=class{constructor(a){Pt(this,"exteriorRing");Pt(this,"interiorRings");this.exteriorRing=a,a.poly=this,this.interiorRings=[]}addInterior(a){this.interiorRings.push(a),a.poly=this}getGeom(){const a=this.exteriorRing.getGeom();if(a===null)return null;const u=[a];for(let o=0,f=this.interiorRings.length;o<f;o++){const i=this.interiorRings[o].getGeom();i!==null&&u.push(i)}return u}},Zu=class{constructor(a){Pt(this,"rings");Pt(this,"polys");this.rings=a,this.polys=this._composePolys(a)}getGeom(){const a=[];for(let u=0,o=this.polys.length;u<o;u++){const f=this.polys[u].getGeom();f!==null&&a.push(f)}return a}_composePolys(a){var o;const u=[];for(let f=0,i=a.length;f<i;f++){const n=a[f];if(!n.poly)if(n.isExteriorRing())u.push(new ka(n));else{const s=n.enclosingRing();s!=null&&s.poly||u.push(new ka(s)),(o=s==null?void 0:s.poly)==null||o.addInterior(n)}}return u}},Fu=class{constructor(a,u=Bo.compare){Pt(this,"queue");Pt(this,"tree");Pt(this,"segments");this.queue=a,this.tree=new zo(u),this.segments=[]}process(a){const u=a.segment,o=[];if(a.consumedBy)return a.isLeft?this.queue.delete(a.otherSE):this.tree.delete(u),o;a.isLeft&&this.tree.add(u);let f=u,i=u;do f=this.tree.lastBefore(f);while(f!=null&&f.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(a.isLeft){let n=null;if(f){const h=f.getIntersection(u);if(h!==null&&(u.isAnEndpoint(h)||(n=h),!f.isAnEndpoint(h))){const p=this._splitSafely(f,h);for(let _=0,E=p.length;_<E;_++)o.push(p[_])}}let s=null;if(i){const h=i.getIntersection(u);if(h!==null&&(u.isAnEndpoint(h)||(s=h),!i.isAnEndpoint(h))){const p=this._splitSafely(i,h);for(let _=0,E=p.length;_<E;_++)o.push(p[_])}}if(n!==null||s!==null){let h=null;n===null?h=s:s===null?h=n:h=pi.comparePoints(n,s)<=0?n:s,this.queue.delete(u.rightSE),o.push(u.rightSE);const p=u.split(h);for(let _=0,E=p.length;_<E;_++)o.push(p[_])}o.length>0?(this.tree.delete(u),o.push(a)):(this.segments.push(u),u.prev=f)}else{if(f&&i){const n=f.getIntersection(i);if(n!==null){if(!f.isAnEndpoint(n)){const s=this._splitSafely(f,n);for(let h=0,p=s.length;h<p;h++)o.push(s[h])}if(!i.isAnEndpoint(n)){const s=this._splitSafely(i,n);for(let h=0,p=s.length;h<p;h++)o.push(s[h])}}}this.tree.delete(u)}return o}_splitSafely(a,u){this.tree.delete(a);const o=a.rightSE;this.queue.delete(o);const f=a.split(u);return f.push(o),a.consumedBy===void 0&&this.tree.add(a),f}},Uu=class{constructor(){Pt(this,"type");Pt(this,"numMultiPolys")}run(a,u,o){Er.type=a;const f=[new Pa(u,!0)];for(let _=0,E=o.length;_<E;_++)f.push(new Pa(o[_],!1));if(Er.numMultiPolys=f.length,Er.type==="difference"){const _=f[0];let E=1;for(;E<f.length;)ks(f[E].bbox,_.bbox)!==null?E++:f.splice(E,1)}if(Er.type==="intersection")for(let _=0,E=f.length;_<E;_++){const y=f[_];for(let M=_+1,k=f.length;M<k;M++)if(ks(y.bbox,f[M].bbox)===null)return[]}const i=new zo(pi.compare);for(let _=0,E=f.length;_<E;_++){const y=f[_].getSweepEvents();for(let M=0,k=y.length;M<k;M++)i.add(y[M])}const n=new Fu(i);let s=null;for(i.size!=0&&(s=i.first(),i.delete(s));s;){const _=n.process(s);for(let E=0,y=_.length;E<y;E++){const M=_[E];M.consumedBy===void 0&&i.add(M)}i.size!=0?(s=i.first(),i.delete(s)):s=null}Ii.reset();const h=Nu.factory(n.segments);return new Zu(h).getGeom()}},Er=new Uu,Ps=Er,Gu=0,Bo=class Eo{constructor(u,o,f,i){Pt(this,"id");Pt(this,"leftSE");Pt(this,"rightSE");Pt(this,"rings");Pt(this,"windings");Pt(this,"ringOut");Pt(this,"consumedBy");Pt(this,"prev");Pt(this,"_prevInResult");Pt(this,"_beforeState");Pt(this,"_afterState");Pt(this,"_isInResult");this.id=++Gu,this.leftSE=u,u.segment=this,u.otherSE=o,this.rightSE=o,o.segment=this,o.otherSE=u,this.rings=f,this.windings=i}static compare(u,o){const f=u.leftSE.point.x,i=o.leftSE.point.x,n=u.rightSE.point.x,s=o.rightSE.point.x;if(s.isLessThan(f))return 1;if(n.isLessThan(i))return-1;const h=u.leftSE.point.y,p=o.leftSE.point.y,_=u.rightSE.point.y,E=o.rightSE.point.y;if(f.isLessThan(i)){if(p.isLessThan(h)&&p.isLessThan(_))return 1;if(p.isGreaterThan(h)&&p.isGreaterThan(_))return-1;const y=u.comparePoint(o.leftSE.point);if(y<0)return 1;if(y>0)return-1;const M=o.comparePoint(u.rightSE.point);return M!==0?M:-1}if(f.isGreaterThan(i)){if(h.isLessThan(p)&&h.isLessThan(E))return-1;if(h.isGreaterThan(p)&&h.isGreaterThan(E))return 1;const y=o.comparePoint(u.leftSE.point);if(y!==0)return y;const M=u.comparePoint(o.rightSE.point);return M<0?1:M>0?-1:1}if(h.isLessThan(p))return-1;if(h.isGreaterThan(p))return 1;if(n.isLessThan(s)){const y=o.comparePoint(u.rightSE.point);if(y!==0)return y}if(n.isGreaterThan(s)){const y=u.comparePoint(o.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!n.eq(s)){const y=_.minus(h),M=n.minus(f),k=E.minus(p),D=s.minus(i);if(y.isGreaterThan(M)&&k.isLessThan(D))return 1;if(y.isLessThan(M)&&k.isGreaterThan(D))return-1}return n.isGreaterThan(s)?1:n.isLessThan(s)||_.isLessThan(E)?-1:_.isGreaterThan(E)?1:u.id<o.id?-1:u.id>o.id?1:0}static fromRing(u,o,f){let i,n,s;const h=pi.comparePoints(u,o);if(h<0)i=u,n=o,s=1;else if(h>0)i=o,n=u,s=-1;else throw new Error(`Tried to create degenerate segment at [${u.x}, ${u.y}]`);const p=new pi(i,!0),_=new pi(n,!1);return new Eo(p,_,[f],[s])}replaceRightSE(u){this.rightSE=u,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const u=this.leftSE.point.y,o=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:u.isLessThan(o)?u:o},ur:{x:this.rightSE.point.x,y:u.isGreaterThan(o)?u:o}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(u){return u.x.eq(this.leftSE.point.x)&&u.y.eq(this.leftSE.point.y)||u.x.eq(this.rightSE.point.x)&&u.y.eq(this.rightSE.point.y)}comparePoint(u){return Ii.orient(this.leftSE.point,u,this.rightSE.point)}getIntersection(u){const o=this.bbox(),f=u.bbox(),i=ks(o,f);if(i===null)return null;const n=this.leftSE.point,s=this.rightSE.point,h=u.leftSE.point,p=u.rightSE.point,_=yr(o,h)&&this.comparePoint(h)===0,E=yr(f,n)&&u.comparePoint(n)===0,y=yr(o,p)&&this.comparePoint(p)===0,M=yr(f,s)&&u.comparePoint(s)===0;if(E&&_)return M&&!y?s:!M&&y?p:null;if(E)return y&&n.x.eq(p.x)&&n.y.eq(p.y)?null:n;if(_)return M&&s.x.eq(h.x)&&s.y.eq(h.y)?null:h;if(M&&y)return null;if(M)return s;if(y)return p;const k=Bu(n,this.vector(),h,u.vector());return k===null||!yr(i,k)?null:Ii.snap(k)}split(u){const o=[],f=u.events!==void 0,i=new pi(u,!0),n=new pi(u,!1),s=this.rightSE;this.replaceRightSE(n),o.push(n),o.push(i);const h=new Eo(i,s,this.rings.slice(),this.windings.slice());return pi.comparePoints(h.leftSE.point,h.rightSE.point)>0&&h.swapEvents(),pi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),f&&(i.checkForConsuming(),n.checkForConsuming()),o}swapEvents(){const u=this.rightSE;this.rightSE=this.leftSE,this.leftSE=u,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let o=0,f=this.windings.length;o<f;o++)this.windings[o]*=-1}consume(u){let o=this,f=u;for(;o.consumedBy;)o=o.consumedBy;for(;f.consumedBy;)f=f.consumedBy;const i=Eo.compare(o,f);if(i!==0){if(i>0){const n=o;o=f,f=n}if(o.prev===f){const n=o;o=f,f=n}for(let n=0,s=f.rings.length;n<s;n++){const h=f.rings[n],p=f.windings[n],_=o.rings.indexOf(h);_===-1?(o.rings.push(h),o.windings.push(p)):o.windings[_]+=p}f.rings=null,f.windings=null,f.consumedBy=o,f.leftSE.consumedBy=o.leftSE,f.rightSE.consumedBy=o.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const u=this.prev.consumedBy||this.prev;this._beforeState=u.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const u=this.beforeState();this._afterState={rings:u.rings.slice(0),windings:u.windings.slice(0),multiPolys:[]};const o=this._afterState.rings,f=this._afterState.windings,i=this._afterState.multiPolys;for(let h=0,p=this.rings.length;h<p;h++){const _=this.rings[h],E=this.windings[h],y=o.indexOf(_);y===-1?(o.push(_),f.push(E)):f[y]+=E}const n=[],s=[];for(let h=0,p=o.length;h<p;h++){if(f[h]===0)continue;const _=o[h],E=_.poly;if(s.indexOf(E)===-1)if(_.isExterior)n.push(E);else{s.indexOf(E)===-1&&s.push(E);const y=n.indexOf(_.poly);y!==-1&&n.splice(y,1)}}for(let h=0,p=n.length;h<p;h++){const _=n[h].multiPoly;i.indexOf(_)===-1&&i.push(_)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const u=this.beforeState().multiPolys,o=this.afterState().multiPolys;switch(Ps.type){case"union":{const f=u.length===0,i=o.length===0;this._isInResult=f!==i;break}case"intersection":{let f,i;u.length<o.length?(f=u.length,i=o.length):(f=o.length,i=u.length),this._isInResult=i===Ps.numMultiPolys&&f<i;break}case"xor":{const f=Math.abs(u.length-o.length);this._isInResult=f%2===1;break}case"difference":{const f=i=>i.length===1&&i[0].isSubject;this._isInResult=f(u)!==f(o);break}}return this._isInResult}},Ta=class{constructor(a,u,o){Pt(this,"poly");Pt(this,"isExterior");Pt(this,"segments");Pt(this,"bbox");if(!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=u,this.isExterior=o,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const f=Ii.snap({x:new _i(a[0][0]),y:new _i(a[0][1])});this.bbox={ll:{x:f.x,y:f.y},ur:{x:f.x,y:f.y}};let i=f;for(let n=1,s=a.length;n<s;n++){if(typeof a[n][0]!="number"||typeof a[n][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const h=Ii.snap({x:new _i(a[n][0]),y:new _i(a[n][1])});h.x.eq(i.x)&&h.y.eq(i.y)||(this.segments.push(Bo.fromRing(i,h,this)),h.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=h.x),h.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=h.y),h.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=h.x),h.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=h.y),i=h)}(!f.x.eq(i.x)||!f.y.eq(i.y))&&this.segments.push(Bo.fromRing(i,f,this))}getSweepEvents(){const a=[];for(let u=0,o=this.segments.length;u<o;u++){const f=this.segments[u];a.push(f.leftSE),a.push(f.rightSE)}return a}},Hu=class{constructor(a,u){Pt(this,"multiPoly");Pt(this,"exteriorRing");Pt(this,"interiorRings");Pt(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ta(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let o=1,f=a.length;o<f;o++){const i=new Ta(a[o],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=u}getSweepEvents(){const a=this.exteriorRing.getSweepEvents();for(let u=0,o=this.interiorRings.length;u<o;u++){const f=this.interiorRings[u].getSweepEvents();for(let i=0,n=f.length;i<n;i++)a.push(f[i])}return a}},Pa=class{constructor(a,u){Pt(this,"isSubject");Pt(this,"polys");Pt(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:new _i(Number.POSITIVE_INFINITY),y:new _i(Number.POSITIVE_INFINITY)},ur:{x:new _i(Number.NEGATIVE_INFINITY),y:new _i(Number.NEGATIVE_INFINITY)}};for(let o=0,f=a.length;o<f;o++){const i=new Hu(a[o],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=u}getSweepEvents(){const a=[];for(let u=0,o=this.polys.length;u<o;u++){const f=this.polys[u].getSweepEvents();for(let i=0,n=f.length;i<n;i++)a.push(f[i])}return a}},Wu=(a,...u)=>Ps.run("intersection",a,u);Ii.set;function qu(a,u={}){const o=[];if(Tu(a,i=>{o.push(i.coordinates)}),o.length<2)throw new Error("Must specify at least 2 geometries");const f=Wu(o[0],...o.slice(1));return f.length===0?null:f.length===1?Do(f[0],u.properties):hl(f,u.properties)}var Vu=Ji('<p class="svelte-1tmczmq">Draw a shape on the map.</p>'),ju=Ji('<p class="svelte-1tmczmq">Processing... Please wait.</p>'),Yu=Ji('<p class="svelte-1tmczmq">The selected area is too large. Please reduce the area.</p>'),Ku=Ji('<div class="svelte-1tmczmq"><!> <!> <!> <button class="svelte-1tmczmq">Fetch Data</button> <button class="svelte-1tmczmq">Clip Data</button> <button class="svelte-1tmczmq">Download Data</button></div>');function Xu(a,u){Ho(u,!1);const o=sl(),f=()=>fa(Io,"$clippedGeoJSON",o),i=()=>fa(Lo,"$osmGeoJSON",o);let n=Tr(u,"area",8),s=Tr(u,"latlngs",8),h=Tr(u,"selectedLayer",8);const p=8e6;let _=mn(!1),E=mn(!1);const y=P=>{const R=L.latLngBounds(P);return[R.getSouthWest(),R.getNorthEast()]},M=async()=>{if(!s()){alert("No area selected.");return}te(E,!0);try{const[P,R]=y(s()),v="https://overpass-api.de/api/interpreter",A=`
                [out:json];
                (
                    way["building"](${P.lat},${P.lng},${R.lat},${R.lng});
                    relation["building"](${P.lat},${P.lng},${R.lat},${R.lng});
                );
                out body;
                >;
                out skel qt;
            `,c=await fetch(v,{method:"POST",body:A,headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!c.ok){alert("Failed to fetch GeoJSON data.");return}const O=await c.json(),G=yu(O);Lo.set(G)}catch(P){console.error("Error fetching data:",P),alert("An error occurred while fetching data.")}finally{te(E,!1)}},k=()=>{let P;if(Lo.subscribe(R=>{P=R})(),!P||!s()){alert("No data to clip or no shape selected.");return}try{const R=[...s()];s().length>0&&(s()[0].lat!==s()[s().length-1].lat||s()[0].lng!==s()[s().length-1].lng)&&R.push(s()[0]);const v=Do([R.map(F=>[F.lng,F.lat])]),A=P.features.map(F=>{const j=F.geometry;if(!j||!j.coordinates||j.type!=="Polygon"&&j.type!=="MultiPolygon")return null;const J=wu(j.type,j.coordinates),q=xu([$i(J),v]);try{const Y=qu(q);if(Y&&Y.geometry)return{...F,geometry:Y.geometry}}catch(Y){console.warn("Error clipping feature:",F,"Error:",Y)}return null}).filter(Boolean);if(A.length===0){alert("No features were clipped. Ensure your area intersects the data.");return}const c={type:"FeatureCollection",features:A};Io.set(c);const[O,G]=y(s()),Z=[O.lng,O.lat,G.lng,G.lat]}catch(R){console.error("Error during clipping:",R),alert(`Error during clipping: ${R.message}`)}},D=async()=>{const P=f();if(!P){alert("No clipped data available. Clip data first.");return}te(E,!0);try{const R=new cu;R.file("buildings.geojson",JSON.stringify(P,null,2));const v=await b();if(v){const ct=await new Promise(lt=>v.toBlob(lt,"image/png"));R.file("map.png",ct)}const[A,c]=y(s()),G={bbox:[A.lng,A.lat,c.lng,c.lat]};R.file("config.json",JSON.stringify(G,null,2));const Z=[...s()];s().length>0&&(s()[0].lat!==s()[s().length-1].lat||s()[0].lng!==s()[s().length-1].lng)&&Z.push(s()[0]);const F=Do([Z.map(ct=>[ct.lng,ct.lat])]),j={type:"FeatureCollection",features:[$i(F)]};R.file("clipping-mask.geojson",JSON.stringify(j,null,2));const J=await R.generateAsync({type:"blob"}),q=URL.createObjectURL(J),Y=document.createElement("a");Y.href=q,Y.download="vantage-scene-setup.zip",Y.click(),URL.revokeObjectURL(q)}catch(R){console.error("Error during download:",R),alert("An error occurred during download.")}finally{te(E,!1)}},b=async()=>{if(!s()||!h())return null;const[P,R]=y(s()),v=256,A=17,c=(g,tt,et)=>{const U=Math.pow(2,et),N=Math.floor((tt+180)/360*U),K=Math.floor((1-Math.log(Math.tan(g*Math.PI/180)+1/Math.cos(g*Math.PI/180))/Math.PI)/2*U);return{x:N,y:K}},O=c(P.lat,P.lng,A),G=c(R.lat,R.lng,A),Z={x:Math.min(O.x,G.x),y:Math.min(O.y,G.y)},F={x:Math.max(O.x,G.x),y:Math.max(O.y,G.y)},j=F.x-Z.x+1,J=F.y-Z.y+1,q=document.createElement("canvas"),Y=q.getContext("2d");q.width=j*v,q.height=J*v;const ct=[];for(let g=Z.x;g<=F.x;g++)for(let tt=Z.y;tt<=F.y;tt++){const et=h().value.replace("{z}",A).replace("{x}",g).replace("{y}",tt);ct.push({url:et,x:g-Z.x,y:tt-Z.y})}(await Promise.all(ct.map(g=>fetch(g.url).then(tt=>{if(!tt.ok)throw new Error(`Failed to fetch tile: ${g.url}`);return tt.blob()}).then(tt=>createImageBitmap(tt)).then(tt=>({img:tt,x:g.x,y:g.y}))))).forEach(({img:g,x:tt,y:et})=>{const U=tt*v,N=et*v;Y.drawImage(g,U,N,v,v)});const rt=(g,tt,et)=>{const U=Math.pow(2,et)*v,N=(tt+180)/360*U,K=(1-Math.log(Math.tan(g*Math.PI/180)+1/Math.cos(g*Math.PI/180))/Math.PI)/2*U;return{x:N,y:K}},ft=rt(R.lat,P.lng,A),Ot=rt(P.lat,R.lng,A),Mt=ft.x-Z.x*v,Rt=ft.y-Z.y*v,yt=Ot.x-ft.x,gt=Ot.y-ft.y,Lt=document.createElement("canvas");return Lt.width=yt,Lt.height=gt,Lt.getContext("2d").drawImage(q,Mt,Rt,yt,gt,0,0,yt,gt),Lt};yo(()=>Zs(n()),()=>{n()&&te(_,n()<=p)}),Va(),Fs();var S=Ku(),z=To(S);{var T=P=>{var R=Vu();qi(P,R)};hs(z,P=>{n()||P(T)})}var H=Ai(z,2);{var $=P=>{var R=ju();qi(P,R)};hs(H,P=>{Ct(E)&&P($)})}var B=Ai(H,2);{var Q=P=>{var R=Yu();qi(P,R)};hs(B,P=>{n()&&!Ct(_)&&!Ct(E)&&P(Q)})}var X=Ai(B,2),x=Ai(X,2),w=Ai(x,2);ja(()=>{X.disabled=!Ct(_)||Ct(E),x.disabled=!Ct(_)||Ct(E)||!i(),w.disabled=!Ct(_)||Ct(E)}),bo("click",X,M),bo("click",x,k),bo("click",w,D),qi(a,S),Wo()}var $u=Ji("<div><h1>Vantage Scene Setup</h1> <p>Export the relevant data to setup Vantage.</p> <!> <!> <!></div>");function Ju(a){sl();let u=mn(null),o=mn(),f=mn([]);const i=y=>{te(o,y.detail.layer)},n=y=>{const M=y.detail.layer;te(u,L.GeometryUtil.geodesicArea(M._latlngs[0])),te(f,M._latlngs[0])},s=y=>{te(u,y.detail.area),te(f,y.detail.latlngs),Yh(Io,Ct(f))};var h=$u(),p=Ai(To(h),4);iu(p,{get selectedLayer(){return Ct(o)},set selectedLayer(y){te(o,y)},$$events:{change:i},$$legacy:!0});var _=Ai(p,2);lu(_,{get selectedLayer(){return Ct(o)},$$events:{shapeDrawn:n,shapeEdited:s}});var E=Ai(_,2);Xu(E,{get area(){return Ct(u)},get latlngs(){return Ct(f)},get selectedLayer(){return Ct(o)}}),qi(a,h)}zh(Ju,{target:document.getElementById("app")});
